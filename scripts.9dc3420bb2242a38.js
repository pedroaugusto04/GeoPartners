(function(X,he){"object"==typeof exports&&typeof module<"u"?he(exports):"function"==typeof define&&define.amd?define(["exports"],he):he((X=typeof globalThis<"u"?globalThis:X||self).leaflet={})})(this,function(X){"use strict";function he(s){for(var c,y,E=1,T=arguments.length;E<T;E++)for(c in y=arguments[E])s[c]=y[c];return s}var wi=Object.create||function(s){return Y.prototype=s,new Y};function Y(){}function h(s,c){var y,E=Array.prototype.slice;return s.bind?s.bind.apply(s,E.call(arguments,1)):(y=E.call(arguments,2),function(){return s.apply(c,y.length?y.concat(E.call(arguments)):arguments)})}var d=0;function x(s){return"_leaflet_id"in s||(s._leaflet_id=++d),s._leaflet_id}function I(s,c,y){var E,T,V=function(){E=!1,T&&(ut.apply(y,T),T=!1)},ut=function(){E?T=arguments:(s.apply(y,arguments),setTimeout(V,c),E=!0)};return ut}function U(s,T,y){var E=T[1],V=E-(T=T[0]);return s===E&&y?s:((s-T)%V+V)%V+T}function N(){return!1}function H(s,c){return!1===c?s:(c=Math.pow(10,void 0===c?6:c),Math.round(s*c)/c)}function tt(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function bt(s){return tt(s).split(/\s+/)}function Et(s,c){for(var y in Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?wi(s.options):{}),c)s.options[y]=c[y];return s.options}function Ct(s,c,y){var E,T=[];for(E in s)T.push(encodeURIComponent(y?E.toUpperCase():E)+"="+encodeURIComponent(s[E]));return(c&&-1!==c.indexOf("?")?"&":"?")+T.join("&")}var dt=/\{ *([\w_ -]+) *\}/g;function St(s,c){return s.replace(dt,function(y,E){if(void 0===(E=c[E]))throw new Error("No value provided for variable "+y);return"function"==typeof E?E(c):E})}var ht=Array.isArray||function(s){return"[object Array]"===Object.prototype.toString.call(s)};function _t(s,c){for(var y=0;y<s.length;y++)if(s[y]===c)return y;return-1}var xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var st=0;function mt(s){var c=+new Date,y=Math.max(0,16-(c-st));return st=c+y,window.setTimeout(s,y)}var zt=window.requestAnimationFrame||K("RequestAnimationFrame")||mt,Ut=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function Gt(s,c,y){if(!y||zt!==mt)return zt.call(window,h(s,c));s.call(c)}function Yt(s){s&&Ut.call(window,s)}var Qt={__proto__:null,extend:he,create:wi,bind:h,get lastId(){return d},stamp:x,throttle:I,wrapNum:U,falseFn:N,formatNum:H,trim:tt,splitWords:bt,setOptions:Et,getParamString:Ct,template:St,isArray:ht,indexOf:_t,emptyImageUrl:xt,requestFn:zt,cancelFn:Ut,requestAnimFrame:Gt,cancelAnimFrame:Yt};function Ft(){}Ft.extend=function(s){function c(){Et(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var y,E=c.__super__=this.prototype,T=wi(E);for(y in(T.constructor=c).prototype=T,this)Object.prototype.hasOwnProperty.call(this,y)&&"prototype"!==y&&"__super__"!==y&&(c[y]=this[y]);if(s.statics&&he(c,s.statics),s.includes){var V=s.includes;if(typeof L<"u"&&L&&L.Mixin){V=ht(V)?V:[V];for(var ut=0;ut<V.length;ut++)V[ut]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}he.apply(null,[T].concat(s.includes))}return he(T,s),delete T.statics,delete T.includes,T.options&&(T.options=E.options?wi(E.options):{},he(T.options,s.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var ot=0,Bt=T._initHooks.length;ot<Bt;ot++)T._initHooks[ot].call(this)}},c},Ft.include=function(s){var c=this.prototype.options;return he(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},Ft.mergeOptions=function(s){return he(this.prototype.options,s),this},Ft.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),y="function"==typeof s?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};var te={on:function(s,c,y){if("object"==typeof s)for(var E in s)this._on(E,s[E],c);else for(var T=0,V=(s=bt(s)).length;T<V;T++)this._on(s[T],c,y);return this},off:function(s,c,y){if(arguments.length)if("object"==typeof s)for(var E in s)this._off(E,s[E],c);else{s=bt(s);for(var T=1===arguments.length,V=0,ut=s.length;V<ut;V++)T?this._off(s[V]):this._off(s[V],c,y)}else delete this._events;return this},_on:function(s,c,y,E){"function"!=typeof c?console.warn("wrong listener type: "+typeof c):!1===this._listens(s,c,y)&&(c={fn:c,ctx:y=y===this?void 0:y},E&&(c.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(c))},_off:function(s,c,y){var E,T,V;if(this._events&&(E=this._events[s]))if(1===arguments.length){if(this._firingCount)for(T=0,V=E.length;T<V;T++)E[T].fn=N;delete this._events[s]}else"function"!=typeof c?console.warn("wrong listener type: "+typeof c):!1!==(c=this._listens(s,c,y))&&(y=E[c],this._firingCount&&(y.fn=N,this._events[s]=E=E.slice()),E.splice(c,1))},fire:function(s,c,y){if(this.listens(s,y)){var E=he({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var T=this._events[s];if(T){this._firingCount=this._firingCount+1||1;for(var V=0,ut=T.length;V<ut;V++){var ot=T[V],Bt=ot.fn;ot.once&&this.off(s,Bt,ot.ctx),Bt.call(ot.ctx||this,E)}this._firingCount--}}y&&this._propagateEvent(E)}return this},listens:function(s,c,y,E){"string"!=typeof s&&console.warn('"string" type argument expected');var T=c,V=("function"!=typeof c&&(E=!!c,y=T=void 0),this._events&&this._events[s]);if(V&&V.length&&!1!==this._listens(s,T,y))return!0;if(E)for(var ut in this._eventParents)if(this._eventParents[ut].listens(s,c,y,E))return!0;return!1},_listens:function(s,c,y){if(this._events){var E=this._events[s]||[];if(!c)return!!E.length;y===this&&(y=void 0);for(var T=0,V=E.length;T<V;T++)if(E[T].fn===c&&E[T].ctx===y)return T}return!1},once:function(s,c,y){if("object"==typeof s)for(var E in s)this._on(E,s[E],c,!0);else for(var T=0,V=(s=bt(s)).length;T<V;T++)this._on(s[T],c,y,!0);return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[x(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[x(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,he({layer:s.target,propagatedFrom:s.target},s),!0)}},je=(te.addEventListener=te.on,te.removeEventListener=te.clearAllEventListeners=te.off,te.addOneTimeEventListener=te.once,te.fireEvent=te.fire,te.hasEventListeners=te.listens,Ft.extend(te));function jt(s,c,y){this.x=y?Math.round(s):s,this.y=y?Math.round(c):c}var ce=Math.trunc||function(s){return 0<s?Math.floor(s):Math.ceil(s)};function ie(s,c,y){return s instanceof jt?s:ht(s)?new jt(s[0],s[1]):null==s?s:"object"==typeof s&&"x"in s&&"y"in s?new jt(s.x,s.y):new jt(s,c,y)}function me(s,c){if(s)for(var y=c?[s,c]:s,E=0,T=y.length;E<T;E++)this.extend(y[E])}function He(s,c){return!s||s instanceof me?s:new me(s,c)}function se(s,c){if(s)for(var y=c?[s,c]:s,E=0,T=y.length;E<T;E++)this.extend(y[E])}function fe(s,c){return s instanceof se?s:new se(s,c)}function de(s,c,y){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,void 0!==y&&(this.alt=+y)}function we(s,c,y){return s instanceof de?s:ht(s)&&"object"!=typeof s[0]?3===s.length?new de(s[0],s[1],s[2]):2===s.length?new de(s[0],s[1]):null:null==s?s:"object"==typeof s&&"lat"in s?new de(s.lat,"lng"in s?s.lng:s.lon,s.alt):void 0===c?null:new de(s,c,y)}jt.prototype={clone:function(){return new jt(this.x,this.y)},add:function(s){return this.clone()._add(ie(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ie(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new jt(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new jt(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(y){var c=(y=ie(y)).x-this.x;return y=y.y-this.y,Math.sqrt(c*c+y*y)},equals:function(s){return(s=ie(s)).x===this.x&&s.y===this.y},contains:function(s){return s=ie(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+H(this.x)+", "+H(this.y)+")"}},me.prototype={extend:function(s){var c,y;if(s){if(s instanceof jt||"number"==typeof s[0]||"x"in s)c=y=ie(s);else if(c=(s=He(s)).min,y=s.max,!c||!y)return this;this.min||this.max?(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)):(this.min=c.clone(),this.max=y.clone())}return this},getCenter:function(s){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,y;return(s=("number"==typeof s[0]||s instanceof jt?ie:He)(s))instanceof me?(c=s.min,y=s.max):c=y=s,c.x>=this.min.x&&y.x<=this.max.x&&c.y>=this.min.y&&y.y<=this.max.y},intersects:function(V){V=He(V);var c=this.min,y=this.max,E=V.min,T=(V=V.max).x>=c.x&&E.x<=y.x;return V=V.y>=c.y&&E.y<=y.y,T&&V},overlaps:function(V){V=He(V);var c=this.min,y=this.max,E=V.min,T=(V=V.max).x>c.x&&E.x<y.x;return V=V.y>c.y&&E.y<y.y,T&&V},isValid:function(){return!(!this.min||!this.max)},pad:function(T){var c=this.min,y=this.max,E=Math.abs(c.x-y.x)*T;return T=Math.abs(c.y-y.y)*T,He(ie(c.x-E,c.y-T),ie(y.x+E,y.y+T))},equals:function(s){return!!s&&(s=He(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight()))}},se.prototype={extend:function(s){var c,y,E=this._southWest,T=this._northEast;if(s instanceof de)y=c=s;else{if(!(s instanceof se))return s?this.extend(we(s)||fe(s)):this;if(y=s._northEast,!(c=s._southWest)||!y)return this}return E||T?(E.lat=Math.min(c.lat,E.lat),E.lng=Math.min(c.lng,E.lng),T.lat=Math.max(y.lat,T.lat),T.lng=Math.max(y.lng,T.lng)):(this._southWest=new de(c.lat,c.lng),this._northEast=new de(y.lat,y.lng)),this},pad:function(T){var c=this._southWest,y=this._northEast,E=Math.abs(c.lat-y.lat)*T;return T=Math.abs(c.lng-y.lng)*T,new se(new de(c.lat-E,c.lng-T),new de(y.lat+E,y.lng+T))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){s=("number"==typeof s[0]||s instanceof de||"lat"in s?we:fe)(s);var c,y,E=this._southWest,T=this._northEast;return s instanceof se?(c=s.getSouthWest(),y=s.getNorthEast()):c=y=s,c.lat>=E.lat&&y.lat<=T.lat&&c.lng>=E.lng&&y.lng<=T.lng},intersects:function(V){V=fe(V);var c=this._southWest,y=this._northEast,E=V.getSouthWest(),T=(V=V.getNorthEast()).lat>=c.lat&&E.lat<=y.lat;return V=V.lng>=c.lng&&E.lng<=y.lng,T&&V},overlaps:function(V){V=fe(V);var c=this._southWest,y=this._northEast,E=V.getSouthWest(),T=(V=V.getNorthEast()).lat>c.lat&&E.lat<y.lat;return V=V.lng>c.lng&&E.lng<y.lng,T&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return!!s&&(s=fe(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c))},isValid:function(){return!(!this._southWest||!this._northEast)}};var Di={latLngToPoint:function(s,c){return s=this.projection.project(s),c=this.scale(c),this.transformation._transform(s,c)},pointToLatLng:function(s,c){return c=this.scale(c),s=this.transformation.untransform(s,c),this.projection.unproject(s)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){var c;return this.infinite?null:(c=this.projection.bounds,s=this.scale(s),new me(this.transformation.transform(c.min,s),this.transformation.transform(c.max,s)))},infinite:!(de.prototype={equals:function(s,c){return!!s&&(s=we(s),Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng))<=(void 0===c?1e-9:c))},toString:function(s){return"LatLng("+H(this.lat,s)+", "+H(this.lng,s)+")"},distanceTo:function(s){return Dn.distance(this,we(s))},wrap:function(){return Dn.wrapLatLng(this)},toBounds:function(c){var y=(c=180*c/40075017)/Math.cos(Math.PI/180*this.lat);return fe([this.lat-c,this.lng-y],[this.lat+c,this.lng+y])},clone:function(){return new de(this.lat,this.lng,this.alt)}}),wrapLatLng:function(s){var c=this.wrapLng?U(s.lng,this.wrapLng,!0):s.lng;return new de(this.wrapLat?U(s.lat,this.wrapLat,!0):s.lat,c,s.alt)},wrapLatLngBounds:function(s){var E=s.getCenter(),c=this.wrapLatLng(E),y=E.lat-c.lat;return E=E.lng-c.lng,0==y&&0==E?s:(c=s.getSouthWest(),s=s.getNorthEast(),new se(new de(c.lat-y,c.lng-E),new de(s.lat-y,s.lng-E)))}},Dn=he({},Di,{wrapLng:[-180,180],R:6371e3,distance:function(ut,V){var ot=Math.PI/180,y=ut.lat*ot,E=V.lat*ot,T=Math.sin((V.lat-ut.lat)*ot/2);return V=Math.sin((V.lng-ut.lng)*ot/2),ut=T*T+Math.cos(y)*Math.cos(E)*V*V,ot=2*Math.atan2(Math.sqrt(ut),Math.sqrt(1-ut)),this.R*ot}}),li={R:li=6378137,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,y=this.MAX_LATITUDE;return y=Math.max(Math.min(y,s.lat),-y),y=Math.sin(y*c),new jt(this.R*s.lng*c,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var c=180/Math.PI;return new de((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:new me([-(li*=Math.PI),-li],[li,li])};function Ki(s,c,y,E){ht(s)?(this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3]):(this._a=s,this._b=c,this._c=y,this._d=E)}function Oi(s,c,y,E){return new Ki(s,c,y,E)}Ki.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return s.x=(c=c||1)*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return new jt((s.x/(c=c||1)-this._b)/this._a,(s.y/c-this._d)/this._c)}};var Tr=he({},Dn,{code:"EPSG:3857",projection:li,transformation:Oi(Tr=.5/(Math.PI*li.R),.5,-Tr,.5)}),qr=he({},Tr,{code:"EPSG:900913"});function Hs(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function vs(s,c){for(var y,E,T,V,ut="",ot=0,Bt=s.length;ot<Bt;ot++){for(y=0,E=(T=s[ot]).length;y<E;y++)ut+=(y?"L":"M")+(V=T[y]).x+" "+V.y;ut+=c?vt.svg?"z":"x":""}return ut||"M0 0"}var Co=document.documentElement.style,so="ActiveXObject"in window,Ke=so&&!document.addEventListener,Ci="msLaunchUri"in navigator&&!("documentMode"in document),ts=Nt("webkit"),Es=Nt("android"),et=Nt("android 2")||Nt("android 3"),Q=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=(Q=Es&&Nt("Google")&&Q<537&&!("AudioNode"in window),!!window.opera),wt=!Ci&&Nt("chrome"),ze=Nt("gecko")&&!ts&&!rt&&!so,At=!wt&&Nt("safari"),Vt=Nt("phantom"),Xt="OTransition"in Co,Ze=0===navigator.platform.indexOf("Win"),oa=so&&"transition"in Co,au="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,uu=(Co="MozPerspective"in Co,!window.L_DISABLE_3D&&(oa||au||Co)&&!Xt&&!Vt),Ia=(Kr=typeof orientation<"u"||Nt("mobile"))&&ts,Ta=Kr&&au,Da=!window.PointerEvent&&window.MSPointerEvent,Ss=!(!window.PointerEvent&&!Da),ge="ontouchstart"in window||!!window.TouchEvent,Zs=!window.L_NO_TOUCH&&(ge||Ss),Ys=Kr&&rt,nt=Kr&&ze,A=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),G=function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",N,c),window.removeEventListener("testPassiveEventSupport",N,c)}catch{}return s}(),W=!!document.createElement("canvas").getContext,it=!(!document.createElementNS||!Hs("svg").createSVGRect),at=!!it&&((at=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(at.firstChild&&at.firstChild.namespaceURI));function Nt(s){return 0<=navigator.userAgent.toLowerCase().indexOf(s)}var vt={ie:so,ielt9:Ke,edge:Ci,webkit:ts,android:Es,android23:et,androidStock:Q,opera:rt,chrome:wt,gecko:ze,safari:At,phantom:Vt,opera12:Xt,win:Ze,ie3d:oa,webkit3d:au,gecko3d:Co,any3d:uu,mobile:Kr,mobileWebkit:Ia,mobileWebkit3d:Ta,msPointer:Da,pointer:Ss,touch:Zs,touchNative:ge,mobileOpera:Ys,mobileGecko:nt,retina:A,passiveEvents:G,canvas:W,svg:it,vml:!it&&function(){try{var s=document.createElement("div"),c=(s.innerHTML='<v:shape adj="1"/>',s.firstChild);return c.style.behavior="url(#default#VML)",c&&"object"==typeof c.adj}catch{return!1}}(),inlineSvg:at,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Wt=vt.msPointer?"MSPointerDown":"pointerdown",Ee=vt.msPointer?"MSPointerMove":"pointermove",Re=vt.msPointer?"MSPointerUp":"pointerup",Ue=vt.msPointer?"MSPointerCancel":"pointercancel",qe={touchstart:Wt,touchmove:Ee,touchend:Re,touchcancel:Ue},ye={touchstart:function(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&hi(c),gi(s,c)},touchmove:gi,touchend:gi,touchcancel:gi},Te={},Un=!1;function Pi(s){Te[s.pointerId]=s}function Ri(s){Te[s.pointerId]&&(Te[s.pointerId]=s)}function Ni(s){delete Te[s.pointerId]}function gi(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){for(var y in c.touches=[],Te)c.touches.push(Te[y]);c.changedTouches=[c],s(c)}}var Hi,In,lr,Qi,Ei,Hn,Vr=200,$i=Ws(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hr=Ws(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xs="webkitTransition"===Hr||"OTransition"===Hr?Hr+"End":"transitionend";function Xo(s){return"string"==typeof s?document.getElementById(s):s}function Wo(s,c){var y=s.style[c]||s.currentStyle&&s.currentStyle[c];return"auto"===(y=y&&"auto"!==y||!document.defaultView?y:(s=document.defaultView.getComputedStyle(s,null))?s[c]:null)?null:y}function Ye(s,c,y){return(s=document.createElement(s)).className=c||"",y&&y.appendChild(s),s}function Fn(s){var c=s.parentNode;c&&c.removeChild(s)}function ao(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Lr(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function hr(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Mi(s,c){return void 0!==s.classList?s.classList.contains(c):0<(s=xa(s)).length&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(s)}function Ne(s,c){var y;if(void 0!==s.classList)for(var E=bt(c),T=0,V=E.length;T<V;T++)s.classList.add(E[T]);else Mi(s,c)||Ko(s,((y=xa(s))?y+" ":"")+c)}function Zn(s,c){void 0!==s.classList?s.classList.remove(c):Ko(s,tt((" "+xa(s)+" ").replace(" "+c+" "," ")))}function Ko(s,c){void 0===s.className.baseVal?s.className=c:s.className.baseVal=c}function xa(s){return void 0===(s=s.correspondingElement?s.correspondingElement:s).className.baseVal?s.className:s.className.baseVal}function cr(s,c){if("opacity"in s.style)s.style.opacity=c;else if("filter"in s.style){var y=!1,E="DXImageTransform.Microsoft.Alpha";try{y=s.filters.item(E)}catch{if(1===c)return}c=Math.round(100*c),y?(y.Enabled=100!==c,y.Opacity=c):s.style.filter+=" progid:"+E+"(opacity="+c+")"}}function Ws(s){for(var c=document.documentElement.style,y=0;y<s.length;y++)if(s[y]in c)return s[y];return!1}function wo(s,c,y){c=c||new jt(0,0),s.style[$i]=(vt.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(y?" scale("+y+")":"")}function ii(s,c){s._leaflet_pos=c,vt.any3d?wo(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Zr(s){return s._leaflet_pos||new jt(0,0)}function Ks(){Se(window,"dragstart",hi)}function Js(){Bn(window,"dragstart",hi)}function Jo(s){for(;-1===s.tabIndex;)s=s.parentNode;s.style&&(Qo(),Hn=(Ei=s).style.outlineStyle,s.style.outlineStyle="none",Se(window,"keydown",Qo))}function Qo(){Ei&&(Ei.style.outlineStyle=Hn,Hn=Ei=void 0,Bn(window,"keydown",Qo))}function Ja(s){for(;!((s=s.parentNode).offsetWidth&&s.offsetHeight||s===document.body););return s}function Ls(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}function Se(s,c,y,E){if(c&&"object"==typeof c)for(var T in c)$a(s,T,c[T],y);else for(var V=0,ut=(c=bt(c)).length;V<ut;V++)$a(s,c[V],y,E);return this}Qi="onselectstart"in document?(lr=function(){Se(window,"selectstart",hi)},function(){Bn(window,"selectstart",hi)}):(In=Ws(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),lr=function(){var s;In&&(s=document.documentElement.style,Hi=s[In],s[In]="none")},function(){In&&(document.documentElement.style[In]=Hi,Hi=void 0)}),so={__proto__:null,TRANSFORM:$i,TRANSITION:Hr,TRANSITION_END:Xs,get:Xo,getStyle:Wo,create:Ye,remove:Fn,empty:ao,toFront:Lr,toBack:hr,hasClass:Mi,addClass:Ne,removeClass:Zn,setClass:Ko,getClass:xa,setOpacity:cr,testProp:Ws,setTransform:wo,setPosition:ii,getPosition:Zr,get disableTextSelection(){return lr},get enableTextSelection(){return Qi},disableImageDrag:Ks,enableImageDrag:Js,preventOutline:Jo,restoreOutline:Qo,getSizedParentNode:Ja,getScale:Ls};var Yr="_leaflet_events";function Bn(s,c,y,E){if(1===arguments.length)wa(s),delete s[Yr];else if(c&&"object"==typeof c)for(var T in c)Qs(s,T,c[T],y);else if(c=bt(c),2===arguments.length)wa(s,function(ot){return-1!==_t(c,ot)});else for(var V=0,ut=c.length;V<ut;V++)Qs(s,c[V],y,E);return this}function wa(s,c){for(var y in s[Yr]){var E=y.split(/\d/)[0];c&&!c(E)||Qs(s,E,null,null,y)}}var Qa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $a(s,c,y,E){var T,V,ut=c+x(y)+(E?"_"+x(E):"");s[Yr]&&s[Yr][ut]||(V=T=function(ot){return y.call(E||s,ot||window.event)},!vt.touchNative&&vt.pointer&&0===c.indexOf("touch")?T=function Jn(s,c,y){return"touchstart"!==c||Un||(document.addEventListener(Wt,Pi,!0),document.addEventListener(Ee,Ri,!0),document.addEventListener(Re,Ni,!0),document.addEventListener(Ue,Ni,!0),Un=!0),ye[c]?(y=ye[c].bind(this,y),s.addEventListener(qe[c],y,!1),y):(console.warn("wrong event specified:",c),N)}(s,c,T):vt.touch&&"dblclick"===c?T=function Ji(s,c){s.addEventListener("dblclick",c);var y,E=0;function T(V){var ut;1!==V.detail?y=V.detail:"mouse"===V.pointerType||V.sourceCapabilities&&!V.sourceCapabilities.firesTouchEvents||(ut=bs(V)).some(function(ot){return ot instanceof HTMLLabelElement&&ot.attributes.for})&&!ut.some(function(ot){return ot instanceof HTMLInputElement||ot instanceof HTMLSelectElement})||((ut=Date.now())-E<=Vr?2==++y&&c(function(ot){var Bt,Kt,le={};for(Kt in ot)le[Kt]=(Bt=ot[Kt])&&Bt.bind?Bt.bind(ot):Bt;return(ot=le).type="dblclick",le.detail=2,le.isTrusted=!1,le._simulated=!0,le}(V)):y=1,E=ut)}return s.addEventListener("click",T),{dblclick:c,simDblclick:T}}(s,T):"addEventListener"in s?"touchstart"===c||"touchmove"===c||"wheel"===c||"mousewheel"===c?s.addEventListener(Qa[c]||c,T,!!vt.passiveEvents&&{passive:!1}):"mouseenter"===c||"mouseleave"===c?s.addEventListener(Qa[c],T=function(ot){ot=ot||window.event,xs(s,ot)&&V(ot)},!1):s.addEventListener(c,V,!1):s.attachEvent("on"+c,T),s[Yr]=s[Yr]||{},s[Yr][ut]=T)}function Qs(s,c,ot,E,T){var V,ut;T=T||c+x(ot)+(E?"_"+x(E):""),(ot=s[Yr]&&s[Yr][T])&&(!vt.touchNative&&vt.pointer&&0===c.indexOf("touch")?(E=s,ut=ot,qe[V=c]?E.removeEventListener(qe[V],ut,!1):console.warn("wrong event specified:",V)):vt.touch&&"dblclick"===c?((ut=s).removeEventListener("dblclick",(E=ot).dblclick),ut.removeEventListener("click",E.simDblclick)):"removeEventListener"in s?s.removeEventListener(Qa[c]||c,ot,!1):s.detachEvent("on"+c,ot),s[Yr][T]=null)}function Dr(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Eo(s){return $a(s,"wheel",Dr),this}function $o(s){return Se(s,"mousedown touchstart dblclick contextmenu",Dr),s._leaflet_disable_click=!0,this}function hi(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function Xr(s){return hi(s),Dr(s),this}function bs(s){if(s.composedPath)return s.composedPath();for(var c=[],y=s.target;y;)c.push(y),y=y.parentNode;return c}function tu(s,c){var y,E;return c?(E=(y=Ls(c)).boundingClientRect,new jt((s.clientX-E.left)/y.x-c.clientLeft,(s.clientY-E.top)/y.y-c.clientTop)):new jt(s.clientX,s.clientY)}var On=vt.linux&&vt.chrome?window.devicePixelRatio:vt.mac?3*window.devicePixelRatio:0<window.devicePixelRatio?2*window.devicePixelRatio:1;function eu(s){return vt.edge?s.wheelDeltaY/2:s.deltaY&&0===s.deltaMode?-s.deltaY/On:s.deltaY&&1===s.deltaMode?20*-s.deltaY:s.deltaY&&2===s.deltaMode?60*-s.deltaY:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?20*-s.detail:s.detail?s.detail/-32765*60:0}function xs(s,c){var y=c.relatedTarget;if(!y)return!0;try{for(;y&&y!==s;)y=y.parentNode}catch{return!1}return y!==s}Ke={__proto__:null,on:Se,off:Bn,stopPropagation:Dr,disableScrollPropagation:Eo,disableClickPropagation:$o,preventDefault:hi,stop:Xr,getPropagationPath:bs,getMousePosition:tu,getWheelDelta:eu,isExternalTarget:xs,addListener:Se,removeListener:Bn};var $s=je.extend({run:function(s,c,y,E){this.stop(),this._el=s,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Zr(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Gt(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,y=1e3*this._duration;c<y?this._runFrame(this._easeOut(c/y),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){s=this._startPos.add(this._offset.multiplyBy(s)),c&&s._round(),ii(this._el,s),this.fire("step")},_complete:function(){Yt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Je=je.extend({options:{crs:Tr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=Et(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),void 0!==c.zoom&&(this._zoom=this._limitZoom(c.zoom)),c.center&&void 0!==c.zoom&&this.setView(we(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hr&&vt.any3d&&!vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Xs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,y){return c=void 0===c?this._zoom:this._limitZoom(c),s=this._limitCenter(we(s),c,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&!0!==y&&(void 0!==y.animate&&(y.zoom=he({animate:y.animate},y.zoom),y.pan=he({animate:y.animate,duration:y.duration},y.pan)),this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,y.zoom):this._tryAnimatedPan(s,y.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(s,c,y.pan&&y.pan.noMoveStart),this)},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return this.setZoom(this._zoom+(s=s||(vt.any3d?this.options.zoomDelta:1)),c)},zoomOut:function(s,c){return this.setZoom(this._zoom-(s=s||(vt.any3d?this.options.zoomDelta:1)),c)},setZoomAround:function(T,c,y){var V=this.getZoomScale(c),E=this.getSize().divideBy(2);return T=(T instanceof jt?T:this.latLngToContainerPoint(T)).subtract(E).multiplyBy(1-1/V),V=this.containerPointToLatLng(E.add(T)),this.setView(V,c,{zoom:y})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():fe(s);var y=ie(c.paddingTopLeft||c.padding||[0,0]),E=ie(c.paddingBottomRight||c.padding||[0,0]),T=this.getBoundsZoom(s,!1,y.add(E));return(T="number"==typeof c.maxZoom?Math.min(c.maxZoom,T):T)===1/0?{center:s.getCenter(),zoom:T}:(c=E.subtract(y).divideBy(2),E=this.project(s.getSouthWest(),T),y=this.project(s.getNorthEast(),T),{center:this.unproject(E.add(y).divideBy(2).add(c),T),zoom:T})},fitBounds:function(s,c){if((s=fe(s)).isValid())return s=this._getBoundsCenterZoom(s,c),this.setView(s.center,s.zoom,c);throw new Error("Bounds are not valid.")},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){var y;return c=c||{},(s=ie(s).round()).x||s.y?(!0===c.animate||this.getSize().contains(s)?(this._panAnim||(this._panAnim=new $s,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),!1!==c.animate?(Ne(this._mapPane,"leaflet-pan-anim"),y=this._getMapPanePos().subtract(s).round(),this._panAnim.run(this._mapPane,y,c.duration||.25,c.easeLinearity)):(this._rawPanBy(s),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this):this.fire("moveend")},flyTo:function(s,c,y){if(!1===(y=y||{}).animate||!vt.any3d)return this.setView(s,c,y);this._stop();var E=this.project(this.getCenter()),T=this.project(s),V=this.getSize(),ut=this._zoom,ot=(s=we(s),c=void 0===c?ut:c,Math.max(V.x,V.y)),Bt=ot*this.getZoomScale(ut,c),Kt=T.distanceTo(E)||1,le=1.42,Fe=le*le;function Ge(mi){return mi=(Bt*Bt-ot*ot+(mi?-1:1)*Fe*Fe*Kt*Kt)/(2*(mi?Bt:ot)*Fe*Kt),(mi=Math.sqrt(mi*mi+1)-mi)<1e-9?-18:Math.log(mi)}function ti(mi){return(Math.exp(mi)-Math.exp(-mi))/2}function Or(mi){return(Math.exp(mi)+Math.exp(-mi))/2}var fr=Ge(0),nc=Date.now(),hh=(Ge(1)-fr)/le,ic=y.duration?1e3*y.duration:1e3*hh*.8;return this._moveStart(!0,y.noMoveStart),function mi(){var Iu=(Date.now()-nc)/ic,ch=(1-Math.pow(1-Iu,1.5))*hh;Iu<=1?(this._flyToFrame=Gt(mi,this),this._move(this.unproject(E.add(T.subtract(E).multiplyBy(function Rr(mi){return ot*(Or(fr)*(ti(mi=fr+le*mi)/Or(mi))-ti(fr))/Fe}(ch)/Kt)),ut),this.getScaleZoom(ot/(Iu=ch,ot*(Or(fr)/Or(fr+le*Iu))),ut),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}.call(this),this},flyToBounds:function(s,c){return s=this._getBoundsCenterZoom(s,c),this.flyTo(s.center,s.zoom,c)},setMaxBounds:function(s){return s=fe(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(E,c){this._enforcingBounds=!0;var y=this.getCenter();return E=this._limitCenter(y,this._zoom,fe(E)),y.equals(E)||this.panTo(E,c),this._enforcingBounds=!1,this},panInside:function(T,c){var V=ie((c=c||{}).paddingTopLeft||c.padding||[0,0]),y=ie(c.paddingBottomRight||c.padding||[0,0]),E=this.project(this.getCenter()),ut=(T=this.project(T),(V=He([(ut=this.getPixelBounds()).min.add(V),ut.max.subtract(y)])).getSize());return V.contains(T)||(this._enforcingBounds=!0,y=T.subtract(V.getCenter()),V=V.extend(T).getSize().subtract(ut),E.x+=y.x<0?-V.x:V.x,E.y+=y.y<0?-V.y:V.y,this.panTo(this.unproject(E),c),this._enforcingBounds=!1),this},invalidateSize:function(s){if(!this._loaded)return this;s=he({animate:!1,pan:!0},!0===s?{animate:!0}:s);var c=this.getSize(),y=(this._sizeChanged=!0,this._lastCenter=null,this.getSize()),T=c.divideBy(2).round(),E=y.divideBy(2).round();return(T=T.subtract(E)).x||T.y?(s.animate&&s.pan?this.panBy(T):(s.pan&&this._rawPanBy(T),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:y})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){var c,y;return s=this._locateOptions=he({timeout:1e4,watch:!1},s),"geolocation"in navigator?(c=h(this._handleGeolocationResponse,this),y=h(this._handleGeolocationError,this),s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,y,s):navigator.geolocation.getCurrentPosition(c,y,s)):this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){var c;this._container._leaflet_id&&(c=s.code,s=s.message||(1===c?"permission denied":2===c?"position unavailable":"timeout"),this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+s+"."}))},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c,y,E=new de(s.coords.latitude,s.coords.longitude),T=E.toBounds(2*s.coords.accuracy),V=this._locateOptions,ut=(V.setView&&(c=this.getBoundsZoom(T),this.setView(E,V.maxZoom?Math.min(c,V.maxZoom):c)),{latlng:E,bounds:T,timestamp:s.timestamp});for(y in s.coords)"number"==typeof s.coords[y]&&(ut[y]=s.coords[y]);this.fire("locationfound",ut)}},addHandler:function(s,c){return c&&(c=this[s]=new c(this),this._handlers.push(c),this.options[s]&&c.enable()),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}for(var s in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),Fn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Yt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[s].remove();for(s in this._panes)Fn(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){return c=Ye("div","leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),c||this._mapPane),s&&(this._panes[s]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds();return new se(this.unproject(s.getBottomLeft()),this.unproject(s.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(Bt,c,ot){Bt=fe(Bt),ot=ie(ot||[0,0]);var Kt=this.getZoom()||0,E=this.getMinZoom(),T=this.getMaxZoom(),V=Bt.getNorthWest(),ut=(Bt=Bt.getSouthEast(),ot=this.getSize().subtract(ot),Bt=He(this.project(Bt,Kt),this.project(V,Kt)).getSize(),V=vt.any3d?this.options.zoomSnap:1,ot.x/Bt.x);return ot=ot.y/Bt.y,Bt=c?Math.max(ut,ot):Math.min(ut,ot),Kt=this.getScaleZoom(Bt,Kt),V&&(Kt=Math.round(Kt/(V/100))*(V/100),Kt=c?Math.ceil(Kt/V)*V:Math.floor(Kt/V)*V),Math.max(E,Math.min(T,Kt))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new jt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){return new me(s=this._getTopLeftPoint(s,c),s.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(void 0===s?this.getZoom():s)},getPane:function(s){return"string"==typeof s?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var y=this.options.crs;return c=void 0===c?this._zoom:c,y.scale(s)/y.scale(c)},getScaleZoom:function(E,c){var y=this.options.crs;return E=y.zoom(E*y.scale(c=void 0===c?this._zoom:c)),isNaN(E)?1/0:E},project:function(s,c){return c=void 0===c?this._zoom:c,this.options.crs.latLngToPoint(we(s),c)},unproject:function(s,c){return c=void 0===c?this._zoom:c,this.options.crs.pointToLatLng(ie(s),c)},layerPointToLatLng:function(s){return s=ie(s).add(this.getPixelOrigin()),this.unproject(s)},latLngToLayerPoint:function(s){return this.project(we(s))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(we(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(fe(s))},distance:function(s,c){return this.options.crs.distance(we(s),we(c))},containerPointToLayerPoint:function(s){return ie(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ie(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){return s=this.containerPointToLayerPoint(ie(s)),this.layerPointToLatLng(s)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(s)))},mouseEventToContainerPoint:function(s){return tu(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){if(!(s=this._container=Xo(s)))throw new Error("Map container not found.");if(s._leaflet_id)throw new Error("Map container is already initialized.");Se(s,"scroll",this._onScroll,this),this._containerId=x(s)},_initLayout:function(){var s=this._container,c=(this._fadeAnimated=this.options.fadeAnimation&&vt.any3d,Ne(s,"leaflet-container"+(vt.touch?" leaflet-touch":"")+(vt.retina?" leaflet-retina":"")+(vt.ielt9?" leaflet-oldie":"")+(vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":"")),Wo(s,"position"));"absolute"!==c&&"relative"!==c&&"fixed"!==c&&"sticky"!==c&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ii(this._mapPane,new jt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ne(s.markerPane,"leaflet-zoom-hide"),Ne(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,y){ii(this._mapPane,new jt(0,0));var E=!this._loaded,T=(this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset"),this._zoom!==c);this._moveStart(T,y)._move(s,c)._moveEnd(T),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,y,E){void 0===c&&(c=this._zoom);var T=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),E?y&&y.pinch&&this.fire("zoom",y):((T||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Yt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){ii(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={};var c=s?Bn:Se;c((this._targets[x(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),vt.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Yt(this._resizeRequest),this._resizeRequest=Gt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var y,E=[],T="mouseout"===c||"mouseover"===c,V=s.target||s.srcElement,ut=!1;V;){if((y=this._targets[x(V)])&&("click"===c||"preclick"===c)&&this._draggableMoved(y)){ut=!0;break}if(y&&y.listens(c,!0)&&(T&&!xs(V,s)||(E.push(y),T))||V===this._container)break;V=V.parentNode}return E.length||ut||T||!this.listens(c,!0)?E:[this]},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c,y=s.target||s.srcElement;!this._loaded||y._leaflet_disable_events||"click"===s.type&&this._isClickDisabled(y)||("mousedown"===(c=s.type)&&Jo(y),this._fireDOMEvent(s,c))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,y){"click"===s.type&&((ot=he({},s)).type="preclick",this._fireDOMEvent(ot,ot.type,y));var E=this._findEventTargets(s,c);if(y){for(var T=[],V=0;V<y.length;V++)y[V].listens(c,!0)&&T.push(y[V]);E=T.concat(E)}if(E.length){"contextmenu"===c&&hi(s);var ut,ot=E[0],Bt={originalEvent:s};for("keypress"!==s.type&&"keydown"!==s.type&&"keyup"!==s.type&&(Bt.containerPoint=(ut=ot.getLatLng&&(!ot._radius||ot._radius<=10))?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(s),Bt.layerPoint=this.containerPointToLayerPoint(Bt.containerPoint),Bt.latlng=ut?ot.getLatLng():this.layerPointToLatLng(Bt.layerPoint)),V=0;V<E.length;V++)if(E[V].fire(c,Bt,!0),Bt.originalEvent._stopped||!1===E[V].options.bubblingMouseEvents&&-1!==_t(this._mouseEvents,c))return}},_draggableMoved:function(s){return(s=s.dragging&&s.dragging.enabled()?s:this).dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Zr(this._mapPane)||new jt(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){return(s&&void 0!==c?this._getNewPixelOrigin(s,c):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var y=this.getSize()._divideBy(2);return this.project(s,c)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,y){return y=this._getNewPixelOrigin(y,c),this.project(s,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(s,c,y){return y=this._getNewPixelOrigin(y,c),He([this.project(s.getSouthWest(),c)._subtract(y),this.project(s.getNorthWest(),c)._subtract(y),this.project(s.getSouthEast(),c)._subtract(y),this.project(s.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,y){var E,T;return!y||(E=this.project(s,c),T=this.getSize().divideBy(2),T=new me(E.subtract(T),E.add(T)),T=this._getBoundsOffset(T,y,c),Math.abs(T.x)<=1&&Math.abs(T.y)<=1)?s:this.unproject(E.add(T),c)},_limitOffset:function(s,c){var y;return c?(y=new me((y=this.getPixelBounds()).min.add(s),y.max.add(s)),s.add(this._getBoundsOffset(y,c))):s},_getBoundsOffset:function(s,c,y){return y=(c=He(this.project(c.getNorthEast(),y),this.project(c.getSouthWest(),y))).min.subtract(s.min),c=c.max.subtract(s.max),new jt(this._rebound(y.x,-c.x),this._rebound(y.y,-c.y))},_rebound:function(s,c){return 0<s+c?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),y=this.getMaxZoom(),E=vt.any3d?this.options.zoomSnap:1;return E&&(s=Math.round(s/E)*E),Math.max(c,Math.min(y,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Zn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){return s=this._getCenterOffset(s)._trunc(),!(!0!==(c&&c.animate)&&!this.getSize().contains(s)||(this.panBy(s,c),0))},_createAnimProxy:function(){var s=this._proxy=Ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var y=$i,E=this._proxy.style[y];wo(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),E===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Fn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();wo(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&0<=s.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,y){if(!this._animatingZoom){if(y=y||{},!this._zoomAnimated||!1===y.animate||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(c);if(E=this._getCenterOffset(s)._divideBy(1-1/E),!0!==y.animate&&!this.getSize().contains(E))return!1;Gt(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(s,c,!0)},this)}return!0},_animateZoom:function(s,c,y,E){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,Ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Zn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ws(s){return new Ai(s)}var es,Ai=Ft.extend({options:{position:"topright"},initialize:function(s){Et(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(E){this.remove(),this._map=E;var c=this._container=this.onAdd(E),y=this.getPosition();return E=E._controlCorners[y],Ne(c,"leaflet-control"),-1!==y.indexOf("bottom")?E.insertBefore(c,E.firstChild):E.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(Fn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(s){this._map&&s&&0<s.screenX&&0<s.screenY&&this._map.getContainer().focus()}}),Qn=(Je.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",y=this._controlContainer=Ye("div",c+"control-container",this._container);function E(T,V){s[T+V]=Ye("div",c+T+" "+c+V,y)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Fn(this._controlCorners[s]);Fn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}}),Ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,y,E){return y<E?-1:E<y?1:0}},initialize:function(s,c,y){for(var E in Et(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,s)this._addLayer(s[E],E);for(E in c)this._addLayer(c[E],E,!0)},onAdd:function(s){this._initLayout(),this._update(),(this._map=s).on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Ai.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){return s.off("add remove",this._onLayerChange,this),(s=this._getLayer(x(s)))&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){Ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Zn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Zn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=Ye("div",s),y=this.options.collapsed,E=(c.setAttribute("aria-haspopup",!0),$o(c),Eo(c),this._section=Ye("section",s+"-list")),T=(y&&(this._map.on("click",this.collapse,this),Se(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this)),this._layersLink=Ye("a",s+"-toggle",c));T.href="#",T.title="Layers",T.setAttribute("role","button"),Se(T,{keydown:function(V){13===V.keyCode&&this._expandSafely()},click:function(V){hi(V),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=Ye("div",s+"-base",E),this._separator=Ye("div",s+"-separator",E),this._overlaysList=Ye("div",s+"-overlays",E),c.appendChild(E)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&x(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,y){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:y}),this.options.sortLayers&&this._layers.sort(h(function(E,T){return this.options.sortFunction(E.layer,T.layer,E.name,T.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(this._container){ao(this._baseLayersList),ao(this._overlaysList),this._layerControlInputs=[];for(var s,c,y,E=0,T=0;T<this._layers.length;T++)this._addItem(y=this._layers[T]),c=c||y.overlay,s=s||!y.overlay,E+=y.overlay?0:1;this.options.hideSingleBase&&(this._baseLayersList.style.display=(s=s&&1<E)?"":"none"),this._separator.style.display=c&&s?"":"none"}return this},_onLayerChange:function(y){this._handlingClick||this._update();var c=this._getLayer(x(y.target));(y=c.overlay?"add"===y.type?"overlayadd":"overlayremove":"add"===y.type?"baselayerchange":null)&&this._map.fire(y,c)},_createRadioElement:function(s,c){return s='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",(c=document.createElement("div")).innerHTML=s,c.firstChild},_addItem:function(s){var c,y=document.createElement("label"),E=this._map.hasLayer(s.layer),T=((s.overlay?((c=document.createElement("input")).type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=E):c=this._createRadioElement("leaflet-base-layers_"+x(this),E),this._layerControlInputs.push(c),c.layerId=x(s.layer),Se(c,"click",this._onInputClick,this),E=document.createElement("span")).innerHTML=" "+s.name,document.createElement("span"));return y.appendChild(T),T.appendChild(c),T.appendChild(E),(s.overlay?this._overlaysList:this._baseLayersList).appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var s,c,y=this._layerControlInputs,E=[],T=[];this._handlingClick=!0;for(var V=y.length-1;0<=V;V--)c=this._getLayer((s=y[V]).layerId).layer,s.checked?E.push(c):s.checked||T.push(c);for(V=0;V<T.length;V++)this._map.hasLayer(T[V])&&this._map.removeLayer(T[V]);for(V=0;V<E.length;V++)this._map.hasLayer(E[V])||this._map.addLayer(E[V]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s,c,y=this._layerControlInputs,E=this._map.getZoom(),T=y.length-1;0<=T;T--)c=this._getLayer((s=y[T]).layerId).layer,s.disabled=void 0!==c.options.minZoom&&E<c.options.minZoom||void 0!==c.options.maxZoom&&E>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section,c=(this._preventClick=!0,Se(s,"click",hi),this.expand(),this);setTimeout(function(){Bn(s,"click",hi),c._preventClick=!1})}})),Ea=Ai.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",y=Ye("div",c+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,c+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,c+"-out",y,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,y,E,T){return(y=Ye("a",y,E)).innerHTML=s,y.href="#",y.title=c,y.setAttribute("role","button"),y.setAttribute("aria-label",c),$o(y),Se(y,"click",Xr),Se(y,"click",T,this),Se(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";Zn(this._zoomInButton,c),Zn(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),!this._disabled&&s._zoom!==s.getMinZoom()||(Ne(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),!this._disabled&&s._zoom!==s.getMaxZoom()||(Ne(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}}),nu=(Je.mergeOptions({zoomControl:!0}),Je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ea,this.addControl(this.zoomControl))}),Ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",y=Ye("div",c),E=this.options;return this._addScales(E,c+"-line",y),s.on(E.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),y},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,y){s.metric&&(this._mScale=Ye("div",c,y)),s.imperial&&(this._iScale=Ye("div",c,y))},_update:function(){var s=(c=this._map).getSize().y/2,c=c.distance(c.containerPointToLatLng([0,s]),c.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(c)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s);this._updateScale(this._mScale,c<1e3?c+" m":c/1e3+" km",c/s)},_updateImperial:function(E){var c,y;5280<(E*=3.2808399)?(y=this._getRoundNum(c=E/5280),this._updateScale(this._iScale,y+" mi",y/c)):(y=this._getRoundNum(E),this._updateScale(this._iScale,y+" ft",y/E))},_updateScale:function(s,c,y){s.style.width=Math.round(this.options.maxWidth*y)+"px",s.innerHTML=c},_getRoundNum:function(y){var c=Math.pow(10,(Math.floor(y)+"").length-1);return c*(10<=(y/=c)?10:5<=y?5:3<=y?3:2<=y?2:1)}})),$n=Ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(vt.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(s){Et(this,s),this._attributions={}},onAdd:function(s){for(var c in(s.attributionControl=this)._container=Ye("div","leaflet-control-attribution"),$o(this._container),s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s&&(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update()),this},removeAttribution:function(s){return s&&this._attributions[s]&&(this._attributions[s]--,this._update()),this},_update:function(){if(this._map){var s,c=[];for(s in this._attributions)this._attributions[s]&&c.push(s);var y=[];this.options.prefix&&y.push(this.options.prefix),c.length&&y.push(c.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}}),ta=((Je.mergeOptions({attributionControl:!0}),Je.addInitHook(function(){this.options.attributionControl&&(new $n).addTo(this)}),Ai.Layers=Qn,Ai.Zoom=Ea,Ai.Scale=nu,Ai.Attribution=$n,ws.layers=function(s,c,y){return new Qn(s,c,y)},ws.zoom=function(s){return new Ea(s)},ws.scale=function(s){return new nu(s)},ws.attribution=function(s){return new $n(s)},Ci=Ft.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}})).addTo=function(s,c){return s.addHandler(c,this),this},ts={Events:te},vt.touch?"touchstart mousedown":"mousedown"),Mo=je.extend({options:{clickTolerance:3},initialize:function(s,c,y,E){Et(this,E),this._element=s,this._dragStartTarget=c||s,this._preventOutline=y},enable:function(){this._enabled||(Se(this._dragStartTarget,ta,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mo._dragging===this&&this.finishDrag(!0),Bn(this._dragStartTarget,ta,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){var c,y;this._enabled&&(this._moved=!1,Mi(this._element,"leaflet-zoom-anim")||(s.touches&&1!==s.touches.length?Mo._dragging===this&&this.finishDrag():Mo._dragging||s.shiftKey||1!==s.which&&1!==s.button&&!s.touches||((Mo._dragging=this)._preventOutline&&Jo(this._element),Ks(),lr(),this._moving||(this.fire("down"),y=s.touches?s.touches[0]:s,c=Ja(this._element),this._startPoint=new jt(y.clientX,y.clientY),this._startPos=Zr(this._element),this._parentScale=Ls(c),y="mousedown"===s.type,Se(document,y?"mousemove":"touchmove",this._onMove,this),Se(document,y?"mouseup":"touchend touchcancel",this._onUp,this)))))},_onMove:function(s){var c;this._enabled&&(s.touches&&1<s.touches.length?this._moved=!0:!(c=new jt((c=s.touches&&1===s.touches.length?s.touches[0]:s).clientX,c.clientY)._subtract(this._startPoint)).x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,hi(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ne(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=s,this._updatePosition()))},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),ii(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Zn(document.body,"leaflet-dragging"),this._lastTarget&&(Zn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bn(document,"mousemove touchmove",this._onMove,this),Bn(document,"mouseup touchend touchcancel",this._onUp,this),Js(),Qi();var c=this._moved&&this._moving;this._moving=!1,Mo._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ma(s,c,y){for(var E,T,V,ut,ot,Bt,Kt,le=[1,4,2,8],Fe=0,Ge=s.length;Fe<Ge;Fe++)s[Fe]._code=v(s[Fe],c);for(V=0;V<4;V++){for(Bt=le[V],E=[],Fe=0,T=(Ge=s.length)-1;Fe<Ge;T=Fe++)ot=s[T],(ut=s[Fe])._code&Bt?ot._code&Bt||((Kt=g(ot,ut,Bt,c,y))._code=v(Kt,c),E.push(Kt)):(ot._code&Bt&&((Kt=g(ot,ut,Bt,c,y))._code=v(Kt,c),E.push(Kt)),E.push(ut));s=E}return s}function Cu(s,c){var y,E,T,V,ut,ot,Bt;if(!s||0===s.length)throw new Error("latlngs not passed");D(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);for(var Kt=we([0,0]),le=fe(s),Fe=(le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest())<1700&&(Kt=ea(s)),s.length),Ge=[],ti=0;ti<Fe;ti++){var Or=we(s[ti]);Ge.push(c.project(we([Or.lat-Kt.lat,Or.lng-Kt.lng])))}for(ti=ut=ot=Bt=0,y=Fe-1;ti<Fe;y=ti++)ot+=((E=Ge[ti]).x+(T=Ge[y]).x)*(V=E.y*T.x-T.y*E.x),Bt+=(E.y+T.y)*V,ut+=3*V;return we([(le=c.unproject(ie(le=0===ut?Ge[0]:[ot/ut,Bt/ut]))).lat+Kt.lat,le.lng+Kt.lng])}function ea(s){for(var c=0,y=0,E=0,T=0;T<s.length;T++){var V=we(s[T]);c+=V.lat,y+=V.lng,E++}return we([c/E,y/E])}function ko(s,c){if(c&&s.length){var y=s=function(ot,Bt){for(var Kt=[ot[0]],le=1,Fe=0,Ge=ot.length;le<Ge;le++)void 0,(fr=(Rr=ot[Fe]).x-(ti=ot[le]).x)*fr+(Rr=Rr.y-ti.y)*Rr>Bt&&(Kt.push(ot[le]),Fe=le);var ti,Rr,fr;return Fe<Ge-1&&Kt.push(ot[Ge-1]),Kt}(s,c*=c),E=y.length,T=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(E);T[0]=T[E-1]=1,function ot(Bt,Kt,le,Fe,Ge){var ti,Or,fr,Rr=0;for(Or=Fe+1;Or<=Ge-1;Or++)Rr<(fr=C(Bt[Or],Bt[Fe],Bt[Ge],!0))&&(ti=Or,Rr=fr);le<Rr&&(Kt[ti]=1,ot(Bt,Kt,le,Fe,ti),ot(Bt,Kt,le,ti,Ge))}(y,T,c,0,E-1);var V,ut=[];for(V=0;V<E;V++)T[V]&&ut.push(y[V]);return ut}return s.slice()}function iu(s,c,y){return Math.sqrt(C(s,c,y,!0))}function u(s,c,y,E,T){var V,ut,ot,Bt=E?es:v(s,y),Kt=v(c,y);for(es=Kt;;){if(!(Bt|Kt))return[s,c];if(Bt&Kt)return!1;ot=v(ut=g(s,c,V=Bt||Kt,y,T),y),V===Bt?(s=ut,Bt=ot):(c=ut,Kt=ot)}}function g(s,Bt,y,le,T){var V,ut,ot=Bt.x-s.x,Kt=(Bt=Bt.y-s.y,le.min);return le=le.max,8&y?(V=s.x+ot*(le.y-s.y)/Bt,ut=le.y):4&y?(V=s.x+ot*(Kt.y-s.y)/Bt,ut=Kt.y):2&y?(V=le.x,ut=s.y+Bt*(le.x-s.x)/ot):1&y&&(V=Kt.x,ut=s.y+Bt*(Kt.x-s.x)/ot),new jt(V,ut,T)}function v(s,c){var y=0;return s.x<c.min.x?y|=1:s.x>c.max.x&&(y|=2),s.y<c.min.y?y|=4:s.y>c.max.y&&(y|=8),y}function C(s,V,y,E){var T=V.x,ut=y.x-T,ot=y.y-(V=V.y),Bt=ut*ut+ot*ot;return 0<Bt&&(1<(Bt=((s.x-T)*ut+(s.y-V)*ot)/Bt)?(T=y.x,V=y.y):0<Bt&&(T+=ut*Bt,V+=ot*Bt)),ut=s.x-T,ot=s.y-V,E?ut*ut+ot*ot:new jt(T,V)}function D(s){return!ht(s[0])||"object"!=typeof s[0][0]&&void 0!==s[0][0]}function Z(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),D(s)}function J(s,c){var y,E,T,V,ut,ot;if(!s||0===s.length)throw new Error("latlngs not passed");D(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);for(var Bt=we([0,0]),Kt=fe(s),le=(Kt.getNorthWest().distanceTo(Kt.getSouthWest())*Kt.getNorthEast().distanceTo(Kt.getNorthWest())<1700&&(Bt=ea(s)),s.length),Fe=[],Ge=0;Ge<le;Ge++){var ti=we(s[Ge]);Fe.push(c.project(we([ti.lat-Bt.lat,ti.lng-Bt.lng])))}for(y=Ge=0;Ge<le-1;Ge++)y+=Fe[Ge].distanceTo(Fe[Ge+1])/2;if(0===y)ot=Fe[0];else for(E=Ge=0;Ge<le-1;Ge++)if(y<(E+=ut=(T=Fe[Ge]).distanceTo(V=Fe[Ge+1]))){ot=[V.x-(ut=(E-y)/ut)*(V.x-T.x),V.y-ut*(V.y-T.y)];break}return we([(Kt=c.unproject(ie(ot))).lat+Bt.lat,Kt.lng+Bt.lng])}Es={__proto__:null,clipPolygon:Ma,polygonCenter:Cu,centroid:ea},et={__proto__:null,simplify:ko,pointToSegmentDistance:iu,closestPointOnSegment:function(s,c,y){return C(s,c,y)},clipSegment:u,_getEdgeIntersection:g,_getBitCode:v,_sqClosestPointOnSegment:C,isFlat:D,_flat:Z,polylineCenter:J},wt={__proto__:null,LonLat:Q={project:function(s){return new jt(s.lng,s.lat)},unproject:function(s){return new de(s.y,s.x)},bounds:new me([-180,-90],[180,90])},Mercator:rt={R:6378137,R_MINOR:6356752.314245179,bounds:new me([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(s){var c=Math.PI/180,y=this.R,V=s.lat*c,E=this.R_MINOR/y,T=(E=Math.sqrt(1-E*E))*Math.sin(V);return T=Math.tan(Math.PI/4-V/2)/Math.pow((1-T)/(1+T),E/2),V=-y*Math.log(Math.max(T,1e-10)),new jt(s.lng*c*y,V)},unproject:function(s){for(var c,y=180/Math.PI,E=this.R,T=this.R_MINOR/E,V=Math.sqrt(1-T*T),ut=Math.exp(-s.y/E),ot=Math.PI/2-2*Math.atan(ut),Bt=0,Kt=.1;Bt<15&&1e-7<Math.abs(Kt);Bt++)c=V*Math.sin(ot),c=Math.pow((1-c)/(1+c),V/2),ot+=Kt=Math.PI/2-2*Math.atan(ut*c)-ot;return new de(ot*y,s.x*y/E)}},SphericalMercator:li},At=he({},Dn,{code:"EPSG:3395",projection:rt,transformation:Oi(ze=.5/(Math.PI*rt.R),.5,-ze,.5)});var Rt=he({},Dn,{code:"EPSG:4326",projection:Q,transformation:Oi(1/180,1,-1/180,.5)}),_e=(Vt=he({},Di,{projection:Q,transformation:Oi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,E){var y=E.lng-s.lng;return E=E.lat-s.lat,Math.sqrt(y*y+E*E)},infinite:!0}),Di.Earth=Dn,Di.EPSG3395=At,Di.EPSG3857=Tr,Di.EPSG900913=qr,Di.EPSG4326=Rt,Di.Simple=Vt,Xt=je.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[x(s)]=this},removeInteractiveTarget:function(s){return delete this._map._targets[x(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c,y=s.target;y.hasLayer(this)&&(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents&&(c=this.getEvents(),y.on(c,this),this.once("remove",function(){y.off(c,this)},this)),this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this}))}}),Je.include({addLayer:function(s){var c;if(s._layerAdd)return c=x(s),this._layers[c]||((this._layers[c]=s)._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s)),this;throw new Error("The provided object is not a Layer.")},removeLayer:function(s){var c=x(s);return this._layers[c]&&(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null),this},hasLayer:function(s){return x(s)in this._layers},eachLayer:function(s,c){for(var y in this._layers)s.call(c,this._layers[y]);return this},_addLayers:function(s){for(var c=0,y=(s=s?ht(s)?s:[s]:[]).length;c<y;c++)this.addLayer(s[c])},_addZoomLimit:function(s){isNaN(s.options.maxZoom)&&isNaN(s.options.minZoom)||(this._zoomBoundLayers[x(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){s=x(s),this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var s,c=1/0,y=-1/0,E=this._getZoomSpan();for(s in this._zoomBoundLayers){var T=this._zoomBoundLayers[s].options;c=void 0===T.minZoom?c:Math.min(c,T.minZoom),y=void 0===T.maxZoom?y:Math.max(y,T.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=c===1/0?void 0:c,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}}),Xt.extend({initialize:function(s,c){var y,E;if(Et(this,c),this._layers={},s)for(y=0,E=s.length;y<E;y++)this.addLayer(s[y])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){return s=s in this._layers?s:this.getLayerId(s),this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(s){return("number"==typeof s?s:this.getLayerId(s))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c,y,E=Array.prototype.slice.call(arguments,1);for(c in this._layers)(y=this._layers[c])[s]&&y[s].apply(y,E);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var y in this._layers)s.call(c,this._layers[y]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:x})),Me=_e.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),_e.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?((s=s in this._layers?this._layers[s]:s).removeEventParent(this),_e.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s,c=new se;for(s in this._layers){var y=this._layers[s];c.extend(y.getBounds?y.getBounds():y.getLatLng())}return c}}),Mn=Ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){Et(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var y=this._getIconUrl(s);if(y)return y=this._createImg(y,c&&"IMG"===c.tagName?c:null),this._setIconStyles(y,s),!this.options.crossOrigin&&""!==this.options.crossOrigin||(y.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),y;if("icon"===s)throw new Error("iconUrl not set in Icon options (see the docs).");return null},_setIconStyles:function(s,c){var y=this.options,E=ie(E="number"==typeof(E=y[c+"Size"])?[E,E]:E),T=ie("shadow"===c&&y.shadowAnchor||y.iconAnchor||E&&E.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(y.className||""),T&&(s.style.marginLeft=-T.x+"px",s.style.marginTop=-T.y+"px"),E&&(s.style.width=E.x+"px",s.style.height=E.y+"px")},_createImg:function(s,c){return(c=c||document.createElement("img")).src=s,c},_getIconUrl:function(s){return vt.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}}),qn=Mn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return"string"!=typeof qn.imagePath&&(qn.imagePath=this._detectIconPath()),(this.options.imagePath||qn.imagePath)+Mn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){function c(y,E,T){return(E=E.exec(y))&&E[T]}return(s=c(s,/^url\((['"])?(.+)\1\)$/,2))&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ye("div","leaflet-default-icon-path",document.body),c=Wo(s,"background-image")||Wo(s,"backgroundImage");return document.body.removeChild(s),(c=this._stripUrl(c))?c:(s=document.querySelector('link[href$="leaflet.css"]'))?s.href.substring(0,s.href.length-11-1):""}}),Rn=Ci.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Mo(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ne(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Zn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,y=c._map,E=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,V=Zr(c._icon),ut=y.getPixelBounds(),ot=y.getPixelOrigin();(ot=He(ut.min._subtract(ot).add(T),ut.max._subtract(ot).subtract(T))).contains(V)||(T=ie((Math.max(ot.max.x,V.x)-ot.max.x)/(ut.max.x-ot.max.x)-(Math.min(ot.min.x,V.x)-ot.min.x)/(ut.min.x-ot.min.x),(Math.max(ot.max.y,V.y)-ot.max.y)/(ut.max.y-ot.max.y)-(Math.min(ot.min.y,V.y)-ot.min.y)/(ut.min.y-ot.min.y)).multiplyBy(E),y.panBy(T,{animate:!1}),this._draggable._newPos._add(T),this._draggable._startPos._add(T),ii(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=Gt(this._adjustPan.bind(this,s)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(Yt(this._panRequest),this._panRequest=Gt(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,y=c._shadow,E=Zr(c._icon),T=c._map.layerPointToLatLng(E);y&&ii(y,E),c._latlng=T,s.latlng=T,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){Yt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),ri=Xt.extend({options:{icon:new qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){Et(this,c),this._latlng=we(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=we(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var s;return this._icon&&this._map&&(s=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(s)),this},_initIcon:function(){var E,s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=!1,T=!1;(E=s.icon.createIcon(this._icon))!==this._icon&&(this._icon&&this._removeIcon(),y=!0,s.title&&(E.title=s.title),"IMG"===E.tagName&&(E.alt=s.alt||"")),Ne(E,c),s.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(E,"focus",this._panOnFocus,this),(E=s.icon.createShadow(this._shadow))!==this._shadow&&(this._removeShadow(),T=!0),E&&(Ne(E,c),E.alt=""),this._shadow=E,s.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&T&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bn(this._icon,"focus",this._panOnFocus,this),Fn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Fn(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&ii(this._icon,s),this._shadow&&ii(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){s=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round(),this._setPos(s)},_initInteraction:function(){var s;this.options.interactive&&(Ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rn&&(s=this.options.draggable,this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rn(this),s&&this.dragging.enable()))},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&cr(this._icon,s),this._shadow&&cr(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s,c,y=this._map;y&&(s=(c=this.options.icon.options).iconSize?ie(c.iconSize):ie(0,0),c=c.iconAnchor?ie(c.iconAnchor):ie(0,0),y.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:s.subtract(c)}))},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),_i=Xt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return Et(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pr=_i.extend({options:{fill:!0,radius:10},initialize:function(s,c){Et(this,c),this._latlng=we(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=we(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return _i.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var y=this._radius,s=this._radiusY||y,c=this._clickTolerance();this._pxBounds=new me(this._point.subtract(y=[y+c,s+c]),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),na=pr.extend({initialize:function(s,c,y){if(Et(this,c="number"==typeof c?he({},y,{radius:c}):c),this._latlng=we(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:_i.prototype.setStyle,_project:function(){var s,c,y,E,T,V=this._latlng.lng,ut=this._latlng.lat,ot=this._map,Bt=ot.options.crs;Bt.distance===Dn.distance?(E=Math.PI/180,s=ot.project([ut+(T=this._mRadius/Dn.R/E),V]),c=ot.project([ut-T,V]),c=s.add(c).divideBy(2),y=ot.unproject(c).lat,E=Math.acos((Math.cos(T*E)-Math.sin(ut*E)*Math.sin(y*E))/(Math.cos(ut*E)*Math.cos(y*E)))/E,!isNaN(E)&&0!==E||(E=T/Math.cos(Math.PI/180*ut)),this._point=c.subtract(ot.getPixelOrigin()),this._radius=isNaN(E)?0:c.x-ot.project([y,V-E]).x,this._radiusY=c.y-s.y):(T=Bt.unproject(Bt.project(this._latlng).subtract([this._mRadius,0])),this._point=ot.latLngToLayerPoint(this._latlng),this._radius=this._point.x-ot.latLngToLayerPoint(T).x),this._updateBounds()}}),br=_i.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){Et(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,y=null,E=C,T=0,V=this._parts.length;T<V;T++)for(var ut=this._parts[T],ot=1,Bt=ut.length;ot<Bt;ot++){var Kt,le,Fe=E(s,Kt=ut[ot-1],le=ut[ot],!0);Fe<c&&(c=Fe,y=E(s,Kt,le))}return y&&(y.distance=Math.sqrt(c)),y},getCenter:function(){if(this._map)return J(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=we(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new se,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return D(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],y=D(s),E=0,T=s.length;E<T;E++)y?(c[E]=we(s[E]),this._bounds.extend(c[E])):c[E]=this._convertLatLngs(s[E]);return c},_project:function(){var s=new me;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=new jt(s=this._clickTolerance(),s);this._rawPxBounds&&(this._pxBounds=new me([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(s,c,y){var E,T,ut=s.length;if(s[0]instanceof de){for(T=[],E=0;E<ut;E++)T[E]=this._map.latLngToLayerPoint(s[E]),y.extend(T[E]);c.push(T)}else for(E=0;E<ut;E++)this._projectLatlngs(s[E],c,y)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(s))if(this.options.noClip)this._parts=this._rings;else for(var c,y,E,T,V=this._parts,ut=0,ot=0,Bt=this._rings.length;ut<Bt;ut++)for(c=0,y=(T=this._rings[ut]).length;c<y-1;c++)(E=u(T[c],T[c+1],s,c,!0))&&(V[ot]=V[ot]||[],V[ot].push(E[0]),E[1]===T[c+1]&&c!==y-2||(V[ot].push(E[1]),ot++))},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,y=0,E=s.length;y<E;y++)s[y]=ko(s[y],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var y,E,T,V,ut,ot,Bt=this._clickTolerance();if(this._pxBounds&&this._pxBounds.contains(s))for(y=0,V=this._parts.length;y<V;y++)for(E=0,T=(ut=(ot=this._parts[y]).length)-1;E<ut;T=E++)if((c||0!==E)&&iu(s,ot[T],ot[E])<=Bt)return!0;return!1}});br._flat=Z;var xr=br.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(this._map)return Cu(this._defaultShape(),this._map.options.crs);throw new Error("Must add layer to map before using getCenter()")},_convertLatLngs:function(c){var y=(c=br.prototype._convertLatLngs.call(this,c)).length;return 2<=y&&c[0]instanceof de&&c[0].equals(c[y-1])&&c.pop(),c},_setLatLngs:function(s){br.prototype._setLatLngs.call(this,s),D(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return(D(this._latlngs[0])?this._latlngs:this._latlngs[0])[0]},_clipPoints:function(){var c=this._renderer._bounds,s=new jt(s=this.options.weight,s);if(c=new me(c.min.subtract(s),c.max.add(s)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(c))if(this.options.noClip)this._parts=this._rings;else for(var y,E=0,T=this._rings.length;E<T;E++)(y=Ma(this._rings[E],c,!0)).length&&this._parts.push(y)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c,y,E,T,V,ut,ot,Bt,Kt=!1;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(T=0,ot=this._parts.length;T<ot;T++)for(V=0,ut=(Bt=(c=this._parts[T]).length)-1;V<Bt;ut=V++)(y=c[V]).y>s.y!=(E=c[ut]).y>s.y&&s.x<(E.x-y.x)*(s.y-y.y)/(E.y-y.y)+y.x&&(Kt=!Kt);return Kt||br.prototype._containsPoint.call(this,s,!0)}}),Wr=Me.extend({initialize:function(s,c){Et(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c,y,E,T=ht(s)?s:s.features;if(T){for(c=0,y=T.length;c<y;c++)((E=T[c]).geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var V,ut=this.options;return ut.filter&&!ut.filter(s)||!(V=Ms(s,ut))?this:(V.feature=ra(s),V.defaultOptions=V.options,this.resetStyle(V),ut.onEachFeature&&ut.onEachFeature(s,V),this.addLayer(V))},resetStyle:function(s){return void 0===s?this.eachLayer(this.resetStyle,this):(s.options=he({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&("function"==typeof c&&(c=c(s.feature)),s.setStyle(c))}});function Ms(s,c){var y,E,T,V,ut="Feature"===s.type?s.geometry:s,ot=ut?ut.coordinates:null,Bt=[],Kt=c&&c.pointToLayer,le=c&&c.coordsToLatLng||ks;if(!ot&&!ut)return null;switch(ut.type){case"Point":return ka(Kt,s,y=le(ot),c);case"MultiPoint":for(T=0,V=ot.length;T<V;T++)y=le(ot[T]),Bt.push(ka(Kt,s,y,c));return new Me(Bt);case"LineString":case"MultiLineString":return E=ia(ot,"LineString"===ut.type?0:1,le),new br(E,c);case"Polygon":case"MultiPolygon":return E=ia(ot,"Polygon"===ut.type?1:2,le),new xr(E,c);case"GeometryCollection":for(T=0,V=ut.geometries.length;T<V;T++){var Fe=Ms({geometry:ut.geometries[T],type:"Feature",properties:s.properties},c);Fe&&Bt.push(Fe)}return new Me(Bt);case"FeatureCollection":for(T=0,V=ut.features.length;T<V;T++){var Ge=Ms(ut.features[T],c);Ge&&Bt.push(Ge)}return new Me(Bt);default:throw new Error("Invalid GeoJSON object.")}}function ka(s,c,y,E){return s?s(c,y):new ri(y,E&&E.markersInheritOptions&&E)}function ks(s){return new de(s[1],s[0],s[2])}function ia(s,c,y){for(var E,T=[],V=0,ut=s.length;V<ut;V++)E=c?ia(s[V],c-1,y):(y||ks)(s[V]),T.push(E);return T}function wr(s,c){return void 0!==(s=we(s)).alt?[H(s.lng,c),H(s.lat,c),H(s.alt,c)]:[H(s.lng,c),H(s.lat,c)]}function Pa(s,c,y,E){for(var T=[],V=0,ut=s.length;V<ut;V++)T.push(c?Pa(s[V],D(s[V])?0:c-1,y,E):wr(s[V],E));return!c&&y&&0<T.length&&T.push(T[0].slice()),T}function Er(s,c){return s.feature?he({},s.feature,{geometry:c}):ra(c)}function ra(s){return"Feature"===s.type||"FeatureCollection"===s.type?s:{type:"Feature",properties:{},geometry:s}}function ns(s,c){return new Wr(s,c)}ri.include(Ze={toGeoJSON:function(s){return Er(this,{type:"Point",coordinates:wr(this.getLatLng(),s)})}}),na.include(Ze),pr.include(Ze),br.include({toGeoJSON:function(s){var c=!D(this._latlngs);return Er(this,{type:(c?"Multi":"")+"LineString",coordinates:Pa(this._latlngs,c?1:0,!1,s)})}}),xr.include({toGeoJSON:function(E){var c=!D(this._latlngs),y=c&&!D(this._latlngs[0]);return E=Pa(this._latlngs,y?2:c?1:0,!0,E),Er(this,{type:(y?"Multi":"")+"Polygon",coordinates:E=c?E:[E]})}}),_e.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(y){c.push(y.toGeoJSON(s).geometry.coordinates)}),Er(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c,y,E=this.feature&&this.feature.geometry&&this.feature.geometry.type;return"MultiPoint"===E?this.toMultiPoint(s):(c="GeometryCollection"===E,y=[],this.eachLayer(function(T){T.toGeoJSON&&(T=T.toGeoJSON(s),c?y.push(T.geometry):"FeatureCollection"===(T=ra(T)).type?y.push.apply(y,T.features):y.push(T))}),c?Er(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y})}}),oa=ns;var ru=Xt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,y){this._url=s,this._bounds=fe(c),Et(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Fn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Lr(this._image),this},bringToBack:function(){return this._map&&hr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=fe(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s="IMG"===this._url.tagName,c=this._image=s?this._url:Ye("img");Ne(c,"leaflet-image-layer"),this._zoomAnimated&&Ne(c,"leaflet-zoom-animated"),this.options.className&&Ne(c,this.options.className),c.onselectstart=N,c.onmousemove=N,c.onload=h(this.fire,this,"load"),c.onerror=h(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(c.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s?this._url=c.src:(c.src=this._url,c.alt=this.options.alt)},_animateZoom:function(y){var c=this._map.getZoomScale(y.zoom);y=this._map._latLngBoundsToNewLayerBounds(this._bounds,y.zoom,y.center).min,wo(this._image,y,c)},_reset:function(){var s=this._image,c=new me(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=c.getSize();ii(s,c.min),s.style.width=y.x+"px",s.style.height=y.y+"px"},_updateOpacity:function(){cr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),oh=ru.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s="VIDEO"===this._url.tagName,c=this._image=s?this._url:Ye("video");if(Ne(c,"leaflet-image-layer"),this._zoomAnimated&&Ne(c,"leaflet-zoom-animated"),this.options.className&&Ne(c,this.options.className),c.onselectstart=N,c.onmousemove=N,c.onloadeddata=h(this.fire,this,"load"),s){for(var y=c.getElementsByTagName("source"),E=[],T=0;T<y.length;T++)E.push(y[T].src);this._url=0<y.length?E:[c.src]}else{ht(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var V=0;V<this._url.length;V++){var ut=Ye("source");ut.src=this._url[V],c.appendChild(ut)}}}}),ou=ru.extend({_initImage:function(){var s=this._image=this._url;Ne(s,"leaflet-image-layer"),this._zoomAnimated&&Ne(s,"leaflet-zoom-animated"),this.options.className&&Ne(s,this.options.className),s.onselectstart=N,s.onmousemove=N}}),uo=Xt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof de||ht(s))?(this._latlng=we(s),Et(this,c)):(Et(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return(s=arguments.length?s:this._source._map).hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&cr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&cr(this._container,1),this.bringToFront(),this.options.interactive&&(Ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(cr(this._container,0),this._removeTimeout=setTimeout(h(Fn,void 0,this._container),200)):Fn(this._container),this.options.interactive&&(Zn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=we(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Lr(this._container),this},bringToBack:function(){return this._map&&hr(this._container),this},_prepareOpen:function(s){if(!(y=this._source)._map)return!1;if(y instanceof Me){var c,y=null,E=this._source._layers;for(c in E)if(E[c]._map){y=E[c];break}if(!y)return!1;this._source=y}if(!s)if(y.getCenter)s=y.getCenter();else if(y.getLatLng)s=y.getLatLng();else{if(!y.getBounds)throw new Error("Unable to get source layer LatLng.");s=y.getBounds().getCenter()}return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof c)s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){var s,c,y;this._map&&(c=this._map.latLngToLayerPoint(this._latlng),s=ie(this.options.offset),y=this._getAnchor(),this._zoomAnimated?ii(this._container,c.add(y)):s=s.add(c).add(y),c=this._containerBottom=-s.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+s.x,this._container.style.bottom=c+"px",this._container.style.left=y+"px")},_getAnchor:function(){return[0,0]}}),Ps=(Je.include({_initOverlay:function(s,c,y,E){var T=c;return T instanceof s||(T=new s(E).setContent(c)),y&&T.setLatLng(y),T}}),Xt.include({_initOverlay:function(s,c,y,E){var T=y;return T instanceof s?(Et(T,E),T._source=this):(T=c&&!E?c:new s(E,this)).setContent(y),T}}),uo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return!(s=arguments.length?s:this._source._map).hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,uo.prototype.openOn.call(this,s)},onAdd:function(s){uo.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _i||this._source.on("preclick",Dr))},onRemove:function(s){uo.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _i||this._source.off("preclick",Dr))},getEvents:function(){var s=uo.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=Ye("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=Ye("div",s+"-content-wrapper",c);this._contentNode=Ye("div",s+"-content",y),$o(c),Eo(this._contentNode),Se(c,"contextmenu",Dr),this._tipContainer=Ye("div",s+"-tip-container",c),this._tip=Ye("div",s+"-tip",this._tipContainer),this.options.closeButton&&((y=this._closeButton=Ye("a",s+"-close-button",c)).setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Se(y,"click",function(E){hi(E),this.close()},this))},_updateLayout:function(){var s=this._contentNode,c=s.style,y=(c.width="",c.whiteSpace="nowrap",s.offsetWidth),E=(y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),c.width=y+1+"px",c.whiteSpace="",c.height="",y=s.offsetHeight,this.options.maxHeight);(E&&E<y?(c.height=E+"px",Ne):Zn)(s,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){c=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);var y=this._getAnchor();ii(this._container,c.add(y))},_adjustPan:function(){var s,c,y,E,T,V,ut,ot;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning?this._autopanning=!1:(s=this._map,c=parseInt(Wo(this._container,"marginBottom"),10)||0,ot=this._containerWidth,(y=new jt(this._containerLeft,-(c=this._container.offsetHeight+c)-this._containerBottom))._add(Zr(this._container)),y=s.layerPointToContainerPoint(y),T=ie(this.options.autoPanPadding),E=ie(this.options.autoPanPaddingTopLeft||T),T=ie(this.options.autoPanPaddingBottomRight||T),V=s.getSize(),ut=0,y.x+ot+T.x>V.x&&(ut=y.x+ot-V.x+T.x),y.x-ut-E.x<(ot=0)&&(ut=y.x-E.x),y.y+c+T.y>V.y&&(ot=y.y+c-V.y+T.y),y.y-ot-E.y<0&&(ot=y.y-E.y),(ut||ot)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ut,ot]))))},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}})),Cs=(Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(s,c,y){return this._initOverlay(Ps,s,c,y).openOn(this),this},closePopup:function(s){return(s=arguments.length?s:this._popup)&&s.close(),this}}),Xt.include({bindPopup:function(s,c){return this._popup=this._initOverlay(Ps,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Me||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){var c;this._popup&&this._map&&(Xr(s),this._popup._source!==(c=s.layer||s.target)||c instanceof _i?(this._popup._source=c,this.openPopup(s.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng))},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){13===s.originalEvent.keyCode&&this._openPopup(s)}}),uo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){uo.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){uo.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=uo.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){this._contentNode=this._container=Ye("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,y=this._container,E=(Kt=this._map).latLngToContainerPoint(Kt.getCenter()),Kt=Kt.layerPointToContainerPoint(s),T=this.options.direction,V=y.offsetWidth,ut=y.offsetHeight,ot=ie(this.options.offset),Bt=this._getAnchor();Kt="top"===T?(c=V/2,ut):"bottom"===T?(c=V/2,0):(c="center"===T?V/2:"right"===T?0:"left"===T?V:Kt.x<E.x?(T="right",0):(T="left",V+2*(ot.x+Bt.x)),ut/2),s=s.subtract(ie(c,Kt,!0)).add(ot).add(Bt),Zn(y,"leaflet-tooltip-right"),Zn(y,"leaflet-tooltip-left"),Zn(y,"leaflet-tooltip-top"),Zn(y,"leaflet-tooltip-bottom"),Ne(y,"leaflet-tooltip-"+T),ii(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&cr(this._container,s)},_animateZoom:function(s){s=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),this._setPosition(s)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}})),sh=(Je.include({openTooltip:function(s,c,y){return this._initOverlay(Cs,s,c,y).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Xt.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cs,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){var c,y;!s&&this._tooltipHandlersAdded||(c=s?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[c](y),this._tooltipHandlersAdded=!s)},openTooltip:function(s){return this._tooltip&&(this instanceof Me||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c="function"==typeof s.getElement&&s.getElement();c&&(Se(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Se(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){(s="function"==typeof s.getElement&&s.getElement())&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){var c;this._tooltip&&this._map&&(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag?(this._openOnceFlag=!0,(c=this)._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)})):(this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)))},_moveTooltip:function(s){var c=s.latlng;this._tooltip.options.sticky&&s.originalEvent&&(s=this._map.mouseEventToContainerPoint(s.originalEvent),s=this._map.containerPointToLayerPoint(s),c=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(c)}}),Mn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){c=c&&"DIV"===c.tagName?c:document.createElement("div");var y=this.options;return y.html instanceof Element?(ao(c),c.appendChild(y.html)):c.innerHTML=!1!==y.html?y.html:"",y.bgPos&&(y=ie(y.bgPos),c.style.backgroundPosition=-y.x+"px "+-y.y+"px"),this._setIconStyles(c,"icon"),c},createShadow:function(){return null}}));Mn.Default=qn;var su=Xt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){Et(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Fn(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(hr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){var s;return this._map&&(this._removeAllTiles(),(s=this._clampZoom(this._map.getZoom()))!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()),this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=I(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof jt?s:new jt(s,s)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c,y=this.getPane().children,E=-s(-1/0,1/0),T=0,V=y.length;T<V;T++)c=y[T].style.zIndex,y[T]!==this._container&&c&&(E=s(E,+c));isFinite(E)&&(this.options.zIndex=E+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!vt.ielt9){cr(this._container,this.options.opacity);var s,c=+new Date,y=!1,E=!1;for(s in this._tiles){var T,V=this._tiles[s];V.current&&V.loaded&&(T=Math.min(1,(c-V.loaded)/200),cr(V.el,T),T<1?y=!0:(V.active?E=!0:this._onOpaqueTile(V),V.active=!0))}E&&!this._noPrune&&this._pruneTiles(),y&&(Yt(this._fadeFrame),this._fadeFrame=Gt(this._updateOpacity,this))}},_onOpaqueTile:N,_initContainer:function(){this._container||(this._container=Ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(void 0!==s){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===s?(this._levels[y].el.style.zIndex=c-Math.abs(s-y),this._onUpdateLevel(y)):(Fn(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var E=this._levels[s],T=this._map;return E||((E=this._levels[s]={}).el=Ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=c,E.origin=T.project(T.unproject(T.getPixelOrigin()),s).round(),E.zoom=s,this._setZoomTransform(E,T.getCenter(),T.getZoom()),this._onCreateLevel(E)),this._level=E}},_onUpdateLevel:N,_onRemoveLevel:N,_onCreateLevel:N,_pruneTiles:function(){if(this._map){var s,c,y,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom)this._removeAllTiles();else{for(s in this._tiles)(y=this._tiles[s]).retain=y.current;for(s in this._tiles)(y=this._tiles[s]).current&&!y.active&&(this._retainParent((c=y.coords).x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2));for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Fn(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(T,V,ut,E){ut-=1;var ot=((ot=new jt(+(T=Math.floor(T/2)),+(V=Math.floor(V/2)))).z=ut,this._tileCoordsToKey(ot));return(ot=this._tiles[ot])&&ot.active?ot.retain=!0:(ot&&ot.loaded&&(ot.retain=!0),E<ut&&this._retainParent(T,V,ut,E))},_retainChildren:function(s,c,y,E){for(var T=2*s;T<2*s+2;T++)for(var V=2*c;V<2*c+2;V++){var ut=((ut=new jt(T,V)).z=y+1,this._tileCoordsToKey(ut));(ut=this._tiles[ut])&&ut.active?ut.retain=!0:(ut&&ut.loaded&&(ut.retain=!0),y+1<E&&this._retainChildren(T,V,y+1,E))}},_resetView:function(s){s=s&&(s.pinch||s.flyTo),this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return void 0!==c.minNativeZoom&&s<c.minNativeZoom?c.minNativeZoom:void 0!==c.maxNativeZoom&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,y,E){var T=Math.round(c);T=void 0!==this.options.maxZoom&&T>this.options.maxZoom||void 0!==this.options.minZoom&&T<this.options.minZoom?void 0:this._clampZoom(T),E&&!(this.options.updateWhenZooming&&T!==this._tileZoom)||(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==T&&this._update(s),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var y in this._levels)this._setZoomTransform(this._levels[y],s,c)},_setZoomTransform:function(s,T,y){var E=this._map.getZoomScale(y,s.zoom);T=s.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(T,y)).round(),vt.any3d?wo(s.el,T,E):ii(s.el,T)},_resetGrid:function(){var s=this._map,c=s.options.crs,y=this._tileSize=this.getTileSize(),E=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],E).x/y.x),Math.ceil(s.project([0,c.wrapLng[1]],E).x/y.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],E).y/y.x),Math.ceil(s.project([c.wrapLat[1],0],E).y/y.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(y){var c=(E=this._map)._animatingZoom?Math.max(E._animateToZoom,E.getZoom()):E.getZoom(),E=(c=E.getZoomScale(c,this._tileZoom),y=E.project(y,this._tileZoom).floor(),E.getSize().divideBy(2*c));return new me(y.subtract(E),y.add(E))},_update:function(s){if(c=this._map){var y=this._clampZoom(c.getZoom());if(void 0===s&&(s=c.getCenter()),void 0!==this._tileZoom){var E,c=this._getTiledPixelBounds(s),T=this._pxBoundsToTileRange(c),V=T.getCenter(),ut=[],ot=(c=this.options.keepBuffer,new me(T.getBottomLeft().subtract([c,-c]),T.getTopRight().add([c,-c])));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(E in this._tiles){var Bt=this._tiles[E].coords;Bt.z===this._tileZoom&&ot.contains(new jt(Bt.x,Bt.y))||(this._tiles[E].current=!1)}if(1<Math.abs(y-this._tileZoom))this._setView(s,y);else{for(var Kt=T.min.y;Kt<=T.max.y;Kt++)for(var le=T.min.x;le<=T.max.x;le++){var Fe,Ge=new jt(le,Kt);Ge.z=this._tileZoom,this._isValidTile(Ge)&&((Fe=this._tiles[this._tileCoordsToKey(Ge)])?Fe.current=!0:ut.push(Ge))}if(ut.sort(function(fr,Rr){return fr.distanceTo(V)-Rr.distanceTo(V)}),0!==ut.length){this._loading||(this._loading=!0,this.fire("loading"));var ti=document.createDocumentFragment();for(le=0;le<ut.length;le++)this._addTile(ut[le],ti);this._level.el.appendChild(ti)}}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var y=this._globalTileRange;if(!c.wrapLng&&(s.x<y.min.x||s.x>y.max.x)||!c.wrapLat&&(s.y<y.min.y||s.y>y.max.y))return!1}return!this.options.bounds||(c=this._tileCoordsToBounds(s),fe(this.options.bounds).overlaps(c))},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,E=this.getTileSize(),y=s.scaleBy(E);return E=y.add(E),[c.unproject(y,s.z),c.unproject(E,s.z)]},_tileCoordsToBounds:function(s){return s=new se((s=this._tileCoordsToNwSe(s))[0],s[1]),this.options.noWrap?s:this._map.wrapLatLngBounds(s)},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(c){var y=new jt(+(c=c.split(":"))[0],+c[1]);return y.z=+c[2],y},_removeTile:function(s){var c=this._tiles[s];c&&(Fn(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ne(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=N,s.onmousemove=N,vt.ielt9&&this.options.opacity<1&&cr(s,this.options.opacity)},_addTile:function(s,c){var y=this._getTilePos(s),E=this._tileCoordsToKey(s),T=this.createTile(this._wrapCoords(s),h(this._tileReady,this,s));this._initTile(T),this.createTile.length<2&&Gt(h(this._tileReady,this,s,null,T)),ii(T,y),this._tiles[E]={el:T,coords:s,current:!0},c.appendChild(T),this.fire("tileloadstart",{tile:T,coords:s})},_tileReady:function(s,c,y){c&&this.fire("tileerror",{error:c,tile:y,coords:s});var E=this._tileCoordsToKey(s);(y=this._tiles[E])&&(y.loaded=+new Date,this._map._fadeAnimated?(cr(y.el,0),Yt(this._fadeFrame),this._fadeFrame=Gt(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),c||(Ne(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),vt.ielt9||!this._map._fadeAnimated?Gt(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new jt(this._wrapX?U(s.x,this._wrapX):s.x,this._wrapY?U(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new me(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}}),Ca=su.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,(c=Et(this,c)).detectRetina&&vt.retina&&0<c.maxZoom?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),"string"==typeof c.subdomains&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&void 0===c&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var y=document.createElement("img");return Se(y,"load",h(this._tileOnLoad,this,c,y)),Se(y,"error",h(this._tileOnError,this,c,y)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(y.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(s),y},getTileUrl:function(s){var c={r:vt.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(s=this._globalTileRange.max.y-s.y,this.options.tms&&(c.y=s),c["-y"]=s),St(this._url,he(c,this.options))},_tileOnLoad:function(s,c){vt.ielt9?setTimeout(h(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,y){var E=this.options.errorTileUrl;E&&c.getAttribute("src")!==E&&(c.src=E),s(y,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom;return(s=this.options.zoomReverse?this.options.maxZoom-s:s)+this.options.zoomOffset},_getSubdomain:function(s){return s=Math.abs(s.x+s.y)%this.options.subdomains.length,this.options.subdomains[s]},_abortLoading:function(){var s,c,y;for(s in this._tiles)this._tiles[s].coords.z!==this._tileZoom&&((y=this._tiles[s].el).onload=N,y.onerror=N,y.complete||(y.src=xt,c=this._tiles[s].coords,Fn(y),delete this._tiles[s],this.fire("tileabort",{tile:y,coords:c})))},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",xt),su.prototype._removeTile.call(this,s)},_tileReady:function(s,c,y){if(this._map&&(!y||y.getAttribute("src")!==xt))return su.prototype._tileReady.call(this,s,c,y)}});function ah(s,c){return new Ca(s,c)}var uh=Ca.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(T,c){this._url=T;var y,E=he({},this.defaultWmsParams);for(y in c)y in this.options||(E[y]=c[y]);T=(c=Et(this,c)).detectRetina&&vt.retina?2:1;var V=this.getTileSize();E.width=V.x*T,E.height=V.y*T,this.wmsParams=E},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[1.3<=this._wmsVersion?"crs":"srs"]=this._crs.code,Ca.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),y=(c=(y=He((y=this._crs).project(c[0]),y.project(c[1]))).min,y.max);return c=(1.3<=this._wmsVersion&&this._crs===Rt?[c.y,c.x,y.y,y.x]:[c.x,c.y,y.x,y.y]).join(","),(y=Ca.prototype.getTileUrl.call(this,s))+Ct(this.wmsParams,y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+c},setParams:function(s,c){return he(this.wmsParams,s),c||this.redraw(),this}});Ca.WMS=uh,ah.wms=function(s,c){return new uh(s,c)};var is=Xt.extend({options:{padding:.1},initialize:function(s){Et(this,s),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var y=this._map.getZoomScale(c,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,c);T=T.multiplyBy(-y).add(E).subtract(this._map._getNewPixelOrigin(s,c)),vt.any3d?wo(this._container,T,y):ii(this._container,T)},_reset:function(){for(var s in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),y=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new me(y,y.add(c.multiplyBy(1+2*s)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Su=is.extend({options:{tolerance:0},getEvents:function(){var s=is.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){is.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Se(s,"mousemove",this._onMouseMove,this),Se(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){Yt(this._redrawRequest),delete this._ctx,Fn(this._container),Bn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var s in this._redrawBounds=null,this._layers)this._layers[s]._update();this._redraw()}},_update:function(){var s,c,y,E;this._map._animatingZoom&&this._bounds||(is.prototype._update.call(this),c=this._container,y=(s=this._bounds).getSize(),E=vt.retina?2:1,ii(c,s.min),c.width=E*y.x,c.height=E*y.y,c.style.width=y.x+"px",c.style.height=y.y+"px",vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update"))},_reset:function(){is.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),s=(this._layers[x(s)]=s)._order={layer:s,prev:this._drawLast,next:null},this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=(y=s._order).next,y=y.prev;c?c.prev=y:this._drawLast=y,y?y.next=c:this._drawFirst=c,delete s._order,delete this._layers[x(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if("string"==typeof s.options.dashArray){for(var c,y=s.options.dashArray.split(/[, ]+/),E=[],T=0;T<y.length;T++){if(c=Number(y[T]),isNaN(c))return;E.push(c)}s.options._dashArray=E}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||Gt(this._redraw,this))},_extendRedrawBounds:function(s){var c;s._pxBounds&&(c=(s.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new me,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s,c=this._redrawBounds;c?(s=c.getSize(),this._ctx.clearRect(c.min.x,c.min.y,s.x,s.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var s,c,y=this._redrawBounds;this._ctx.save(),y&&(c=y.getSize(),this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,c.x,c.y),this._ctx.clip()),this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)s=E.layer,(!y||s._pxBounds&&s._pxBounds.intersects(y))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var y,E,T,V,ut=s._parts,ot=ut.length,Bt=this._ctx;if(ot){for(Bt.beginPath(),y=0;y<ot;y++){for(E=0,T=ut[y].length;E<T;E++)Bt[E?"lineTo":"moveTo"]((V=ut[y][E]).x,V.y);c&&Bt.closePath()}this._fillStroke(Bt,s)}}},_updateCircle:function(s){var c,y,E,T;this._drawing&&!s._empty()&&(c=s._point,y=this._ctx,E=Math.max(Math.round(s._radius),1),1!=(T=(Math.max(Math.round(s._radiusY),1)||E)/E)&&(y.save(),y.scale(1,T)),y.beginPath(),y.arc(c.x,c.y/T,E,0,2*Math.PI,!1),1!=T&&y.restore(),this._fillStroke(y,s))},_fillStroke:function(s,c){var y=c.options;y.fill&&(s.globalAlpha=y.fillOpacity,s.fillStyle=y.fillColor||y.color,s.fill(y.fillRule||"evenodd")),y.stroke&&0!==y.weight&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=y.opacity,s.lineWidth=y.weight,s.strokeStyle=y.color,s.lineCap=y.lineCap,s.lineJoin=y.lineJoin,s.stroke())},_onClick:function(s){for(var c,y,E=this._map.mouseEventToLayerPoint(s),T=this._drawFirst;T;T=T.next)(c=T.layer).options.interactive&&c._containsPoint(E)&&(("click"===s.type||"preclick"===s.type)&&this._map._draggableMoved(c)||(y=c));this._fireEvent(!!y&&[y],s)},_onMouseMove:function(s){var c;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(c=this._map.mouseEventToLayerPoint(s),this._handleMouseHover(s,c))},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(Zn(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var y,E,T=this._drawFirst;T;T=T.next)(y=T.layer).options.interactive&&y._containsPoint(c)&&(E=y);E!==this._hoveredLayer&&(this._handleMouseOut(s),E&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([E],s,"mouseover"),this._hoveredLayer=E)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],s),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,y){this._map._fireDOMEvent(c,y||c.type,s)},_bringToFront:function(s){var c,y,E=s._order;E&&(y=E.prev,(c=E.next)&&((c.prev=y)?y.next=c:c&&(this._drawFirst=c),E.prev=this._drawLast,(this._drawLast.next=E).next=null,this._drawLast=E,this._requestRedraw(s)))},_bringToBack:function(s){var c,y,E=s._order;E&&(c=E.next,(y=E.prev)&&((y.next=c)?c.prev=y:y&&(this._drawLast=y),E.prev=null,E.next=this._drawFirst,this._drawFirst.prev=E,this._drawFirst=E,this._requestRedraw(s)))}});function lh(s){return vt.canvas?new Su(s):null}var Po=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ki=(au={_initContainer:function(){this._container=Ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(is.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=Po("shape");Ne(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=Po("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[x(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;Fn(c),s.removeInteractiveTarget(c),delete this._layers[x(s)]},_updateStyle:function(s){var c=s._stroke,y=s._fill,E=s.options,T=s._container;T.stroked=!!E.stroke,T.filled=!!E.fill,E.stroke?(c=c||(s._stroke=Po("stroke")),T.appendChild(c),c.weight=E.weight+"px",c.color=E.color,c.opacity=E.opacity,c.dashStyle=E.dashArray?ht(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):"",c.endcap=E.lineCap.replace("butt","flat"),c.joinstyle=E.lineJoin):c&&(T.removeChild(c),s._stroke=null),E.fill?(y=y||(s._fill=Po("fill")),T.appendChild(y),y.color=E.fillColor||E.color,y.opacity=E.fillOpacity):y&&(T.removeChild(y),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),y=Math.round(s._radius),E=Math.round(s._radiusY||y);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+y+","+E+" 0,23592600")},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){Lr(s._container)},_bringToBack:function(s){hr(s._container)}},vt.vml?Po:Hs),lo=is.extend({_initContainer:function(){this._container=ki("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ki("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Fn(this._container),Bn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){var s,c,y;this._map._animatingZoom&&this._bounds||(is.prototype._update.call(this),c=(s=this._bounds).getSize(),y=this._container,this._svgSize&&this._svgSize.equals(c)||(this._svgSize=c,y.setAttribute("width",c.x),y.setAttribute("height",c.y)),ii(y,s.min),y.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update"))},_initPath:function(s){var c=s._path=ki("path");s.options.className&&Ne(c,s.options.className),s.options.interactive&&Ne(c,"leaflet-interactive"),this._updateStyle(s),this._layers[x(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Fn(s._path),s.removeInteractiveTarget(s._path),delete this._layers[x(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(y){var c=y._path;y=y.options,c&&(y.stroke?(c.setAttribute("stroke",y.color),c.setAttribute("stroke-opacity",y.opacity),c.setAttribute("stroke-width",y.weight),c.setAttribute("stroke-linecap",y.lineCap),c.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?c.setAttribute("stroke-dasharray",y.dashArray):c.removeAttribute("stroke-dasharray"),y.dashOffset?c.setAttribute("stroke-dashoffset",y.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),y.fill?(c.setAttribute("fill",y.fillColor||y.color),c.setAttribute("fill-opacity",y.fillOpacity),c.setAttribute("fill-rule",y.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,vs(s._parts,c))},_updateCircle:function(s){var E=s._point,c=Math.max(Math.round(s._radius),1),y="a"+c+","+(Math.max(Math.round(s._radiusY),1)||c)+" 0 1,0 ";E=s._empty()?"M0 0":"M"+(E.x-c)+","+E.y+y+2*c+",0 "+y+2*-c+",0 ",this._setPath(s,E)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){Lr(s._path)},_bringToBack:function(s){hr(s._path)}});function gl(s){return vt.svg||vt.vml?new lo(s):null}vt.vml&&lo.include(au),Je.include({getRenderer:function(s){return s=(s=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(s){var c;return"overlayPane"!==s&&void 0!==s&&(void 0===(c=this._paneRenderers[s])&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c)},_createRenderer:function(s){return this.options.preferCanvas&&lh(s)||gl(s)}});var Sa=xr.extend({initialize:function(s,c){xr.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return[(s=fe(s)).getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});lo.create=ki,lo.pointsToPath=vs,Wr.geometryToLayer=Ms,Wr.coordsToLatLng=ks,Wr.coordsToLatLngs=ia,Wr.latLngToCoords=wr,Wr.latLngsToCoords=Pa,Wr.getFeature=Er,Wr.asFeature=ra,Je.mergeOptions({boxZoom:!0}),Co=Ci.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Fn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||1!==s.which&&1!==s.button)return!1;this._clearDeferredResetState(),this._resetState(),lr(),Ks(),this._startPoint=this._map.mouseEventToContainerPoint(s),Se(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Ye("div","leaflet-zoom-box",this._container),Ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var y=(c=new me(this._point,this._startPoint)).getSize();ii(this._box,c.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(Fn(this._box),Zn(this._container,"leaflet-crosshair")),Qi(),Js(),Bn(document,{contextmenu:Xr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){1!==s.which&&1!==s.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0),s=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})))},_onKeyDown:function(s){27===s.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}}),Je.addInitHook("addHandler","boxZoom",Co),Je.mergeOptions({doubleClickZoom:!0}),uu=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,E=c.getZoom(),y=c.options.zoomDelta;E=s.originalEvent.shiftKey?E-y:E+y,"center"===c.options.doubleClickZoom?c.setZoom(E):c.setZoomAround(s.containerPoint,E)}});var Kr=(Je.addInitHook("addHandler","doubleClickZoom",uu),Je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),Ci.extend({addHooks:function(){var s;this._draggable||(this._draggable=new Mo((s=this._map)._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))),Ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Zn(this._map._container,"leaflet-grab"),Zn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s,c=this._map;c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(s=fe(this._map.options.maxBounds),this._offsetLimit=He(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){var c,y;this._map.options.inertia&&(c=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(y),this._times.push(c),this._prunePositions(c)),this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;1<this._positions.length&&50<s-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){var s,c;this._viscosity&&this._offsetLimit&&((s=this._draggable._newPos.subtract(this._draggable._startPos)).x<(c=this._offsetLimit).min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s))},_onPreDragWrap:function(){var T=this._worldWidth,s=Math.round(T/2),c=this._initialWorldOffset,y=((E=this._draggable._newPos.x)-s+c)%T+s-c,E=(E+s+c)%T-s-c;T=Math.abs(y+c)<Math.abs(E+c)?y:E,this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(s){var c,y,E,T,V=this._map,ut=V.options,ot=!ut.inertia||s.noInertia||this._times.length<2;V.fire("dragend",s),!ot&&(this._prunePositions(+new Date),ot=(s=(s=this._lastPos.subtract(this._positions[0])).multiplyBy((c=ut.easeLinearity)/(ot=(this._lastTime-this._times[0])/1e3))).distanceTo([0,0]),y=Math.min(ut.inertiaMaxSpeed,ot),s=s.multiplyBy(y/ot),(T=s.multiplyBy(-(E=y/(ut.inertiaDeceleration*c))/2).round()).x||T.y)?(T=V._limitOffset(T,V.options.maxBounds),Gt(function(){V.panBy(T,{duration:E,easeLinearity:c,noMoveStart:!0,animate:!0})})):V.fire("moveend")}})),sa=(Je.addInitHook("addHandler","dragging",Kr),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80}),Ia=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Se(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var s,c,y;this._focused||(y=document.body,s=document.documentElement,c=y.scrollTop||s.scrollTop,y=y.scrollLeft||s.scrollLeft,this._map._container.focus(),window.scrollTo(y,c))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){for(var c=this._panKeys={},y=this.keyCodes,E=0,T=y.left.length;E<T;E++)c[y.left[E]]=[-1*s,0];for(E=0,T=y.right.length;E<T;E++)c[y.right[E]]=[s,0];for(E=0,T=y.down.length;E<T;E++)c[y.down[E]]=[0,s];for(E=0,T=y.up.length;E<T;E++)c[y.up[E]]=[0,-1*s]},_setZoomDelta:function(s){for(var c=this._zoomKeys={},y=this.keyCodes,E=0,T=y.zoomIn.length;E<T;E++)c[y.zoomIn[E]]=s;for(E=0,T=y.zoomOut.length;E<T;E++)c[y.zoomOut[E]]=-s},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c,y,E=s.keyCode,T=this._map;if(E in this._panKeys)T._panAnim&&T._panAnim._inProgress||(y=this._panKeys[E],s.shiftKey&&(y=ie(y).multiplyBy(3)),T.options.maxBounds&&(y=T._limitOffset(ie(y),T.options.maxBounds)),T.options.worldCopyJump?(c=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(y))),T.panTo(c)):T.panBy(y));else if(E in this._zoomKeys)T.setZoom(T.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[E]);else{if(27!==E||!T._popup||!T._popup.options.closeOnEscapeKey)return;T.closePopup()}Xr(s)}}}),Je.addInitHook("addHandler","keyboard",Ia),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),Ta=Ci.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var y=eu(s),c=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date),y=Math.max(c-(+new Date-this._startTime),0),clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),y),Xr(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),y=this._map.options.zoomSnap||0,E=(s._stop(),this._delta/(4*this._map.options.wheelPxPerZoomLevel));E=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,y=y?Math.ceil(E/y)*y:E,E=s._limitZoom(c+(0<this._delta?y:-y))-c,this._delta=0,this._startTime=null,E&&("center"===s.options.scrollWheelZoom?s.setZoom(c+E):s.setZoomAround(this._lastMousePos,c+E))}}),Je.addInitHook("addHandler","scrollWheelZoom",Ta),Je.mergeOptions({tapHold:vt.touchNative&&vt.safari&&vt.mobile,tapTolerance:15}),Da=Ci.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){var c;clearTimeout(this._holdTimeout),1===s.touches.length&&(this._startPos=this._newPos=new jt((c=s.touches[0]).clientX,c.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",hi),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),600),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this))},_cancelClickPrevent:function s(){Bn(document,"touchend",hi),Bn(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Bn(document,"touchend touchcancel contextmenu",this._cancel,this),Bn(document,"touchmove",this._onMove,this)},_onMove:function(s){this._newPos=new jt((s=s.touches[0]).clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){(s=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY}))._simulated=!0,c.target.dispatchEvent(s)}}),Je.addInitHook("addHandler","tapHold",Da),Je.mergeOptions({touchZoom:vt.touch,bounceAtZoomLimits:!0}),Ss=Ci.extend({addHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Zn(this._map._container,"leaflet-touch-zoom"),Bn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c,y,E=this._map;!s.touches||2!==s.touches.length||E._animatingZoom||this._zooming||(c=E.mouseEventToContainerPoint(s.touches[0]),y=E.mouseEventToContainerPoint(s.touches[1]),this._centerPoint=E.getSize()._divideBy(2),this._startLatLng=E.containerPointToLatLng(this._centerPoint),"center"!==E.options.touchZoom&&(this._pinchStartLatLng=E.containerPointToLatLng(c.add(y)._divideBy(2))),this._startDist=c.distanceTo(y),this._startZoom=E.getZoom(),this._moved=!1,this._zooming=!0,E._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),hi(s))},_onTouchMove:function(s){if(s.touches&&2===s.touches.length&&this._zooming){var c=this._map,y=c.mouseEventToContainerPoint(s.touches[0]),E=c.mouseEventToContainerPoint(s.touches[1]),T=y.distanceTo(E)/this._startDist;if(this._zoom=c.getScaleZoom(T,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&T<1||this._zoom>c.getMaxZoom()&&1<T)&&(this._zoom=c._limitZoom(this._zoom)),"center"===c.options.touchZoom){if(this._center=this._startLatLng,1==T)return}else{if(y=y._add(E)._divideBy(2)._subtract(this._centerPoint),1==T&&0===y.x&&0===y.y)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),Yt(this._animRequest),E=h(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0),this._animRequest=Gt(E,this,!0),hi(s)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,Yt(this._animRequest),Bn(document,"touchmove",this._onTouchMove,this),Bn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}}),Je.addInitHook("addHandler","touchZoom",Ss),Je.BoxZoom=Co,Je.DoubleClickZoom=uu,Je.Drag=Kr,Je.Keyboard=Ia,Je.ScrollWheelZoom=Ta,Je.TapHold=Da,Je.TouchZoom=Ss,X.Bounds=me,X.Browser=vt,X.CRS=Di,X.Canvas=Su,X.Circle=na,X.CircleMarker=pr,X.Class=Ft,X.Control=Ai,X.DivIcon=sh,X.DivOverlay=uo,X.DomEvent=Ke,X.DomUtil=so,X.Draggable=Mo,X.Evented=je,X.FeatureGroup=Me,X.GeoJSON=Wr,X.GridLayer=su,X.Handler=Ci,X.Icon=Mn,X.ImageOverlay=ru,X.LatLng=de,X.LatLngBounds=se,X.Layer=Xt,X.LayerGroup=_e,X.LineUtil=et,X.Map=Je,X.Marker=ri,X.Mixin=ts,X.Path=_i,X.Point=jt,X.PolyUtil=Es,X.Polygon=xr,X.Polyline=br,X.Popup=Ps,X.PosAnimation=$s,X.Projection=wt,X.Rectangle=Sa,X.Renderer=is,X.SVG=lo,X.SVGOverlay=ou,X.TileLayer=Ca,X.Tooltip=Cs,X.Transformation=Ki,X.Util=Qt,X.VideoOverlay=oh,X.bind=h,X.bounds=He,X.canvas=lh,X.circle=function(s,c,y){return new na(s,c,y)},X.circleMarker=function(s,c){return new pr(s,c)},X.control=ws,X.divIcon=function(s){return new sh(s)},X.extend=he,X.featureGroup=function(s,c){return new Me(s,c)},X.geoJSON=ns,X.geoJson=oa,X.gridLayer=function(s){return new su(s)},X.icon=function(s){return new Mn(s)},X.imageOverlay=function(s,c,y){return new ru(s,c,y)},X.latLng=we,X.latLngBounds=fe,X.layerGroup=function(s,c){return new _e(s,c)},X.map=function(s,c){return new Je(s,c)},X.marker=function(s,c){return new ri(s,c)},X.point=ie,X.polygon=function(s,c){return new xr(s,c)},X.polyline=function(s,c){return new br(s,c)},X.popup=function(s,c){return new Ps(s,c)},X.rectangle=function(s,c){return new Sa(s,c)},X.setOptions=Et,X.stamp=x,X.svg=gl,X.svgOverlay=function(s,c,y){return new ou(s,c,y)},X.tileLayer=ah,X.tooltip=function(s,c){return new Cs(s,c)},X.transformation=Oi,X.version="1.9.4",X.videoOverlay=function(s,c,y){return new oh(s,c,y)},window.L);X.noConflict=function(){return window.L=sa,this},window.L=X}),function(X,he,wi){var h;L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(h,d){this._map=h,this._container=h._container,this._overlayPane=h._panes.overlayPane,this._popupPane=h._panes.popupPane,d&&d.shapeOptions&&(d.shapeOptions=L.Util.extend({},this.options.shapeOptions,d.shapeOptions)),L.setOptions(this,d);var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(L.DomUtil.disableTextSelection(),h.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(h){L.setOptions(this,h)},_fireCreatedEvent:function(h){this._map.fire(L.Draw.Event.CREATED,{layer:h,layerType:this.type})},_cancelDrawing:function(h){27===h.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(h,d){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,d&&d.drawError&&(d.drawError=L.Util.extend({},this.options.drawError,d.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var h=this._markers.pop(),d=this._poly,x=d.getLatLngs(),I=x.splice(-1,1)[0];this._poly.setLatLngs(x),this._markerGroup.removeLayer(h),d.getLatLngs().length<2&&this._map.removeLayer(d),this._vertexChanged(I,!1)}},addVertex:function(h){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(h)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(h)),this._poly.addLatLng(h),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(h,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var h=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),d=this._poly.newLatLngIntersects(h[h.length-1]);!this.options.allowIntersection&&d||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent),x=this._map.layerPointToLatLng(d);this._currentLatLng=x,this._updateTooltip(x),this._updateGuide(d),this._mouseMarker.setLatLng(x),L.DomEvent.preventDefault(h.originalEvent)},_vertexChanged:function(h,d){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(h,d),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(h){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(h),this._clickHandled=!0,this._disableNewMarkers();var d=h.originalEvent;this._startPoint.call(this,d.clientX,d.clientY)}},_startPoint:function(h,d){this._mouseDownOrigin=L.point(h,d)},_onMouseUp:function(h){var d=h.originalEvent;this._endPoint.call(this,d.clientX,d.clientY,h),this._clickHandled=null},_endPoint:function(h,d,x){if(this._mouseDownOrigin){var I=L.point(h,d).distanceTo(this._mouseDownOrigin),U=this._calculateFinishDistance(x.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(x.latlng),this._finishShape()):U<10&&L.Browser.touch?this._finishShape():Math.abs(I)<9*(X.devicePixelRatio||1)&&this.addVertex(x.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(h){var d,x,I=h.originalEvent;!I.touches||!I.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(d=I.touches[0].clientX,x=I.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,d,x),this._endPoint.call(this,d,x,h),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(h){var d;if(this._markers.length>0){var x;if(this.type===L.Draw.Polyline.TYPE)x=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;x=this._markers[0]}var I=this._map.latLngToContainerPoint(x.getLatLng()),U=new L.Marker(h,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),N=this._map.latLngToContainerPoint(U.getLatLng());d=I.distanceTo(N)}else d=1/0;return d},_updateFinishHandler:function(){var h=this._markers.length;h>1&&this._markers[h-1].on("click",this._finishShape,this),h>2&&this._markers[h-2].off("click",this._finishShape,this)},_createMarker:function(h){var d=new L.Marker(h,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(d),d},_updateGuide:function(h){var d=this._markers?this._markers.length:0;d>0&&(h=h||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[d-1].getLatLng()),h))},_updateTooltip:function(h){var d=this._getTooltipText();h&&this._tooltip.updatePosition(h),this._errorShown||this._tooltip.updateContent(d)},_drawGuide:function(h,d){var x,I,U,N=Math.floor(Math.sqrt(Math.pow(d.x-h.x,2)+Math.pow(d.y-h.y,2))),tt=this.options.maxGuideLineLength,bt=N>tt?N-tt:this.options.guidelineDistance;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));bt<N;bt+=this.options.guidelineDistance)x=bt/N,I={x:Math.floor(h.x*(1-x)+x*d.x),y:Math.floor(h.y*(1-x)+x*d.y)},(U=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(U,I)},_updateGuideColor:function(h){if(this._guidesContainer)for(var d=0,x=this._guidesContainer.childNodes.length;d<x;d++)this._guidesContainer.childNodes[d].style.backgroundColor=h},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var h,d;return 0===this._markers.length?h={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(d=this.options.showLength?this._getMeasurementString():"",h=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:d}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:d}),h},_updateRunningMeasure:function(h,d){var x,I,U=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(x=U-(d?2:1),I=L.GeometryUtil.isVersion07x()?h.distanceTo(this._markers[x].getLatLng())*(this.options.factor||1):this._map.distance(h,this._markers[x].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=I*(d?1:-1))},_getMeasurementString:function(){var h,d=this._currentLatLng,x=this._markers[this._markers.length-1].getLatLng();return h=L.GeometryUtil.isVersion07x()?x&&d&&d.distanceTo?this._measurementRunningTotal+d.distanceTo(x)*(this.options.factor||1):this._measurementRunningTotal||0:x&&d?this._measurementRunningTotal+this._map.distance(d,x)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(h,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var h=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(h,d){L.Draw.Polyline.prototype.initialize.call(this,h,d),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var h=this._markers.length;1===h&&this._markers[0].on("click",this._finishShape,this),h>2&&(this._markers[h-1].on("dblclick",this._finishShape,this),h>3&&this._markers[h-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var h,d;return 0===this._markers.length?h=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(h=L.drawLocal.draw.handlers.polygon.tooltip.cont,d=this._getMeasurementString()):(h=L.drawLocal.draw.handlers.polygon.tooltip.end,d=this._getMeasurementString()),{text:h,subtext:d}},_getMeasurementString:function(){var h=this._area,d="";return h||this.options.showLength?(this.options.showLength&&(d=L.Draw.Polyline.prototype._getMeasurementString.call(this)),h&&(d+="<br>"+L.GeometryUtil.readableArea(h,this.options.metric,this.options.precision)),d):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(h,d){var x;!this.options.allowIntersection&&this.options.showArea&&(x=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(x)),L.Draw.Polyline.prototype._vertexChanged.call(this,h,d)},_cleanUpShape:function(){var h=this._markers.length;h>0&&(this._markers[0].off("click",this._finishShape,this),h>2&&this._markers[h-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(h,d){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),he.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(he,"mouseup",this._onMouseUp,this),L.DomEvent.off(he,"touchend",this._onMouseUp,this),he.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(h){this._isDrawing=!0,this._startLatLng=h.latlng,L.DomEvent.on(he,"mouseup",this._onMouseUp,this).on(he,"touchend",this._onMouseUp,this).preventDefault(h.originalEvent)},_onMouseMove:function(h){var d=h.latlng;this._tooltip.updatePosition(d),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(d))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(h,d){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,h,d)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(h){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function Y(h,d){for(;(h=h.parentElement)&&!h.classList.contains(d););return h}(h.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(h){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,h)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,h),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var h=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,h)},_getTooltipText:function(){var h,d,x,I=L.Draw.SimpleShape.prototype._getTooltipText.call(this),N=this.options.showArea;return this._shape&&(h=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=L.GeometryUtil.geodesicArea(h),x=N?L.GeometryUtil.readableArea(d,this.options.metric):""),{text:I.text,subtext:x}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(h,d){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(h){var d=h.latlng;this._tooltip.updatePosition(d),this._mouseMarker.setLatLng(d),this._marker?(d=this._mouseMarker.getLatLng(),this._marker.setLatLng(d)):(this._marker=this._createMarker(d),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(h){return new L.Marker(h,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(h){this._onMouseMove(h),this._onClick()},_fireCreatedEvent:function(){var h=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(h,d){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,h,d)},_fireCreatedEvent:function(){var h=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)},_createMarker:function(h){return new L.CircleMarker(h,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(h,d){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,h,d)},_drawShape:function(h){if(L.GeometryUtil.isVersion07x())var d=this._startLatLng.distanceTo(h);else d=this._map.distance(this._startLatLng,h);this._shape?this._shape.setRadius(d):(this._shape=new L.Circle(this._startLatLng,d,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var h=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,h)},_onMouseMove:function(h){var d,x=h.latlng,I=this.options.showRadius,U=this.options.metric;if(this._tooltip.updatePosition(x),this._isDrawing){this._drawShape(x),d=this._shape.getRadius().toFixed(1);var N="";I&&(N=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(d,U,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:N})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(h,d){this._marker=h,L.setOptions(this,d)},addHooks:function(){var h=this._marker;h.dragging.enable(),h.on("dragend",this._onDragEnd,h),this._toggleMarkerHighlight()},removeHooks:function(){var h=this._marker;h.dragging.disable(),h.off("dragend",this._onDragEnd,h),this._toggleMarkerHighlight()},_onDragEnd:function(h){var d=h.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_toggleMarkerHighlight:function(){var h=this._marker._icon;h&&(h.style.display="none",L.DomUtil.hasClass(h,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(h,"leaflet-edit-marker-selected"),this._offsetMarker(h,-4)):(L.DomUtil.addClass(h,"leaflet-edit-marker-selected"),this._offsetMarker(h,4)),h.style.display="")},_offsetMarker:function(h,d){var x=parseInt(h.style.marginTop,10)-d,I=parseInt(h.style.marginLeft,10)-d;h.style.marginTop=x+"px",h.style.marginLeft=I+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(h){this.latlngs=[h._latlngs],h._holes&&(this.latlngs=this.latlngs.concat(h._holes)),this._poly=h,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(h){for(var d=0;d<this._verticesHandlers.length;d++)h(this._verticesHandlers[d])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(h){h.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(h){h.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(h){h.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var h=0;h<this.latlngs.length;h++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[h],this._poly.options.poly))},_updateLatLngs:function(h){this.latlngs=[h.layer._latlngs],h.layer._holes&&(this.latlngs=this.latlngs.concat(h.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(h,d,x){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=h,x&&x.drawError&&(x.drawError=L.Util.extend({},this.options.drawError,x.drawError)),this._latlngs=d,L.setOptions(this,x)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var h=this._poly,d=h._path;h instanceof L.Polygon||(h.options.fill=!1,h.options.editing&&(h.options.editing.fill=!1)),d&&h.options.editing&&h.options.editing.className&&(h.options.original.className&&h.options.original.className.split(" ").forEach(function(x){L.DomUtil.removeClass(d,x)}),h.options.editing.className.split(" ").forEach(function(x){L.DomUtil.addClass(d,x)})),h.setStyle(h.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var h=this._poly,d=h._path;d&&h.options.editing&&h.options.editing.className&&(h.options.editing.className.split(" ").forEach(function(x){L.DomUtil.removeClass(d,x)}),h.options.original.className&&h.options.original.className.split(" ").forEach(function(x){L.DomUtil.addClass(d,x)})),h.setStyle(h.options.original),h._map&&(h._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var h,d,x,I,N,H,U=this._defaultShape();for(h=0,x=U.length;h<x;h++)(I=this._createMarker(U[h],h)).on("click",this._onMarkerClick,this),I.on("contextmenu",this._onContextMenu,this),this._markers.push(I);for(h=0,d=x-1;h<x;d=h++)(0!==h||L.Polygon&&this._poly instanceof L.Polygon)&&(this._createMiddleMarker(N=this._markers[d],H=this._markers[h]),this._updatePrevNext(N,H))},_createMarker:function(h,d){var x=new L.Marker.Touch(h,{draggable:!0,icon:this.options.icon});return x._origLatLng=h,x._index=d,x.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(x),x},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var h=this._defaultShape(),d=[].splice.apply(h,arguments);return this._poly._convertLatLngs(h,!0),this._poly.redraw(),d},_removeMarker:function(h){var d=h._index;this._markerGroup.removeLayer(h),this._markers.splice(d,1),this._spliceLatLngs(d,1),this._updateIndexes(d,-1),h.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(h){var d=h.target,x=this._poly,I=L.LatLngUtil.cloneLatLng(d._origLatLng);if(L.extend(d._origLatLng,d._latlng),x.options.poly){var U=x._map._editTooltip;if(!x.options.poly.allowIntersection&&x.intersects()){L.extend(d._origLatLng,I),d.setLatLng(I);var N=x.options.color;x.setStyle({color:this.options.drawError.color}),U&&U.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){x.setStyle({color:N}),U&&U.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var H=this._poly.getLatLngs();this._poly._convertLatLngs(H,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(h){var d=L.Polygon&&this._poly instanceof L.Polygon?4:3,x=h.target;this._defaultShape().length<d||(this._removeMarker(x),this._updatePrevNext(x._prev,x._next),x._middleLeft&&this._markerGroup.removeLayer(x._middleLeft),x._middleRight&&this._markerGroup.removeLayer(x._middleRight),x._prev&&x._next?this._createMiddleMarker(x._prev,x._next):x._prev?x._next||(x._prev._middleRight=null):x._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(h){this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:h.target,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent.touches[0]),x=this._map.layerPointToLatLng(d),I=h.target;L.extend(I._origLatLng,x),I._middleLeft&&I._middleLeft.setLatLng(this._getMiddleLatLng(I._prev,I)),I._middleRight&&I._middleRight.setLatLng(this._getMiddleLatLng(I,I._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(h,d){this._markerGroup.eachLayer(function(x){x._index>h&&(x._index+=d)})},_createMiddleMarker:function(h,d){var x,I,U,N=this._getMiddleLatLng(h,d),H=this._createMarker(N);H.setOpacity(.6),h._middleRight=d._middleLeft=H,I=function(){H.off("touchmove",I,this);var tt=d._index;H._index=tt,H.off("click",x,this).on("click",this._onMarkerClick,this),N.lat=H.getLatLng().lat,N.lng=H.getLatLng().lng,this._spliceLatLngs(tt,0,N),this._markers.splice(tt,0,H),H.setOpacity(1),this._updateIndexes(tt,1),d._index++,this._updatePrevNext(h,H),this._updatePrevNext(H,d),this._poly.fire("editstart")},U=function(){H.off("dragstart",I,this),H.off("dragend",U,this),H.off("touchmove",I,this),this._createMiddleMarker(h,H),this._createMiddleMarker(H,d)},H.on("click",x=function(){I.call(this),U.call(this),this._fireEdit()},this).on("dragstart",I,this).on("dragend",U,this).on("touchmove",I,this),this._markerGroup.addLayer(H)},_updatePrevNext:function(h,d){h&&(h._next=d),d&&(d._prev=h)},_getMiddleLatLng:function(h,d){var x=this._poly._map,I=x.project(h.getLatLng()),U=x.project(d.getLatLng());return x.unproject(I._add(U)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(h,d){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=h,L.Util.setOptions(this,d)},addHooks:function(){var h=this._shape;this._shape._map&&(this._map=this._shape._map,h.setStyle(h.options.editing),h._map&&(this._map=h._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var h=this._shape;if(h.setStyle(h.options.original),h._map){this._unbindMarker(this._moveMarker);for(var d=0,x=this._resizeMarkers.length;d<x;d++)this._unbindMarker(this._resizeMarkers[d]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(h,d){var x=new L.Marker.Touch(h,{draggable:!0,icon:d,zIndexOffset:10});return this._bindMarker(x),this._markerGroup.addLayer(x),x},_bindMarker:function(h){h.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(h){h.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(h){h.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(h){var d=h.target,x=d.getLatLng();d===this._moveMarker?this._move(x):this._resize(x),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(h){h.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(h){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,h),"function"==typeof this._getCorners){var d=this._getCorners(),x=h.target,I=x._cornerIndex;x.setOpacity(0),this._oppositeCorner=d[(I+2)%4],this._toggleCornerMarkers(0,I)}this._shape.fire("editstart")},_onTouchMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent.touches[0]),x=this._map.layerPointToLatLng(d);return h.target===this._moveMarker?this._move(x):this._resize(x),this._shape.redraw(),!1},_onTouchEnd:function(h){h.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var d=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(d,this.options.moveIcon)},_createResizeMarker:function(){var h=this._getCorners();this._resizeMarkers=[];for(var d=0,x=h.length;d<x;d++)this._resizeMarkers.push(this._createMarker(h[d],this.options.resizeIcon)),this._resizeMarkers[d]._cornerIndex=d},_onMarkerDragStart:function(h){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,h);var d=this._getCorners(),I=h.target._cornerIndex;this._oppositeCorner=d[(I+2)%4],this._toggleCornerMarkers(0,I)},_onMarkerDragEnd:function(h){var x,I=h.target;I===this._moveMarker&&(x=this._shape.getBounds().getCenter(),I.setLatLng(x)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,h)},_move:function(h){for(var d,x=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),U=this._shape.getBounds().getCenter(),N=[],H=0,tt=x.length;H<tt;H++)N.push([h.lat+(d=[x[H].lat-U.lat,x[H].lng-U.lng])[0],h.lng+d[1]]);this._shape.setLatLngs(N),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(h){var d;this._shape.setBounds(L.latLngBounds(h,this._oppositeCorner)),d=this._shape.getBounds(),this._moveMarker.setLatLng(d.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var h=this._shape.getBounds();return[h.getNorthWest(),h.getNorthEast(),h.getSouthEast(),h.getSouthWest()]},_toggleCornerMarkers:function(h){for(var d=0,x=this._resizeMarkers.length;d<x;d++)this._resizeMarkers[d].setOpacity(h)},_repositionCornerMarkers:function(){for(var h=this._getCorners(),d=0,x=this._resizeMarkers.length;d<x;d++)this._resizeMarkers[d].setLatLng(h[d])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var h=this._shape.getLatLng();this._moveMarker=this._createMarker(h,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(h){if(this._resizeMarkers.length){var d=this._getResizeMarkerPoint(h);this._resizeMarkers[0].setLatLng(d)}this._shape.setLatLng(h),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var h=this._shape.getLatLng(),d=this._getResizeMarkerPoint(h);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(d,this.options.resizeIcon))},_getResizeMarkerPoint:function(h){var d=this._shape._radius*Math.cos(Math.PI/4),x=this._map.project(h);return this._map.unproject([x.x+d,x.y-d])},_resize:function(h){var d=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=d.distanceTo(h):radius=this._map.distance(d,h),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(h,d){var x={};if(void 0!==h.touches){if(!h.touches.length)return;x=h.touches[0]}else if("touch"!==h.pointerType||(x=h,!this._filterClick(h)))return;var I=this._map.mouseEventToContainerPoint(x),U=this._map.mouseEventToLayerPoint(x),N=this._map.layerPointToLatLng(U);this._map.fire(d,{latlng:N,layerPoint:U,containerPoint:I,pageX:x.pageX,pageY:x.pageY,originalEvent:h})},_filterClick:function(h){var d=h.timeStamp||h.originalEvent.timeStamp,x=L.DomEvent._lastClick&&d-L.DomEvent._lastClick;return x&&x>100&&x<500||h.target._simulatedClick&&!h._simulated?(L.DomEvent.stop(h),!1):(L.DomEvent._lastClick=d,!0)},_onTouchStart:function(h){this._map._loaded&&this._touchEvent(h,"touchstart")},_onTouchEnd:function(h){this._map._loaded&&this._touchEvent(h,"touchend")},_onTouchCancel:function(h){if(this._map._loaded){var d="touchcancel";this._detectIE()&&(d="pointercancel"),this._touchEvent(h,d)}},_onTouchLeave:function(h){this._map._loaded&&this._touchEvent(h,"touchleave")},_onTouchMove:function(h){this._map._loaded&&this._touchEvent(h,"touchmove")},_detectIE:function(){var h=X.navigator.userAgent,d=h.indexOf("MSIE ");if(d>0)return parseInt(h.substring(d+5,h.indexOf(".",d)),10);if(h.indexOf("Trident/")>0){var x=h.indexOf("rv:");return parseInt(h.substring(x+3,h.indexOf(".",x)),10)}var I=h.indexOf("Edge/");return I>0&&parseInt(h.substring(I+5,h.indexOf(".",I)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var h=this._icon,d=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];d.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(h,"leaflet-clickable"),L.DomEvent.on(h,"click",this._onMouseClick,this),L.DomEvent.on(h,"keypress",this._onKeyPress,this);for(var x=0;x<d.length;x++)L.DomEvent.on(h,d[x],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var h=X.navigator.userAgent,d=h.indexOf("MSIE ");if(d>0)return parseInt(h.substring(d+5,h.indexOf(".",d)),10);if(h.indexOf("Trident/")>0){var x=h.indexOf("rv:");return parseInt(h.substring(x+3,h.indexOf(".",x)),10)}var I=h.indexOf("Edge/");return I>0&&parseInt(h.substring(I+5,h.indexOf(".",I)),10)}}),L.LatLngUtil={cloneLatLngs:function(h){for(var d=[],x=0,I=h.length;x<I;x++)Array.isArray(h[x])?d.push(L.LatLngUtil.cloneLatLngs(h[x])):d.push(this.cloneLatLng(h[x]));return d},cloneLatLng:function(h){return L.latLng(h.lat,h.lng)}},h={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(d){var x,I,U=d.length,N=0,H=Math.PI/180;if(U>2){for(var tt=0;tt<U;tt++)N+=((I=d[(tt+1)%U]).lng-(x=d[tt]).lng)*H*(2+Math.sin(x.lat*H)+Math.sin(I.lat*H));N=6378137*N*6378137/2}return Math.abs(N)},formattedNumber:function(d,x){var I=parseFloat(d).toFixed(x),U=L.drawLocal.format&&L.drawLocal.format.numeric,N=U&&U.delimiters,H=N&&N.thousands,tt=N&&N.decimal;if(H||tt){var bt=I.split(".");I=H?bt[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+H):bt[0],tt=tt||".",bt.length>1&&(I=I+tt+bt[1])}return I},readableArea:function(d,x,H){var U,N;return H=L.Util.extend({},h,H),x?(N=["ha","m"],type=typeof x,"string"===type?N=[x]:"boolean"!==type&&(N=x),U=d>=1e6&&-1!==N.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*d,H.km)+" km\xb2":d>=1e4&&-1!==N.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*d,H.ha)+" ha":L.GeometryUtil.formattedNumber(d,H.m)+" m\xb2"):U=(d/=.836127)>=3097600?L.GeometryUtil.formattedNumber(d/3097600,H.mi)+" mi\xb2":d>=4840?L.GeometryUtil.formattedNumber(d/4840,H.ac)+" acres":L.GeometryUtil.formattedNumber(d,H.yd)+" yd\xb2",U},readableDistance:function(d,x,I,U,tt){var H;switch(tt=L.Util.extend({},h,tt),x?"string"==typeof x?x:"metric":I?"feet":U?"nauticalMile":"yards"){case"metric":H=d>1e3?L.GeometryUtil.formattedNumber(d/1e3,tt.km)+" km":L.GeometryUtil.formattedNumber(d,tt.m)+" m";break;case"feet":d*=3.28083,H=L.GeometryUtil.formattedNumber(d,tt.ft)+" ft";break;case"nauticalMile":d*=.53996,H=L.GeometryUtil.formattedNumber(d/1e3,tt.nm)+" nm";break;default:H=(d*=1.09361)>1760?L.GeometryUtil.formattedNumber(d/1760,tt.mi)+" miles":L.GeometryUtil.formattedNumber(d,tt.yd)+" yd"}return H},isVersion07x:function(){var d=L.version.split(".");return 0===parseInt(d[0],10)&&7===parseInt(d[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(h,d,x,I){return this._checkCounterclockwise(h,x,I)!==this._checkCounterclockwise(d,x,I)&&this._checkCounterclockwise(h,d,x)!==this._checkCounterclockwise(h,d,I)},_checkCounterclockwise:function(h,d,x){return(x.y-h.y)*(d.x-h.x)>(d.y-h.y)*(x.x-h.x)}}),L.Polyline.include({intersects:function(){var h,I=this._getProjectedPoints(),U=I?I.length:0;if(this._tooFewPointsForIntersection())return!1;for(h=U-1;h>=3;h--)if(this._lineSegmentsIntersectsRange(I[h-1],I[h],h-2))return!0;return!1},newLatLngIntersects:function(h,d){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(h),d)},newPointIntersects:function(h,d){var x=this._getProjectedPoints(),I=x?x.length:0,U=x?x[I-1]:null,N=I-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(U,h,N,d?1:0)},_tooFewPointsForIntersection:function(h){var d=this._getProjectedPoints(),x=d?d.length:0;return!d||(x+=h||0)<=3},_lineSegmentsIntersectsRange:function(h,d,x,I){var H=this._getProjectedPoints();I=I||0;for(var tt=x;tt>I;tt--)if(L.LineUtil.segmentsIntersect(h,d,H[tt-1],H[tt]))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var h=[],d=this._defaultShape(),x=0;x<d.length;x++)h.push(this._map.latLngToLayerPoint(d[x]));return h}}),L.Polygon.include({intersects:function(){var h,U=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||this._lineSegmentsIntersectsRange(U[(h=U.length)-1],U[0],h-2,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(h){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var d;L.Control.prototype.initialize.call(this,h),this._toolbars={},L.DrawToolbar&&this.options.draw&&(d=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=d,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(d=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=d,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(h){var d,x=L.DomUtil.create("div","leaflet-draw"),I=!1;for(var U in this._toolbars)this._toolbars.hasOwnProperty(U)&&(d=this._toolbars[U].addToolbar(h))&&(I||(L.DomUtil.hasClass(d,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(d.childNodes[0],"leaflet-draw-toolbar-top"),I=!0),x.appendChild(d));return x},onRemove:function(){for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&this._toolbars[h].removeToolbar()},setDrawingOptions:function(h){for(var d in this._toolbars)this._toolbars[d]instanceof L.DrawToolbar&&this._toolbars[d].setOptions(h)},_toolbarEnabled:function(h){var d=h.target;for(var x in this._toolbars)this._toolbars[x]!==d&&this._toolbars[x].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(h){L.setOptions(this,h),this._modes={},this._actionButtons=[],this._activeMode=null;var d=L.version.split(".");1===parseInt(d[0],10)&&parseInt(d[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(h){var d,x=L.DomUtil.create("div","leaflet-draw-section"),I=0,U=this._toolbarClass||"",N=this.getModeHandlers(h);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=h,d=0;d<N.length;d++)N[d].enabled&&this._initModeHandler(N[d].handler,this._toolbarContainer,I++,U,N[d].title);if(I)return this._lastButtonIndex=--I,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),x.appendChild(this._toolbarContainer),x.appendChild(this._actionsContainer),x},removeToolbar:function(){for(var h in this._modes)this._modes.hasOwnProperty(h)&&(this._disposeButton(this._modes[h].button,this._modes[h].handler.enable,this._modes[h].handler),this._modes[h].handler.disable(),this._modes[h].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var d=0,x=this._actionButtons.length;d<x;d++)this._disposeButton(this._actionButtons[d].button,this._actionButtons[d].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(h,d,x,I,U){var N=h.type;this._modes[N]={},this._modes[N].handler=h,this._modes[N].button=this._createButton({type:N,title:U,className:I+"-"+N,container:d,callback:this._modes[N].handler.enable,context:this._modes[N].handler}),this._modes[N].buttonIndex=x,this._modes[N].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!X.MSStream},_createButton:function(h){var d=L.DomUtil.create("a",h.className||"",h.container),x=L.DomUtil.create("span","sr-only",h.container);d.href="#",d.appendChild(x),h.title&&(d.title=h.title,x.innerHTML=h.title),h.text&&(d.innerHTML=h.text,x.innerHTML=h.text);var I=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(d,"click",L.DomEvent.stopPropagation).on(d,"mousedown",L.DomEvent.stopPropagation).on(d,"dblclick",L.DomEvent.stopPropagation).on(d,"touchstart",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.preventDefault).on(d,I,h.callback,h.context),d},_disposeButton:function(h,d){var x=this._detectIOS()?"touchstart":"click";L.DomEvent.off(h,"click",L.DomEvent.stopPropagation).off(h,"mousedown",L.DomEvent.stopPropagation).off(h,"dblclick",L.DomEvent.stopPropagation).off(h,"touchstart",L.DomEvent.stopPropagation).off(h,"click",L.DomEvent.preventDefault).off(h,x,d)},_handlerActivated:function(h){this.disable(),this._activeMode=this._modes[h.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(h){var d,x,I,U,N=this._actionsContainer,H=this.getActions(h),tt=H.length;for(x=0,I=this._actionButtons.length;x<I;x++)this._disposeButton(this._actionButtons[x].button,this._actionButtons[x].callback);for(this._actionButtons=[];N.firstChild;)N.removeChild(N.firstChild);for(var bt=0;bt<tt;bt++)"enabled"in H[bt]&&!H[bt].enabled||(d=L.DomUtil.create("li","",N),U=this._createButton({title:H[bt].title,text:H[bt].text,container:d,callback:H[bt].callback,context:H[bt].context}),this._actionButtons.push({button:U,callback:H[bt].callback}))},_showActionsToolbar:function(){var h=this._activeMode.buttonIndex,d=this._lastButtonIndex,x=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=x+"px",0===h&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),h===d&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(h){this._map=h,this._popupPane=h._panes.popupPane,this._visible=!1,this._container=h.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(h){return this._container?(h.subtext=h.subtext||"",0!==h.subtext.length||this._singleLineLabel?h.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(h.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+h.subtext+"</span><br />":"")+"<span>"+h.text+"</span>",h.text||h.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(h){var d=this._map.latLngToLayerPoint(h),x=this._container;return this._container&&(this._visible&&(x.style.visibility="inherit"),L.DomUtil.setPosition(x,d)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(h){for(var d in this.options)this.options.hasOwnProperty(d)&&h[d]&&(h[d]=L.extend({},this.options[d],h[d]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,h)},getModeHandlers:function(h){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(h,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(h,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(h,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(h,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(h,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(h,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(h){return[{enabled:h.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:h.completeShape,context:h},{enabled:h.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:h.deleteLastVertex,context:h},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(h){for(var d in L.setOptions(this,h),this._modes)this._modes.hasOwnProperty(d)&&h.hasOwnProperty(d)&&this._modes[d].handler.setOptions(h[d])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(h){h.edit&&(void 0===h.edit.selectedPathOptions&&(h.edit.selectedPathOptions=this.options.edit.selectedPathOptions),h.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,h.edit.selectedPathOptions)),h.remove&&(h.remove=L.extend({},this.options.remove,h.remove)),h.poly&&(h.poly=L.extend({},this.options.poly,h.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,h),this._selectedFeatureCount=0},getModeHandlers:function(h){var d=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(h,{featureGroup:d,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(h,{featureGroup:d}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(h){var d=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return h.removeAllLayers&&d.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),d},addToolbar:function(h){var d=L.Toolbar.prototype.addToolbar.call(this,h);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),d},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var h,x=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(h=this._modes[L.EditToolbar.Edit.TYPE].button,x?L.DomUtil.removeClass(h,"leaflet-disabled"):L.DomUtil.addClass(h,"leaflet-disabled"),h.setAttribute("title",x?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(h=this._modes[L.EditToolbar.Delete.TYPE].button,x?L.DomUtil.removeClass(h,"leaflet-disabled"):L.DomUtil.addClass(h,"leaflet-disabled"),h.setAttribute("title",x?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(h,d){if(L.Handler.prototype.initialize.call(this,h),L.setOptions(this,d),this._featureGroup=d.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(h.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),h._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(h){this._revertLayer(h)},this)},save:function(){var h=new L.LayerGroup;this._featureGroup.eachLayer(function(d){d.edited&&(h.addLayer(d),d.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:h})},_backupLayer:function(h){var d=L.Util.stamp(h);this._uneditedLayerProps[d]||(h instanceof L.Polyline||h instanceof L.Polygon||h instanceof L.Rectangle?this._uneditedLayerProps[d]={latlngs:L.LatLngUtil.cloneLatLngs(h.getLatLngs())}:h instanceof L.Circle?this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(h.getLatLng()),radius:h.getRadius()}:(h instanceof L.Marker||h instanceof L.CircleMarker)&&(this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(h.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(h){var d=L.Util.stamp(h);h.edited=!1,this._uneditedLayerProps.hasOwnProperty(d)&&(h instanceof L.Polyline||h instanceof L.Polygon||h instanceof L.Rectangle?h.setLatLngs(this._uneditedLayerProps[d].latlngs):h instanceof L.Circle?(h.setLatLng(this._uneditedLayerProps[d].latlng),h.setRadius(this._uneditedLayerProps[d].radius)):(h instanceof L.Marker||h instanceof L.CircleMarker)&&h.setLatLng(this._uneditedLayerProps[d].latlng),h.fire("revert-edited",{layer:h}))},_enableLayerEdit:function(h){var d,x,I=h.layer||h.target||h;this._backupLayer(I),this.options.poly&&(x=L.Util.extend({},this.options.poly),I.options.poly=x),this.options.selectedPathOptions&&((d=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(d.color=I.options.color,d.fillColor=I.options.fillColor),I.options.original=L.extend({},I.options),I.options.editing=d),I instanceof L.Marker?(I.editing&&I.editing.enable(),I.dragging.enable(),I.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):I.editing.enable()},_disableLayerEdit:function(h){var d=h.layer||h.target||h;d.edited=!1,d.editing&&d.editing.disable(),delete d.options.editing,delete d.options.original,this._selectedPathOptions&&(d instanceof L.Marker?this._toggleMarkerHighlight(d):(d.setStyle(d.options.previousOptions),delete d.options.previousOptions)),d instanceof L.Marker?(d.dragging.disable(),d.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.disable()},_onMouseMove:function(h){this._tooltip.updatePosition(h.latlng)},_onMarkerDragEnd:function(h){var d=h.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_onTouchMove:function(h){var x=this._map.mouseEventToLayerPoint(h.originalEvent.changedTouches[0]),I=this._map.layerPointToLatLng(x);h.target.setLatLng(I)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(h,d){if(L.Handler.prototype.initialize.call(this,h),L.Util.setOptions(this,d),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(h.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(h){this._deletableLayers.addLayer(h),h.fire("revert-deleted",{layer:h})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(h){this._removeLayer({layer:h})},this),this.save()},_enableLayerDelete:function(h){(h.layer||h.target||h).on("click",this._removeLayer,this)},_disableLayerDelete:function(h){var d=h.layer||h.target||h;d.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(d)},_removeLayer:function(h){var d=h.layer||h.target||h;this._deletableLayers.removeLayer(d),this._deletedLayers.addLayer(d),d.fire("deleted")},_onMouseMove:function(h){this._tooltip.updatePosition(h.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document),function(X,he,wi){var h;L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(h,d){this._map=h,this._container=h._container,this._overlayPane=h._panes.overlayPane,this._popupPane=h._panes.popupPane,d&&d.shapeOptions&&(d.shapeOptions=L.Util.extend({},this.options.shapeOptions,d.shapeOptions)),L.setOptions(this,d);var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(L.DomUtil.disableTextSelection(),h.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(h){L.setOptions(this,h)},_fireCreatedEvent:function(h){this._map.fire(L.Draw.Event.CREATED,{layer:h,layerType:this.type})},_cancelDrawing:function(h){27===h.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(h,d){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,d&&d.drawError&&(d.drawError=L.Util.extend({},this.options.drawError,d.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var h=this._markers.pop(),d=this._poly,x=d.getLatLngs(),I=x.splice(-1,1)[0];this._poly.setLatLngs(x),this._markerGroup.removeLayer(h),d.getLatLngs().length<2&&this._map.removeLayer(d),this._vertexChanged(I,!1)}},addVertex:function(h){this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(h)?this._showErrorTooltip():(this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(h)),this._poly.addLatLng(h),2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly),this._vertexChanged(h,!0))},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var h=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),d=this._poly.newLatLngIntersects(h[h.length-1]);!this.options.allowIntersection&&d||!this._shapeIsValid()?this._showErrorTooltip():(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent),x=this._map.layerPointToLatLng(d);this._currentLatLng=x,this._updateTooltip(x),this._updateGuide(d),this._mouseMarker.setLatLng(x),L.DomEvent.preventDefault(h.originalEvent)},_vertexChanged:function(h,d){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(h,d),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(h){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(h),this._clickHandled=!0,this._disableNewMarkers();var d=h.originalEvent;this._startPoint.call(this,d.clientX,d.clientY)}},_startPoint:function(h,d){this._mouseDownOrigin=L.point(h,d)},_onMouseUp:function(h){var d=h.originalEvent;this._endPoint.call(this,d.clientX,d.clientY,h),this._clickHandled=null},_endPoint:function(h,d,x){if(this._mouseDownOrigin){var I=L.point(h,d).distanceTo(this._mouseDownOrigin),U=this._calculateFinishDistance(x.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(x.latlng),this._finishShape()):U<10&&L.Browser.touch?this._finishShape():Math.abs(I)<9*(X.devicePixelRatio||1)&&this.addVertex(x.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(h){var x,I,d=h.originalEvent;d.touches&&d.touches[0]&&!this._clickHandled&&!this._touchHandled&&!this._disableMarkers&&(x=d.touches[0].clientX,I=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,x,I),this._endPoint.call(this,x,I,h),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(h){var d;if(this._markers.length>0){var x;if(this.type===L.Draw.Polyline.TYPE)x=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;x=this._markers[0]}var I=this._map.latLngToContainerPoint(x.getLatLng()),U=new L.Marker(h,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),N=this._map.latLngToContainerPoint(U.getLatLng());d=I.distanceTo(N)}else d=1/0;return d},_updateFinishHandler:function(){var h=this._markers.length;h>1&&this._markers[h-1].on("click",this._finishShape,this),h>2&&this._markers[h-2].off("click",this._finishShape,this)},_createMarker:function(h){var d=new L.Marker(h,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(d),d},_updateGuide:function(h){var d=this._markers?this._markers.length:0;d>0&&(h=h||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[d-1].getLatLng()),h))},_updateTooltip:function(h){var d=this._getTooltipText();h&&this._tooltip.updatePosition(h),this._errorShown||this._tooltip.updateContent(d)},_drawGuide:function(h,d){var H,tt,bt,x=Math.floor(Math.sqrt(Math.pow(d.x-h.x,2)+Math.pow(d.y-h.y,2))),U=this.options.maxGuideLineLength,N=x>U?x-U:this.options.guidelineDistance;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));N<x;N+=this.options.guidelineDistance)H=N/x,tt={x:Math.floor(h.x*(1-H)+H*d.x),y:Math.floor(h.y*(1-H)+H*d.y)},(bt=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer)).style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(bt,tt)},_updateGuideColor:function(h){if(this._guidesContainer)for(var d=0,x=this._guidesContainer.childNodes.length;d<x;d++)this._guidesContainer.childNodes[d].style.backgroundColor=h},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var d,x;return 0===this._markers.length?d={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(x=this.options.showLength?this._getMeasurementString():"",d=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:x}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:x}),d},_updateRunningMeasure:function(h,d){var I,U,x=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(I=x-(d?2:1),U=L.GeometryUtil.isVersion07x()?h.distanceTo(this._markers[I].getLatLng())*(this.options.factor||1):this._map.distance(h,this._markers[I].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=U*(d?1:-1))},_getMeasurementString:function(){var x,h=this._currentLatLng,d=this._markers[this._markers.length-1].getLatLng();return x=L.GeometryUtil.isVersion07x()?d&&h&&h.distanceTo?this._measurementRunningTotal+h.distanceTo(d)*(this.options.factor||1):this._measurementRunningTotal||0:d&&h?this._measurementRunningTotal+this._map.distance(h,d)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(x,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var h=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(h,d){L.Draw.Polyline.prototype.initialize.call(this,h,d),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var h=this._markers.length;1===h&&this._markers[0].on("click",this._finishShape,this),h>2&&(this._markers[h-1].on("dblclick",this._finishShape,this),h>3&&this._markers[h-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var h,d;return 0===this._markers.length?h=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(h=L.drawLocal.draw.handlers.polygon.tooltip.cont,d=this._getMeasurementString()):(h=L.drawLocal.draw.handlers.polygon.tooltip.end,d=this._getMeasurementString()),{text:h,subtext:d}},_getMeasurementString:function(){var h=this._area,d="";return h||this.options.showLength?(this.options.showLength&&(d=L.Draw.Polyline.prototype._getMeasurementString.call(this)),h&&(d+="<br>"+L.GeometryUtil.readableArea(h,this.options.metric,this.options.precision)),d):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(h,d){var x;!this.options.allowIntersection&&this.options.showArea&&(x=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(x)),L.Draw.Polyline.prototype._vertexChanged.call(this,h,d)},_cleanUpShape:function(){var h=this._markers.length;h>0&&(this._markers[0].off("click",this._finishShape,this),h>2&&this._markers[h-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(h,d){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),he.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(he,"mouseup",this._onMouseUp,this),L.DomEvent.off(he,"touchend",this._onMouseUp,this),he.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(h){this._isDrawing=!0,this._startLatLng=h.latlng,L.DomEvent.on(he,"mouseup",this._onMouseUp,this).on(he,"touchend",this._onMouseUp,this).preventDefault(h.originalEvent)},_onMouseMove:function(h){var d=h.latlng;this._tooltip.updatePosition(d),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(d))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(h,d){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,h,d)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(h){this._shape||this._isCurrentlyTwoClickDrawing?this._isCurrentlyTwoClickDrawing&&!function Y(h,d){for(;(h=h.parentElement)&&!h.classList.contains(d););return h}(h.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this):this._isCurrentlyTwoClickDrawing=!0},_drawShape:function(h){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,h)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,h),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var h=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,h)},_getTooltipText:function(){var I,U,N,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),x=this.options.showArea;return this._shape&&(I=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),U=L.GeometryUtil.geodesicArea(I),N=x?L.GeometryUtil.readableArea(U,this.options.metric):""),{text:h.text,subtext:N}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(h,d){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,h,d)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(h){var d=h.latlng;this._tooltip.updatePosition(d),this._mouseMarker.setLatLng(d),this._marker?(d=this._mouseMarker.getLatLng(),this._marker.setLatLng(d)):(this._marker=this._createMarker(d),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(h){return new L.Marker(h,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(h){this._onMouseMove(h),this._onClick()},_fireCreatedEvent:function(){var h=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(h,d){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,h,d)},_fireCreatedEvent:function(){var h=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,h)},_createMarker:function(h){return new L.CircleMarker(h,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(h,d){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,h,d)},_drawShape:function(h){if(L.GeometryUtil.isVersion07x())var d=this._startLatLng.distanceTo(h);else d=this._map.distance(this._startLatLng,h);this._shape?this._shape.setRadius(d):(this._shape=new L.Circle(this._startLatLng,d,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var h=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,h)},_onMouseMove:function(h){var U,d=h.latlng,x=this.options.showRadius,I=this.options.metric;if(this._tooltip.updatePosition(d),this._isDrawing){this._drawShape(d),U=this._shape.getRadius().toFixed(1);var N="";x&&(N=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(U,I,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:N})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(h,d){this._marker=h,L.setOptions(this,d)},addHooks:function(){var h=this._marker;h.dragging.enable(),h.on("dragend",this._onDragEnd,h),this._toggleMarkerHighlight()},removeHooks:function(){var h=this._marker;h.dragging.disable(),h.off("dragend",this._onDragEnd,h),this._toggleMarkerHighlight()},_onDragEnd:function(h){var d=h.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_toggleMarkerHighlight:function(){var h=this._marker._icon;h&&(h.style.display="none",L.DomUtil.hasClass(h,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(h,"leaflet-edit-marker-selected"),this._offsetMarker(h,-4)):(L.DomUtil.addClass(h,"leaflet-edit-marker-selected"),this._offsetMarker(h,4)),h.style.display="")},_offsetMarker:function(h,d){var x=parseInt(h.style.marginTop,10)-d,I=parseInt(h.style.marginLeft,10)-d;h.style.marginTop=x+"px",h.style.marginLeft=I+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(h){this.latlngs=[h._latlngs],h._holes&&(this.latlngs=this.latlngs.concat(h._holes)),this._poly=h,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(h){for(var d=0;d<this._verticesHandlers.length;d++)h(this._verticesHandlers[d])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(h){h.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(h){h.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(h){h.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var h=0;h<this.latlngs.length;h++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[h],this._poly.options.poly))},_updateLatLngs:function(h){this.latlngs=[h.layer._latlngs],h.layer._holes&&(this.latlngs=this.latlngs.concat(h.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(h,d,x){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=h,x&&x.drawError&&(x.drawError=L.Util.extend({},this.options.drawError,x.drawError)),this._latlngs=d,L.setOptions(this,x)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var h=this._poly,d=h._path;h instanceof L.Polygon||(h.options.fill=!1,h.options.editing&&(h.options.editing.fill=!1)),d&&h.options.editing&&h.options.editing.className&&(h.options.original.className&&h.options.original.className.split(" ").forEach(function(x){L.DomUtil.removeClass(d,x)}),h.options.editing.className.split(" ").forEach(function(x){L.DomUtil.addClass(d,x)})),h.setStyle(h.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var h=this._poly,d=h._path;d&&h.options.editing&&h.options.editing.className&&(h.options.editing.className.split(" ").forEach(function(x){L.DomUtil.removeClass(d,x)}),h.options.original.className&&h.options.original.className.split(" ").forEach(function(x){L.DomUtil.addClass(d,x)})),h.setStyle(h.options.original),h._map&&(h._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var d,x,I,U,N,H,h=this._defaultShape();for(d=0,I=h.length;d<I;d++)(U=this._createMarker(h[d],d)).on("click",this._onMarkerClick,this),U.on("contextmenu",this._onContextMenu,this),this._markers.push(U);for(d=0,x=I-1;d<I;x=d++)0===d&&!(L.Polygon&&this._poly instanceof L.Polygon)||(this._createMiddleMarker(N=this._markers[x],H=this._markers[d]),this._updatePrevNext(N,H))},_createMarker:function(h,d){var x=new L.Marker.Touch(h,{draggable:!0,icon:this.options.icon});return x._origLatLng=h,x._index=d,x.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(x),x},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var h=this._defaultShape(),d=[].splice.apply(h,arguments);return this._poly._convertLatLngs(h,!0),this._poly.redraw(),d},_removeMarker:function(h){var d=h._index;this._markerGroup.removeLayer(h),this._markers.splice(d,1),this._spliceLatLngs(d,1),this._updateIndexes(d,-1),h.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(h){var d=h.target,x=this._poly,I=L.LatLngUtil.cloneLatLng(d._origLatLng);if(L.extend(d._origLatLng,d._latlng),x.options.poly){var U=x._map._editTooltip;if(!x.options.poly.allowIntersection&&x.intersects()){L.extend(d._origLatLng,I),d.setLatLng(I);var N=x.options.color;x.setStyle({color:this.options.drawError.color}),U&&U.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){x.setStyle({color:N}),U&&U.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var H=this._poly.getLatLngs();this._poly._convertLatLngs(H,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(h){var d=L.Polygon&&this._poly instanceof L.Polygon?4:3,x=h.target;this._defaultShape().length<d||(this._removeMarker(x),this._updatePrevNext(x._prev,x._next),x._middleLeft&&this._markerGroup.removeLayer(x._middleLeft),x._middleRight&&this._markerGroup.removeLayer(x._middleRight),x._prev&&x._next?this._createMiddleMarker(x._prev,x._next):x._prev?x._next||(x._prev._middleRight=null):x._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(h){this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:h.target,layers:this._markerGroup,poly:this._poly}),L},_onTouchMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent.touches[0]),x=this._map.layerPointToLatLng(d),I=h.target;L.extend(I._origLatLng,x),I._middleLeft&&I._middleLeft.setLatLng(this._getMiddleLatLng(I._prev,I)),I._middleRight&&I._middleRight.setLatLng(this._getMiddleLatLng(I,I._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(h,d){this._markerGroup.eachLayer(function(x){x._index>h&&(x._index+=d)})},_createMiddleMarker:function(h,d){var U,N,H,x=this._getMiddleLatLng(h,d),I=this._createMarker(x);I.setOpacity(.6),h._middleRight=d._middleLeft=I,N=function(){I.off("touchmove",N,this);var tt=d._index;I._index=tt,I.off("click",U,this).on("click",this._onMarkerClick,this),x.lat=I.getLatLng().lat,x.lng=I.getLatLng().lng,this._spliceLatLngs(tt,0,x),this._markers.splice(tt,0,I),I.setOpacity(1),this._updateIndexes(tt,1),d._index++,this._updatePrevNext(h,I),this._updatePrevNext(I,d),this._poly.fire("editstart")},H=function(){I.off("dragstart",N,this),I.off("dragend",H,this),I.off("touchmove",N,this),this._createMiddleMarker(h,I),this._createMiddleMarker(I,d)},I.on("click",U=function(){N.call(this),H.call(this),this._fireEdit()},this).on("dragstart",N,this).on("dragend",H,this).on("touchmove",N,this),this._markerGroup.addLayer(I)},_updatePrevNext:function(h,d){h&&(h._next=d),d&&(d._prev=h)},_getMiddleLatLng:function(h,d){var x=this._poly._map,I=x.project(h.getLatLng()),U=x.project(d.getLatLng());return x.unproject(I._add(U)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(h,d){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=h,L.Util.setOptions(this,d)},addHooks:function(){var h=this._shape;this._shape._map&&(this._map=this._shape._map,h.setStyle(h.options.editing),h._map&&(this._map=h._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var h=this._shape;if(h.setStyle(h.options.original),h._map){this._unbindMarker(this._moveMarker);for(var d=0,x=this._resizeMarkers.length;d<x;d++)this._unbindMarker(this._resizeMarkers[d]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(h,d){var x=new L.Marker.Touch(h,{draggable:!0,icon:d,zIndexOffset:10});return this._bindMarker(x),this._markerGroup.addLayer(x),x},_bindMarker:function(h){h.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(h){h.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(h){h.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(h){var d=h.target,x=d.getLatLng();d===this._moveMarker?this._move(x):this._resize(x),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(h){h.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(h){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,h),"function"==typeof this._getCorners){var d=this._getCorners(),x=h.target,I=x._cornerIndex;x.setOpacity(0),this._oppositeCorner=d[(I+2)%4],this._toggleCornerMarkers(0,I)}this._shape.fire("editstart")},_onTouchMove:function(h){var d=this._map.mouseEventToLayerPoint(h.originalEvent.touches[0]),x=this._map.layerPointToLatLng(d);return h.target===this._moveMarker?this._move(x):this._resize(x),this._shape.redraw(),!1},_onTouchEnd:function(h){h.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var d=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(d,this.options.moveIcon)},_createResizeMarker:function(){var h=this._getCorners();this._resizeMarkers=[];for(var d=0,x=h.length;d<x;d++)this._resizeMarkers.push(this._createMarker(h[d],this.options.resizeIcon)),this._resizeMarkers[d]._cornerIndex=d},_onMarkerDragStart:function(h){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,h);var d=this._getCorners(),I=h.target._cornerIndex;this._oppositeCorner=d[(I+2)%4],this._toggleCornerMarkers(0,I)},_onMarkerDragEnd:function(h){var I,d=h.target;d===this._moveMarker&&(I=this._shape.getBounds().getCenter(),d.setLatLng(I)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,h)},_move:function(h){for(var U,d=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),I=this._shape.getBounds().getCenter(),N=[],H=0,tt=d.length;H<tt;H++)N.push([h.lat+(U=[d[H].lat-I.lat,d[H].lng-I.lng])[0],h.lng+U[1]]);this._shape.setLatLngs(N),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(h){var d;this._shape.setBounds(L.latLngBounds(h,this._oppositeCorner)),d=this._shape.getBounds(),this._moveMarker.setLatLng(d.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var h=this._shape.getBounds();return[h.getNorthWest(),h.getNorthEast(),h.getSouthEast(),h.getSouthWest()]},_toggleCornerMarkers:function(h){for(var d=0,x=this._resizeMarkers.length;d<x;d++)this._resizeMarkers[d].setOpacity(h)},_repositionCornerMarkers:function(){for(var h=this._getCorners(),d=0,x=this._resizeMarkers.length;d<x;d++)this._resizeMarkers[d].setLatLng(h[d])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var h=this._shape.getLatLng();this._moveMarker=this._createMarker(h,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(h){if(this._resizeMarkers.length){var d=this._getResizeMarkerPoint(h);this._resizeMarkers[0].setLatLng(d)}this._shape.setLatLng(h),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var h=this._shape.getLatLng(),d=this._getResizeMarkerPoint(h);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(d,this.options.resizeIcon))},_getResizeMarkerPoint:function(h){var d=this._shape._radius*Math.cos(Math.PI/4),x=this._map.project(h);return this._map.unproject([x.x+d,x.y-d])},_resize:function(h){var d=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=d.distanceTo(h):radius=this._map.distance(d,h),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(h,d){var x={};if(typeof h.touches<"u"){if(!h.touches.length)return;x=h.touches[0]}else{if("touch"!==h.pointerType)return;if(x=h,!this._filterClick(h))return}var I=this._map.mouseEventToContainerPoint(x),U=this._map.mouseEventToLayerPoint(x),N=this._map.layerPointToLatLng(U);this._map.fire(d,{latlng:N,layerPoint:U,containerPoint:I,pageX:x.pageX,pageY:x.pageY,originalEvent:h})},_filterClick:function(h){var d=h.timeStamp||h.originalEvent.timeStamp,x=L.DomEvent._lastClick&&d-L.DomEvent._lastClick;return x&&x>100&&x<500||h.target._simulatedClick&&!h._simulated?(L.DomEvent.stop(h),!1):(L.DomEvent._lastClick=d,!0)},_onTouchStart:function(h){this._map._loaded&&this._touchEvent(h,"touchstart")},_onTouchEnd:function(h){this._map._loaded&&this._touchEvent(h,"touchend")},_onTouchCancel:function(h){if(this._map._loaded){var d="touchcancel";this._detectIE()&&(d="pointercancel"),this._touchEvent(h,d)}},_onTouchLeave:function(h){this._map._loaded&&this._touchEvent(h,"touchleave")},_onTouchMove:function(h){this._map._loaded&&this._touchEvent(h,"touchmove")},_detectIE:function(){var h=X.navigator.userAgent,d=h.indexOf("MSIE ");if(d>0)return parseInt(h.substring(d+5,h.indexOf(".",d)),10);if(h.indexOf("Trident/")>0){var I=h.indexOf("rv:");return parseInt(h.substring(I+3,h.indexOf(".",I)),10)}var U=h.indexOf("Edge/");return U>0&&parseInt(h.substring(U+5,h.indexOf(".",U)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var h=this._icon,d=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];d.concat(this._detectIE?["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]:["touchcancel"]),L.DomUtil.addClass(h,"leaflet-clickable"),L.DomEvent.on(h,"click",this._onMouseClick,this),L.DomEvent.on(h,"keypress",this._onKeyPress,this);for(var x=0;x<d.length;x++)L.DomEvent.on(h,d[x],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var h=X.navigator.userAgent,d=h.indexOf("MSIE ");if(d>0)return parseInt(h.substring(d+5,h.indexOf(".",d)),10);if(h.indexOf("Trident/")>0){var I=h.indexOf("rv:");return parseInt(h.substring(I+3,h.indexOf(".",I)),10)}var U=h.indexOf("Edge/");return U>0&&parseInt(h.substring(U+5,h.indexOf(".",U)),10)}}),L.LatLngUtil={cloneLatLngs:function(h){for(var d=[],x=0,I=h.length;x<I;x++)Array.isArray(h[x])?d.push(L.LatLngUtil.cloneLatLngs(h[x])):d.push(this.cloneLatLng(h[x]));return d},cloneLatLng:function(h){return L.latLng(h.lat,h.lng)}},h={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(d){var N,H,x=d.length,I=0,U=Math.PI/180;if(x>2){for(var tt=0;tt<x;tt++)I+=((H=d[(tt+1)%x]).lng-(N=d[tt]).lng)*U*(2+Math.sin(N.lat*U)+Math.sin(H.lat*U));I=6378137*I*6378137/2}return Math.abs(I)},formattedNumber:function(d,x){var I=parseFloat(d).toFixed(x),U=L.drawLocal.format&&L.drawLocal.format.numeric,N=U&&U.delimiters,H=N&&N.thousands,tt=N&&N.decimal;if(H||tt){var bt=I.split(".");I=H?bt[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+H):bt[0],tt=tt||".",bt.length>1&&(I=I+tt+bt[1])}return I},readableArea:function(d,x,H){var U,N;return H=L.Util.extend({},h,H),x?(N=["ha","m"],type=typeof x,"string"===type?N=[x]:"boolean"!==type&&(N=x),U=d>=1e6&&-1!==N.indexOf("km")?L.GeometryUtil.formattedNumber(1e-6*d,H.km)+" km\xb2":d>=1e4&&-1!==N.indexOf("ha")?L.GeometryUtil.formattedNumber(1e-4*d,H.ha)+" ha":L.GeometryUtil.formattedNumber(d,H.m)+" m\xb2"):U=(d/=.836127)>=3097600?L.GeometryUtil.formattedNumber(d/3097600,H.mi)+" mi\xb2":d>=4840?L.GeometryUtil.formattedNumber(d/4840,H.ac)+" acres":L.GeometryUtil.formattedNumber(d,H.yd)+" yd\xb2",U},readableDistance:function(d,x,I,U,bt){var H;switch(bt=L.Util.extend({},h,bt),x?"string"==typeof x?x:"metric":I?"feet":U?"nauticalMile":"yards"){case"metric":H=d>1e3?L.GeometryUtil.formattedNumber(d/1e3,bt.km)+" km":L.GeometryUtil.formattedNumber(d,bt.m)+" m";break;case"feet":d*=3.28083,H=L.GeometryUtil.formattedNumber(d,bt.ft)+" ft";break;case"nauticalMile":d*=.53996,H=L.GeometryUtil.formattedNumber(d/1e3,bt.nm)+" nm";break;default:H=(d*=1.09361)>1760?L.GeometryUtil.formattedNumber(d/1760,bt.mi)+" miles":L.GeometryUtil.formattedNumber(d,bt.yd)+" yd"}return H},isVersion07x:function(){var d=L.version.split(".");return 0===parseInt(d[0],10)&&7===parseInt(d[1],10)}}),L.Util.extend(L.LineUtil,{segmentsIntersect:function(h,d,x,I){return this._checkCounterclockwise(h,x,I)!==this._checkCounterclockwise(d,x,I)&&this._checkCounterclockwise(h,d,x)!==this._checkCounterclockwise(h,d,I)},_checkCounterclockwise:function(h,d,x){return(x.y-h.y)*(d.x-h.x)>(d.y-h.y)*(x.x-h.x)}}),L.Polyline.include({intersects:function(){var x,h=this._getProjectedPoints(),d=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(x=d-1;x>=3;x--)if(this._lineSegmentsIntersectsRange(h[x-1],h[x],x-2))return!0;return!1},newLatLngIntersects:function(h,d){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(h),d)},newPointIntersects:function(h,d){var x=this._getProjectedPoints(),I=x?x.length:0,U=x?x[I-1]:null,N=I-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(U,h,N,d?1:0)},_tooFewPointsForIntersection:function(h){var d=this._getProjectedPoints(),x=d?d.length:0;return!d||(x+=h||0)<=3},_lineSegmentsIntersectsRange:function(h,d,x,I){var U=this._getProjectedPoints();I=I||0;for(var tt=x;tt>I;tt--)if(L.LineUtil.segmentsIntersect(h,d,U[tt-1],U[tt]))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var h=[],d=this._defaultShape(),x=0;x<d.length;x++)h.push(this._map.latLngToLayerPoint(d[x]));return h}}),L.Polygon.include({intersects:function(){var x,d=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||this._lineSegmentsIntersectsRange(d[(x=d.length)-1],d[0],x-2,1))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(h){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");var d;L.Control.prototype.initialize.call(this,h),this._toolbars={},L.DrawToolbar&&this.options.draw&&(d=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=d,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(d=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=d,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(h){var U,d=L.DomUtil.create("div","leaflet-draw"),x=!1,I="leaflet-draw-toolbar-top";for(var N in this._toolbars)this._toolbars.hasOwnProperty(N)&&(U=this._toolbars[N].addToolbar(h))&&(x||(L.DomUtil.hasClass(U,I)||L.DomUtil.addClass(U.childNodes[0],I),x=!0),d.appendChild(U));return d},onRemove:function(){for(var h in this._toolbars)this._toolbars.hasOwnProperty(h)&&this._toolbars[h].removeToolbar()},setDrawingOptions:function(h){for(var d in this._toolbars)this._toolbars[d]instanceof L.DrawToolbar&&this._toolbars[d].setOptions(h)},_toolbarEnabled:function(h){var d=h.target;for(var x in this._toolbars)this._toolbars[x]!==d&&this._toolbars[x].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(h){L.setOptions(this,h),this._modes={},this._actionButtons=[],this._activeMode=null;var d=L.version.split(".");1===parseInt(d[0],10)&&parseInt(d[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(h){var N,d=L.DomUtil.create("div","leaflet-draw-section"),x=0,I=this._toolbarClass||"",U=this.getModeHandlers(h);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=h,N=0;N<U.length;N++)U[N].enabled&&this._initModeHandler(U[N].handler,this._toolbarContainer,x++,I,U[N].title);if(x)return this._lastButtonIndex=--x,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),d.appendChild(this._toolbarContainer),d.appendChild(this._actionsContainer),d},removeToolbar:function(){for(var h in this._modes)this._modes.hasOwnProperty(h)&&(this._disposeButton(this._modes[h].button,this._modes[h].handler.enable,this._modes[h].handler),this._modes[h].handler.disable(),this._modes[h].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var d=0,x=this._actionButtons.length;d<x;d++)this._disposeButton(this._actionButtons[d].button,this._actionButtons[d].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(h,d,x,I,U){var N=h.type;this._modes[N]={},this._modes[N].handler=h,this._modes[N].button=this._createButton({type:N,title:U,className:I+"-"+N,container:d,callback:this._modes[N].handler.enable,context:this._modes[N].handler}),this._modes[N].buttonIndex=x,this._modes[N].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!X.MSStream},_createButton:function(h){var d=L.DomUtil.create("a",h.className||"",h.container),x=L.DomUtil.create("span","sr-only",h.container);d.href="#",d.appendChild(x),h.title&&(d.title=h.title,x.innerHTML=h.title),h.text&&(d.innerHTML=h.text,x.innerHTML=h.text);var I=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(d,"click",L.DomEvent.stopPropagation).on(d,"mousedown",L.DomEvent.stopPropagation).on(d,"dblclick",L.DomEvent.stopPropagation).on(d,"touchstart",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.preventDefault).on(d,I,h.callback,h.context),d},_disposeButton:function(h,d){var x=this._detectIOS()?"touchstart":"click";L.DomEvent.off(h,"click",L.DomEvent.stopPropagation).off(h,"mousedown",L.DomEvent.stopPropagation).off(h,"dblclick",L.DomEvent.stopPropagation).off(h,"touchstart",L.DomEvent.stopPropagation).off(h,"click",L.DomEvent.preventDefault).off(h,x,d)},_handlerActivated:function(h){this.disable(),this._activeMode=this._modes[h.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(h){var U,N,H,tt,d=this._actionsContainer,x=this.getActions(h),I=x.length;for(N=0,H=this._actionButtons.length;N<H;N++)this._disposeButton(this._actionButtons[N].button,this._actionButtons[N].callback);for(this._actionButtons=[];d.firstChild;)d.removeChild(d.firstChild);for(var bt=0;bt<I;bt++)"enabled"in x[bt]&&!x[bt].enabled||(U=L.DomUtil.create("li","",d),tt=this._createButton({title:x[bt].title,text:x[bt].text,container:U,callback:x[bt].callback,context:x[bt].context}),this._actionButtons.push({button:tt,callback:x[bt].callback}))},_showActionsToolbar:function(){var h=this._activeMode.buttonIndex,d=this._lastButtonIndex,x=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=x+"px",0===h&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),h===d&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(h){this._map=h,this._popupPane=h._panes.popupPane,this._visible=!1,this._container=h.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(h){return this._container?(h.subtext=h.subtext||"",0!==h.subtext.length||this._singleLineLabel?h.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(h.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+h.subtext+"</span><br />":"")+"<span>"+h.text+"</span>",h.text||h.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(h){var d=this._map.latLngToLayerPoint(h),x=this._container;return this._container&&(this._visible&&(x.style.visibility="inherit"),L.DomUtil.setPosition(x,d)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(h){for(var d in this.options)this.options.hasOwnProperty(d)&&h[d]&&(h[d]=L.extend({},this.options[d],h[d]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,h)},getModeHandlers:function(h){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(h,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(h,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(h,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(h,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(h,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(h,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(h){return[{enabled:h.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:h.completeShape,context:h},{enabled:h.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:h.deleteLastVertex,context:h},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(h){for(var d in L.setOptions(this,h),this._modes)this._modes.hasOwnProperty(d)&&h.hasOwnProperty(d)&&this._modes[d].handler.setOptions(h[d])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(h){h.edit&&(typeof h.edit.selectedPathOptions>"u"&&(h.edit.selectedPathOptions=this.options.edit.selectedPathOptions),h.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,h.edit.selectedPathOptions)),h.remove&&(h.remove=L.extend({},this.options.remove,h.remove)),h.poly&&(h.poly=L.extend({},this.options.poly,h.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,h),this._selectedFeatureCount=0},getModeHandlers:function(h){var d=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(h,{featureGroup:d,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(h,{featureGroup:d}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(h){var d=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return h.removeAllLayers&&d.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),d},addToolbar:function(h){var d=L.Toolbar.prototype.addToolbar.call(this,h);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),d},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var x,d=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(x=this._modes[L.EditToolbar.Edit.TYPE].button,d?L.DomUtil.removeClass(x,"leaflet-disabled"):L.DomUtil.addClass(x,"leaflet-disabled"),x.setAttribute("title",d?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(x=this._modes[L.EditToolbar.Delete.TYPE].button,d?L.DomUtil.removeClass(x,"leaflet-disabled"):L.DomUtil.addClass(x,"leaflet-disabled"),x.setAttribute("title",d?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(h,d){if(L.Handler.prototype.initialize.call(this,h),L.setOptions(this,d),this._featureGroup=d.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){this._enabled||!this._hasAvailableLayers()||(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(h.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),h._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(h){this._revertLayer(h)},this)},save:function(){var h=new L.LayerGroup;this._featureGroup.eachLayer(function(d){d.edited&&(h.addLayer(d),d.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:h})},_backupLayer:function(h){var d=L.Util.stamp(h);this._uneditedLayerProps[d]||(h instanceof L.Polyline||h instanceof L.Polygon||h instanceof L.Rectangle?this._uneditedLayerProps[d]={latlngs:L.LatLngUtil.cloneLatLngs(h.getLatLngs())}:h instanceof L.Circle?this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(h.getLatLng()),radius:h.getRadius()}:(h instanceof L.Marker||h instanceof L.CircleMarker)&&(this._uneditedLayerProps[d]={latlng:L.LatLngUtil.cloneLatLng(h.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(h){var d=L.Util.stamp(h);h.edited=!1,this._uneditedLayerProps.hasOwnProperty(d)&&(h instanceof L.Polyline||h instanceof L.Polygon||h instanceof L.Rectangle?h.setLatLngs(this._uneditedLayerProps[d].latlngs):h instanceof L.Circle?(h.setLatLng(this._uneditedLayerProps[d].latlng),h.setRadius(this._uneditedLayerProps[d].radius)):(h instanceof L.Marker||h instanceof L.CircleMarker)&&h.setLatLng(this._uneditedLayerProps[d].latlng),h.fire("revert-edited",{layer:h}))},_enableLayerEdit:function(h){var x,I,d=h.layer||h.target||h;this._backupLayer(d),this.options.poly&&(I=L.Util.extend({},this.options.poly),d.options.poly=I),this.options.selectedPathOptions&&((x=L.Util.extend({},this.options.selectedPathOptions)).maintainColor&&(x.color=d.options.color,x.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=x),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(h){var d=h.layer||h.target||h;d.edited=!1,d.editing&&d.editing.disable(),delete d.options.editing,delete d.options.original,this._selectedPathOptions&&(d instanceof L.Marker?this._toggleMarkerHighlight(d):(d.setStyle(d.options.previousOptions),delete d.options.previousOptions)),d instanceof L.Marker?(d.dragging.disable(),d.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.disable()},_onMouseMove:function(h){this._tooltip.updatePosition(h.latlng)},_onMarkerDragEnd:function(h){var d=h.target;d.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:d})},_onTouchMove:function(h){var x=this._map.mouseEventToLayerPoint(h.originalEvent.changedTouches[0]),I=this._map.layerPointToLatLng(x);h.target.setLatLng(I)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(h,d){if(L.Handler.prototype.initialize.call(this,h),L.Util.setOptions(this,d),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var x=L.version.split(".");1===parseInt(x[0],10)&&parseInt(x[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){this._enabled||!this._hasAvailableLayers()||(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var h=this._map;h&&(h.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(h){this._deletableLayers.addLayer(h),h.fire("revert-deleted",{layer:h})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(h){this._removeLayer({layer:h})},this),this.save()},_enableLayerDelete:function(h){(h.layer||h.target||h).on("click",this._removeLayer,this)},_disableLayerDelete:function(h){var d=h.layer||h.target||h;d.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(d)},_removeLayer:function(h){var d=h.layer||h.target||h;this._deletableLayers.removeLayer(d),this._deletedLayers.addLayer(d),d.fire("deleted")},_onMouseMove:function(h){this._tooltip.updatePosition(h.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document),(()=>{var X={9705:(Y,h,d)=>{"use strict";var x=d(1540);function I(U){var N=[1/0,1/0,-1/0,-1/0];return x.coordEach(U,function(H){N[0]>H[0]&&(N[0]=H[0]),N[1]>H[1]&&(N[1]=H[1]),N[2]<H[0]&&(N[2]=H[0]),N[3]<H[1]&&(N[3]=H[1])}),N}I.default=I,h.Z=I},4102:(Y,h)=>{"use strict";function d(ht,_t,xt){void 0===xt&&(xt={});var K={type:"Feature"};return(0===xt.id||xt.id)&&(K.id=xt.id),xt.bbox&&(K.bbox=xt.bbox),K.properties=_t||{},K.geometry=ht,K}function x(ht,_t,xt){if(void 0===xt&&(xt={}),!ht)throw new Error("coordinates is required");if(!Array.isArray(ht))throw new Error("coordinates must be an Array");if(ht.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!St(ht[0])||!St(ht[1]))throw new Error("coordinates must contain numbers");return d({type:"Point",coordinates:ht},_t,xt)}function I(ht,_t,xt){void 0===xt&&(xt={});for(var K=0,st=ht;K<st.length;K++){var mt=st[K];if(mt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var zt=0;zt<mt[mt.length-1].length;zt++)if(mt[mt.length-1][zt]!==mt[0][zt])throw new Error("First and last Position are not equivalent.")}return d({type:"Polygon",coordinates:ht},_t,xt)}function U(ht,_t,xt){if(void 0===xt&&(xt={}),ht.length<2)throw new Error("coordinates must be an array of two or more positions");return d({type:"LineString",coordinates:ht},_t,xt)}function N(ht,_t){void 0===_t&&(_t={});var xt={type:"FeatureCollection"};return _t.id&&(xt.id=_t.id),_t.bbox&&(xt.bbox=_t.bbox),xt.features=ht,xt}function H(ht,_t,xt){return void 0===xt&&(xt={}),d({type:"MultiLineString",coordinates:ht},_t,xt)}function tt(ht,_t,xt){return void 0===xt&&(xt={}),d({type:"MultiPoint",coordinates:ht},_t,xt)}function bt(ht,_t,xt){return void 0===xt&&(xt={}),d({type:"MultiPolygon",coordinates:ht},_t,xt)}function Et(ht,_t){void 0===_t&&(_t="kilometers");var xt=h.factors[_t];if(!xt)throw new Error(_t+" units is invalid");return ht*xt}function Ct(ht,_t){void 0===_t&&(_t="kilometers");var xt=h.factors[_t];if(!xt)throw new Error(_t+" units is invalid");return ht/xt}function dt(ht){return ht%(2*Math.PI)*180/Math.PI}function St(ht){return!isNaN(ht)&&null!==ht&&!Array.isArray(ht)}Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=6371008.8,h.factors={centimeters:100*h.earthRadius,centimetres:100*h.earthRadius,degrees:h.earthRadius/111325,feet:3.28084*h.earthRadius,inches:39.37*h.earthRadius,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:1e3*h.earthRadius,millimetres:1e3*h.earthRadius,nauticalmiles:h.earthRadius/1852,radians:1,yards:1.0936*h.earthRadius},h.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},h.feature=d,h.geometry=function(ht,_t,xt){switch(void 0===xt&&(xt={}),ht){case"Point":return x(_t).geometry;case"LineString":return U(_t).geometry;case"Polygon":return I(_t).geometry;case"MultiPoint":return tt(_t).geometry;case"MultiLineString":return H(_t).geometry;case"MultiPolygon":return bt(_t).geometry;default:throw new Error(ht+" is invalid")}},h.point=x,h.points=function(ht,_t,xt){return void 0===xt&&(xt={}),N(ht.map(function(K){return x(K,_t)}),xt)},h.polygon=I,h.polygons=function(ht,_t,xt){return void 0===xt&&(xt={}),N(ht.map(function(K){return I(K,_t)}),xt)},h.lineString=U,h.lineStrings=function(ht,_t,xt){return void 0===xt&&(xt={}),N(ht.map(function(K){return U(K,_t)}),xt)},h.featureCollection=N,h.multiLineString=H,h.multiPoint=tt,h.multiPolygon=bt,h.geometryCollection=function(ht,_t,xt){return void 0===xt&&(xt={}),d({type:"GeometryCollection",geometries:ht},_t,xt)},h.round=function(ht,_t){if(void 0===_t&&(_t=0),_t&&!(_t>=0))throw new Error("precision must be a positive number");var xt=Math.pow(10,_t||0);return Math.round(ht*xt)/xt},h.radiansToLength=Et,h.lengthToRadians=Ct,h.lengthToDegrees=function(ht,_t){return dt(Ct(ht,_t))},h.bearingToAzimuth=function(ht){var _t=ht%360;return _t<0&&(_t+=360),_t},h.radiansToDegrees=dt,h.degreesToRadians=function(ht){return ht%360*Math.PI/180},h.convertLength=function(ht,_t,xt){if(void 0===_t&&(_t="kilometers"),void 0===xt&&(xt="kilometers"),!(ht>=0))throw new Error("length must be a positive number");return Et(Ct(ht,_t),xt)},h.convertArea=function(ht,_t,xt){if(void 0===_t&&(_t="meters"),void 0===xt&&(xt="kilometers"),!(ht>=0))throw new Error("area must be a positive number");var K=h.areaFactors[_t];if(!K)throw new Error("invalid original units");var st=h.areaFactors[xt];if(!st)throw new Error("invalid final units");return ht/K*st},h.isNumber=St,h.isObject=function(ht){return!!ht&&ht.constructor===Object},h.validateBBox=function(ht){if(!ht)throw new Error("bbox is required");if(!Array.isArray(ht))throw new Error("bbox must be an Array");if(4!==ht.length&&6!==ht.length)throw new Error("bbox must be an Array of 4 or 6 numbers");ht.forEach(function(_t){if(!St(_t))throw new Error("bbox must only contain numbers")})},h.validateId=function(ht){if(!ht)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof ht))throw new Error("id must be a number or a string")}},1540:(Y,h,d)=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});var x=d(4102);function I(Ct,dt,St){if(null!==Ct)for(var ht,_t,xt,K,st,mt,zt,Ut,Gt=0,Yt=0,Qt=Ct.type,Ft="FeatureCollection"===Qt,te="Feature"===Qt,je=Ft?Ct.features.length:1,jt=0;jt<je;jt++){st=(Ut=!!(zt=Ft?Ct.features[jt].geometry:te?Ct.geometry:Ct)&&"GeometryCollection"===zt.type)?zt.geometries.length:1;for(var ce=0;ce<st;ce++){var ie=0,me=0;if(null!==(K=Ut?zt.geometries[ce]:zt)){mt=K.coordinates;var He=K.type;switch(Gt=!St||"Polygon"!==He&&"MultiPolygon"!==He?0:1,He){case null:break;case"Point":if(!1===dt(mt,Yt,jt,ie,me))return!1;Yt++,ie++;break;case"LineString":case"MultiPoint":for(ht=0;ht<mt.length;ht++){if(!1===dt(mt[ht],Yt,jt,ie,me))return!1;Yt++,"MultiPoint"===He&&ie++}"LineString"===He&&ie++;break;case"Polygon":case"MultiLineString":for(ht=0;ht<mt.length;ht++){for(_t=0;_t<mt[ht].length-Gt;_t++){if(!1===dt(mt[ht][_t],Yt,jt,ie,me))return!1;Yt++}"MultiLineString"===He&&ie++,"Polygon"===He&&me++}"Polygon"===He&&ie++;break;case"MultiPolygon":for(ht=0;ht<mt.length;ht++){for(me=0,_t=0;_t<mt[ht].length;_t++){for(xt=0;xt<mt[ht][_t].length-Gt;xt++){if(!1===dt(mt[ht][_t][xt],Yt,jt,ie,me))return!1;Yt++}me++}ie++}break;case"GeometryCollection":for(ht=0;ht<K.geometries.length;ht++)if(!1===I(K.geometries[ht],dt,St))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function U(Ct,dt){var St;switch(Ct.type){case"FeatureCollection":for(St=0;St<Ct.features.length&&!1!==dt(Ct.features[St].properties,St);St++);break;case"Feature":dt(Ct.properties,0)}}function N(Ct,dt){if("Feature"===Ct.type)dt(Ct,0);else if("FeatureCollection"===Ct.type)for(var St=0;St<Ct.features.length&&!1!==dt(Ct.features[St],St);St++);}function H(Ct,dt){var St,ht,_t,xt,K,st,mt,zt,Ut,Gt,Yt=0,Qt="FeatureCollection"===Ct.type,Ft="Feature"===Ct.type,te=Qt?Ct.features.length:1;for(St=0;St<te;St++){for(zt=Qt?Ct.features[St].properties:Ft?Ct.properties:{},Ut=Qt?Ct.features[St].bbox:Ft?Ct.bbox:void 0,Gt=Qt?Ct.features[St].id:Ft?Ct.id:void 0,K=(mt=!!(st=Qt?Ct.features[St].geometry:Ft?Ct.geometry:Ct)&&"GeometryCollection"===st.type)?st.geometries.length:1,_t=0;_t<K;_t++)if(null!==(xt=mt?st.geometries[_t]:st))switch(xt.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===dt(xt,Yt,zt,Ut,Gt))return!1;break;case"GeometryCollection":for(ht=0;ht<xt.geometries.length;ht++)if(!1===dt(xt.geometries[ht],Yt,zt,Ut,Gt))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===dt(null,Yt,zt,Ut,Gt))return!1;Yt++}}function tt(Ct,dt){H(Ct,function(St,ht,_t,xt,K){var st,mt=null===St?null:St.type;switch(mt){case null:case"Point":case"LineString":case"Polygon":return!1!==dt(x.feature(St,_t,{bbox:xt,id:K}),ht,0)&&void 0}switch(mt){case"MultiPoint":st="Point";break;case"MultiLineString":st="LineString";break;case"MultiPolygon":st="Polygon"}for(var zt=0;zt<St.coordinates.length;zt++)if(!1===dt(x.feature({type:st,coordinates:St.coordinates[zt]},_t),ht,zt))return!1})}function bt(Ct,dt){tt(Ct,function(St,ht,_t){var xt=0;if(St.geometry){var K=St.geometry.type;if("Point"!==K&&"MultiPoint"!==K){var st,mt=0,zt=0,Ut=0;return!1!==I(St,function(Gt,Yt,Qt,Ft,te){if(void 0===st||ht>mt||Ft>zt||te>Ut)return st=Gt,mt=ht,zt=Ft,Ut=te,void(xt=0);var je=x.lineString([st,Gt],St.properties);if(!1===dt(je,ht,_t,te,xt))return!1;xt++,st=Gt})&&void 0}}})}function Et(Ct,dt){if(!Ct)throw new Error("geojson is required");tt(Ct,function(St,ht,_t){if(null!==St.geometry){var K=St.geometry.coordinates;switch(St.geometry.type){case"LineString":if(!1===dt(St,ht,_t,0,0))return!1;break;case"Polygon":for(var st=0;st<K.length;st++)if(!1===dt(x.lineString(K[st],St.properties),ht,_t,st))return!1}}})}h.coordAll=function(Ct){var dt=[];return I(Ct,function(St){dt.push(St)}),dt},h.coordEach=I,h.coordReduce=function(Ct,dt,St,ht){var _t=St;return I(Ct,function(xt,K,st,mt,zt){_t=0===K&&void 0===St?xt:dt(_t,xt,K,st,mt,zt)},ht),_t},h.featureEach=N,h.featureReduce=function(Ct,dt,St){var ht=St;return N(Ct,function(_t,xt){ht=0===xt&&void 0===St?_t:dt(ht,_t,xt)}),ht},h.findPoint=function(Ct,dt){if(!x.isObject(dt=dt||{}))throw new Error("options is invalid");var St,ht=dt.featureIndex||0,_t=dt.multiFeatureIndex||0,xt=dt.geometryIndex||0,K=dt.coordIndex||0,st=dt.properties;switch(Ct.type){case"FeatureCollection":ht<0&&(ht=Ct.features.length+ht),st=st||Ct.features[ht].properties,St=Ct.features[ht].geometry;break;case"Feature":st=st||Ct.properties,St=Ct.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":St=Ct;break;default:throw new Error("geojson is invalid")}if(null===St)return null;var mt=St.coordinates;switch(St.type){case"Point":return x.point(mt,st,dt);case"MultiPoint":return _t<0&&(_t=mt.length+_t),x.point(mt[_t],st,dt);case"LineString":return K<0&&(K=mt.length+K),x.point(mt[K],st,dt);case"Polygon":return xt<0&&(xt=mt.length+xt),K<0&&(K=mt[xt].length+K),x.point(mt[xt][K],st,dt);case"MultiLineString":return _t<0&&(_t=mt.length+_t),K<0&&(K=mt[_t].length+K),x.point(mt[_t][K],st,dt);case"MultiPolygon":return _t<0&&(_t=mt.length+_t),xt<0&&(xt=mt[_t].length+xt),K<0&&(K=mt[_t][xt].length-K),x.point(mt[_t][xt][K],st,dt)}throw new Error("geojson is invalid")},h.findSegment=function(Ct,dt){if(!x.isObject(dt=dt||{}))throw new Error("options is invalid");var St,ht=dt.featureIndex||0,_t=dt.multiFeatureIndex||0,xt=dt.geometryIndex||0,K=dt.segmentIndex||0,st=dt.properties;switch(Ct.type){case"FeatureCollection":ht<0&&(ht=Ct.features.length+ht),st=st||Ct.features[ht].properties,St=Ct.features[ht].geometry;break;case"Feature":st=st||Ct.properties,St=Ct.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":St=Ct;break;default:throw new Error("geojson is invalid")}if(null===St)return null;var mt=St.coordinates;switch(St.type){case"Point":case"MultiPoint":return null;case"LineString":return K<0&&(K=mt.length+K-1),x.lineString([mt[K],mt[K+1]],st,dt);case"Polygon":return xt<0&&(xt=mt.length+xt),K<0&&(K=mt[xt].length+K-1),x.lineString([mt[xt][K],mt[xt][K+1]],st,dt);case"MultiLineString":return _t<0&&(_t=mt.length+_t),K<0&&(K=mt[_t].length+K-1),x.lineString([mt[_t][K],mt[_t][K+1]],st,dt);case"MultiPolygon":return _t<0&&(_t=mt.length+_t),xt<0&&(xt=mt[_t].length+xt),K<0&&(K=mt[_t][xt].length-K-1),x.lineString([mt[_t][xt][K],mt[_t][xt][K+1]],st,dt)}throw new Error("geojson is invalid")},h.flattenEach=tt,h.flattenReduce=function(Ct,dt,St){var ht=St;return tt(Ct,function(_t,xt,K){ht=0===xt&&0===K&&void 0===St?_t:dt(ht,_t,xt,K)}),ht},h.geomEach=H,h.geomReduce=function(Ct,dt,St){var ht=St;return H(Ct,function(_t,xt,K,st,mt){ht=0===xt&&void 0===St?_t:dt(ht,_t,xt,K,st,mt)}),ht},h.lineEach=Et,h.lineReduce=function(Ct,dt,St){var ht=St;return Et(Ct,function(_t,xt,K,st){ht=0===xt&&void 0===St?_t:dt(ht,_t,xt,K,st)}),ht},h.propEach=U,h.propReduce=function(Ct,dt,St){var ht=St;return U(Ct,function(_t,xt){ht=0===xt&&void 0===St?_t:dt(ht,_t,xt)}),ht},h.segmentEach=bt,h.segmentReduce=function(Ct,dt,St){var ht=St,_t=!1;return bt(Ct,function(xt,K,st,mt,zt){ht=!1===_t&&void 0===St?xt:dt(ht,xt,K,st,mt,zt),_t=!0}),ht}},5975:(Y,h,d)=>{"use strict";d(7107);var x=d(2492),I=d.n(x);const U=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),N=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xf6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xf6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xfcpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"L\xe4nge","segmentLength":"Segment L\xe4nge","area":"Fl\xe4che","radius":"Radius","perimeter":"Umfang","height":"H\xf6he","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),H=JSON.parse('{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l\'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}'),tt=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),bt=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021bi marcatorul glisat pe alte straturi \u0219i v\xe2rfuri","pinningButton":"Fixa\u021bi v\xe2rfurile partajate \xeempreun\u0103"}}'),Et=JSON.parse('{"tooltips":{"placeMarker":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043c\u0430\u0440\u043a\u0435\u0440","firstVertex":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043f\u0435\u0440\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442","continueLine":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0440\u0438\u0441\u043e\u0432\u0430\u043d\u0438\u0435","finishLine":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043b\u044e\u0431\u043e\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u0434\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f","finishPoly":"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u0443\u044e \u0442\u043e\u0447\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c","finishRect":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c","startCircle":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0446\u0435\u043d\u0442\u0440 \u043a\u0440\u0443\u0433\u0430","finishCircle":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0434\u0430\u0442\u044c \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043a\u0440\u0443\u0433\u043e\u0432\u043e\u0439 \u043c\u0430\u0440\u043a\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c","cancel":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","removeLastVertex":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0440\u043a\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0438\u0433\u043e\u043d","drawLineButton":"\u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0438\u0432\u0443\u044e","drawCircleButton":"\u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043a\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a","editButton":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u043e\u0439","dragButton":"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0441\u043b\u043e\u0439","cutButton":"\u0412\u044b\u0440\u0435\u0437\u0430\u0442\u044c \u0441\u043b\u043e\u0439","deleteButton":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043b\u043e\u0439","drawCircleMarkerButton":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0440\u0443\u0433\u043e\u0432\u043e\u0439 \u043c\u0430\u0440\u043a\u0435\u0440","snappingButton":"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u043a \u0434\u0440\u0443\u0433\u0438\u043c \u0441\u043b\u043e\u044f\u043c \u0438 \u0432\u0435\u0440\u0448\u0438\u043d\u0430\u043c","pinningButton":"\u0421\u0432\u044f\u0437\u0430\u0442\u044c \u043e\u0431\u0449\u0438\u0435 \u0442\u043e\u0447\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u0435"}}'),Ct=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xe9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del c\xedrculo","finishCircle":"Presiona para finalizar el c\xedrculo","placeCircleMarker":"Presiona para colocar un marcador de c\xedrculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar \xfaltimo v\xe9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xedgono","drawLineButton":"Dibujar L\xednea","drawCircleButton":"Dibujar C\xedrculo","drawRectButton":"Dibujar Rect\xe1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de C\xedrculo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xe9rtices","pinningButton":"Fijar juntos los v\xe9rtices compartidos"}}'),dt=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xebindigen","finishPoly":"Klik op het eerst punt om te be\xebindigen","finishRect":"Klik om te be\xebindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xebindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),St=JSON.parse('{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xe0 dessiner","finishLine":"Cliquez sur n\'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xc9diter des calques","dragButton":"D\xe9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d\'autres couches et sommets","pinningButton":"\xc9pingler ensemble les sommets partag\xe9s","rotateButton":"Tourner des calques"}}'),ht=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51fb\u653e\u7f6e\u6807\u8bb0","firstVertex":"\u5355\u51fb\u653e\u7f6e\u9996\u4e2a\u9876\u70b9","continueLine":"\u5355\u51fb\u7ee7\u7eed\u7ed8\u5236","finishLine":"\u5355\u51fb\u4efb\u4f55\u5b58\u5728\u7684\u6807\u8bb0\u4ee5\u5b8c\u6210","finishPoly":"\u5355\u51fb\u7b2c\u4e00\u4e2a\u6807\u8bb0\u4ee5\u5b8c\u6210","finishRect":"\u5355\u51fb\u5b8c\u6210","startCircle":"\u5355\u51fb\u653e\u7f6e\u5706\u5fc3","finishCircle":"\u5355\u51fb\u5b8c\u6210\u5706\u5f62","placeCircleMarker":"\u70b9\u51fb\u653e\u7f6e\u5706\u5f62\u6807\u8bb0"},"actions":{"finish":"\u5b8c\u6210","cancel":"\u53d6\u6d88","removeLastVertex":"\u79fb\u9664\u6700\u540e\u7684\u9876\u70b9"},"buttonTitles":{"drawMarkerButton":"\u7ed8\u5236\u6807\u8bb0","drawPolyButton":"\u7ed8\u5236\u591a\u8fb9\u5f62","drawLineButton":"\u7ed8\u5236\u7ebf\u6bb5","drawCircleButton":"\u7ed8\u5236\u5706\u5f62","drawRectButton":"\u7ed8\u5236\u957f\u65b9\u5f62","editButton":"\u7f16\u8f91\u56fe\u5c42","dragButton":"\u62d6\u62fd\u56fe\u5c42","cutButton":"\u526a\u5207\u56fe\u5c42","deleteButton":"\u5220\u9664\u56fe\u5c42","drawCircleMarkerButton":"\u753b\u5706\u5708\u6807\u8bb0","snappingButton":"\u5c06\u62d6\u52a8\u7684\u6807\u8bb0\u6355\u6349\u5230\u5176\u4ed6\u56fe\u5c42\u548c\u9876\u70b9","pinningButton":"\u5c06\u5171\u4eab\u9876\u70b9\u56fa\u5b9a\u5728\u4e00\u8d77"}}'),_t=JSON.parse('{"tooltips":{"placeMarker":"\u55ae\u64ca\u653e\u7f6e\u6a19\u8a18","firstVertex":"\u55ae\u64ca\u653e\u7f6e\u7b2c\u4e00\u500b\u9802\u9ede","continueLine":"\u55ae\u64ca\u7e7c\u7e8c\u7e6a\u88fd","finishLine":"\u55ae\u64ca\u4efb\u4f55\u5b58\u5728\u7684\u6a19\u8a18\u4ee5\u5b8c\u6210","finishPoly":"\u55ae\u64ca\u7b2c\u4e00\u500b\u6a19\u8a18\u4ee5\u5b8c\u6210","finishRect":"\u55ae\u64ca\u5b8c\u6210","startCircle":"\u55ae\u64ca\u653e\u7f6e\u5713\u5fc3","finishCircle":"\u55ae\u64ca\u5b8c\u6210\u5713\u5f62","placeCircleMarker":"\u9ede\u64ca\u653e\u7f6e\u5713\u5f62\u6a19\u8a18"},"actions":{"finish":"\u5b8c\u6210","cancel":"\u53d6\u6d88","removeLastVertex":"\u79fb\u9664\u6700\u5f8c\u4e00\u500b\u9802\u9ede"},"buttonTitles":{"drawMarkerButton":"\u653e\u7f6e\u6a19\u8a18","drawPolyButton":"\u7e6a\u88fd\u591a\u908a\u5f62","drawLineButton":"\u7e6a\u88fd\u7dda\u6bb5","drawCircleButton":"\u7e6a\u88fd\u5713\u5f62","drawRectButton":"\u7e6a\u88fd\u65b9\u5f62","editButton":"\u7de8\u8f2f\u5716\u5f62","dragButton":"\u79fb\u52d5\u5716\u5f62","cutButton":"\u88c1\u5207\u5716\u5f62","deleteButton":"\u522a\u9664\u5716\u5f62","drawCircleMarkerButton":"\u756b\u5713\u5708\u6a19\u8a18","snappingButton":"\u5c07\u62d6\u52d5\u7684\u6a19\u8a18\u5c0d\u9f4a\u5230\u5176\u4ed6\u5716\u5c64\u548c\u9802\u9ede","pinningButton":"\u5c07\u5171\u4eab\u9802\u9ede\u56fa\u5b9a\u5728\u4e00\u8d77"}}'),xt={en:U,de:N,it:H,id:tt,ro:bt,ru:Et,es:Ct,nl:dt,fr:St,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xe9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xedgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xedrculo","finishCircle":"Clique para fechar o c\xedrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xfaltimo v\xe9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xedgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xedrculo","drawRectButton":"Desenhar um ret\xe2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xedrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xe9rtices","pinningButton":"V\xe9rtices compartilhados de pinos juntos"}}'),zh:ht,zh_tw:_t,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015bcie\u017ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xf3lne wierzcho\u0142ki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xf6r att placera mark\xf6r","firstVertex":"Klicka f\xf6r att placera f\xf6rsta h\xf6rnet","continueLine":"Klicka f\xf6r att forts\xe4tta rita","finishLine":"Klicka p\xe5 en existerande punkt f\xf6r att slutf\xf6ra","finishPoly":"Klicka p\xe5 den f\xf6rsta punkten f\xf6r att slutf\xf6ra","finishRect":"Klicka f\xf6r att slutf\xf6ra","startCircle":"Klicka f\xf6r att placera cirkelns centrum","finishCircle":"Klicka f\xf6r att slutf\xf6ra cirkeln","placeCircleMarker":"Klicka f\xf6r att placera cirkelmark\xf6r"},"actions":{"finish":"Slutf\xf6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xf6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xf6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xf6r","snappingButton":"Sn\xe4pp dra mark\xf6ren till andra lager och h\xf6rn","pinningButton":"F\xe4st delade h\xf6rn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5 \u0394\u03b5\u03af\u03ba\u03c4\u03b7","firstVertex":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5 \u03c4\u03bf \u03c0\u03c1\u03ce\u03c4\u03bf \u03c3\u03b7\u03bc\u03b5\u03af\u03bf","continueLine":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c3\u03c5\u03bd\u03b5\u03c7\u03af\u03c3\u03b5\u03c4\u03b5 \u03bd\u03b1 \u03c3\u03c7\u03b5\u03b4\u03b9\u03ac\u03b6\u03b5\u03c4\u03b5","finishLine":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03c3\u03b5 \u03bf\u03c0\u03bf\u03b9\u03bf\u03bd\u03b4\u03ae\u03c0\u03bf\u03c4\u03b5 \u03c5\u03c0\u03ac\u03c1\u03c7\u03bf\u03bd \u03c3\u03b7\u03bc\u03b5\u03af\u03bf \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03bf\u03bb\u03bf\u03ba\u03bb\u03b7\u03c1\u03c9\u03b8\u03b5\u03af","finishPoly":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03c3\u03c4\u03bf \u03c0\u03c1\u03ce\u03c4\u03bf \u03c3\u03b7\u03bc\u03b5\u03af\u03bf \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03b5\u03bb\u03b5\u03b9\u03ce\u03c3\u03b5\u03c4\u03b5","finishRect":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03b5\u03bb\u03b5\u03b9\u03ce\u03c3\u03b5\u03c4\u03b5","startCircle":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5 \u03ba\u03ad\u03bd\u03c4\u03c1\u03bf \u039a\u03cd\u03ba\u03bb\u03bf\u03c5","finishCircle":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03bf\u03bb\u03bf\u03ba\u03bb\u03b7\u03c1\u03ce\u03c3\u03b5\u03c4\u03b5 \u03c4\u03bf\u03bd \u039a\u03cd\u03ba\u03bb\u03bf","placeCircleMarker":"\u039a\u03ac\u03bd\u03c4\u03b5 \u03ba\u03bb\u03b9\u03ba \u03b3\u03b9\u03b1 \u03bd\u03b1 \u03c4\u03bf\u03c0\u03bf\u03b8\u03b5\u03c4\u03ae\u03c3\u03b5\u03c4\u03b5 \u039a\u03c5\u03ba\u03bb\u03b9\u03ba\u03cc \u0394\u03b5\u03af\u03ba\u03c4\u03b7"},"actions":{"finish":"\u03a4\u03ad\u03bb\u03bf\u03c2","cancel":"\u0391\u03ba\u03cd\u03c1\u03c9\u03c3\u03b7","removeLastVertex":"\u039a\u03b1\u03c4\u03ac\u03c1\u03b3\u03b7\u03c3\u03b7 \u03c4\u03b5\u03bb\u03b5\u03c5\u03c4\u03b1\u03af\u03bf\u03c5 \u03c3\u03b7\u03bc\u03b5\u03af\u03bf\u03c5"},"buttonTitles":{"drawMarkerButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u0394\u03b5\u03af\u03ba\u03c4\u03b7","drawPolyButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u03a0\u03bf\u03bb\u03c5\u03b3\u03ce\u03bd\u03bf\u03c5","drawLineButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u0393\u03c1\u03b1\u03bc\u03bc\u03ae\u03c2","drawCircleButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u039a\u03cd\u03ba\u03bb\u03bf\u03c5","drawRectButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u039f\u03c1\u03b8\u03bf\u03b3\u03c9\u03bd\u03af\u03bf\u03c5","editButton":"\u0395\u03c0\u03b5\u03be\u03b5\u03c1\u03b3\u03b1\u03c3\u03af\u03b1 \u0395\u03c0\u03b9\u03c0\u03ad\u03b4\u03c9\u03bd","dragButton":"\u039c\u03b5\u03c4\u03b1\u03c6\u03bf\u03c1\u03ac \u0395\u03c0\u03b9\u03c0\u03ad\u03b4\u03c9\u03bd","cutButton":"\u0391\u03c0\u03bf\u03ba\u03bf\u03c0\u03ae \u0395\u03c0\u03b9\u03c0\u03ad\u03b4\u03c9\u03bd","deleteButton":"\u039a\u03b1\u03c4\u03ac\u03c1\u03b3\u03b7\u03c3\u03b7 \u0395\u03c0\u03b9\u03c0\u03ad\u03b4\u03c9\u03bd","drawCircleMarkerButton":"\u03a3\u03c7\u03b5\u03b4\u03af\u03b1\u03c3\u03b7 \u039a\u03c5\u03ba\u03bb\u03b9\u03ba\u03bf\u03cd \u0394\u03b5\u03af\u03ba\u03c4\u03b7","snappingButton":"\u03a0\u03c1\u03bf\u03c3\u03ba\u03cc\u03bb\u03bb\u03b7\u03c3\u03b7 \u03c4\u03bf\u03c5 \u0394\u03b5\u03af\u03ba\u03c4\u03b7 \u03bc\u03b5\u03c4\u03b1\u03c6\u03bf\u03c1\u03ac\u03c2 \u03c3\u03b5 \u03ac\u03bb\u03bb\u03b1 \u0395\u03c0\u03af\u03c0\u03b5\u03b4\u03b1 \u03ba\u03b1\u03b9 \u039a\u03bf\u03c1\u03c5\u03c6\u03ad\u03c2","pinningButton":"\u03a0\u03b5\u03c1\u03b9\u03ba\u03bf\u03c0\u03ae \u03ba\u03bf\u03b9\u03bd\u03ce\u03bd \u03ba\u03bf\u03c1\u03c5\u03c6\u03ce\u03bd \u03bc\u03b1\u03b6\u03af"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xf6l\u0151 elhelyez\xe9s\xe9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xe9s\xe9hez","continueLine":"Kattintson a k\xf6vetkez\u0151 pont elhelyez\xe9s\xe9hez","finishLine":"A befejez\xe9shez kattintson egy megl\xe9v\u0151 pontra","finishPoly":"A befejez\xe9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xe9shez","startCircle":"Kattintson a k\xf6r k\xf6z\xe9ppontj\xe1nak elhelyez\xe9s\xe9hez","finishCircle":"Kattintson a k\xf6r befejez\xe9s\xe9hez","placeCircleMarker":"Kattintson a k\xf6rjel\xf6l\u0151 elhelyez\xe9s\xe9hez"},"actions":{"finish":"Befejez\xe9s","cancel":"M\xe9gse","removeLastVertex":"Utols\xf3 pont elt\xe1vol\xedt\xe1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xf6l\u0151 rajzol\xe1sa","drawPolyButton":"Poligon rajzol\xe1sa","drawLineButton":"Vonal rajzol\xe1sa","drawCircleButton":"K\xf6r rajzol\xe1sa","drawRectButton":"N\xe9gyzet rajzol\xe1sa","editButton":"Elemek szerkeszt\xe9se","dragButton":"Elemek mozgat\xe1sa","cutButton":"Elemek v\xe1g\xe1sa","deleteButton":"Elemek t\xf6rl\xe9se","drawCircleMarkerButton":"K\xf6r jel\xf6l\u0151 rajzol\xe1sa","snappingButton":"Kapcsolja a jel\xf6lt\u0151t m\xe1sik elemhez vagy ponthoz","pinningButton":"K\xf6z\xf6s pontok \xf6sszek\xf6t\xe9se"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xf8r","firstVertex":"Tryk for at placere det f\xf8rste punkt","continueLine":"Tryk for at forts\xe6tte linjen","finishLine":"Tryk p\xe5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xe5 det f\xf8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xf8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xf8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xe6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xf8r","snappingButton":"Fastg\xf8r trukket mark\xf8r til andre elementer","pinningButton":"Sammenl\xe6g delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xe5 plassere punkt","firstVertex":"Klikk for \xe5 plassere f\xf8rste punkt","continueLine":"Klikk for \xe5 tegne videre","finishLine":"Klikk p\xe5 et eksisterende punkt for \xe5 fullf\xf8re","finishPoly":"Klikk f\xf8rste punkt for \xe5 fullf\xf8re","finishRect":"Klikk for \xe5 fullf\xf8re","startCircle":"Klikk for \xe5 sette sirkel midtpunkt","finishCircle":"Klikk for \xe5 fullf\xf8re sirkel","placeCircleMarker":"Klikk for \xe5 plassere sirkel"},"actions":{"finish":"Fullf\xf8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u062c\u0627\u0646\u0645\u0627\u06cc\u06cc \u0646\u0634\u0627\u0646","firstVertex":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0631\u0633\u0645 \u0627\u0648\u0644\u06cc\u0646 \u0631\u0623\u0633","continueLine":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0627\u062f\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06a9\u0644\u06cc\u06a9 \u0631\u0648\u06cc \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062c\u0648\u062f \u0628\u0631\u0627\u06cc \u067e\u0627\u06cc\u0627\u0646","finishPoly":"\u06a9\u0644\u06cc\u06a9 \u0631\u0648\u06cc \u0627\u0648\u0644\u06cc\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06cc \u067e\u0627\u06cc\u0627\u0646","finishRect":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u067e\u0627\u06cc\u0627\u0646","startCircle":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0631\u0633\u0645 \u0645\u0631\u06a9\u0632 \u062f\u0627\u06cc\u0631\u0647","finishCircle":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u067e\u0627\u06cc\u0627\u0646 \u0631\u0633\u0645 \u062f\u0627\u06cc\u0631\u0647","placeCircleMarker":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062f\u0627\u06cc\u0631\u0647","placeText":"\u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0646\u0648\u0634\u062a\u0646 \u0645\u062a\u0646"},"actions":{"finish":"\u067e\u0627\u06cc\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062d\u0630\u0641 \u0622\u062e\u0631\u06cc\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062f\u0631\u062c \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062f\u0636\u0644\u0639\u06cc","drawLineButton":"\u0631\u0633\u0645 \u062e\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062f\u0627\u06cc\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06cc","editButton":"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u0644\u0627\u06cc\u0647\u200c\u0647\u0627","dragButton":"\u062c\u0627\u0628\u062c\u0627\u06cc\u06cc \u0644\u0627\u06cc\u0647\u200c\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06cc\u0647\u200c\u0647\u0627","deleteButton":"\u062d\u0630\u0641 \u0644\u0627\u06cc\u0647\u200c\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062f\u0627\u06cc\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06af\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06cc\u0647\u200c\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062f\u06cc\u06af\u0631 \u0628\u06a9\u0634\u06cc\u062f","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062a\u0631\u06a9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067e\u06cc\u0646 \u06a9\u0646\u06cc\u062f","rotateButton":"\u0686\u0631\u062e\u0634 \u0644\u0627\u06cc\u0647","drawTextButton":"\u0631\u0633\u0645 \u0645\u062a\u0646"}}'),ua:JSON.parse('{"tooltips":{"placeMarker":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043c\u0430\u0440\u043a\u0435\u0440","firstVertex":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043f\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043d\u0443","continueLine":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u043f\u0440\u043e\u0434\u043e\u0432\u0436\u0438\u0442\u0438 \u043c\u0430\u043b\u044e\u0432\u0430\u0442\u0438","finishLine":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c \u0431\u0443\u0434\u044c-\u044f\u043a\u0438\u0439 \u0456\u0441\u043d\u0443\u044e\u0447\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u0434\u043b\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044f","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440, \u0449\u043e\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u0446\u0435\u043d\u0442\u0440 \u043a\u043e\u043b\u0430","finishCircle":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043a\u043e\u043b\u043e","placeCircleMarker":"\u041d\u0430\u0442\u0438\u0441\u043d\u0456\u0442\u044c, \u0449\u043e\u0431 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043a\u0440\u0443\u0433\u043e\u0432\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u044e \u0432\u0435\u0440\u0448\u0438\u043d\u0443"},"buttonTitles":{"drawMarkerButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043c\u0430\u0440\u043a\u0435\u0440","drawPolyButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043f\u043e\u043b\u0456\u0433\u043e\u043d","drawLineButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043a\u0440\u0438\u0432\u0443","drawCircleButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043a\u043e\u043b\u043e","drawRectButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043f\u0440\u044f\u043c\u043e\u043a\u0443\u0442\u043d\u0438\u043a","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041c\u0430\u043b\u044e\u0432\u0430\u0442\u0438 \u043a\u0440\u0443\u0433\u043e\u0432\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440","snappingButton":"\u041f\u0440\u0438\u0432\u2019\u044f\u0437\u0430\u0442\u0438 \u043f\u0435\u0440\u0435\u0442\u044f\u0433\u043d\u0443\u0442\u0438\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u0434\u043e \u0456\u043d\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043d","pinningButton":"\u0417\u0432\'\u044f\u0437\u0430\u0442\u0438 \u0441\u043f\u0456\u043b\u044c\u043d\u0456 \u0432\u0435\u0440\u0448\u0438\u043d\u0438 \u0440\u0430\u0437\u043e\u043c"}}'),tr:JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015faret\xe7i yerle\u015ftirmek i\xe7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015ftirmek i\xe7in t\u0131klay\u0131n","continueLine":"\xc7izime devam etmek i\xe7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xe7in mevcut herhangi bir i\u015faret\xe7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xe7in ilk i\u015faret\xe7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xe7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015ftirmek i\xe7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xe7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015faret\xe7isi yerle\u015ftirmek i\xe7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xf6\u015feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xc7izim \u0130\u015faret\xe7isi","drawPolyButton":"\xc7okgenler \xe7iz","drawLineButton":"\xc7oklu \xe7izgi \xe7iz","drawCircleButton":"\xc7ember \xe7iz","drawRectButton":"Dikd\xf6rtgen \xe7iz","editButton":"Katmanlar\u0131 d\xfczenle","dragButton":"Katmanlar\u0131 s\xfcr\xfckle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015faret\xe7isi \xe7iz","snappingButton":"S\xfcr\xfcklenen i\u015faret\xe7iyi di\u011fer katmanlara ve k\xf6\u015felere yap\u0131\u015ft\u0131r","pinningButton":"Payla\u015f\u0131lan k\xf6\u015feleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xedm vytvo\u0159\xedte zna\u010dku","firstVertex":"Kliknut\xedm vytvo\u0159\xedte prvn\xed objekt","continueLine":"Kliknut\xedm pokra\u010dujte v kreslen\xed","finishLine":"Kliknut\xed na libovolnou existuj\xedc\xed zna\u010dku pro dokon\u010den\xed","finishPoly":"Vyberte prvn\xed bod pro dokon\u010den\xed","finishRect":"Klikn\u011bte pro dokon\u010den\xed","startCircle":"Kliknut\xedm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0434\u0430\u0442\u044c \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xedm nastavte polom\u011br"},"actions":{"finish":"Dokon\u010dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xed akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xe9ln\xedk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010dku","snappingButton":"Nav\xe1zat ta\u017enou zna\u010dku k dal\u0161\xedm vrstv\xe1m a vrchol\u016fm","pinningButton":"Spojit spole\u010dn\xe9 body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30de\u30fc\u30ab\u30fc\u3092\u914d\u7f6e","firstVertex":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u6700\u521d\u306e\u9802\u70b9\u3092\u914d\u7f6e","continueLine":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u63cf\u753b\u3092\u7d9a\u3051\u308b","finishLine":"\u4efb\u610f\u306e\u30de\u30fc\u30ab\u30fc\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u7d42\u4e86","finishPoly":"\u6700\u521d\u306e\u30de\u30fc\u30ab\u30fc\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u7d42\u4e86","finishRect":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u7d42\u4e86","startCircle":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u5186\u306e\u4e2d\u5fc3\u3092\u914d\u7f6e","finishCircle":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u5186\u306e\u63cf\u753b\u3092\u7d42\u4e86","placeCircleMarker":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u5186\u30de\u30fc\u30ab\u30fc\u3092\u914d\u7f6e","placeText":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30c6\u30ad\u30b9\u30c8\u3092\u914d\u7f6e"},"actions":{"finish":"\u7d42\u4e86","cancel":"\u30ad\u30e3\u30f3\u30bb\u30eb","removeLastVertex":"\u6700\u5f8c\u306e\u9802\u70b9\u3092\u524a\u9664"},"buttonTitles":{"drawMarkerButton":"\u30de\u30fc\u30ab\u30fc\u3092\u63cf\u753b","drawPolyButton":"\u30dd\u30ea\u30b4\u30f3\u3092\u63cf\u753b","drawLineButton":"\u6298\u308c\u7dda\u3092\u63cf\u753b","drawCircleButton":"\u5186\u3092\u63cf\u753b","drawRectButton":"\u77e9\u5f62\u3092\u63cf\u753b","editButton":"\u30ec\u30a4\u30e4\u30fc\u3092\u7de8\u96c6","dragButton":"\u30ec\u30a4\u30e4\u30fc\u3092\u30c9\u30e9\u30c3\u30b0","cutButton":"\u30ec\u30a4\u30e4\u30fc\u3092\u5207\u308a\u53d6\u308a","deleteButton":"\u30ec\u30a4\u30e4\u30fc\u3092\u524a\u9664","drawCircleMarkerButton":"\u5186\u30de\u30fc\u30ab\u30fc\u3092\u63cf\u753b","snappingButton":"\u30c9\u30e9\u30c3\u30b0\u3057\u305f\u30de\u30fc\u30ab\u30fc\u3092\u4ed6\u306e\u30ec\u30a4\u30e4\u30fc\u3084\u9802\u70b9\u306b\u30b9\u30ca\u30c3\u30d7\u3059\u308b","pinningButton":"\u5171\u6709\u3059\u308b\u9802\u70b9\u3092\u540c\u6642\u306b\u52d5\u304b\u3059","rotateButton":"\u30ec\u30a4\u30e4\u30fc\u3092\u56de\u8ee2","drawTextButton":"\u30c6\u30ad\u30b9\u30c8\u3092\u63cf\u753b"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimm\xe4isen osuuden","continueLine":"Klikkaa jatkaaksesi piirt\xe4mist\xe4","finishLine":"Klikkaa olemassa olevaa merkki\xe4 lopettaaksesi","finishPoly":"Klikkaa ensimm\xe4ist\xe4 merkki\xe4 lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyr\xe4n keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyr\xe4n","placeCircleMarker":"Klikkaa asettaaksesi ympyr\xe4merkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirr\xe4 merkkej\xe4","drawPolyButton":"Piirr\xe4 monikulmioita","drawLineButton":"Piirr\xe4 viivoja","drawCircleButton":"Piirr\xe4 ympyr\xe4","drawRectButton":"Piirr\xe4 neliskulmioita","editButton":"Muokkaa","dragButton":"Siirr\xe4","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirr\xe4 ympyr\xe4merkki","snappingButton":"Kiinnit\xe4 siirrett\xe4v\xe4 merkki toisiin muotoihin","pinningButton":"Kiinnit\xe4 jaetut muodot yhteen","rotateButton":"K\xe4\xe4nn\xe4","drawTextButton":"Piirr\xe4 teksti\xe4"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"\ub9c8\ucee4 \uc704\uce58\ub97c \ud074\ub9ad\ud558\uc138\uc694","firstVertex":"\uccab\ubc88\uc9f8 \uaf2d\uc9c0\uc810 \uc704\uce58\uc744 \ud074\ub9ad\ud558\uc138\uc694","continueLine":"\uacc4\uc18d \uadf8\ub9ac\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694","finishLine":"\ub05d\ub0b4\ub824\uba74 \uae30\uc874 \ub9c8\ucee4\ub97c \ud074\ub9ad\ud558\uc138\uc694","finishPoly":"\ub05d\ub0b4\ub824\uba74 \ucc98\uc74c \ub9c8\ucee4\ub97c \ud074\ub9ad\ud558\uc138\uc694","finishRect":"\ub05d\ub0b4\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694","startCircle":"\uc6d0\uc758 \uc911\uc2ec\uc774 \ub420 \uc704\uce58\ub97c \ud074\ub9ad\ud558\uc138\uc694","finishCircle":"\uc6d0\uc744 \ub05d\ub0b4\ub824\uba74 \ud074\ub9ad\ud558\uc138\uc694","placeCircleMarker":"\uc6d0 \ub9c8\ucee4 \uc704\uce58\ub97c \ud074\ub9ad\ud558\uc138\uc694","placeText":"\ud14d\uc2a4\ud2b8 \uc704\uce58\ub97c \ud074\ub9ad\ud558\uc138\uc694"},"actions":{"finish":"\ub05d\ub0b4\uae30","cancel":"\ucde8\uc18c","removeLastVertex":"\ub9c8\uc9c0\ub9c9 \uaf2d\uc9c0\uc810 \uc81c\uac70"},"buttonTitles":{"drawMarkerButton":"\ub9c8\ucee4 \uadf8\ub9ac\uae30","drawPolyButton":"\ub2e4\uac01\ud615 \uadf8\ub9ac\uae30","drawLineButton":"\ub2e4\uac01\uc120 \uadf8\ub9ac\uae30","drawCircleButton":"\uc6d0 \uadf8\ub9ac\uae30","drawRectButton":"\uc9c1\uc0ac\uac01\ud615 \uadf8\ub9ac\uae30","editButton":"\ub808\uc774\uc5b4 \ud3b8\uc9d1\ud558\uae30","dragButton":"\ub808\uc774\uc5b4 \ub04c\uae30","cutButton":"\ub808\uc774\uc5b4 \uc790\ub974\uae30","deleteButton":"\ub808\uc774\uc5b4 \uc81c\uac70\ud558\uae30","drawCircleMarkerButton":"\uc6d0 \ub9c8\ucee4 \uadf8\ub9ac\uae30","snappingButton":"\uc7a1\uc544\ub048 \ub9c8\ucee4\ub97c \ub2e4\ub978 \ub808\uc774\uc5b4 \ubc0f \uaf2d\uc9c0\uc810\uc5d0 \ub4e4\ub7ec\ubd99\uac8c \ud558\uae30","pinningButton":"\uacf5\uc720 \uaf2d\uc9c0\uc810\uc744 \ud568\uaed8 \ucc0d\uae30","rotateButton":"\ub808\uc774\uc5b4 \ud68c\uc804\ud558\uae30","drawTextButton":"\ud14d\uc2a4\ud2b8 \uadf8\ub9ac\uae30"}}')};function K(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function st(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?K(Object(v),!0).forEach(function(C){mt(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):K(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function mt(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}const zt={_globalEditModeEnabled:!1,enableGlobalEditMode:function(u){var g=st({},u);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(v){v.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(u){u.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(u)},handleLayerAdditionInGlobalEditMode:function(){var u=this._addedLayers;for(var g in this._addedLayers={},u){var v=u[g];this._isRelevantForEdit(v)&&this.globalEditModeEnabled()&&v.pm.enable(st({},this.globalOptions))}},_layerAdded:function(u){var g=u.layer;this._addedLayers[L.stamp(g)]=g},_isRelevantForEdit:function(u){return u.pm&&!(u instanceof L.LayerGroup)&&(!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&!1===u.options.pmIgnore)&&!u._pmTempLayer&&u.pm.options.allowEditing}},Ut={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var u=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},u.forEach(function(g){g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var u=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,u.forEach(function(g){g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var u=this._addedLayersDrag;for(var g in this._addedLayersDrag={},u){var v=u[g];this._isRelevantForDrag(v)&&this.globalDragModeEnabled()&&v.pm.enableLayerDrag()}},_layerAddedDrag:function(u){var g=u.layer;this._addedLayersDrag[L.stamp(g)]=g},_isRelevantForDrag:function(u){return u.pm&&!(u instanceof L.LayerGroup)&&(!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&!1===u.options.pmIgnore)&&!u._pmTempLayer&&u.pm.options.draggable}},Gt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var u=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(g){u._isRelevantForRemoval(g)&&(g.pm.disable(),g.on("click",u.removeLayer,u))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var u=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(g){g.off("click",u.removeLayer,u)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(u){this._isRelevantForRemoval(u.layer)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(u){var g=u.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval:function(u){return u.pm&&!(u instanceof L.LayerGroup)&&(!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&!1===u.options.pmIgnore)&&!u._pmTempLayer&&u.pm.options.allowRemoval}},Yt={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var u=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(g){return g instanceof L.Polyline}).forEach(function(g){u._isRelevantForRotate(g)&&g.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(u){return u instanceof L.Polyline}).forEach(function(u){u.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(u){this._isRelevantForRotate(u.layer)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(u){return u.pm&&!(u instanceof L.LayerGroup)&&(!L.PM.optIn&&!u.options.pmIgnore||L.PM.optIn&&!1===u.options.pmIgnore)&&!u._pmTempLayer&&u.pm.options.allowRotation}};function Qt(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function Ft(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?Qt(Object(v),!0).forEach(function(C){te(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):Qt(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function te(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}const jt={_fireDrawStart:function(){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},_fireDrawEnd:function(){this.__fire(this._map,"pm:drawend",{shape:this._shape},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},_fireCreate:function(u){this.__fire(this._map,"pm:create",{shape:this._shape,marker:u,layer:u},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Draw",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},_fireCenterPlaced:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:"Draw"===u?this._layer:void 0,layer:"Draw"!==u?this._layer:void 0,latlng:this._layer.getLatLng()},u,g)},_fireCut:function(u,g,v){this.__fire(u,"pm:cut",{shape:this._shape,layer:g,originalLayer:v},arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Draw",arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})},_fireEdit:function(){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer,"pm:edit",{layer:this._layer,shape:this.getShape()},g,v)},_fireEnable:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},u,g)},_fireDisable:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},u,g)},_fireUpdate:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},u,g)},_fireMarkerDragStart:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:u,shape:this.getShape(),indexPath:g},v,C)},_fireMarkerDrag:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:u,shape:this.getShape(),indexPath:g},v,C)},_fireMarkerDragEnd:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:u,shape:this.getShape(),indexPath:g,intersectionReset:v},C,D)},_fireDragStart:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},u,g)},_fireDrag:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:drag",Ft(Ft({},u),{},{shape:this.getShape()}),g,v)},_fireDragEnd:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},u,g)},_fireDragEnable:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},u,g)},_fireDragDisable:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},u,g)},_fireRemove:function(u){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(u,"pm:remove",{layer:arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,shape:this.getShape()},v,C)},_fireVertexAdded:function(u,g,v){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:u,indexPath:g,latlng:v,shape:this.getShape()},C,D)},_fireVertexRemoved:function(u,g){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:u,indexPath:g,shape:this.getShape()},v,C)},_fireVertexClick:function(u,g){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:u,indexPath:g,shape:this.getShape()},v,C)},_fireIntersect:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:u,shape:this.getShape()},g,v)},_fireLayerReset:function(u,g){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:u,indexPath:g,shape:this.getShape()},v,C)},_fireChange:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:u,shape:this.getShape()},g,v)},_fireTextChange:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:u,shape:this.getShape()},g,v)},_fireTextFocus:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},u,g)},_fireTextBlur:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},u,g)},_fireSnapDrag:function(u,g){this.__fire(u,"pm:snapdrag",g,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireSnap:function(u,g){this.__fire(u,"pm:snap",g,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireUnsnap:function(u,g){this.__fire(u,"pm:unsnap",g,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireRotationEnable:function(u,g){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(u,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,C)},_fireRotationDisable:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Rotation",v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(u,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,v)},_fireRotationStart:function(u,g){this.__fire(u,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireRotation:function(u,g,v){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._rotationLayer,D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Rotation",Z=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.__fire(u,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:g,oldLatLngs:v,newLatLngs:C.getLatLngs()},D,Z)},_fireRotationEnd:function(u,g,v){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Rotation",D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(u,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},C,D)},_fireActionClick:function(u,g,v){this.__fire(this._map,"pm:actionclick",{text:u.text,action:u,btnName:g,button:v},arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Toolbar",arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})},_fireButtonClick:function(u,g){this.__fire(this._map,"pm:buttonclick",{btnName:u,button:g},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Toolbar",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireLangChange:function(u,g,v,C){this.__fire(this.map,"pm:langchange",{oldLang:u,activeLang:g,fallback:v,translations:C},arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Global",arguments.length>5&&void 0!==arguments[5]?arguments[5]:{})},_fireGlobalDragModeToggled:function(u){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:u,map:this.map},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},_fireGlobalEditModeToggled:function(u){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:u,map:this.map},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},_fireGlobalRemovalModeToggled:function(u){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:u,map:this.map},arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},_fireGlobalCutModeToggled:function(){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},_fireGlobalDrawModeToggled:function(){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},_fireGlobalRotateModeToggled:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},u,g)},_fireRemoveLayerGroup:function(u){this.__fire(u,"pm:remove",{layer:arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,shape:void 0},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},_fireKeyeventEvent:function(u,g,v){this.__fire(this.map,"pm:keyevent",{event:u,eventType:g,focusOn:v},arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Global",arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})},__fire:function(u,g,v,C){var D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};v=I()(v,D,{source:C}),L.PM.Utils._fireEvent(u,g,v)}},ce={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(u){this.map=u,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(u){var g="document";this.map.getContainer().contains(u.target)&&(g="map");var v={event:u,eventType:u.type,focusOn:g};this._lastEvents[u.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(u,u.type,g)},_onBlur:function(u){u.altKey=!1;var g={event:u,eventType:u.type,focusOn:"document"};this._lastEvents[u.type]=g,this._lastEvents.current=g},getLastKeyEvent:function(){return this._lastEvents[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current"]},isShiftKeyPressed:function(){var u;return null===(u=this._lastEvents.current)||void 0===u?void 0:u.event.shiftKey},isAltKeyPressed:function(){var u;return null===(u=this._lastEvents.current)||void 0===u?void 0:u.event.altKey},isCtrlKeyPressed:function(){var u;return null===(u=this._lastEvents.current)||void 0===u?void 0:u.event.ctrlKey},isMetaKeyPressed:function(){var u;return null===(u=this._lastEvents.current)||void 0===u?void 0:u.event.metaKey},getPressedKey:function(){var u;return null===(u=this._lastEvents.current)||void 0===u?void 0:u.event.key}};var ie=d(7361),me=d.n(ie),He=d(8721),se=d.n(He);function fe(u){var g=L.PM.activeLang;return se()(xt,g)||(g="en"),me()(xt[g],u)}function de(u){for(var g=0;g<u.length;g+=1){var v=u[g];if(Array.isArray(v)){if(de(v))return!0}else if(null!=v&&""!==v)return!0}return!1}function we(u){return u.reduce(function(g,v){if(0!==v.length){var C=Array.isArray(v)?we(v):v;Array.isArray(C)?0!==C.length&&g.push(C):g.push(C)}return g},[])}function Di(u,g,v){for(var C,D,Z,J=6378137,et=6356752.3142,Q=.0033528106647474805,rt=u.lng,wt=u.lat,At=v,Rt=Math.PI,Vt=g*Rt/180,Xt=Math.sin(Vt),_e=Math.cos(Vt),Me=(1-Q)*Math.tan(wt*Rt/180),Mn=1/Math.sqrt(1+Me*Me),qn=Me*Mn,Rn=Math.atan2(Me,_e),ri=Mn*Xt,_i=1-ri*ri,pr=_i*(J*J-et*et)/(et*et),na=1+pr/16384*(4096+pr*(pr*(320-175*pr)-768)),br=pr/1024*(256+pr*(pr*(74-47*pr)-128)),xr=At/(et*na),Wr=2*Math.PI;Math.abs(xr-Wr)>1e-12;)C=Math.cos(2*Rn+xr),Wr=xr,xr=At/(et*na)+br*(D=Math.sin(xr))*(C+br/4*((Z=Math.cos(xr))*(2*C*C-1)-br/6*C*(4*D*D-3)*(4*C*C-3)));var Ms=qn*D-Mn*Z*_e,ka=Math.atan2(qn*Z+Mn*D*_e,(1-Q)*Math.sqrt(ri*ri+Ms*Ms)),ks=Q/16*_i*(4+Q*(4-3*_i)),ia=rt+180*(Math.atan2(D*Xt,Mn*Z-qn*D*_e)-(1-ks)*Q*ri*(xr+ks*D*(C+ks*Z*(2*C*C-1))))/Rt;return L.latLng(ia,180*ka/Rt)}function Dn(u,g,v,C){for(var D,Z,J=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],et=[],Q=0;Q<v;Q+=1){if(J)D=Di(u,360*Q/v+C,g),Z=L.latLng(D.lng,D.lat);else{var rt=u.lat+Math.cos(2*Q*Math.PI/v)*g,wt=u.lng+Math.sin(2*Q*Math.PI/v)*g;Z=L.latLng(rt,wt)}et.push(Z)}return et}function li(u,g,v,C){var Z,et,Q,rt,wt;return function(Z,J,et){J=(J+360)%360;var Q=Math.PI/180,rt=180/Math.PI,At=Z.lng*Q,Rt=Z.lat*Q,Vt=J*Q,Xt=Math.sin(Rt),_e=Math.cos(Rt),Me=Math.cos(et/6378137),Mn=Math.sin(et/6378137),qn=Math.asin(Xt*Me+_e*Mn*Math.cos(Vt)),Rn=At+Math.atan2(Math.sin(Vt)*Mn*_e,Me-Xt*Math.sin(qn));return Rn=(Rn*=rt)>180?Rn-360:Rn<-180?Rn+360:Rn,L.latLng([qn*rt,Rn])}(g,(et=v,Q=(Z=u).latLngToContainerPoint(g),rt=Z.latLngToContainerPoint(et),(wt=180*Math.atan2(rt.y-Q.y,rt.x-Q.x)/Math.PI+90)+(wt<0?360:0)),C)}function Oi(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.getLatLngs();return u instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function Tr(u,g){var v,C;if(null!==(v=g.options.crs)&&void 0!==v&&null!==(C=v.projection)&&void 0!==C&&C.MAX_LATITUDE){var D,Z,J=null===(D=g.options.crs)||void 0===D||null===(Z=D.projection)||void 0===Z?void 0:Z.MAX_LATITUDE;u.lat=Math.max(Math.min(J,u.lat),-J)}return u}function qr(u){return u.options.renderer||u._map&&(u._map._getPaneRenderer(u.options.pane)||u._map.options.renderer||u._map._renderer)||u._renderer}const Hs=L.Class.extend({includes:[zt,Ut,Gt,Yt,jt],initialize:function(u){this.map=u,this.Draw=new L.PM.Draw(u),this.Toolbar=new L.PM.Toolbar(u),this.Keyboard=ce,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(u)},setLang:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",g=arguments.length>1?arguments[1]:void 0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",C=L.PM.activeLang;g&&(xt[u]=I()(xt[v],g)),L.PM.activeLang=u,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,u,v,xt[u])},addControls:function(u){this.Toolbar.addControls(u)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===u&&(u="Polygon"),this.Draw.enable(u,arguments.length>1?arguments[1]:void 0)},disableDraw:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===u&&(u="Polygon"),this.Draw.disable(u)},setPathOptions:function(u){var g=this,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=v.ignoreShapes||[],D=v.merge||!1;this.map.pm.Draw.shapes.forEach(function(Z){-1===C.indexOf(Z)&&g.map.pm.Draw[Z].setPathOptions(u,D)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(u){var g=this,v=I()(this.globalOptions,u),C=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!v.editable&&(this.map.pm.Draw.CircleMarker.disable(),C=!0),this.map.pm.Draw.shapes.forEach(function(D){g.map.pm.Draw[D].setOptions(v)}),C&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(D){D.pm.setOptions(v)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=v,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(u){u.pm.enabled()&&u.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(u){return this.Draw.Cut.enable(u)},toggleGlobalCutMode:function(u){return this.Draw.Cut.toggle(u)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],g=L.PM.Utils.findLayers(this.map);if(!u)return g;var v=L.featureGroup();return v._pmTempLayer=!0,g.forEach(function(C){v.addLayer(C)}),v},getGeomanDrawLayers:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0],g=L.PM.Utils.findLayers(this.map).filter(function(C){return!0===C._drawnByGeoman});if(!u)return g;var v=L.featureGroup();return v._pmTempLayer=!0,g.forEach(function(C){v.addLayer(C)}),v},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(u){0===this._touchEventCounter&&(L.DomEvent.on(u,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(u,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(u){1===this._touchEventCounter&&(L.DomEvent.off(u,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(u,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(u){qr(this.map)._onMouseMove(this._createMouseEvent("mousemove",u))},_canvasTouchClick:function(u){var g="";"touchstart"===u.type||"pointerdown"===u.type?g="mousedown":"touchend"===u.type||"pointerup"===u.type?g="mouseup":"touchcancel"!==u.type&&"pointercancel"!==u.type||(g="mouseup"),g&&qr(this.map)._onClick(this._createMouseEvent(g,u))},_createMouseEvent:function(u,g){var v,C=g.touches[0]||g.changedTouches[0];try{v=new MouseEvent(u,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{(v=document.createEvent("MouseEvents")).initMouseEvent(u,g.bubbles,g.cancelable,g.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return v}}),vs=L.Control.extend({includes:[jt],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(u){this._button=L.Util.extend({},this.options,u)},onAdd:function(u){return this._map=u,this._container=this._map.pm.Toolbar.options.oneBlock?this._map.pm.Toolbar._createContainer(this.options.position):"edit"===this._button.tool?this._map.pm.Toolbar.editContainer:"options"===this._button.tool?this._map.pm.Toolbar.optionsContainer:"custom"===this._button.tool?this._map.pm.Toolbar.customContainer:this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(u){return this._button.toggleStatus="boolean"==typeof u?u:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(u){u&&u.preventDefault(),this._button.disabled||(this._button.onClick(u,{button:this,event:u}),this._clicked(u),this._button.afterClick(u,{button:this,event:u}))},_makeButton:function(u){var g=this,v=this.options.position.indexOf("right")>-1?"pos-right":"",C=L.DomUtil.create("div","button-container  ".concat(v),this._container);u.title&&C.setAttribute("title",u.title);var D=L.DomUtil.create("a","leaflet-buttons-control-button",C);D.setAttribute("role","button"),D.setAttribute("tabindex","0"),D.href="#";var Z=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(v),C),J=u.actions,et={cancel:{text:fe("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:fe("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:fe("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[u.jsClass]._removeLastVertex()}},finish:{text:fe("actions.finish"),onClick:function(rt){this._map.pm.Draw[u.jsClass]._finishShape(rt)}}};J.forEach(function(rt){var wt,At="string"==typeof rt?rt:rt.name;if(et[At])wt=et[At];else{if(!rt.text)return;wt=rt}var Rt=L.DomUtil.create("a","leaflet-pm-action ".concat(v," action-").concat(At),Z);Rt.setAttribute("role","button"),Rt.setAttribute("tabindex","0"),Rt.href="#",Rt.innerHTML=wt.text,L.DomEvent.disableClickPropagation(Rt),L.DomEvent.on(Rt,"click",L.DomEvent.stop),!u.disabled&&wt.onClick&&(L.DomEvent.addListener(Rt,"click",function(Vt){Vt.preventDefault();var Xt="",_e=g._map.pm.Toolbar.buttons;for(var Me in _e)if(_e[Me]._button===u){Xt=Me;break}g._fireActionClick(wt,Xt,u)},g),L.DomEvent.addListener(Rt,"click",wt.onClick,g))}),u.toggleStatus&&L.DomUtil.addClass(C,"active");var Q=L.DomUtil.create("div","control-icon",D);return u.iconUrl&&Q.setAttribute("src",u.iconUrl),u.className&&L.DomUtil.addClass(Q,u.className),L.DomEvent.disableClickPropagation(D),L.DomEvent.on(D,"click",L.DomEvent.stop),u.disabled||(L.DomEvent.addListener(D,"click",this._onBtnClick,this),L.DomEvent.addListener(D,"click",this._triggerClick,this)),u.disabled&&(L.DomUtil.addClass(D,"pm-disabled"),D.setAttribute("aria-disabled","true")),C},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&!1!==this._button.cssToggle?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var u="",g=this._map.pm.Toolbar.buttons;for(var v in g)if(g[v]._button===this._button){u=v;break}this._fireButtonClick(u,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var u="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,u),g.setAttribute("aria-disabled","true"),L.DomEvent.off(g,"click",this._triggerClick,this),L.DomEvent.off(g,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(g,u),g.setAttribute("aria-disabled","false"),L.DomEvent.on(g,"click",this._triggerClick,this),L.DomEvent.on(g,"click",this._onBtnClick,this))}}});function so(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function ze(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?so(Object(v),!0).forEach(function(C){Ze(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):so(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function Ze(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}function ge(u){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(u)}L.Control.PMButton=vs;const Zs=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(u){this.init(u)},reinit:function(){var u=this.isVisible;this.removeControls(),this._defineButtons(),u&&this.addControls()},init:function(u){this.map=u,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(u){var g="".concat(u,"Container");return this[g]||(this[g]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(u," leaflet-bar leaflet-control"))),this[g]},getButtons:function(){return this.buttons},addControls:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;typeof u.editPolygon<"u"&&(u.editMode=u.editPolygon),typeof u.deleteLayer<"u"&&(u.removalMode=u.deleteLayer),L.Util.setOptions(this,u),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var u=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var v in u)L.Util.setOptions(u[v],{className:g.geomanIcons[v]})},removeControls:function(){var u=this.getButtons();for(var g in u)u[g].remove();this.isVisible=!1},toggleControls:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(u)},_addButton:function(u,g){return this.buttons[u]=g,this.options[u]=this.options[u]||!1,this.buttons[u]},triggerClickOnToggledButtons:function(u){for(var g in this.buttons){var v=this.buttons[g];v._button.disableByOtherButtons&&v!==u&&v.toggled()&&v._triggerClick()}},toggleButton:function(u,g){return"editPolygon"===u&&(u="editMode"),"deleteLayer"===u&&(u="removalMode"),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.triggerClickOnToggledButtons(this.buttons[u]),!!this.buttons[u]&&this.buttons[u].toggle(g)},_defineButtons:function(){var u=this,g={className:"control-icon leaflet-pm-icon-marker",title:fe("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},v={title:fe("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={className:"control-icon leaflet-pm-icon-polyline",title:fe("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},D={title:fe("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},Z={title:fe("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},J={title:fe("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},et={title:fe("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){u.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Q={title:fe("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){u.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},rt={title:fe("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},wt={title:fe("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){u.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},At={title:fe("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){u.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Rt={className:"control-icon leaflet-pm-icon-text",title:fe("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(Vt,Xt){u.map.pm.Draw[Xt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(g)),this._addButton("drawPolyline",new L.Control.PMButton(C)),this._addButton("drawRectangle",new L.Control.PMButton(J)),this._addButton("drawPolygon",new L.Control.PMButton(v)),this._addButton("drawCircle",new L.Control.PMButton(D)),this._addButton("drawCircleMarker",new L.Control.PMButton(Z)),this._addButton("drawText",new L.Control.PMButton(Rt)),this._addButton("editMode",new L.Control.PMButton(et)),this._addButton("dragMode",new L.Control.PMButton(Q)),this._addButton("cutPolygon",new L.Control.PMButton(rt)),this._addButton("removalMode",new L.Control.PMButton(wt)),this._addButton("rotateMode",new L.Control.PMButton(At))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var u=this.getButtons(),g=[];for(var v in!1===this.options.drawControls&&(g=g.concat(Object.keys(u).filter(function(D){return!u[D]._button.tool}))),!1===this.options.editControls&&(g=g.concat(Object.keys(u).filter(function(D){return"edit"===u[D]._button.tool}))),!1===this.options.optionsControls&&(g=g.concat(Object.keys(u).filter(function(D){return"options"===u[D]._button.tool}))),!1===this.options.customControls&&(g=g.concat(Object.keys(u).filter(function(D){return"custom"===u[D]._button.tool}))),u)if(this.options[v]&&-1===g.indexOf(v)){var C=u[v]._button.tool;C||(C="draw"),u[v].setPosition(this._getBtnPosition(C)),u[v].addTo(this.map)}}},_getBtnPosition:function(u){return this.options.positions&&this.options.positions[u]?this.options.positions[u]:this.options.position},setBlockPosition:function(u,g){this.options.positions[u]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(u,g){if(!g)throw new TypeError("Button has no name");"object"!==ge(g)&&(g={name:g});var v=this._btnNameMapping(u);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");var C=this.map.pm.Draw.createNewDrawInstance(g.name,v);return g=ze(ze({},this.buttons[v]._button),g),{drawInstance:C,control:this.createCustomControl(g)}},createCustomControl:function(u){var g,v;if(!u.name)throw new TypeError("Button has no name");if(this.buttons[u.name])throw new TypeError("Button with this name already exists");u.onClick||(u.onClick=function(){}),u.afterClick||(u.afterClick=function(){}),!1!==u.toggle&&(u.toggle=!0),u.block&&(u.block=u.block.toLowerCase()),u.block&&"draw"!==u.block||(u.block=""),u.className?-1===u.className.indexOf("control-icon")&&(u.className="control-icon ".concat(u.className)):u.className="control-icon";var C={tool:u.block,className:u.className,title:u.title||"",jsClass:u.name,onClick:u.onClick,afterClick:u.afterClick,doToggle:u.toggle,toggleStatus:!1,disableOtherButtons:null===(g=u.disableOtherButtons)||void 0===g||g,disableByOtherButtons:null===(v=u.disableByOtherButtons)||void 0===v||v,cssToggle:u.toggle,position:this.options.position,actions:u.actions||[],disabled:!!u.disabled};!1!==this.options[u.name]&&(this.options[u.name]=!0);var D=this._addButton(u.name,new L.Control.PMButton(C));return this.changeControlOrder(),D},changeControlOrder:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],g=this._shapeMapping(),v=[];u.forEach(function(rt){v.push(g[rt]?g[rt]:rt)});var C=this.getButtons(),D={};v.forEach(function(rt){C[rt]&&(D[rt]=C[rt])}),Object.keys(C).filter(function(rt){return!C[rt]._button.tool}).forEach(function(rt){-1===v.indexOf(rt)&&(D[rt]=C[rt])}),Object.keys(C).filter(function(rt){return"edit"===C[rt]._button.tool}).forEach(function(rt){-1===v.indexOf(rt)&&(D[rt]=C[rt])}),Object.keys(C).filter(function(rt){return"options"===C[rt]._button.tool}).forEach(function(rt){-1===v.indexOf(rt)&&(D[rt]=C[rt])}),Object.keys(C).filter(function(rt){return"custom"===C[rt]._button.tool}).forEach(function(rt){-1===v.indexOf(rt)&&(D[rt]=C[rt])}),Object.keys(C).forEach(function(rt){-1===v.indexOf(rt)&&(D[rt]=C[rt])}),this.map.pm.Toolbar.buttons=D,this._showHideButtons()},getControlOrder:function(){var u=this.getButtons(),g=[];for(var v in u)g.push(v);return g},changeActionsOfControl:function(u,g){var v=this._btnNameMapping(u);if(!v)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=g,this.changeControlOrder()},setButtonDisabled:function(u,g){var v=this._btnNameMapping(u);g?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(u){var g=this._shapeMapping();return g[u]?g[u]:u}});function Ys(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function nt(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?Ys(Object(v),!0).forEach(function(C){A(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):Ys(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function A(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}const W={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(u){var g=this;u.forEach(function(v){Array.isArray(v)?g._assignEvents(v):(v.off("drag",g._handleSnapping,g),v.on("drag",g._handleSnapping,g),v.off("dragend",g._cleanupSnapping,g),v.on("dragend",g._cleanupSnapping,g))})},_cleanupSnapping:function(u){u&&(u.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(g){g.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(u){var g=this,v=u.target;if(v._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(void 0===this._snapList&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var D,C=this._calcClosestLayer(v.getLatLng(),this._snapList);if(0===Object.keys(C).length)return!1;D=C.layer instanceof L.Marker||C.layer instanceof L.CircleMarker||!this.options.snapSegment?C.latlng:this._checkPrioritiySnapping(C);var J=this.options.snapDistance,et={marker:v,shape:this._shape,snapLatLng:D,segment:C.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:C.layer,distance:C.distance};if(this._fireSnapDrag(et.marker,et),this._fireSnapDrag(this._layer,et),C.distance<J){v._orgLatLng=v.getLatLng(),v.setLatLng(D),v._snapped=!0,v._snapInfo=et;var Q=this._snapLatLng||{},rt=D||{};Q.lat===rt.lat&&Q.lng===rt.lng||(g._snapLatLng=D,g._fireSnap(v,et),g._fireSnap(g._layer,et))}else this._snapLatLng&&(this._unsnap(et),v._snapped=!1,v._snapInfo=void 0,this._fireUnsnap(et.marker,et),this._fireUnsnap(this._layer,et));return!0},_createSnapList:function(){var u=this,g=[],v=[],C=this._map;C.off("pm:remove",this._handleSnapLayerRemoval,this),C.on("pm:remove",this._handleSnapLayerRemoval,this),C.eachLayer(function(D){if((D instanceof L.Polyline||D instanceof L.Marker||D instanceof L.CircleMarker||D instanceof L.ImageOverlay)&&!0!==D.options.snapIgnore){if(void 0===D.options.snapIgnore&&(!L.PM.optIn&&!0===D.options.pmIgnore||L.PM.optIn&&!1!==D.options.pmIgnore))return;(D instanceof L.Circle||D instanceof L.CircleMarker)&&D.pm&&D.pm._hiddenPolyCircle?g.push(D.pm._hiddenPolyCircle):D instanceof L.ImageOverlay&&(D=L.rectangle(D.getBounds())),g.push(D);var Z=L.polyline([],{color:"red",pmIgnore:!0});Z._pmTempLayer=!0,v.push(Z),(D instanceof L.Circle||D instanceof L.CircleMarker)&&v.push(Z)}}),g=(g=(g=g.filter(function(D){return u._layer!==D})).filter(function(D){return D._latlng||D._latlngs&&de(D._latlngs)})).filter(function(D){return!D._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var D=L.polyline([],{color:"red",pmIgnore:!0});D._pmTempLayer=!0,v.push(D)}),this._snapList=g.concat(this._otherSnapLayers)):this._snapList=g,this.debugIndicatorLines=v},_handleSnapLayerRemoval:function(u){var g=u.layer,v=this._snapList.findIndex(function(C){return C._leaflet_id===g._leaflet_id});this._snapList.splice(v,1)},_calcClosestLayer:function(u,g){return this._calcClosestLayers(u,g,1)[0]},_calcClosestLayers:function(u,g){var v=this,C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,D=[],Z={};g.forEach(function(et,Q){if(!et._parentCopy||et._parentCopy!==v._layer){var rt=v._calcLayerDistances(u,et);if(rt.distance=Math.floor(rt.distance),v.debugIndicatorLines){if(!v.debugIndicatorLines[Q]){var wt=L.polyline([],{color:"red",pmIgnore:!0});wt._pmTempLayer=!0,v.debugIndicatorLines[Q]=wt}v.debugIndicatorLines[Q].setLatLngs([u,rt.latlng])}1===C&&(void 0===Z.distance||rt.distance<=Z.distance)?(rt.distance<Z.distance&&(D=[]),(Z=rt).layer=et,D.push(Z)):1!==C&&(Z={},(Z=rt).layer=et,D.push(Z))}}),1!==C&&(D=D.sort(function(et,Q){return et.distance-Q.distance})),-1===C&&(C=D.length);var J=this._getClosestLayerByPriority(D,C);return L.Util.isArray(J)?J:[J]},_calcLayerDistances:function(u,g){var v=this._map,C=g instanceof L.Marker||g instanceof L.CircleMarker,D=g instanceof L.Polygon,Z=u;if(C){var J=g.getLatLng();return{latlng:nt({},J),distance:this._getDistance(v,J,Z)}}return this._calcLatLngDistances(Z,g.getLatLngs(),v,D)},_calcLatLngDistances:function(u,g,v){var C,D,Z,J=this,et=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function wt(At){At.forEach(function(Rt,Vt){if(Array.isArray(Rt))wt(Rt);else if(J.options.snapSegment){var _e=Rt,Me=At[et?Vt+1===At.length?0:Vt+1:Vt+1===At.length?void 0:Vt+1];if(Me){var Mn=J._getDistanceToSegment(v,u,_e,Me);(void 0===D||Mn<D)&&(D=Mn,Z=[_e,Me])}}else{var qn=J._getDistance(v,u,Rt);(void 0===D||qn<D)&&(D=qn,C=Rt)}})}(g),this.options.snapSegment?{latlng:nt({},this._getClosestPointOnSegment(v,u,Z[0],Z[1])),segment:Z,distance:D}:{latlng:C,distance:D}},_getClosestLayerByPriority:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;u=u.sort(function(J,et){return J._leaflet_id-et._leaflet_id});var D=0,Z={};return(this._map.pm.globalOptions.snappingOrder||[]).concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach(function(J){Z[J]||(Z[J]=D+=1)}),u.sort(function Ki(u,g){var v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!g||0===Object.keys(g).length)return function(Q,rt){return Q-rt};for(var C,D=Object.keys(g),Z=D.length-1,J={};Z>=0;)J[(C=D[Z]).toLowerCase()]=g[C],Z-=1;function et(Q){return Q instanceof L.Marker?"Marker":Q instanceof L.Circle?"Circle":Q instanceof L.CircleMarker?"CircleMarker":Q instanceof L.Rectangle?"Rectangle":Q instanceof L.Polygon?"Polygon":Q instanceof L.Polyline?"Line":void 0}return function(Q,rt){var wt,At;if("instanceofShape"===u){if(wt=et(Q.layer).toLowerCase(),At=et(rt.layer).toLowerCase(),!wt||!At)return 0}else{if(!Q.hasOwnProperty(u)||!rt.hasOwnProperty(u))return 0;wt=Q[u].toLowerCase(),At=rt[u].toLowerCase()}var Rt=wt in J?J[wt]:Number.MAX_SAFE_INTEGER,Vt=At in J?J[At]:Number.MAX_SAFE_INTEGER,Xt=0;return Rt<Vt?Xt=-1:Rt>Vt&&(Xt=1),"desc"===v?-1*Xt:Xt}}("instanceofShape",Z)),1===g?u[0]||{}:u.slice(0,g)},_checkPrioritiySnapping:function(u){var g=this._map,v=u.segment[0],C=u.segment[1],D=u.latlng,Z=this._getDistance(g,v,D),J=this._getDistance(g,C,D),et=Z<J?v:C,Q=Z<J?Z:J;if(this.options.snapMiddle){var rt=L.PM.Utils.calcMiddleLatLng(g,v,C),wt=this._getDistance(g,rt,D);wt<Z&&wt<J&&(et=rt,Q=wt)}return nt({},Q<this.options.snapDistance?et:D)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(u,g,v,C){var D=u.getMaxZoom();D===1/0&&(D=u.getZoom());var Z=u.project(g,D),J=u.project(v,D),et=u.project(C,D),Q=L.LineUtil.closestPointOnSegment(Z,J,et);return u.unproject(Q,D)},_getDistanceToSegment:function(u,g,v,C){var D=u.latLngToLayerPoint(g),Z=u.latLngToLayerPoint(v),J=u.latLngToLayerPoint(C);return L.LineUtil.pointToSegmentDistance(D,Z,J)},_getDistance:function(u,g,v){return u.latLngToLayerPoint(g).distanceTo(u.latLngToLayerPoint(v))}},it=L.Class.extend({includes:[W,jt],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(u){L.Util.setOptions(this,u),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(u){var g=this,v=new L.Icon.Default;v.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=v,this._map=u,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(C){g[C]=new L.PM.Draw[C](g._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(u){this.options.pathOptions=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?I()(this.options.pathOptions,u):u},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(u,g){if(!u)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[u].enable(g)},disable:function(){var u=this;this.shapes.forEach(function(g){u[g].disable()})},addControls:function(){var u=this;this.shapes.forEach(function(g){u[g].addButton()})},getActiveShape:function(){var u,g=this;return this.shapes.forEach(function(v){g[v]._enabled&&(u=v)}),u},_setGlobalDrawMode:function(){"Cut"===this._shape?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled(),L.PM.Utils.findLayers(this._map).forEach(this._enabled?function(g){L.PM.Utils.disablePopup(g)}:function(g){L.PM.Utils.enablePopup(g)})},createNewDrawInstance:function(u,g){var v=this._getShapeFromBtnName(g);if(this[u])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError("There is no class L.PM.Draw.".concat(v));return this[u]=new L.PM.Draw[v](this._map),this[u].toolbarButtonName=u,this[u]._shape=u,this.shapes.push(u),this[g]&&this[u].setOptions(this[g].options),this[u].setOptions(this[u].options),this[u]},_getShapeFromBtnName:function(u){var g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[u]?g[u]:this[u]?this[u]._shape:u},_finishLayer:function(u){u.pm&&(u.pm.setOptions(this.options),u.pm._shape=this._shape,u.pm._map=this._map),this._addDrawnLayerProp(u)},_addDrawnLayerProp:function(u){u._drawnByGeoman=!0},_setPane:function(u,g){"layerPane"===g?u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===g?u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===g&&(u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return 0===(this._map||this._layer._map).pm.getGeomanLayers().length}});it.Marker=it.extend({initialize:function(u){this._map=u,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(u){var g=this;L.Util.setOptions(this,u),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(v){g.isRelevantMarker(v)&&v.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var u=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(g){u.isRelevantMarker(g)&&g.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(u){this.enabled()?this.disable():this.enable(u)},isRelevantMarker:function(u){return u instanceof L.Marker&&u.pm&&!u._pmTempLayer&&!u.pm._initTextMarker},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(u){if(u.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng(),v=new L.Marker(g,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var u,g;null!==(u=this.options.markerStyle)&&void 0!==u&&u.icon&&(null===(g=this._hintMarker)||void 0===g||g.setIcon(this.options.markerStyle.icon))}});var at=6371008.8,Nt={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*at,kilometers:6371.0088,kilometres:6371.0088,meters:at,metres:at,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:at/1852,radians:1,yards:6967335.223679999};function vt(u,g,v){void 0===v&&(v={});var C={type:"Feature"};return(0===v.id||v.id)&&(C.id=v.id),v.bbox&&(C.bbox=v.bbox),C.properties=g||{},C.geometry=u,C}function Wt(u,g,v){if(void 0===v&&(v={}),!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Un(u[0])||!Un(u[1]))throw new Error("coordinates must contain numbers");return vt({type:"Point",coordinates:u},g,v)}function Ee(u,g,v){if(void 0===v&&(v={}),u.length<2)throw new Error("coordinates must be an array of two or more positions");return vt({type:"LineString",coordinates:u},g,v)}function Re(u,g){void 0===g&&(g={});var v={type:"FeatureCollection"};return g.id&&(v.id=g.id),g.bbox&&(v.bbox=g.bbox),v.features=u,v}function ye(u){return u%(2*Math.PI)*180/Math.PI}function Te(u){return u%360*Math.PI/180}function Un(u){return!isNaN(u)&&null!==u&&!Array.isArray(u)}function Jn(u){var g,v,C={type:"FeatureCollection",features:[]};if("LineString"===(v="Feature"===u.type?u.geometry:u).type)g=[v.coordinates];else if("MultiLineString"===v.type)g=v.coordinates;else if("MultiPolygon"===v.type)g=[].concat.apply([],v.coordinates);else{if("Polygon"!==v.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");g=v.coordinates}return g.forEach(function(D){g.forEach(function(Z){for(var J=0;J<D.length-1;J++)for(var et=J;et<Z.length-1;et++)if(D!==Z||1!==Math.abs(J-et)&&(0!==J||et!==D.length-2||D[J][0]!==D[D.length-1][0]||D[J][1]!==D[D.length-1][1])){var Q=Pi(D[J][0],D[J][1],D[J+1][0],D[J+1][1],Z[et][0],Z[et][1],Z[et+1][0],Z[et+1][1]);Q&&C.features.push(Wt([Q[0],Q[1]]))}})}),C}function Pi(u,g,v,C,D,Z,J,et){var Q,rt,wt,At,Rt={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(Q=(et-Z)*(v-u)-(J-D)*(C-g))?null!==Rt.x&&null!==Rt.y&&Rt:(At=(v-u)*(rt=g-Z)-(C-g)*(wt=u-D),rt=((J-D)*rt-(et-Z)*wt)/Q,wt=At/Q,Rt.x=u+rt*(v-u),Rt.y=g+rt*(C-g),rt>=0&&rt<=1&&(Rt.onLine1=!0),wt>=0&&wt<=1&&(Rt.onLine2=!0),!(!Rt.onLine1||!Rt.onLine2)&&[Rt.x,Rt.y])}function Ri(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function Ni(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?Ri(Object(v),!0).forEach(function(C){gi(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):Ri(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function gi(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}function Vr(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function Ji(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?Vr(Object(v),!0).forEach(function(C){Hi(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):Vr(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function Hi(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}function In(u,g){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);g&&(C=C.filter(function(D){return Object.getOwnPropertyDescriptor(u,D).enumerable})),v.push.apply(v,C)}return v}function lr(u){for(var g=1;g<arguments.length;g++){var v=null!=arguments[g]?arguments[g]:{};g%2?In(Object(v),!0).forEach(function(C){Qi(u,C,v[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):In(Object(v)).forEach(function(C){Object.defineProperty(u,C,Object.getOwnPropertyDescriptor(v,C))})}return u}function Qi(u,g,v){return g in u?Object.defineProperty(u,g,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[g]=v,u}function Ei(u){if(!u)throw new Error("coord is required");if(!Array.isArray(u)){if("Feature"===u.type&&null!==u.geometry&&"Point"===u.geometry.type)return u.geometry.coordinates;if("Point"===u.type)return u.coordinates}if(Array.isArray(u)&&u.length>=2&&!Array.isArray(u[0])&&!Array.isArray(u[1]))return u;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Hn(u){if(Array.isArray(u))return u;if("Feature"===u.type){if(null!==u.geometry)return u.geometry.coordinates}else if(u.coordinates)return u.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function $i(u){return"Feature"===u.type?u.geometry:u}function Hr(u,g){return"FeatureCollection"===u.type?"FeatureCollection":"GeometryCollection"===u.type?"GeometryCollection":"Feature"===u.type&&null!==u.geometry?u.geometry.type:u.type}function Xs(u,g,v){if(null!==u)for(var C,D,Z,J,et,Q,rt,wt,At=0,Rt=0,Vt=u.type,Xt="FeatureCollection"===Vt,_e="Feature"===Vt,Me=Xt?u.features.length:1,Mn=0;Mn<Me;Mn++){et=(wt=!!(rt=Xt?u.features[Mn].geometry:_e?u.geometry:u)&&"GeometryCollection"===rt.type)?rt.geometries.length:1;for(var qn=0;qn<et;qn++){var Rn=0,ri=0;if(null!==(J=wt?rt.geometries[qn]:rt)){Q=J.coordinates;var _i=J.type;switch(At=!v||"Polygon"!==_i&&"MultiPolygon"!==_i?0:1,_i){case null:break;case"Point":if(!1===g(Q,Rt,Mn,Rn,ri))return!1;Rt++,Rn++;break;case"LineString":case"MultiPoint":for(C=0;C<Q.length;C++){if(!1===g(Q[C],Rt,Mn,Rn,ri))return!1;Rt++,"MultiPoint"===_i&&Rn++}"LineString"===_i&&Rn++;break;case"Polygon":case"MultiLineString":for(C=0;C<Q.length;C++){for(D=0;D<Q[C].length-At;D++){if(!1===g(Q[C][D],Rt,Mn,Rn,ri))return!1;Rt++}"MultiLineString"===_i&&Rn++,"Polygon"===_i&&ri++}"Polygon"===_i&&Rn++;break;case"MultiPolygon":for(C=0;C<Q.length;C++){for(ri=0,D=0;D<Q[C].length;D++){for(Z=0;Z<Q[C][D].length-At;Z++){if(!1===g(Q[C][D][Z],Rt,Mn,Rn,ri))return!1;Rt++}ri++}Rn++}break;case"GeometryCollection":for(C=0;C<J.geometries.length;C++)if(!1===Xs(J.geometries[C],g,v))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Xo(u,g){if("Feature"===u.type)g(u,0);else if("FeatureCollection"===u.type)for(var v=0;v<u.features.length&&!1!==g(u.features[v],v);v++);}function Ye(u,g){!function Wo(u,g){var v,C,D,Z,J,et,Q,rt,wt,At,Rt=0,Vt="FeatureCollection"===u.type,Xt="Feature"===u.type,_e=Vt?u.features.length:1;for(v=0;v<_e;v++){for(rt=Vt?u.features[v].properties:Xt?u.properties:{},wt=Vt?u.features[v].bbox:Xt?u.bbox:void 0,At=Vt?u.features[v].id:Xt?u.id:void 0,J=(Q=!!(et=Vt?u.features[v].geometry:Xt?u.geometry:u)&&"GeometryCollection"===et.type)?et.geometries.length:1,D=0;D<J;D++)if(null!==(Z=Q?et.geometries[D]:et))switch(Z.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===g(Z,Rt,rt,wt,At))return!1;break;case"GeometryCollection":for(C=0;C<Z.geometries.length;C++)if(!1===g(Z.geometries[C],Rt,rt,wt,At))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===g(null,Rt,rt,wt,At))return!1;Rt++}}(u,function(v,C,D,Z,J){var et,Q=null===v?null:v.type;switch(Q){case null:case"Point":case"LineString":case"Polygon":return!1!==g(vt(v,D,{bbox:Z,id:J}),C,0)&&void 0}switch(Q){case"MultiPoint":et="Point";break;case"MultiLineString":et="LineString";break;case"MultiPolygon":et="Polygon"}for(var rt=0;rt<v.coordinates.length;rt++)if(!1===g(vt({type:et,coordinates:v.coordinates[rt]},D),C,rt))return!1})}it.Line=it.extend({initialize:function(u){this._map=u,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(u){L.Util.setOptions(this,u),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],Ni(Ni({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(u){this.enabled()?this.disable():this.enable(u)},_syncHintLine:function(){var u=this._layer.getLatLngs();u.length>0&&this._hintline.setLatLngs([u[u.length-1],this._hintMarker.getLatLng()])},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var v=this._layer._defaultShape().slice();v.push(this._hintMarker.getLatLng()),this._change(v)},hasSelfIntersection:function(){return Jn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(u,g){var v=L.polyline(this._layer.getLatLngs());u&&(g||(g=this._hintMarker.getLatLng()),v.addLatLng(g));var C=Jn(v.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(u){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,u.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),C=v[v.length-1];if(g.equals(v[0])||v.length>0&&g.equals(C))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);var D=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(D,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),"snap"===this.options.finishOn&&this._hintMarker._snapped&&this._finishShape(u)}}},_setHintLineAfterNewVertex:function(u){this._hintline.setLatLngs([u,u])},_removeLastVertex:function(){var u=this._markers;if(u.length<=1)this.disable();else{var g=this._layer.getLatLngs(),v=u[u.length-1],C=L.PM.Utils.findDeepMarkerIndex(u,v).indexPath;u.pop(),this._layerGroup.removeLayer(v);var Z=g.indexOf(u[u.length-1].getLatLng());g=g.slice(0,Z+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,C,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var u=this._layer.getLatLngs();if(!(u.length<=1)){var g=L.polyline(u,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(u){var g=new L.Marker(u,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText:function(){var u;u=fe(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(u)},_change:function(u){this._fireChange(u,"Draw")},setStyle:function(){var u,g;null===(u=this._layer)||void 0===u||u.setStyle(this.options.templineStyle),null===(g=this._hintline)||void 0===g||g.setStyle(this.options.hintlineStyle)}}),it.Polygon=it.Line.extend({initialize:function(u){this._map=u,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(u){L.PM.Draw.Line.prototype.enable.call(this,u),this._layer.pm._shape="Polygon"},_createMarker:function(u){var g=new L.Marker(u,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),1===this._layer.getLatLngs().flat().length?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",function(){return 1}),g},_setTooltipText:function(){var u;u=fe(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(u)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var u=this._layer.getLatLngs();if(!(u.length<=2)){var g=L.polygon(u,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),it.Rectangle=it.extend({initialize:function(u){this._map=u,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(u){if(L.Util.setOptions(this,u),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var g=0;g<2;g+=1){var v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(u){this.enabled()?this.disable():this.enable(u)},_placeStartingMarkers:function(u){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(v){L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(fe("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var u=this._startMarker.getLatLng();u&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([u,u]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}var v=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(v,"Draw")},_syncRectangleSize:function(){var u=this,g=Tr(this._startMarker.getLatLng(),this._map),v=Tr(this._hintMarker.getLatLng(),this._map),C=L.PM.Utils._getRotatedRectangle(g,v,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(C),this.options.cursorMarker&&this._styleMarkers){var D=[];C.forEach(function(Z){Z.equals(g,1e-8)||Z.equals(v,1e-8)||D.push(Z)}),D.forEach(function(Z,J){try{u._styleMarkers[J].setLatLng(Z)}catch{}})}},_findCorners:function(){var u=this._layer.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]},_finishShape:function(u){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var C=L.rectangle([v,g],this.options.pathOptions);if(this.options.rectangleAngle){var D=L.PM.Utils._getRotatedRectangle(v,g,this.options.rectangleAngle||0,this._map);C.setLatLngs(D),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var u;null===(u=this._layer)||void 0===u||u.setStyle(this.options.pathOptions)}}),it.Circle=it.extend({initialize:function(u){this._map=u,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(u){L.Util.setOptions(this,u),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),Ji(Ji({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(u){this.enabled()?this.disable():this.enable(u)},_syncHintLine:function(){var u=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([u,g])},_syncCircleRadius:function(){var u,g=this._centerMarker.getLatLng(),v=this._hintMarker.getLatLng();u=this._map.options.crs===L.CRS.Simple?this._map.distance(g,v):g.distanceTo(v),this._layer.setRadius(this.options.minRadiusCircle&&u<this.options.minRadiusCircle?this.options.minRadiusCircle:this.options.maxRadiusCircle&&u>this.options.maxRadiusCircle?this.options.maxRadiusCircle:u)},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}this._handleHintMarkerSnapping();var v=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(v,"Draw")},_placeCenterMarker:function(u){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var u=this._centerMarker.getLatLng();u&&(this._layer.setLatLng(u),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(fe("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(u){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g,v=this._centerMarker.getLatLng(),C=this._hintMarker.getLatLng();g=this._map.options.crs===L.CRS.Simple?this._map.distance(v,C):v.distanceTo(C),this.options.minRadiusCircle&&g<this.options.minRadiusCircle?g=this.options.minRadiusCircle:this.options.maxRadiusCircle&&g>this.options.maxRadiusCircle&&(g=this.options.maxRadiusCircle);var D=Ji(Ji({},this.options.pathOptions),{},{radius:g}),Z=L.circle(v,D);this._setPane(Z,"layerPane"),this._finishLayer(Z),Z.addTo(this._map.pm._getContainingLayer()),Z.pm&&Z.pm._updateHiddenPolyCircle(),this._fireCreate(Z),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var u=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return u;var g=this._centerMarker.getLatLng(),v=g.distanceTo(u);return this.options.minRadiusCircle&&v<this.options.minRadiusCircle?u=li(this._map,g,u,this.options.minRadiusCircle):this.options.maxRadiusCircle&&v>this.options.maxRadiusCircle&&(u=li(this._map,g,u,this.options.maxRadiusCircle)),u},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var u=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),v=u.distanceTo(g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&v<this.options.minRadiusCircle||this.options.maxRadiusCircle&&v>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var u,g;null===(u=this._layer)||void 0===u||u.setStyle(this.options.templineStyle),null===(g=this._hintline)||void 0===g||g.setStyle(this.options.hintlineStyle)}}),it.CircleMarker=it.Marker.extend({initialize:function(u){this._map=u,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(u){var g=this;if(L.Util.setOptions(this,u),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var v={};L.extend(v,this.options.templineStyle),v.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),v),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(C){g.isRelevantMarker(C)&&C.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var u=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(g){u.isRelevantMarker(g)&&g.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(u){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var u=this._centerMarker.getLatLng();u&&(this._layer.setLatLng(u),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(fe("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var u=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([u,g])},_syncCircleRadius:function(){var u=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),v=this._map.project(u).distanceTo(this._map.project(g));this._layer.setRadius(this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker?this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker?this.options.maxRadiusCircleMarker:v)},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}this._handleHintMarkerSnapping();var v=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(v,"Draw")},isRelevantMarker:function(u){return u instanceof L.CircleMarker&&!(u instanceof L.Circle)&&u.pm&&!u._pmTempLayer},_createMarker:function(u){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&u.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._hintMarker.getLatLng(),v=L.circleMarker(g,this.options.pathOptions);this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable&&v.pm.enable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(u){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var g=this._centerMarker.getLatLng(),v=this._hintMarker.getLatLng(),C=this._map.project(g).distanceTo(this._map.project(v));this.options.editable&&(this.options.minRadiusCircleMarker&&C<this.options.minRadiusCircleMarker?C=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&C>this.options.maxRadiusCircleMarker&&(C=this.options.maxRadiusCircleMarker));var D=lr(lr({},this.options.pathOptions),{},{radius:C}),Z=L.circleMarker(g,D);this._setPane(Z,"layerPane"),this._finishLayer(Z),Z.addTo(this._map.pm._getContainingLayer()),Z.pm&&Z.pm._updateHiddenPolyCircle(),this._fireCreate(Z),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var u=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return u;var g=this._centerMarker.getLatLng(),v=this._map.project(g).distanceTo(this._map.project(u));this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker?u=li(this._map,g,u,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker&&(u=li(this._map,g,u,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return u},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var u=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),v=this._map.project(u).distanceTo(this._map.project(g));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(u){var g=this._centerMarker.getLatLng(),v=this._map.project(g),C=L.point(v.x+u,v.y);return this._map.unproject(C).distanceTo(g)},setStyle:function(){var u,g,v={};L.extend(v,this.options.templineStyle),this.options.editable&&(v.radius=0),null===(u=this._layer)||void 0===u||u.setStyle(v),null===(g=this._hintline)||void 0===g||g.setStyle(this.options.hintlineStyle)}});const Fn=function(u){if(!u)throw new Error("geojson is required");var g=[];return Ye(u,function(v){!function(C,D){var Z=[],J=C.geometry;if(null!==J){switch(J.type){case"Polygon":Z=Hn(J);break;case"LineString":Z=[Hn(J)]}Z.forEach(function(et){var wt,At;(wt=C.properties,At=[],et.reduce(function(Rt,Vt){var Xt,_e,Me,Mn,qn,Rn,ri=Ee([Rt,Vt],wt);return ri.bbox=[(Me=(Xt=Rt)[0])<(qn=(_e=Vt)[0])?Me:qn,(Mn=Xt[1])<(Rn=_e[1])?Mn:Rn,Me>qn?Me:qn,Mn>Rn?Mn:Rn],At.push(ri),Vt}),At).forEach(function(rt){rt.id=D.length,D.push(rt)})})}}(v,g)}),Re(g)};var ao=d(1787);function Lr(u,g){var v=Hn(u),C=Hn(g);if(2!==v.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==C.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var D=v[0][0],Z=v[0][1],J=v[1][0],et=v[1][1],Q=C[0][0],rt=C[0][1],wt=C[1][0],At=C[1][1],Rt=(At-rt)*(J-D)-(wt-Q)*(et-Z);if(0===Rt)return null;var _e=((wt-Q)*(Z-rt)-(At-rt)*(D-Q))/Rt,Me=((J-D)*(Z-rt)-(et-Z)*(D-Q))/Rt;return _e>=0&&_e<=1&&Me>=0&&Me<=1?Wt([D+_e*(J-D),Z+_e*(et-Z)]):null}const hr=function(u,g){var v={},C=[];if("LineString"===u.type&&(u=vt(u)),"LineString"===g.type&&(g=vt(g)),"Feature"===u.type&&"Feature"===g.type&&null!==u.geometry&&null!==g.geometry&&"LineString"===u.geometry.type&&"LineString"===g.geometry.type&&2===u.geometry.coordinates.length&&2===g.geometry.coordinates.length){var D=Lr(u,g);return D&&C.push(D),Re(C)}var Z=ao();return Z.load(Fn(g)),Xo(Fn(u),function(J){Xo(Z.search(J),function(et){var Q=Lr(J,et);if(Q){var rt=Hn(Q).join(",");v[rt]||(v[rt]=!0,C.push(Q))}})}),Re(C)},Mi=function(u,g,v){void 0===v&&(v={});var C=Ei(u),D=Ei(g),Z=Te(D[1]-C[1]),J=Te(D[0]-C[0]),et=Te(C[1]),Q=Te(D[1]),rt=Math.pow(Math.sin(Z/2),2)+Math.pow(Math.sin(J/2),2)*Math.cos(et)*Math.cos(Q);return function Ue(u,g){void 0===g&&(g="kilometers");var v=Nt[g];if(!v)throw new Error(g+" units is invalid");return u*v}(2*Math.atan2(Math.sqrt(rt),Math.sqrt(1-rt)),v.units)};function Zn(u){var g=[1/0,1/0,-1/0,-1/0];return Xs(u,function(v){g[0]>v[0]&&(g[0]=v[0]),g[1]>v[1]&&(g[1]=v[1]),g[2]<v[0]&&(g[2]=v[0]),g[3]<v[1]&&(g[3]=v[1])}),g}Zn.default=Zn;const Ko=Zn;function cr(u,g,v){if(void 0===v&&(v={}),!0===v.final)return(cr(g,u)+180)%360;var C=Ei(u),D=Ei(g),Z=Te(C[0]),J=Te(D[0]),et=Te(C[1]),Q=Te(D[1]),rt=Math.sin(J-Z)*Math.cos(Q),wt=Math.cos(et)*Math.sin(Q)-Math.sin(et)*Math.cos(Q)*Math.cos(J-Z);return ye(Math.atan2(rt,wt))}function Ws(u,g,v,C){void 0===C&&(C={});var D=Ei(u),Z=Te(D[0]),J=Te(D[1]),et=Te(v),Q=function qe(u,g){void 0===g&&(g="kilometers");var v=Nt[g];if(!v)throw new Error(g+" units is invalid");return u/v}(g,C.units),rt=Math.asin(Math.sin(J)*Math.cos(Q)+Math.cos(J)*Math.sin(Q)*Math.cos(et));return Wt([ye(Z+Math.atan2(Math.sin(et)*Math.sin(Q)*Math.cos(J),Math.cos(Q)-Math.sin(J)*Math.sin(rt))),ye(rt)],C.properties)}const wo=function(u,g,v){void 0===v&&(v={});var C=Wt([1/0,1/0],{dist:1/0}),D=0;return Ye(u,function(Z){for(var J=Hn(Z),et=0;et<J.length-1;et++){var Q=Wt(J[et]);Q.properties.dist=Mi(g,Q,v);var rt=Wt(J[et+1]);rt.properties.dist=Mi(g,rt,v);var wt=Mi(Q,rt,v),At=Math.max(Q.properties.dist,rt.properties.dist),Rt=cr(Q,rt),Vt=Ws(g,At,Rt+90,v),Xt=Ws(g,At,Rt-90,v),_e=hr(Ee([Vt.geometry.coordinates,Xt.geometry.coordinates]),Ee([Q.geometry.coordinates,rt.geometry.coordinates])),Me=null;_e.features.length>0&&((Me=_e.features[0]).properties.dist=Mi(g,Me,v),Me.properties.location=D+Mi(Q,Me,v)),Q.properties.dist<C.properties.dist&&((C=Q).properties.index=et,C.properties.location=D),rt.properties.dist<C.properties.dist&&((C=rt).properties.index=et+1,C.properties.location=D+wt),Me&&Me.properties.dist<C.properties.dist&&((C=Me).properties.index=et),D+=wt}}),C};function ii(u,g){var v=[],C=ao();return Ye(g,function(D){if(v.forEach(function(et,Q){et.id=Q}),v.length){var Z=C.search(D);if(Z.features.length){var J=Ks(D,Z);v=v.filter(function(et){return et.id!==J.id}),C.remove(J),Xo(Zr(J,D),function(et){v.push(et),C.insert(et)})}}else(v=Zr(u,D).features).forEach(function(et){et.bbox||(et.bbox=function(u){var g=u[0],v=u[1],C=u[2],D=u[3];if(Mi(u.slice(0,2),[C,v])>=Mi(u.slice(0,2),[g,D])){var Z=(v+D)/2;return[g,Z-(C-g)/2,C,Z+(C-g)/2]}var J=(g+C)/2;return[J-(D-v)/2,v,J+(D-v)/2,D]}(Ko(et)))}),C.load(Re(v))}),Re(v)}function Zr(u,g){var v=[],C=Hn(u)[0],D=Hn(u)[u.geometry.coordinates.length-1];if(Js(C,Ei(g))||Js(D,Ei(g)))return Re([u]);var Z=ao(),J=Fn(u);Z.load(J);var et=Z.search(g);if(!et.features.length)return Re([u]);var Rt,Vt,Q=Ks(g,et),rt=(Vt=Rt=[C],Xo(J,function(Xt,_e){Vt=0===_e&&void 0===Rt?Xt:function(wt,At,Rt){var Vt=Hn(At)[1],Xt=Ei(g);return Rt===Q.id?(wt.push(Xt),v.push(Ee(wt)),Js(Xt,Vt)?[Xt]:[Xt,Vt]):(wt.push(Vt),wt)}(Vt,Xt,_e)}),Vt);return rt.length>1&&v.push(Ee(rt)),Re(v)}function Ks(u,g){if(!g.features.length)throw new Error("lines must contain features");if(1===g.features.length)return g.features[0];var v,C=1/0;return Xo(g,function(D){var Z=wo(D,u).properties.dist;Z<C&&(v=D,C=Z)}),v}function Js(u,g){return u[0]===g[0]&&u[1]===g[1]}function Qo(u,g,v){if(void 0===v&&(v={}),!u)throw new Error("point is required");if(!g)throw new Error("polygon is required");var Rt,Vt,C=Ei(u),D=$i(g),J=g.bbox,et=D.coordinates;if(J&&0==((Vt=J)[0]<=(Rt=C)[0]&&Vt[1]<=Rt[1]&&Vt[2]>=Rt[0]&&Vt[3]>=Rt[1]))return!1;"Polygon"===D.type&&(et=[et]);for(var Q=!1,rt=0;rt<et.length&&!Q;rt++)if(Ja(C,et[rt][0],v.ignoreBoundary)){for(var wt=!1,At=1;At<et[rt].length&&!wt;)Ja(C,et[rt][At],!v.ignoreBoundary)&&(wt=!0),At++;wt||(Q=!0)}return Q}function Ja(u,g,v){var C=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var D=0,Z=g.length-1;D<g.length;Z=D++){var J=g[D][0],et=g[D][1],Q=g[Z][0],rt=g[Z][1];if(u[1]*(J-Q)+et*(Q-u[0])+rt*(u[0]-J)==0&&(J-u[0])*(Q-u[0])<=0&&(et-u[1])*(rt-u[1])<=0)return!v;et>u[1]!=rt>u[1]&&u[0]<(Q-J)*(u[1]-et)/(rt-et)+J&&(C=!C)}return C}function Ls(u,g,v,C,D){var Z=v[0],J=v[1],et=u[0],Q=u[1],rt=g[0],wt=g[1],At=rt-et,Rt=wt-Q,Vt=(v[0]-et)*Rt-(v[1]-Q)*At;if(null!==D){if(Math.abs(Vt)>D)return!1}else if(0!==Vt)return!1;return C?"start"===C?Math.abs(At)>=Math.abs(Rt)?At>0?et<Z&&Z<=rt:rt<=Z&&Z<et:Rt>0?Q<J&&J<=wt:wt<=J&&J<Q:"end"===C?Math.abs(At)>=Math.abs(Rt)?At>0?et<=Z&&Z<rt:rt<Z&&Z<=et:Rt>0?Q<=J&&J<wt:wt<J&&J<=Q:"both"===C&&(Math.abs(At)>=Math.abs(Rt)?At>0?et<Z&&Z<rt:rt<Z&&Z<et:Rt>0?Q<J&&J<wt:wt<J&&J<Q):Math.abs(At)>=Math.abs(Rt)?At>0?et<=Z&&Z<=rt:rt<=Z&&Z<=et:Rt>0?Q<=J&&J<=wt:wt<=J&&J<=Q}const Se=function(u,g,v){void 0===v&&(v={});for(var C=Ei(u),D=Hn(g),Z=0;Z<D.length-1;Z++){var J=!1;if(v.ignoreEndVertices&&(0===Z&&(J="start"),Z===D.length-2&&(J="end"),0===Z&&Z+1===D.length-1&&(J="both")),Ls(D[Z],D[Z+1],C,J,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1};function Bn(u,g){return!(u[0]>g[0]||u[2]<g[2]||u[1]>g[1]||u[3]<g[3])}function wa(u,g){return u[0]===g[0]&&u[1]===g[1]}function Qa(u,g){return[(u[0]+g[0])/2,(u[1]+g[1])/2]}var $a=d(2676),Qs=d.n($a);function Dr(u){var g={type:"Feature"};return g.geometry=u,g}function Eo(u){return"Feature"===u.type?u.geometry:u}function $o(u){return u&&u.geometry&&u.geometry.coordinates?u.geometry.coordinates:u}function hi(u){return Dr({type:"Polygon",coordinates:u})}function Xr(u){return Dr({type:"MultiPolygon",coordinates:u})}function bs(u){return Array.isArray(u)?1+bs(u[0]):-1}function tu(u){u instanceof L.Polyline&&(u=u.toGeoJSON(15));var g=$o(u),v=bs(g),C=[];return v>1?g.forEach(function(D){C.push(Dr({type:"LineString",coordinates:D}))}):C.push(u),C}function xs(u,g){(null==g||g>u.length)&&(g=u.length);for(var v=0,C=new Array(g);v<g;v++)C[v]=u[v];return C}function $s(u,g){(null==g||g>u.length)&&(g=u.length);for(var v=0,C=new Array(g);v<g;v++)C[v]=u[v];return C}it.Cut=it.Polygon.extend({initialize:function(u){this._map=u,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var u=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var g=this._layer.getLatLngs();if(!(g.length<=2)){var v=L.polygon(g,this.options.pathOptions);v._latlngInfos=this._layer._latlngInfo,this.cut(v),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(C){var D=C.layer,Z=C.originalLayer;u._fireCut(Z,D,Z),u._fireCut(u._map,D,Z),Z.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(u){var g=this,v=this._map._layers,C=u._latlngInfos||[];Object.keys(v).map(function(D){return v[D]}).filter(function(D){return D.pm}).filter(function(D){return!D._pmTempLayer}).filter(function(D){return!L.PM.optIn&&!D.options.pmIgnore||L.PM.optIn&&!1===D.options.pmIgnore}).filter(function(D){return D instanceof L.Polyline}).filter(function(D){return D!==u}).filter(function(D){return D.pm.options.allowCutting}).filter(function(D){return!(g.options.layersToCut&&L.Util.isArray(g.options.layersToCut)&&g.options.layersToCut.length>0)||g.options.layersToCut.indexOf(D)>-1}).filter(function(D){return!g._layerGroup.hasLayer(D)}).filter(function(D){try{var Z=!!hr(u.toGeoJSON(15),D.toGeoJSON(15)).features.length>0;return Z||D instanceof L.Polyline&&!(D instanceof L.Polygon)?Z:(J=u.toGeoJSON(15),et=D.toGeoJSON(15),Q=Eo(J),rt=Eo(et),!(0===(wt=Qs().intersection(Q.coordinates,rt.coordinates)).length||!(1===wt.length?hi(wt[0]):Xr(wt))))}catch{return D instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var J,et,Q,rt,wt}).forEach(function(D){var Z;if(D instanceof L.Polygon){var J=(Z=L.polygon(D.getLatLngs())).getLatLngs();C.forEach(function(Rt){if(Rt&&Rt.snapInfo){var Vt=Rt.latlng,Xt=g._calcClosestLayer(Vt,[Z]);if(Xt&&Xt.segment&&Xt.distance<g.options.snapDistance){var _e=Xt.segment;if(_e&&2===_e.length){var Me=L.PM.Utils._getIndexFromSegment(J,_e),qn=Me.parentPath,Rn=Me.newIndex;(Me.indexPath.length>1?me()(J,qn):J).splice(Rn,0,Vt)}}}})}else Z=D;var et=g._cutLayer(u,Z),Q=L.geoJSON(et,D.options);if(1===Q.getLayers().length){var rt=Q.getLayers();Q=function eu(u,g){return function(v){if(Array.isArray(v))return v}(u)||function(v,C){var D=null==v?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(null!=D){var Z,J,et=[],Q=!0,rt=!1;try{for(D=D.call(v);!(Q=(Z=D.next()).done)&&(et.push(Z.value),!C||et.length!==C);Q=!0);}catch(wt){rt=!0,J=wt}finally{try{Q||null==D.return||D.return()}finally{if(rt)throw J}}return et}}(u,g)||function(v,C){if(v){if("string"==typeof v)return xs(v,C);var D=Object.prototype.toString.call(v).slice(8,-1);if("Object"===D&&v.constructor&&(D=v.constructor.name),"Map"===D||"Set"===D)return Array.from(v);if("Arguments"===D||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return xs(v,C)}}(u,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(rt,1)[0]}g._setPane(Q,"layerPane");var wt=Q.addTo(g._map.pm._getContainingLayer());if(wt.pm.enable(D.pm.options),wt.pm.disable(),D._pmTempLayer=!0,u._pmTempLayer=!0,D.remove(),D.removeFrom(g._map.pm._getContainingLayer()),u.remove(),u.removeFrom(g._map.pm._getContainingLayer()),wt.getLayers&&0===wt.getLayers().length&&g._map.pm.removeLayer({target:wt}),wt instanceof L.LayerGroup&&wt.eachLayer(function(Rt){g._addDrawnLayerProp(Rt)}),g._addDrawnLayerProp(wt),g.options.layersToCut&&L.Util.isArray(g.options.layersToCut)&&g.options.layersToCut.length>0){var At=g.options.layersToCut.indexOf(D);At>-1&&g.options.layersToCut.splice(At,1)}g._editedLayers.push({layer:wt,originalLayer:D})})},_cutLayer:function(u,g){var v,C,D,Z,J,et,Q=L.geoJSON();if(g instanceof L.Polygon)C=g.toGeoJSON(15),D=u.toGeoJSON(15),Z=Eo(C),J=Eo(D),v=0===(et=Qs().difference(Z.coordinates,J.coordinates)).length?null:1===et.length?hi(et[0]):Xr(et);else{var rt=tu(g);rt.forEach(function(wt){var At=function(u,g){if(!u)throw new Error("line is required");if(!g)throw new Error("splitter is required");var v=Hr(u),C=Hr(g);if("LineString"!==v)throw new Error("line must be LineString");if("FeatureCollection"===C)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===C)throw new Error("splitter cannot be a GeometryCollection");var D=function(u,g){void 0===g&&(g={});var v=g.precision,C=g.coordinates,D=g.mutate;if(v=null==v||isNaN(v)?6:v,C=null==C||isNaN(C)?3:C,!u)throw new Error("<geojson> is required");if("number"!=typeof v)throw new Error("<precision> must be a number");if("number"!=typeof C)throw new Error("<coordinates> must be a number");!1!==D&&void 0!==D||(u=JSON.parse(JSON.stringify(u)));var Z=Math.pow(10,v);return Xs(u,function(J){!function(et,Q,rt){et.length>rt&&et.splice(rt,et.length);for(var wt=0;wt<et.length;wt++)et[wt]=Math.round(et[wt]*Q)/Q}(J,Z,C)}),u}(g,{precision:7});switch(C){case"Point":return Zr(u,D);case"MultiPoint":return ii(u,D);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return ii(u,hr(u,D))}}(wt,u.toGeoJSON(15));(At&&At.features.length>0?L.geoJSON(At):L.geoJSON(wt)).getLayers().forEach(function(Rt){(function Yr(u,g){var v=$i(u),C=$i(g),D=v.type,Z=C.type,J=v.coordinates,et=C.coordinates;switch(D){case"Point":if("Point"===Z)return wa(J,et);throw new Error("feature2 "+Z+" geometry not supported");case"MultiPoint":switch(Z){case"Point":return function(Q,rt){var wt,At=!1;for(wt=0;wt<Q.coordinates.length;wt++)if(wa(Q.coordinates[wt],rt.coordinates)){At=!0;break}return At}(v,C);case"MultiPoint":return function(Q,rt){for(var wt=0,At=rt.coordinates;wt<At.length;wt++){for(var Rt=At[wt],Vt=!1,Xt=0,_e=Q.coordinates;Xt<_e.length;Xt++)if(wa(Rt,_e[Xt])){Vt=!0;break}if(!Vt)return!1}return!0}(v,C);default:throw new Error("feature2 "+Z+" geometry not supported")}case"LineString":switch(Z){case"Point":return Se(C,v,{ignoreEndVertices:!0});case"LineString":return function(Q,rt){for(var wt=!1,At=0,Rt=rt.coordinates;At<Rt.length;At++){var Vt=Rt[At];if(Se({type:"Point",coordinates:Vt},Q,{ignoreEndVertices:!0})&&(wt=!0),!Se({type:"Point",coordinates:Vt},Q,{ignoreEndVertices:!1}))return!1}return wt}(v,C);case"MultiPoint":return function(Q,rt){for(var wt=!1,At=0,Rt=rt.coordinates;At<Rt.length;At++){var Vt=Rt[At];if(Se(Vt,Q,{ignoreEndVertices:!0})&&(wt=!0),!Se(Vt,Q))return!1}return!!wt}(v,C);default:throw new Error("feature2 "+Z+" geometry not supported")}case"Polygon":switch(Z){case"Point":return Qo(C,v,{ignoreBoundary:!0});case"LineString":return function(Q,rt){var wt=!1,At=0;if(!Bn(Ko(Q),Ko(rt)))return!1;for(;At<rt.coordinates.length-1;At++)if(Qo({type:"Point",coordinates:Qa(rt.coordinates[At],rt.coordinates[At+1])},Q,{ignoreBoundary:!0})){wt=!0;break}return wt}(v,C);case"Polygon":return function(Q,rt){if("Feature"===Q.type&&null===Q.geometry||"Feature"===rt.type&&null===rt.geometry)return!1;if(!Bn(Ko(Q),Ko(rt)))return!1;for(var Vt=0,Xt=$i(rt).coordinates;Vt<Xt.length;Vt++)for(var _e=0,Me=Xt[Vt];_e<Me.length;_e++)if(!Qo(Me[_e],Q))return!1;return!0}(v,C);case"MultiPoint":return function(Q,rt){for(var wt=0,At=rt.coordinates;wt<At.length;wt++)if(!Qo(At[wt],Q,{ignoreBoundary:!0}))return!1;return!0}(v,C);default:throw new Error("feature2 "+Z+" geometry not supported")}default:throw new Error("feature1 "+D+" geometry not supported")}})(u.toGeoJSON(15),Rt.toGeoJSON(15))||Rt.addTo(Q)})}),v=rt.length>1?function On(u){var g=[];return u.eachLayer(function(v){g.push($o(v.toGeoJSON(15)))}),Dr({type:"MultiLineString",coordinates:g})}(Q):Q.toGeoJSON(15)}return v},_change:L.Util.falseFn}),it.Text=it.extend({initialize:function(u){this._map=u,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(u){L.Util.setOptions(this,u),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(fe("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(u){this.enabled()?this.disable():this.enable(u)},_syncHintMarker:function(u){if(this._hintMarker.setLatLng(u.latlng),this.options.snappable){var g=u;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker:function(u){var g;if(u.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(u.latlng);var v=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),null!==(g=this.options.textOptions)&&void 0!==g&&g.className){var C,D=this.options.textOptions.className.split(" ");(C=this.textArea.classList).add.apply(C,function Ke(u){return function(g){if(Array.isArray(g))return $s(g)}(u)||function(g){if(typeof Symbol<"u"&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(u)||function(g,v){if(g){if("string"==typeof g)return $s(g,v);var C=Object.prototype.toString.call(g).slice(8,-1);if("Object"===C&&g.constructor&&(C=g.constructor.name),"Map"===C||"Set"===C)return Array.from(g);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return $s(g,v)}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(D))}var Z=this._createTextIcon(this.textArea),J=new L.Marker(v,{textMarker:!0,_textMarkerOverPM:!0,icon:Z});if(this._setPane(J,"markerPane"),this._finishLayer(J),J.pm||(J.options.draggable=!1),J.addTo(this._map.pm._getContainingLayer()),J.pm){var et,Q,rt,wt,At;J.pm.textArea=this.textArea,L.setOptions(J.pm,{removeIfEmpty:null===(et=null===(Q=this.options.textOptions)||void 0===Q?void 0:Q.removeIfEmpty)||void 0===et||et});var Rt=null===(rt=null===(wt=this.options.textOptions)||void 0===wt?void 0:wt.focusAfterDraw)||void 0===rt||rt;J.pm._createTextMarker(Rt),null!==(At=this.options.textOptions)&&void 0!==At&&At.text&&J.pm.setText(this.options.textOptions.text)}this._fireCreate(J),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var u=document.createElement("textarea");return u.autofocus=!0,u.readOnly=!0,u.classList.add("pm-textarea","pm-disabled"),u},_createTextIcon:function(u){return L.divIcon({className:"pm-text-marker",html:u})}});const Je={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,qr(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var u=this._getDOMElem();u&&(qr(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(u)):L.DomEvent.on(u,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,qr(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var u=this._getDOMElem();u&&(qr(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(u)):L.DomEvent.off(u,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(u){var g=u.touches?u.touches[0]:u,v={originalEvent:g,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(g),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent:function(u){var g=u.touches?u.touches[0]:u,v={originalEvent:g,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(g),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent:function(u){var g={originalEvent:u.touches?u.touches[0]:u,target:this._layer};return-1===u.type.indexOf("touch")&&(g.containerPoint=this._map.mouseEventToContainerPoint(u),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown:function(u){if(!(u.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(u);var g=u._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",u);this._layer instanceof L.Marker&&(!this.options.snappable||g||v?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||g||v?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=u.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(u){this._overwriteEventIfItComesFromMarker(u);var g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",u),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=u.latlng),this._onLayerDrag(u),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(u){var g=this,v=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",u),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){g._dragging=!1,v&&L.DomUtil.removeClass(v,"leaflet-pm-dragging"),g._fireDragEnd(),g._fireEdit(),g._layerEdited=!0},10),!0)},_onLayerDrag:function(u){var g=u.latlng,v=g.lat-this._tempDragCoord.lat,C=g.lng-this._tempDragCoord.lng,D=function wt(At){return At.map(function(Rt){if(Array.isArray(Rt))return wt(Rt);var Vt={lat:Rt.lat+v,lng:Rt.lng+C};return(Rt.alt||0===Rt.alt)&&(Vt.alt=Rt.alt),Vt})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var Z=D([this._layer.getLatLng()]);this._layer.setLatLng(Z[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var J=this._layer.getLatLng();this._layer._snapped&&(J=this._layer._orgLatLng);var et=D([J]);this._layer.setLatLng(et[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var Q=D([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(Q),this._fireChange(this._layer.getBounds(),"Edit")}else{var rt=D(this._layer.getLatLngs());this._layer.setLatLngs(rt),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,u.layer=this._layer,this._fireDrag(u)},addDraggingClass:function(){var u=this._getDOMElem();u&&L.DomUtil.addClass(u,"leaflet-pm-draggable")},removeDraggingClass:function(){var u=this._getDOMElem();u&&L.DomUtil.removeClass(u,"leaflet-pm-draggable")},_getDOMElem:function(){var u=null;return this._layer._path?u=this._layer._path:this._layer._renderer&&this._layer._renderer._container?u=this._layer._renderer._container:this._layer._image?u=this._layer._image:this._layer._icon&&(u=this._layer._icon),u},_overwriteEventIfItComesFromMarker:function(u){u.target.getLatLng&&(!u.target._radius||u.target._radius<=10)&&(u.containerPoint=this._map.mouseEventToContainerPoint(u.originalEvent),u.latlng=this._map.containerPointToLatLng(u.containerPoint))},_syncLayers:function(u,g){var v=this;if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;var C=[];if(L.Util.isArray(this.options.syncLayersOnDrag))C=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(J){J instanceof L.LayerGroup&&(C=C.concat(J.pm.getLayers(!0)))});else if(!0===this.options.syncLayersOnDrag&&this._parentLayerGroup)for(var D in this._parentLayerGroup){var Z=this._parentLayerGroup[D];Z.pm&&(C=Z.pm.getLayers(!0))}return L.Util.isArray(C)&&C.length>0&&(C=C.filter(function(J){return!!J.pm}).filter(function(J){return!!J.pm.options.draggable})).forEach(function(J){J!==v._layer&&J.pm[u]&&(J._snapped=!1,J.pm[u](g))}),C.length>0}return!1},_stopDOMImageDrag:function(u){return u.preventDefault(),!1}};function ws(u,g,v){var et,Q,C=v.getMaxZoom();if(C===1/0&&(C=v.getZoom()),L.Util.isArray(u)){var D=[];return u.forEach(function(Z){D.push(ws(Z,g,v))}),D}return u instanceof L.LatLng?(et=v).unproject(g.transform(et.project(u,Q=C)),Q):null}function Ai(u,g){g instanceof L.Layer&&(g=g.getLatLng());var v=u.getMaxZoom();return v===1/0&&(v=u.getZoom()),u.project(g,v)}function Qn(u,g){var v=u.getMaxZoom();return v===1/0&&(v=u.getZoom()),u.unproject(g,v)}var Ea={_onRotateStart:function(u){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ai(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ai(this._map,u.target.getLatLng()),this._initialRotateLatLng=Oi(this._layer),this._startAngle=this.getAngle();var g=Oi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate:function(u){var g=Ai(this._map,u.target.getLatLng()),v=this._rotationStartPoint,C=this._rotationOriginPoint,D=Math.atan2(g.y-C.y,g.x-C.x)-Math.atan2(v.y-C.y,v.x-C.x);this._layer.setLatLngs(this._rotateLayer(D,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var Z=this;!function rt(wt){var At=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],Rt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(Rt>-1&&At.push(Rt),L.Util.isArray(wt[0]))wt.forEach(function(Xt,_e){return rt(Xt,At.slice(),_e)});else{var Vt=me()(Z._markers,At);wt.forEach(function(Xt,_e){Vt[_e].setLatLng(Xt)})}}(this._layer.getLatLngs());var J=Oi(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(D,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var et=180*D/Math.PI,Q=(et=et<0?et+360:et)+this._startAngle;this._setAngle(Q),this._rotationLayer.pm._setAngle(Q),this._fireRotation(this._rotationLayer,et,J),this._fireRotation(this._map,et,J),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var u=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var g=Oi(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Oi(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,u,g),this._fireRotationEnd(this._map,u,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(u,g,v,C,D){var Z=Ai(D,v);return this._matrix=C.clone().rotate(u,Z).flip(),ws(g,this._matrix,D)},_setAngle:function(u){this._angle=(u=u<0?u+360:u)%360},_getRotationCenter:function(){var u=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=u.getCenter();return u.removeFrom(this._layer._map),g},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Oi(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(u){var g=this.getAngle(),v=this._layer.getLatLngs(),C=u*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+u),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var D=this.getAngle()-g;D=D<0?D+360:D,this._startAngle=g,this._fireRotation(this._layer,D,v,this._layer),this._fireRotation(this._map||this._layer._map,D,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(u){var g=u-this.getAngle();this.rotateLayer(g)},getAngle:function(){return this._angle||0},setInitAngle:function(u){this._setAngle(u)}};const $n=L.Class.extend({includes:[Je,W,Ea,jt],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(u){L.Util.setOptions(this,u)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(u,g){"layerPane"===g?u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===g?u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===g&&(u.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(u,g){var v=g.target,D="";return"move"===u?D="moveVertexValidation":"add"===u?D="addVertexValidation":"remove"===u&&(D="removeVertexValidation"),this.options[D]&&"function"==typeof this.options[D]&&!this.options[D]({layer:this._layer,marker:v,event:g})?("move"===u&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(u){return!u._cancelDragEventChain||(u._latlng=u._cancelDragEventChain,u.update(),!1)},_vertexValidationDragEnd:function(u){return!u._cancelDragEventChain||(u._cancelDragEventChain=null,!1)}});function Ci(u){return function(g){if(Array.isArray(g))return ts(g)}(u)||function(g){if(typeof Symbol<"u"&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(u)||function(g,v){if(g){if("string"==typeof g)return ts(g,v);var C=Object.prototype.toString.call(g).slice(8,-1);if("Object"===C&&g.constructor&&(C=g.constructor.name),"Map"===C||"Set"===C)return Array.from(g);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return ts(g,v)}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(u,g){(null==g||g>u.length)&&(g=u.length);for(var v=0,C=new Array(g);v<g;v++)C[v]=u[v];return C}function Ma(u,g){(null==g||g>u.length)&&(g=u.length);for(var v=0,C=new Array(g);v<g;v++)C[v]=u[v];return C}function ea(u,g){(null==g||g>u.length)&&(g=u.length);for(var v=0,C=new Array(g);v<g;v++)C[v]=u[v];return C}$n.LayerGroup=L.Class.extend({initialize:function(u){var g=this;this._layerGroup=u,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(v){return g._initLayer(v)}),this._layerGroup.on("layeradd",L.Util.throttle(function(v){if(!v.layer._pmTempLayer){g._layers=g.getLayers();var C=g._layers.filter(function(D){return!D.pm._parentLayerGroup||!(g._layerGroup._leaflet_id in D.pm._parentLayerGroup)});C.forEach(function(D){g._initLayer(D)}),C.length>0&&g._getMap()&&g._getMap().pm.globalEditModeEnabled()&&g.enabled()&&g.enable(g.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(v){g._removeLayerFromGroup(v.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(v){v.target._pmTempLayer||(g._layers=g.getLayers())},100,this),this)},enable:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===g.length&&(this._layers=this.getLayers()),this._options=u,this._layers.forEach(function(v){v instanceof L.LayerGroup?-1===g.indexOf(v._leaflet_id)&&(g.push(v._leaflet_id),v.pm.enable(u,g)):v.pm.enable(u)})},disable:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===u.length&&(this._layers=this.getLayers()),this._layers.forEach(function(g){g instanceof L.LayerGroup?-1===u.indexOf(g._leaflet_id)&&(u.push(g._leaflet_id),g.pm.disable(u)):g.pm.disable()})},enabled:function(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===u.length&&(this._layers=this.getLayers()),!!this._layers.find(function(v){return v instanceof L.LayerGroup?-1===u.indexOf(v._leaflet_id)&&(u.push(v._leaflet_id),v.pm.enabled(u)):v.pm.enabled()})},toggleEdit:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===g.length&&(this._layers=this.getLayers()),this._options=u,this._layers.forEach(function(v){v instanceof L.LayerGroup?-1===g.indexOf(v._leaflet_id)&&(g.push(v._leaflet_id),v.pm.toggleEdit(u,g)):v.pm.toggleEdit(u)})},_initLayer:function(u){var g=L.Util.stamp(this._layerGroup);u.pm._parentLayerGroup||(u.pm._parentLayerGroup={}),u.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup:function(u){if(u.pm&&u.pm._layerGroup){var g=L.Util.stamp(this._layerGroup);delete u.pm._layerGroup[g]}},dragging:function(){return this._layers=this.getLayers(),!!this._layers&&!!this._layers.find(function(g){return g.pm.dragging()})},getOptions:function(){return this.options},_getMap:function(){var u;return this._map||(null===(u=this._layers.find(function(g){return!!g._map}))||void 0===u?void 0:u._map)||null},getLayers:function(){var g=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],v=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],D=[];return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this._layerGroup.getLayers().forEach(function(Z){D.push(Z),Z instanceof L.LayerGroup&&-1===C.indexOf(Z._leaflet_id)&&(C.push(Z._leaflet_id),D=D.concat(Z.pm.getLayers(!0,!0,!0,C)))}):D=this._layerGroup.getLayers(),v&&(D=D.filter(function(Z){return!(Z instanceof L.LayerGroup)})),g&&(D=(D=(D=D.filter(function(Z){return!!Z.pm})).filter(function(Z){return!Z._pmTempLayer})).filter(function(Z){return!L.PM.optIn&&!Z.options.pmIgnore||L.PM.optIn&&!1===Z.options.pmIgnore})),D},setOptions:function(u){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===g.length&&(this._layers=this.getLayers()),this.options=u,this._layers.forEach(function(v){v.pm&&(v instanceof L.LayerGroup?-1===g.indexOf(v._leaflet_id)&&(g.push(v._leaflet_id),v.pm.setOptions(u,g)):v.pm.setOptions(u))})}}),$n.Marker=$n.extend({_shape:"Marker",initialize:function(u){this._layer=u,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){L.Util.setOptions(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0}),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(u){this.enabled()?this.disable():this.enable(u)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(u){var g=u.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var u=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,u.off("pm:drag",this._handleSnapping,this),u.on("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.on("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this),u.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var u=this._layer;u.off("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this)}}),$n.Line=$n.extend({includes:[{filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var u=[].concat(Ci(this._markerGroup.getLayers()),Ci(this.markerCache));this.markerCache=u.filter(function(g,v,C){return C.indexOf(g)===v})},renderLimits:function(u){var g=this;this.markerCache.forEach(function(v){u.includes(v)?g._markerGroup.addLayer(v):g._markerGroup.removeLayer(v)})},applyLimitFilters:function(u){var g=u.latlng;if(!this._preventRenderMarkers){var C=Ci(this._filterClosestMarkers(void 0===g?{lat:0,lng:0}:g));this.renderLimits(C)}},_filterClosestMarkers:function(u){var g=Ci(this.markerCache),v=this.options.limitMarkersToCount;return-1===v?g:(g.sort(function(C,D){return C._latlng.distanceTo(u)-D._latlng.distanceTo(u)}),g.filter(function(C,D){return!(v>-1)||D<v}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(u){this._preventRenderMarkers=!!u}}],_shape:"Line",initialize:function(u){this._layer=u,this._enabled=!1},enable:function(u){L.Util.setOptions(this,u),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:("#f00000ff"!==this._layer.options.color?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var u=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(u,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(u,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(u){return this.enabled()?this.disable():this.enable(u),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var u=this,g=this._map,v=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function C(D){if(Array.isArray(D[0]))return D.map(C,u);var Z=D.map(u._createMarker,u);return!0!==u.options.hideMiddleMarkers&&D.map(function(J,et){var Q=u.isPolygon()?(et+1)%D.length:et+1;return u._createMiddleMarker(Z[et],Z[Q])}),Z}(v),this.filterMarkerGroup(),g.addLayer(this._markerGroup)},_createMarker:function(u){var g=new L.Marker(u,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker:function(u,g){if(!u||!g)return!1;var v=L.PM.Utils.calcMiddleLatLng(this._map,u.getLatLng(),g.getLatLng()),C=this._createMarker(v),D=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(D),C.leftM=u,C.rightM=g,u._middleMarkerNext=C,g._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick:function(u){var g=u.target;if(this._vertexValidation("add",u)){var v=L.divIcon({className:"marker-icon"});g.setIcon(v),this._addMarker(g,g.leftM,g.rightM)}},_onMiddleMarkerMoveStart:function(u){var g=u.target;g.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",u)?(g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)):g.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(u){this._vertexValidationDrag(u.target)},_onMiddleMarkerMoveEnd:function(u){var g=u.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(g)){var v=L.divIcon({className:"marker-icon"});g.setIcon(v),setTimeout(function(){delete g._dragging},100)}},_addMarker:function(u,g,v){u.off("movestart",this._onMiddleMarkerMoveStart,this),u.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var C=u.getLatLng(),D=this._layer._latlngs;delete u.leftM,delete u.rightM;var Z=L.PM.Utils.findDeepMarkerIndex(this._markers,g),J=Z.indexPath,et=Z.index,Q=Z.parentPath,rt=J.length>1?me()(D,Q):D,wt=J.length>1?me()(this._markers,Q):this._markers;rt.splice(et+1,0,C),wt.splice(et+1,0,u),this._layer.setLatLngs(D),!0!==this.options.hideMiddleMarkers&&(this._createMiddleMarker(g,u),this._createMiddleMarker(u,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(u,L.PM.Utils.findDeepMarkerIndex(this._markers,u).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return Jn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(u){var g=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;u?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(Jn(this._layer.toGeoJSON(15)))}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var u=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){u._layer.setStyle({color:u.cachedColor}),u.isRed=!1},200)},_updateDisabledMarkerStyle:function(u,g){var v=this;u.forEach(function(C){Array.isArray(C)?v._updateDisabledMarkerStyle(C,g):C._icon&&(g&&!v._checkMarkerAllowedToDrag(C)?L.DomUtil.addClass(C._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(C._icon,"vertexmarker-disabled"))})},_removeMarker:function(u){var g=u.target;if(this._vertexValidation("remove",u)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=Oi(this._layer,this._layer.getLatLngs()));var v=this._layer.getLatLngs(),C=L.PM.Utils.findDeepMarkerIndex(this._markers,g),D=C.indexPath,Z=C.index,J=C.parentPath;if(D){var et=D.length>1?me()(v,J):v,Q=D.length>1?me()(this._markers,J):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(et.length<=2||this.isPolygon()&&et.length<=3)){et.splice(Z,1),this._layer.setLatLngs(v),this.isPolygon()&&et.length<=2&&et.splice(0,et.length);var wt,At,rt=!1;if(et.length<=1&&(et.splice(0,et.length),J.length>1&&D.length>1&&(v=we(v)),this._layer.setLatLngs(v),this._initMarkers(),rt=!0),de(v)||this._layer.remove(),v=we(v),this._layer.setLatLngs(v),this._markers=we(this._markers),!rt&&(Q=D.length>1?me()(this._markers,J):this._markers,g._middleMarkerPrev&&this._markerGroup.removeLayer(g._middleMarkerPrev),g._middleMarkerNext&&this._markerGroup.removeLayer(g._middleMarkerNext),this._markerGroup.removeLayer(g),Q))this.isPolygon()?(wt=(Z+1)%Q.length,At=(Z+(Q.length-1))%Q.length):(At=Z-1<0?void 0:Z-1,wt=Z+1>=Q.length?void 0:Z+1),wt!==At&&!0!==this.options.hideMiddleMarkers&&this._createMiddleMarker(Q[At],Q[wt]),Q.splice(Z,1);this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,D),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(u){var g=this._layer.getLatLngs(),v=u.getLatLng(),C=L.PM.Utils.findDeepMarkerIndex(this._markers,u),Z=C.index,J=C.parentPath;(C.indexPath.length>1?me()(g,J):g).splice(Z,1,v),this._layer.setLatLngs(g)},_getNeighborMarkers:function(u){var g=L.PM.Utils.findDeepMarkerIndex(this._markers,u),C=g.index,D=g.parentPath,Z=g.indexPath.length>1?me()(this._markers,D):this._markers;return{prevMarker:Z[(C+(Z.length-1))%Z.length],nextMarker:Z[(C+1)%Z.length]}},_checkMarkerAllowedToDrag:function(u){var g=this._getNeighborMarkers(u),C=g.nextMarker,D=L.polyline([g.prevMarker.getLatLng(),u.getLatLng()]),Z=L.polyline([u.getLatLng(),C.getLatLng()]),J=hr(this._layer.toGeoJSON(15),D.toGeoJSON(15)).features.length,et=hr(this._layer.toGeoJSON(15),Z.toGeoJSON(15)).features.length;return u.getLatLng()===this._markers[0][0].getLatLng()?et+=1:u.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(J+=1),!(J<=2&&et<=2)},_onMarkerDragStart:function(u){var g=u.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",u)){var v=L.PM.Utils.findDeepMarkerIndex(this._markers,g).indexPath;this._fireMarkerDragStart(u,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Oi(this._layer,this._layer.getLatLngs())),this._markerAllowedToDrag=!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._checkMarkerAllowedToDrag(g):null}},_onMarkerDrag:function(u){var g=u.target;if(this._vertexValidationDrag(g)){var v=L.PM.Utils.findDeepMarkerIndex(this._markers,g),C=v.indexPath,D=v.index,Z=v.parentPath;if(C){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&!1===this._markerAllowedToDrag)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(g);var J=C.length>1?me()(this._markers,Z):this._markers,et=(D+1)%J.length,Q=(D+(J.length-1))%J.length,rt=g.getLatLng(),wt=J[Q].getLatLng(),At=J[et].getLatLng();if(g._middleMarkerNext){var Rt=L.PM.Utils.calcMiddleLatLng(this._map,rt,At);g._middleMarkerNext.setLatLng(Rt)}if(g._middleMarkerPrev){var Vt=L.PM.Utils.calcMiddleLatLng(this._map,rt,wt);g._middleMarkerPrev.setLatLng(Vt)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(u,C),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(u){var g=u.target;if(this._vertexValidationDragEnd(g)){var v=L.PM.Utils.findDeepMarkerIndex(this._markers,g).indexPath,C=this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);var D=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(u,v,D),D)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(u,v);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(u){var g=u.target;if(!g._dragging){var v=L.PM.Utils.findDeepMarkerIndex(this._markers,g).indexPath;this._fireVertexClick(u,v)}}}),$n.Polygon=$n.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(u){var g=this._getNeighborMarkers(u),C=g.nextMarker,D=L.polyline([g.prevMarker.getLatLng(),u.getLatLng()]),Z=L.polyline([u.getLatLng(),C.getLatLng()]),J=hr(this._layer.toGeoJSON(15),D.toGeoJSON(15)).features.length,et=hr(this._layer.toGeoJSON(15),Z.toGeoJSON(15)).features.length;return!(J<=2&&et<=2)}}),$n.Rectangle=$n.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var u=this,g=this._map,v=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,g.addLayer(this._markerGroup),this._markers=[],this._markers[0]=v.map(this._createMarker,this);var C=function Mo(u,g){return function(v){if(Array.isArray(v))return v}(u)||function(v,C){var D=null==v?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(null!=D){var Z,J,et=[],Q=!0,rt=!1;try{for(D=D.call(v);!(Q=(Z=D.next()).done)&&(et.push(Z.value),!C||et.length!==C);Q=!0);}catch(wt){rt=!0,J=wt}finally{try{Q||null==D.return||D.return()}finally{if(rt)throw J}}return et}}(u,g)||function(v,C){if(v){if("string"==typeof v)return Ma(v,C);var D=Object.prototype.toString.call(v).slice(8,-1);if("Object"===D&&v.constructor&&(D=v.constructor.name),"Map"===D||"Set"===D)return Array.from(v);if("Arguments"===D||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return Ma(v,C)}}(u,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._markers,1);this._cornerMarkers=C[0],this._layer.getLatLngs()[0].forEach(function(D,Z){var J=u._cornerMarkers.find(function(et){return et._index===Z});J&&J.setLatLng(D)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(u,g){var v=new L.Marker(u,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=u,v._index=g,v._pmTempLayer=!0,this._markerGroup.addLayer(v),v},_addMarkerEvents:function(){var u=this;this._markers[0].forEach(function(g){g.on("dragstart",u._onMarkerDragStart,u),g.on("drag",u._onMarkerDrag,u),g.on("dragend",u._onMarkerDragEnd,u),u.options.preventMarkerRemoval||g.on("contextmenu",u._removeMarker,u)})},_removeMarker:function(){return null},_onMarkerDragStart:function(u){if(this._vertexValidation("move",u)){var g=u.target;g._oppositeCornerLatLng=this._cornerMarkers.find(function(C){return C._index===(g._index+2)%4}).getLatLng(),g._snapped=!1,this._fireMarkerDragStart(u)}},_onMarkerDrag:function(u){var g=u.target;this._vertexValidationDrag(g)&&void 0!==g._index&&(this._adjustRectangleForMarkerMove(g),this._fireMarkerDrag(u),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(u){this._vertexValidationDragEnd(u.target)&&(this._cornerMarkers.forEach(function(v){delete v._oppositeCornerLatLng}),this._fireMarkerDragEnd(u),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(u){L.extend(u._origLatLng,u._latlng);var g=L.PM.Utils._getRotatedRectangle(u.getLatLng(),u._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var u=this,g=this._layer.getLatLngs()[0];g&&4!==g.length&&g.length>0?(g.forEach(function(v,C){u._cornerMarkers[C].setLatLng(v)}),this._cornerMarkers.slice(g.length).forEach(function(v){v.setLatLng(g[0])})):g&&g.length?this._cornerMarkers.forEach(function(v){v.setLatLng(g[v._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var u=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(u[0],u[2],this._angle||0,this._map)}}),$n.Circle=$n.extend({_shape:"Circle",initialize:function(u){this._layer=u,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(u){L.Util.setOptions(this,u),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this.enabled()&&!this._dragging&&(this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers(),L.DomUtil.removeClass(this._layer._path?this._layer._path:this._layer._renderer._container,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable())},enabled:function(){return this._enabled},toggleEdit:function(u){this.enabled()?this.disable():this.enable(u)},_initMarkers:function(){var u=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(u);var g=this._layer.getLatLng(),C=this._getLatLngOnCircle(g,this._layer._radius);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(u,g){var v=u.getLatLng(),C=g.getLatLng();this._hintline=L.polyline([v,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(u){var g=this._createMarker(u);return L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("drag",this._moveCircle,this),g.on("dragstart",this._onCircleDragStart,this),g.on("drag",this._onCircleDrag,this),g.on("dragend",this._onCircleDragEnd,this),g},_createOuterMarker:function(u){var g=this._createMarker(u);return g.on("drag",this._resizeCircle,this),g},_createMarker:function(u){var g=new L.Marker(u,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=u,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(g),g},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(u){if(!u.target._cancelDragEventChain){var g=u.latlng;this._layer.setLatLng(g);var C=this._getLatLngOnCircle(g,this._layer._radius);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.distance(u,g);this._layer.setRadius(this.options.minRadiusCircle&&v<this.options.minRadiusCircle?this.options.minRadiusCircle:this.options.maxRadiusCircle&&v>this.options.maxRadiusCircle?this.options.maxRadiusCircle:v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([u,g])},_disableSnapping:function(){var u=this;this._markers.forEach(function(g){g.off("move",u._syncHintLine,u),g.off("move",u._syncCircleRadius,u),g.off("drag",u._handleSnapping,u),g.off("dragend",u._cleanupSnapping,u)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(u){this._vertexValidation("move",u)&&this._fireMarkerDragStart(u)},_onMarkerDrag:function(u){this._vertexValidationDrag(u.target)&&this._fireMarkerDrag(u)},_onMarkerDragEnd:function(u){this._vertexValidationDragEnd(u.target)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(u))},_onCircleDragStart:function(u){this._vertexValidationDrag(u.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(u){this._vertexValidationReset||this._fireDrag(u)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var u=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!u).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!u),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(u,g){var v=this._map.project(u),C=L.point(v.x+g,v.y);return this._map.unproject(C)},_getNewDestinationOfOuterMarker:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.distance(u,g);return this.options.minRadiusCircle&&v<this.options.minRadiusCircle?g=li(this._map,u,g,this.options.minRadiusCircle):this.options.maxRadiusCircle&&v>this.options.maxRadiusCircle&&(g=li(this._map,u,g,this.options.maxRadiusCircle)),g},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.distance(u,g);(this.options.minRadiusCircle&&v<this.options.minRadiusCircle||this.options.maxRadiusCircle&&v>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),$n.CircleMarker=$n.extend({_shape:"CircleMarker",initialize:function(u){this._layer=u,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){L.Util.setOptions(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0}),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(u){this.enabled()?this.disable():this.enable(u)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var u=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(u);var g=this._layer.getLatLng(),C=this._getLatLngOnCircle(g,this._layer._radius);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(u,g){var v=this._map.project(u),C=L.point(v.x+g,v.y);return this._map.unproject(C)},_createHintLine:function(u,g){var v=u.getLatLng(),C=g.getLatLng();this._hintline=L.polyline([v,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(u){var g=this._createMarker(u);return this.options.draggable?L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"):g.dragging.disable(),g},_createOuterMarker:function(u){var g=this._createMarker(u);return g.on("drag",this._resizeCircle,this),g},_createMarker:function(u){var g=new L.Marker(u,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=u,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(g),g},_moveCircle:function(){var u=this._centerMarker.getLatLng();this._layer.setLatLng(u);var v=this._getLatLngOnCircle(u,this._layer._radius);this._outerMarker._latlng=v,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var u=this._layer.getLatLng(),v=this._getLatLngOnCircle(u,this._layer._radius);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(u),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.project(u).distanceTo(this._map.project(g));this._layer.setRadius(this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker?this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker?this.options.maxRadiusCircleMarker:v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([u,g])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(u){this._vertexValidation("move",u)&&this._fireMarkerDragStart(u)},_onMarkerDrag:function(u){var g=u.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(u)},_onMarkerDragEnd:function(u){this._map.pm.Draw.CircleMarker._layerIsDragging=!1,this._vertexValidationDragEnd(u.target)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(u))},_initSnappableMarkersDrag:function(){var u=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,u.off("pm:drag",this._handleSnapping,this),u.on("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.on("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this),u.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var u=this._layer;u.off("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var u=this._layer._map||this._map;if(u){var g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),u,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(g);var C=u&&u.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.project(u).distanceTo(this._map.project(g));return this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker?g=li(this._map,u,g,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,u)):this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker&&(g=li(this._map,u,g,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,u))),g},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var u=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),v=this._map.project(u).distanceTo(this._map.project(g));(this.options.minRadiusCircleMarker&&v<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&v>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),$n.ImageOverlay=$n.extend({_shape:"ImageOverlay",initialize:function(u){this._layer=u,this._enabled=!1},toggleEdit:function(u){this.enabled()?this.disable():this.enable(u)},enabled:function(){return this._enabled},enable:function(){L.Util.setOptions(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0}),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var u=this._layer.getBounds();return[u.getNorthWest(),u.getNorthEast(),u.getSouthEast(),u.getSouthWest()]}}),$n.Text=$n.extend({_shape:"Text",initialize:function(u){this._layer=u,this._enabled=!1},enable:function(u){L.Util.setOptions(this,u),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var u=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),u.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(u){this.enabled()?this.disable():this.enable(u)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var u=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,u.off("pm:drag",this._handleSnapping,this),u.on("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.on("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this),u.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var u=this._layer;u.off("pm:drag",this._handleSnapping,this),u.off("pm:dragend",this._cleanupSnapping,this),u.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,"px"),this.textArea.style.width="".concat(g,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var u=this;this._disableOnBlurActive=!0,setTimeout(function(){u.enabled()&&L.DomEvent.on(document,"click",u._documentClick,u)},100)},_documentClick:function(u){u.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var g=this._hasFocus;this._hasFocus="focus"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type,!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(u){this.textArea.value=u,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var u,g=this.options.className.split(" ");(u=this.textArea.classList).add.apply(u,function Cu(u){return function(g){if(Array.isArray(g))return ea(g)}(u)||function(g){if(typeof Symbol<"u"&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(u)||function(g,v){if(g){if("string"==typeof g)return ea(g,v);var C=Object.prototype.toString.call(g).slice(8,-1);if("Object"===C&&g.constructor&&(C=g.constructor.name),"Map"===C||"Set"===C)return Array.from(g);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return ea(g,v)}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g))}var v=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(v),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var u=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),!0===u&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(u){u.preventDefault()}});var es=function(u,g,v,C,D,Z){this._matrix=[u,g,v,C,D,Z]};es.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},es.prototype={transform:function(u){return this._transform(u.clone())},_transform:function(u){var g=this._matrix,v=u.x,C=u.y;return u.x=g[0]*v+g[1]*C+g[4],u.y=g[2]*v+g[3]*C+g[5],u},untransform:function(u){var g=this._matrix;return new L.Point((u.x/g[0]-g[4])/g[0],(u.y/g[2]-g[5])/g[2])},clone:function(){var u=this._matrix;return new L.PM.Matrix(u[0],u[1],u[2],u[3],u[4],u[5])},translate:function(u){return void 0===u?new L.Point(this._matrix[4],this._matrix[5]):("number"==typeof u?(g=u,v=u):(g=u.x,v=u.y),this._add(1,0,0,1,g,v));var g,v},scale:function(u,g){return void 0===u?new L.Point(this._matrix[0],this._matrix[3]):(g=g||L.point(0,0),"number"==typeof u?(v=u,C=u):(v=u.x,C=u.y),this._add(v,0,0,C,g.x,g.y)._add(1,0,0,1,-g.x,-g.y));var v,C},rotate:function(u,g){var v=Math.cos(u),C=Math.sin(u);return g=g||new L.Point(0,0),this._add(v,C,-C,v,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(u,g,v,C,D,Z){var J,et=[[],[],[]],Q=this._matrix,rt=[[Q[0],Q[2],Q[4]],[Q[1],Q[3],Q[5]],[0,0,1]],wt=[[u,v,D],[g,C,Z],[0,0,1]];u&&u instanceof L.PM.Matrix&&(wt=[[(Q=u._matrix)[0],Q[2],Q[4]],[Q[1],Q[3],Q[5]],[0,0,1]]);for(var At=0;At<3;At+=1)for(var Rt=0;Rt<3;Rt+=1){J=0;for(var Vt=0;Vt<3;Vt+=1)J+=rt[At][Vt]*wt[Vt][Rt];et[At][Rt]=J}return this._matrix=[et[0][0],et[1][0],et[0][1],et[1][1],et[0][2],et[1][2]],this}};var ko={calcMiddleLatLng:function(u,g,v){var C=u.project(g),D=u.project(v);return u.unproject(C._add(D)._divideBy(2))},findLayers:function(u){var g=[];return u.eachLayer(function(v){(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&g.push(v)}),g=(g=(g=g.filter(function(v){return!!v.pm})).filter(function(v){return!v._pmTempLayer})).filter(function(v){return!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&!1===v.options.pmIgnore})},circleToPolygon:function(u){for(var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,v=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],Z=Dn(u.getLatLng(),u.getRadius(),g,0,v),J=[],et=0;et<Z.length;et+=1)J.push([Z[et].lat,Z[et].lng]);return L.polygon(J,u.options)},disablePopup:function(u){u.getPopup()&&(u._tempPopupCopy=u.getPopup(),u.unbindPopup())},enablePopup:function(u){u._tempPopupCopy&&(u.bindPopup(u._tempPopupCopy),delete u._tempPopupCopy)},_fireEvent:function(u,g,v){var C=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u.fire(g,v,C),this.getAllParentGroups(u).groups.forEach(function(J){J.fire(g,v,C)})},getAllParentGroups:function(u){var g=[],v=[];return!u._pmLastGroupFetch||!u._pmLastGroupFetch.time||(new Date).getTime()-u._pmLastGroupFetch.time>1e3?(function C(D){for(var Z in D._eventParents)if(-1===g.indexOf(Z)){g.push(Z);var J=D._eventParents[Z];v.push(J),C(J)}}(u),u._pmLastGroupFetch={time:(new Date).getTime(),groups:v,groupIds:g},{groupIds:g,groups:v}):{groups:u._pmLastGroupFetch.groups,groupIds:u._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Dn,getTranslation:fe,findDeepCoordIndex:function(u,g){var v,C=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];u.some(function J(et){return function(Q,rt){var wt=et.concat(rt);if(C){if(Q.lat&&Q.lat===g.lat&&Q.lng===g.lng)return v=wt,!0}else if(Q.lat&&L.latLng(Q).equals(g))return v=wt,!0;return Array.isArray(Q)&&Q.some(J(wt))}}([]));var Z={};return v&&(Z={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),Z},findDeepMarkerIndex:function(u,g){var v;u.some(function D(Z){return function(J,et){var Q=Z.concat(et);return J._leaflet_id===g._leaflet_id?(v=Q,!0):Array.isArray(J)&&J.some(D(Q))}}([]));var C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment:function(u,g){if(g&&2===g.length){var v=this.findDeepCoordIndex(u,g[0]),C=this.findDeepCoordIndex(u,g[1]),D=Math.max(v.index,C.index);return 0!==v.index&&0!==C.index||1===D||(D+=1),{indexA:v,indexB:C,newIndex:D,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle:function(u,g,v,C){var D=Ai(C,u),Z=Ai(C,g),J=v*Math.PI/180,et=Math.cos(J),Q=Math.sin(J),rt=(Z.x-D.x)*et+(Z.y-D.y)*Q,wt=(Z.y-D.y)*et-(Z.x-D.x)*Q,At=rt*et+D.x,Rt=rt*Q+D.y,Vt=-wt*Q+D.x,Xt=wt*et+D.y;return[Qn(C,D),Qn(C,{x:At,y:Rt}),Qn(C,Z),Qn(C,{x:Vt,y:Xt})]},pxRadiusToMeterRadius:function(u,g,v){var C=g.project(v),D=L.point(C.x+u,C.y);return g.distance(g.unproject(D),v)}};L.PM=L.PM||{version:"2.14.2",Map:Hs,Toolbar:Zs,Draw:it,Edit:$n,Utils:ko,Matrix:es,activeLang:"en",optIn:!1,initialize:function(u){this.addInitHooks(u)},setOptIn:function(u){this.optIn=!!u},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(u){var g=this;u instanceof L.LayerGroup&&u.eachLayer(function(v){g.reInitLayer(v)}),u.pm||L.PM.optIn&&!1!==u.options.pmIgnore||u.options.pmIgnore||(u instanceof L.Map?u.pm=new L.PM.Map(u):u instanceof L.Marker?u.options.textMarker?(u.pm=new L.PM.Edit.Text(u),u.pm._initTextMarker(),u.pm._createTextMarker(!1)):u.pm=new L.PM.Edit.Marker(u):u instanceof L.Circle?u.pm=new L.PM.Edit.Circle(u):u instanceof L.CircleMarker?u.pm=new L.PM.Edit.CircleMarker(u):u instanceof L.Rectangle?u.pm=new L.PM.Edit.Rectangle(u):u instanceof L.Polygon?u.pm=new L.PM.Edit.Polygon(u):u instanceof L.Polyline?u.pm=new L.PM.Edit.Line(u):u instanceof L.LayerGroup?u.pm=new L.PM.Edit.LayerGroup(u):u instanceof L.ImageOverlay&&(u.pm=new L.PM.Edit.ImageOverlay(u)))}},"1.7.1"===L.version&&L.Canvas.include({_onClick:function(u){for(var g,v,C=this._map.mouseEventToLayerPoint(u),D=this._drawFirst;D;D=D.next)(g=D.layer).options.interactive&&g._containsPoint(C)&&("click"!==u.type&&"preclick"!==u.type||!this._map._draggableMoved(g))&&(v=g);v&&(L.DomEvent.fakeStop(u),this._fireEvent([v],u))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(Y){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof Y)throw new TypeError("callback must be a function");for(var h=Object(this),d=h.length>>>0,x=arguments[1],I=0;I<d;I++)if(Y.call(x,h[I],I,h))return I;return-1},Array.prototype.find=Array.prototype.find||function(Y){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof Y)throw new TypeError("callback must be a function");for(var h=Object(this),d=h.length>>>0,x=arguments[1],I=0;I<d;I++){var U=h[I];if(Y.call(x,U,I,h))return U}},"function"!=typeof Object.assign&&(Object.assign=function(Y){"use strict";if(null==Y)throw new TypeError("Cannot convert undefined or null to object");Y=Object(Y);for(var h=1;h<arguments.length;h++){var d=arguments[h];if(null!=d)for(var x in d)Object.prototype.hasOwnProperty.call(d,x)&&(Y[x]=d[x])}return Y}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(Y){Y.hasOwnProperty("remove")||Object.defineProperty(Y,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(Y,h){if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),x=d.length>>>0;if(0===x)return!1;for(var I,U,N=0|h,H=Math.max(N>=0?N:x-Math.abs(N),0);H<x;){if((I=d[H])===(U=Y)||"number"==typeof I&&"number"==typeof U&&isNaN(I)&&isNaN(U))return!0;H++}return!1}})},1787:(Y,h,d)=>{var x=d(2582),I=d(4102),U=d(1540),N=d(9705).Z,H=U.featureEach,tt=I.featureCollection;function bt(Et){var Ct=new x(Et);return Ct.insert=function(dt){if("Feature"!==dt.type)throw new Error("invalid feature");return dt.bbox=dt.bbox?dt.bbox:N(dt),x.prototype.insert.call(this,dt)},Ct.load=function(dt){var St=[];return Array.isArray(dt)?dt.forEach(function(ht){if("Feature"!==ht.type)throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:N(ht),St.push(ht)}):H(dt,function(ht){if("Feature"!==ht.type)throw new Error("invalid features");ht.bbox=ht.bbox?ht.bbox:N(ht),St.push(ht)}),x.prototype.load.call(this,St)},Ct.remove=function(dt,St){if("Feature"!==dt.type)throw new Error("invalid feature");return dt.bbox=dt.bbox?dt.bbox:N(dt),x.prototype.remove.call(this,dt,St)},Ct.clear=function(){return x.prototype.clear.call(this)},Ct.search=function(dt){var St=x.prototype.search.call(this,this.toBBox(dt));return tt(St)},Ct.collides=function(dt){return x.prototype.collides.call(this,this.toBBox(dt))},Ct.all=function(){var dt=x.prototype.all.call(this);return tt(dt)},Ct.toJSON=function(){return x.prototype.toJSON.call(this)},Ct.fromJSON=function(dt){return x.prototype.fromJSON.call(this,dt)},Ct.toBBox=function(dt){var St;if(dt.bbox)St=dt.bbox;else if(Array.isArray(dt)&&4===dt.length)St=dt;else if(Array.isArray(dt)&&6===dt.length)St=[dt[0],dt[1],dt[3],dt[4]];else if("Feature"===dt.type)St=N(dt);else{if("FeatureCollection"!==dt.type)throw new Error("invalid geojson");St=N(dt)}return{minX:St[0],minY:St[1],maxX:St[2],maxY:St[3]}},Ct}Y.exports=bt,Y.exports.default=bt},1989:(Y,h,d)=>{var x=d(1789),I=d(401),U=d(7667),N=d(1327),H=d(1866);function tt(bt){var Et=-1,Ct=null==bt?0:bt.length;for(this.clear();++Et<Ct;){var dt=bt[Et];this.set(dt[0],dt[1])}}tt.prototype.clear=x,tt.prototype.delete=I,tt.prototype.get=U,tt.prototype.has=N,tt.prototype.set=H,Y.exports=tt},8407:(Y,h,d)=>{var x=d(7040),I=d(4125),U=d(2117),N=d(7518),H=d(4705);function tt(bt){var Et=-1,Ct=null==bt?0:bt.length;for(this.clear();++Et<Ct;){var dt=bt[Et];this.set(dt[0],dt[1])}}tt.prototype.clear=x,tt.prototype.delete=I,tt.prototype.get=U,tt.prototype.has=N,tt.prototype.set=H,Y.exports=tt},7071:(Y,h,d)=>{var x=d(852)(d(5639),"Map");Y.exports=x},3369:(Y,h,d)=>{var x=d(4785),I=d(1285),U=d(6e3),N=d(9916),H=d(5265);function tt(bt){var Et=-1,Ct=null==bt?0:bt.length;for(this.clear();++Et<Ct;){var dt=bt[Et];this.set(dt[0],dt[1])}}tt.prototype.clear=x,tt.prototype.delete=I,tt.prototype.get=U,tt.prototype.has=N,tt.prototype.set=H,Y.exports=tt},6384:(Y,h,d)=>{var x=d(8407),I=d(7465),U=d(3779),N=d(7599),H=d(4758),tt=d(4309);function bt(Et){var Ct=this.__data__=new x(Et);this.size=Ct.size}bt.prototype.clear=I,bt.prototype.delete=U,bt.prototype.get=N,bt.prototype.has=H,bt.prototype.set=tt,Y.exports=bt},2705:(Y,h,d)=>{var x=d(5639).Symbol;Y.exports=x},1149:(Y,h,d)=>{var x=d(5639).Uint8Array;Y.exports=x},6874:Y=>{Y.exports=function(h,d,x){switch(x.length){case 0:return h.call(d);case 1:return h.call(d,x[0]);case 2:return h.call(d,x[0],x[1]);case 3:return h.call(d,x[0],x[1],x[2])}return h.apply(d,x)}},4636:(Y,h,d)=>{var x=d(2545),I=d(5694),U=d(1469),N=d(4144),H=d(5776),tt=d(6719),bt=Object.prototype.hasOwnProperty;Y.exports=function(Et,Ct){var dt=U(Et),St=!dt&&I(Et),ht=!dt&&!St&&N(Et),_t=!dt&&!St&&!ht&&tt(Et),xt=dt||St||ht||_t,K=xt?x(Et.length,String):[],st=K.length;for(var mt in Et)!Ct&&!bt.call(Et,mt)||xt&&("length"==mt||ht&&("offset"==mt||"parent"==mt)||_t&&("buffer"==mt||"byteLength"==mt||"byteOffset"==mt)||H(mt,st))||K.push(mt);return K}},9932:Y=>{Y.exports=function(h,d){for(var x=-1,I=null==h?0:h.length,U=Array(I);++x<I;)U[x]=d(h[x],x,h);return U}},6556:(Y,h,d)=>{var x=d(9465),I=d(7813);Y.exports=function(U,N,H){(void 0!==H&&!I(U[N],H)||void 0===H&&!(N in U))&&x(U,N,H)}},4865:(Y,h,d)=>{var x=d(9465),I=d(7813),U=Object.prototype.hasOwnProperty;Y.exports=function(N,H,tt){var bt=N[H];U.call(N,H)&&I(bt,tt)&&(void 0!==tt||H in N)||x(N,H,tt)}},8470:(Y,h,d)=>{var x=d(7813);Y.exports=function(I,U){for(var N=I.length;N--;)if(x(I[N][0],U))return N;return-1}},9465:(Y,h,d)=>{var x=d(8777);Y.exports=function(I,U,N){"__proto__"==U&&x?x(I,U,{configurable:!0,enumerable:!0,value:N,writable:!0}):I[U]=N}},3118:(Y,h,d)=>{var x=d(3218),I=Object.create,U=function(){function N(){}return function(H){if(!x(H))return{};if(I)return I(H);N.prototype=H;var tt=new N;return N.prototype=void 0,tt}}();Y.exports=U},8483:(Y,h,d)=>{var x=d(5063)();Y.exports=x},7786:(Y,h,d)=>{var x=d(1811),I=d(327);Y.exports=function(U,N){for(var H=0,tt=(N=x(N,U)).length;null!=U&&H<tt;)U=U[I(N[H++])];return H&&H==tt?U:void 0}},4239:(Y,h,d)=>{var x=d(2705),I=d(9607),U=d(2333),N=x?x.toStringTag:void 0;Y.exports=function(H){return null==H?void 0===H?"[object Undefined]":"[object Null]":N&&N in Object(H)?I(H):U(H)}},8565:Y=>{var h=Object.prototype.hasOwnProperty;Y.exports=function(d,x){return null!=d&&h.call(d,x)}},9454:(Y,h,d)=>{var x=d(4239),I=d(7005);Y.exports=function(U){return I(U)&&"[object Arguments]"==x(U)}},8458:(Y,h,d)=>{var x=d(3560),I=d(5346),U=d(3218),N=d(346),H=/^\[object .+?Constructor\]$/,dt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Y.exports=function(St){return!(!U(St)||I(St))&&(x(St)?dt:H).test(N(St))}},8749:(Y,h,d)=>{var x=d(4239),I=d(1780),U=d(7005),N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N["[object Arguments]"]=N["[object Array]"]=N["[object ArrayBuffer]"]=N["[object Boolean]"]=N["[object DataView]"]=N["[object Date]"]=N["[object Error]"]=N["[object Function]"]=N["[object Map]"]=N["[object Number]"]=N["[object Object]"]=N["[object RegExp]"]=N["[object Set]"]=N["[object String]"]=N["[object WeakMap]"]=!1,Y.exports=function(H){return U(H)&&I(H.length)&&!!N[x(H)]}},313:(Y,h,d)=>{var x=d(3218),I=d(5726),U=d(3498),N=Object.prototype.hasOwnProperty;Y.exports=function(H){if(!x(H))return U(H);var tt=I(H),bt=[];for(var Et in H)("constructor"!=Et||!tt&&N.call(H,Et))&&bt.push(Et);return bt}},2980:(Y,h,d)=>{var x=d(6384),I=d(6556),U=d(8483),N=d(9783),H=d(3218),tt=d(1704),bt=d(6390);Y.exports=function Et(Ct,dt,St,ht,_t){Ct!==dt&&U(dt,function(xt,K){if(_t||(_t=new x),H(xt))N(Ct,dt,K,St,Et,ht,_t);else{var st=ht?ht(bt(Ct,K),xt,K+"",Ct,dt,_t):void 0;void 0===st&&(st=xt),I(Ct,K,st)}},tt)}},9783:(Y,h,d)=>{var x=d(6556),I=d(4626),U=d(7133),N=d(278),H=d(8517),tt=d(5694),bt=d(1469),Et=d(9246),Ct=d(4144),dt=d(3560),St=d(3218),ht=d(8630),_t=d(6719),xt=d(6390),K=d(9881);Y.exports=function(st,mt,zt,Ut,Gt,Yt,Qt){var Ft=xt(st,zt),te=xt(mt,zt),je=Qt.get(te);if(je)x(st,zt,je);else{var jt=Yt?Yt(Ft,te,zt+"",st,mt,Qt):void 0,ce=void 0===jt;if(ce){var ie=bt(te),me=!ie&&Ct(te),He=!ie&&!me&&_t(te);jt=te,ie||me||He?bt(Ft)?jt=Ft:Et(Ft)?jt=N(Ft):me?(ce=!1,jt=I(te,!0)):He?(ce=!1,jt=U(te,!0)):jt=[]:ht(te)||tt(te)?(jt=Ft,tt(Ft)?jt=K(Ft):St(Ft)&&!dt(Ft)||(jt=H(te))):ce=!1}ce&&(Qt.set(te,jt),Gt(jt,te,Ut,Yt,Qt),Qt.delete(te)),x(st,zt,jt)}}},5976:(Y,h,d)=>{var x=d(6557),I=d(5357),U=d(61);Y.exports=function(N,H){return U(I(N,H,x),N+"")}},6560:(Y,h,d)=>{var x=d(5703),I=d(8777),U=d(6557);Y.exports=I?function(H,tt){return I(H,"toString",{configurable:!0,enumerable:!1,value:x(tt),writable:!0})}:U},2545:Y=>{Y.exports=function(h,d){for(var x=-1,I=Array(h);++x<h;)I[x]=d(x);return I}},531:(Y,h,d)=>{var x=d(2705),I=d(9932),U=d(1469),N=d(3448),H=x?x.prototype:void 0,tt=H?H.toString:void 0;Y.exports=function bt(Et){if("string"==typeof Et)return Et;if(U(Et))return I(Et,bt)+"";if(N(Et))return tt?tt.call(Et):"";var Ct=Et+"";return"0"==Ct&&1/Et==-1/0?"-0":Ct}},1717:Y=>{Y.exports=function(h){return function(d){return h(d)}}},1811:(Y,h,d)=>{var x=d(1469),I=d(5403),U=d(5514),N=d(9833);Y.exports=function(H,tt){return x(H)?H:I(H,tt)?[H]:U(N(H))}},4318:(Y,h,d)=>{var x=d(1149);Y.exports=function(I){var U=new I.constructor(I.byteLength);return new x(U).set(new x(I)),U}},4626:(Y,h,d)=>{Y=d.nmd(Y);var x=d(5639),I=h&&!h.nodeType&&h,U=I&&Y&&!Y.nodeType&&Y,N=U&&U.exports===I?x.Buffer:void 0,H=N?N.allocUnsafe:void 0;Y.exports=function(tt,bt){if(bt)return tt.slice();var Et=tt.length,Ct=H?H(Et):new tt.constructor(Et);return tt.copy(Ct),Ct}},7133:(Y,h,d)=>{var x=d(4318);Y.exports=function(I,U){var N=U?x(I.buffer):I.buffer;return new I.constructor(N,I.byteOffset,I.length)}},278:Y=>{Y.exports=function(h,d){var x=-1,I=h.length;for(d||(d=Array(I));++x<I;)d[x]=h[x];return d}},8363:(Y,h,d)=>{var x=d(4865),I=d(9465);Y.exports=function(U,N,H,tt){var bt=!H;H||(H={});for(var Et=-1,Ct=N.length;++Et<Ct;){var dt=N[Et],St=tt?tt(H[dt],U[dt],dt,H,U):void 0;void 0===St&&(St=U[dt]),bt?I(H,dt,St):x(H,dt,St)}return H}},4429:(Y,h,d)=>{var x=d(5639)["__core-js_shared__"];Y.exports=x},1463:(Y,h,d)=>{var x=d(5976),I=d(6612);Y.exports=function(U){return x(function(N,H){var tt=-1,bt=H.length,Et=bt>1?H[bt-1]:void 0,Ct=bt>2?H[2]:void 0;for(Et=U.length>3&&"function"==typeof Et?(bt--,Et):void 0,Ct&&I(H[0],H[1],Ct)&&(Et=bt<3?void 0:Et,bt=1),N=Object(N);++tt<bt;){var dt=H[tt];dt&&U(N,dt,tt,Et)}return N})}},5063:Y=>{Y.exports=function(h){return function(d,x,I){for(var U=-1,N=Object(d),H=I(d),tt=H.length;tt--;){var bt=H[h?tt:++U];if(!1===x(N[bt],bt,N))break}return d}}},8777:(Y,h,d)=>{var x=d(852),I=function(){try{var U=x(Object,"defineProperty");return U({},"",{}),U}catch{}}();Y.exports=I},1957:(Y,h,d)=>{Y.exports="object"==typeof d.g&&d.g&&d.g.Object===Object&&d.g},5050:(Y,h,d)=>{var x=d(7019);Y.exports=function(I,U){var N=I.__data__;return x(U)?N["string"==typeof U?"string":"hash"]:N.map}},852:(Y,h,d)=>{var x=d(8458),I=d(7801);Y.exports=function(U,N){var H=I(U,N);return x(H)?H:void 0}},5924:(Y,h,d)=>{var x=d(5569)(Object.getPrototypeOf,Object);Y.exports=x},9607:(Y,h,d)=>{var x=d(2705),I=Object.prototype,U=I.hasOwnProperty,N=I.toString,H=x?x.toStringTag:void 0;Y.exports=function(tt){var bt=U.call(tt,H),Et=tt[H];try{tt[H]=void 0;var Ct=!0}catch{}var dt=N.call(tt);return Ct&&(bt?tt[H]=Et:delete tt[H]),dt}},7801:Y=>{Y.exports=function(h,d){return h?.[d]}},222:(Y,h,d)=>{var x=d(1811),I=d(5694),U=d(1469),N=d(5776),H=d(1780),tt=d(327);Y.exports=function(bt,Et,Ct){for(var dt=-1,St=(Et=x(Et,bt)).length,ht=!1;++dt<St;){var _t=tt(Et[dt]);if(!(ht=null!=bt&&Ct(bt,_t)))break;bt=bt[_t]}return ht||++dt!=St?ht:!!(St=null==bt?0:bt.length)&&H(St)&&N(_t,St)&&(U(bt)||I(bt))}},1789:(Y,h,d)=>{var x=d(4536);Y.exports=function(){this.__data__=x?x(null):{},this.size=0}},401:Y=>{Y.exports=function(h){var d=this.has(h)&&delete this.__data__[h];return this.size-=d?1:0,d}},7667:(Y,h,d)=>{var x=d(4536),I=Object.prototype.hasOwnProperty;Y.exports=function(U){var N=this.__data__;if(x){var H=N[U];return"__lodash_hash_undefined__"===H?void 0:H}return I.call(N,U)?N[U]:void 0}},1327:(Y,h,d)=>{var x=d(4536),I=Object.prototype.hasOwnProperty;Y.exports=function(U){var N=this.__data__;return x?void 0!==N[U]:I.call(N,U)}},1866:(Y,h,d)=>{var x=d(4536);Y.exports=function(I,U){var N=this.__data__;return this.size+=this.has(I)?0:1,N[I]=x&&void 0===U?"__lodash_hash_undefined__":U,this}},8517:(Y,h,d)=>{var x=d(3118),I=d(5924),U=d(5726);Y.exports=function(N){return"function"!=typeof N.constructor||U(N)?{}:x(I(N))}},5776:Y=>{var h=/^(?:0|[1-9]\d*)$/;Y.exports=function(d,x){var I=typeof d;return!!(x=x??9007199254740991)&&("number"==I||"symbol"!=I&&h.test(d))&&d>-1&&d%1==0&&d<x}},6612:(Y,h,d)=>{var x=d(7813),I=d(8612),U=d(5776),N=d(3218);Y.exports=function(H,tt,bt){if(!N(bt))return!1;var Et=typeof tt;return!!("number"==Et?I(bt)&&U(tt,bt.length):"string"==Et&&tt in bt)&&x(bt[tt],H)}},5403:(Y,h,d)=>{var x=d(1469),I=d(3448),U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N=/^\w*$/;Y.exports=function(H,tt){if(x(H))return!1;var bt=typeof H;return!("number"!=bt&&"symbol"!=bt&&"boolean"!=bt&&null!=H&&!I(H))||N.test(H)||!U.test(H)||null!=tt&&H in Object(tt)}},7019:Y=>{Y.exports=function(h){var d=typeof h;return"string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==h:null===h}},5346:(Y,h,d)=>{var x,I=d(4429),U=(x=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"";Y.exports=function(N){return!!U&&U in N}},5726:Y=>{var h=Object.prototype;Y.exports=function(d){var x=d&&d.constructor;return d===("function"==typeof x&&x.prototype||h)}},7040:Y=>{Y.exports=function(){this.__data__=[],this.size=0}},4125:(Y,h,d)=>{var x=d(8470),I=Array.prototype.splice;Y.exports=function(U){var N=this.__data__,H=x(N,U);return!(H<0||(H==N.length-1?N.pop():I.call(N,H,1),--this.size,0))}},2117:(Y,h,d)=>{var x=d(8470);Y.exports=function(I){var U=this.__data__,N=x(U,I);return N<0?void 0:U[N][1]}},7518:(Y,h,d)=>{var x=d(8470);Y.exports=function(I){return x(this.__data__,I)>-1}},4705:(Y,h,d)=>{var x=d(8470);Y.exports=function(I,U){var N=this.__data__,H=x(N,I);return H<0?(++this.size,N.push([I,U])):N[H][1]=U,this}},4785:(Y,h,d)=>{var x=d(1989),I=d(8407),U=d(7071);Y.exports=function(){this.size=0,this.__data__={hash:new x,map:new(U||I),string:new x}}},1285:(Y,h,d)=>{var x=d(5050);Y.exports=function(I){var U=x(this,I).delete(I);return this.size-=U?1:0,U}},6e3:(Y,h,d)=>{var x=d(5050);Y.exports=function(I){return x(this,I).get(I)}},9916:(Y,h,d)=>{var x=d(5050);Y.exports=function(I){return x(this,I).has(I)}},5265:(Y,h,d)=>{var x=d(5050);Y.exports=function(I,U){var N=x(this,I),H=N.size;return N.set(I,U),this.size+=N.size==H?0:1,this}},4523:(Y,h,d)=>{var x=d(8306);Y.exports=function(I){var U=x(I,function(H){return 500===N.size&&N.clear(),H}),N=U.cache;return U}},4536:(Y,h,d)=>{var x=d(852)(Object,"create");Y.exports=x},3498:Y=>{Y.exports=function(h){var d=[];if(null!=h)for(var x in Object(h))d.push(x);return d}},1167:(Y,h,d)=>{Y=d.nmd(Y);var x=d(1957),I=h&&!h.nodeType&&h,U=I&&Y&&!Y.nodeType&&Y,N=U&&U.exports===I&&x.process,H=function(){try{return U&&U.require&&U.require("util").types||N&&N.binding&&N.binding("util")}catch{}}();Y.exports=H},2333:Y=>{var h=Object.prototype.toString;Y.exports=function(d){return h.call(d)}},5569:Y=>{Y.exports=function(h,d){return function(x){return h(d(x))}}},5357:(Y,h,d)=>{var x=d(6874),I=Math.max;Y.exports=function(U,N,H){return N=I(void 0===N?U.length-1:N,0),function(){for(var tt=arguments,bt=-1,Et=I(tt.length-N,0),Ct=Array(Et);++bt<Et;)Ct[bt]=tt[N+bt];bt=-1;for(var dt=Array(N+1);++bt<N;)dt[bt]=tt[bt];return dt[N]=H(Ct),x(U,this,dt)}}},5639:(Y,h,d)=>{var x=d(1957),I="object"==typeof self&&self&&self.Object===Object&&self,U=x||I||Function("return this")();Y.exports=U},6390:Y=>{Y.exports=function(h,d){if(("constructor"!==d||"function"!=typeof h[d])&&"__proto__"!=d)return h[d]}},61:(Y,h,d)=>{var x=d(6560),I=d(1275)(x);Y.exports=I},1275:Y=>{var h=Date.now;Y.exports=function(d){var x=0,I=0;return function(){var U=h(),N=16-(U-I);if(I=U,N>0){if(++x>=800)return arguments[0]}else x=0;return d.apply(void 0,arguments)}}},7465:(Y,h,d)=>{var x=d(8407);Y.exports=function(){this.__data__=new x,this.size=0}},3779:Y=>{Y.exports=function(h){var d=this.__data__,x=d.delete(h);return this.size=d.size,x}},7599:Y=>{Y.exports=function(h){return this.__data__.get(h)}},4758:Y=>{Y.exports=function(h){return this.__data__.has(h)}},4309:(Y,h,d)=>{var x=d(8407),I=d(7071),U=d(3369);Y.exports=function(N,H){var tt=this.__data__;if(tt instanceof x){var bt=tt.__data__;if(!I||bt.length<199)return bt.push([N,H]),this.size=++tt.size,this;tt=this.__data__=new U(bt)}return tt.set(N,H),this.size=tt.size,this}},5514:(Y,h,d)=>{var x=d(4523),I=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/\\(\\)?/g,N=x(function(H){var tt=[];return 46===H.charCodeAt(0)&&tt.push(""),H.replace(I,function(bt,Et,Ct,dt){tt.push(Ct?dt.replace(U,"$1"):Et||bt)}),tt});Y.exports=N},327:(Y,h,d)=>{var x=d(3448);Y.exports=function(I){if("string"==typeof I||x(I))return I;var U=I+"";return"0"==U&&1/I==-1/0?"-0":U}},346:Y=>{var h=Function.prototype.toString;Y.exports=function(d){if(null!=d){try{return h.call(d)}catch{}try{return d+""}catch{}}return""}},5703:Y=>{Y.exports=function(h){return function(){return h}}},7813:Y=>{Y.exports=function(h,d){return h===d||h!=h&&d!=d}},7361:(Y,h,d)=>{var x=d(7786);Y.exports=function(I,U,N){var H=null==I?void 0:x(I,U);return void 0===H?N:H}},8721:(Y,h,d)=>{var x=d(8565),I=d(222);Y.exports=function(U,N){return null!=U&&I(U,N,x)}},6557:Y=>{Y.exports=function(h){return h}},5694:(Y,h,d)=>{var x=d(9454),I=d(7005),U=Object.prototype,N=U.hasOwnProperty,H=U.propertyIsEnumerable,tt=x(function(){return arguments}())?x:function(bt){return I(bt)&&N.call(bt,"callee")&&!H.call(bt,"callee")};Y.exports=tt},1469:Y=>{Y.exports=Array.isArray},8612:(Y,h,d)=>{var x=d(3560),I=d(1780);Y.exports=function(U){return null!=U&&I(U.length)&&!x(U)}},9246:(Y,h,d)=>{var x=d(8612),I=d(7005);Y.exports=function(U){return I(U)&&x(U)}},4144:(Y,h,d)=>{Y=d.nmd(Y);var x=d(5639),I=d(5062),U=h&&!h.nodeType&&h,N=U&&Y&&!Y.nodeType&&Y,H=N&&N.exports===U?x.Buffer:void 0;Y.exports=(H?H.isBuffer:void 0)||I},3560:(Y,h,d)=>{var x=d(4239),I=d(3218);Y.exports=function(U){if(!I(U))return!1;var N=x(U);return"[object Function]"==N||"[object GeneratorFunction]"==N||"[object AsyncFunction]"==N||"[object Proxy]"==N}},1780:Y=>{Y.exports=function(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=9007199254740991}},3218:Y=>{Y.exports=function(h){var d=typeof h;return null!=h&&("object"==d||"function"==d)}},7005:Y=>{Y.exports=function(h){return null!=h&&"object"==typeof h}},8630:(Y,h,d)=>{var x=d(4239),I=d(5924),U=d(7005),tt=Function.prototype.toString,bt=Object.prototype.hasOwnProperty,Et=tt.call(Object);Y.exports=function(Ct){if(!U(Ct)||"[object Object]"!=x(Ct))return!1;var dt=I(Ct);if(null===dt)return!0;var St=bt.call(dt,"constructor")&&dt.constructor;return"function"==typeof St&&St instanceof St&&tt.call(St)==Et}},3448:(Y,h,d)=>{var x=d(4239),I=d(7005);Y.exports=function(U){return"symbol"==typeof U||I(U)&&"[object Symbol]"==x(U)}},6719:(Y,h,d)=>{var x=d(8749),I=d(1717),U=d(1167),N=U&&U.isTypedArray,H=N?I(N):x;Y.exports=H},1704:(Y,h,d)=>{var x=d(4636),I=d(313),U=d(8612);Y.exports=function(N){return U(N)?x(N,!0):I(N)}},8306:(Y,h,d)=>{var x=d(3369);function I(U,N){if("function"!=typeof U||null!=N&&"function"!=typeof N)throw new TypeError("Expected a function");var H=function(){var tt=arguments,bt=N?N.apply(this,tt):tt[0],Et=H.cache;if(Et.has(bt))return Et.get(bt);var Ct=U.apply(this,tt);return H.cache=Et.set(bt,Ct)||Et,Ct};return H.cache=new(I.Cache||x),H}I.Cache=x,Y.exports=I},2492:(Y,h,d)=>{var x=d(2980),I=d(1463)(function(U,N,H){x(U,N,H)});Y.exports=I},5062:Y=>{Y.exports=function(){return!1}},9881:(Y,h,d)=>{var x=d(8363),I=d(1704);Y.exports=function(U){return x(U,I(U))}},9833:(Y,h,d)=>{var x=d(531);Y.exports=function(I){return null==I?"":x(I)}},2676:function(Y){Y.exports=function(){"use strict";function h(nt,A){if(!(nt instanceof A))throw new TypeError("Cannot call a class as a function")}function d(nt,A){for(var G=0;G<A.length;G++){var W=A[G];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(nt,W.key,W)}}function x(nt,A,G){return A&&d(nt.prototype,A),G&&d(nt,G),nt}var I=function nt(A,G){this.next=null,this.key=A,this.data=G,this.left=null,this.right=null};function U(nt,A){return nt>A?1:nt<A?-1:0}function N(nt,A,G){for(var W=new I(null,null),it=W,at=W;;){var Nt=G(nt,A.key);if(Nt<0){if(null===A.left)break;if(G(nt,A.left.key)<0){var vt=A.left;if(A.left=vt.right,vt.right=A,null===(A=vt).left)break}at.left=A,at=A,A=A.left}else{if(!(Nt>0)||null===A.right||G(nt,A.right.key)>0&&(A.right=(vt=A.right).left,vt.left=A,null===(A=vt).right))break;it.right=A,it=A,A=A.right}}return it.right=A.left,at.left=A.right,A.left=W.right,A.right=W.left,A}function H(nt,A,G,W){var it=new I(nt,A);if(null===G)return it.left=it.right=null,it;var at=W(nt,(G=N(nt,G,W)).key);return at<0?(it.left=G.left,it.right=G,G.left=null):at>=0&&(it.right=G.right,it.left=G,G.right=null),it}function tt(nt,A,G){var W=null,it=null;if(A){var at=G((A=N(nt,A,G)).key,nt);0===at?(W=A.left,it=A.right):at<0?(it=A.right,A.right=null,W=A):(W=A.left,A.left=null,it=A)}return{left:W,right:it}}function Et(nt,A,G,W,it){if(nt){W(A+(G?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+it(nt)+"\n");var at=A+(G?"    ":"\u2502   ");nt.left&&Et(nt.left,at,!1,W,it),nt.right&&Et(nt.right,at,!0,W,it)}}var Ct=function(){function nt(A){void 0===A&&(A=U),this._root=null,this._size=0,this._comparator=A}return nt.prototype.insert=function(A,G){return this._size++,this._root=H(A,G,this._root,this._comparator)},nt.prototype.add=function(A,G){var W=new I(A,G);null===this._root&&(W.left=W.right=null,this._size++,this._root=W);var it=this._comparator,at=N(A,this._root,it),Nt=it(A,at.key);return 0===Nt?this._root=at:(Nt<0?(W.left=at.left,W.right=at,at.left=null):Nt>0&&(W.right=at.right,W.left=at,at.right=null),this._size++,this._root=W),this._root},nt.prototype.remove=function(A){this._root=this._remove(A,this._root,this._comparator)},nt.prototype._remove=function(A,G,W){var it;return null===G?null:0===W(A,(G=N(A,G,W)).key)?(null===G.left?it=G.right:(it=N(A,G.left,W)).right=G.right,this._size--,it):G},nt.prototype.pop=function(){var A=this._root;if(A){for(;A.left;)A=A.left;return this._root=N(A.key,this._root,this._comparator),this._root=this._remove(A.key,this._root,this._comparator),{key:A.key,data:A.data}}return null},nt.prototype.findStatic=function(A){for(var G=this._root,W=this._comparator;G;){var it=W(A,G.key);if(0===it)return G;G=it<0?G.left:G.right}return null},nt.prototype.find=function(A){return this._root&&(this._root=N(A,this._root,this._comparator),0!==this._comparator(A,this._root.key))?null:this._root},nt.prototype.contains=function(A){for(var G=this._root,W=this._comparator;G;){var it=W(A,G.key);if(0===it)return!0;G=it<0?G.left:G.right}return!1},nt.prototype.forEach=function(A,G){for(var W=this._root,it=[],at=!1;!at;)null!==W?(it.push(W),W=W.left):0!==it.length?(W=it.pop(),A.call(G,W),W=W.right):at=!0;return this},nt.prototype.range=function(A,G,W,it){for(var at=[],Nt=this._comparator,vt=this._root;0!==at.length||vt;)if(vt)at.push(vt),vt=vt.left;else{if(Nt((vt=at.pop()).key,G)>0)break;if(Nt(vt.key,A)>=0&&W.call(it,vt))return this;vt=vt.right}return this},nt.prototype.keys=function(){var A=[];return this.forEach(function(G){return A.push(G.key)}),A},nt.prototype.values=function(){var A=[];return this.forEach(function(G){return A.push(G.data)}),A},nt.prototype.min=function(){return this._root?this.minNode(this._root).key:null},nt.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},nt.prototype.minNode=function(A){if(void 0===A&&(A=this._root),A)for(;A.left;)A=A.left;return A},nt.prototype.maxNode=function(A){if(void 0===A&&(A=this._root),A)for(;A.right;)A=A.right;return A},nt.prototype.at=function(A){for(var G=this._root,W=!1,it=0,at=[];!W;)if(G)at.push(G),G=G.left;else if(at.length>0){if(G=at.pop(),it===A)return G;it++,G=G.right}else W=!0;return null},nt.prototype.next=function(A){var G=this._root,W=null;if(A.right){for(W=A.right;W.left;)W=W.left;return W}for(var it=this._comparator;G;){var at=it(A.key,G.key);if(0===at)break;at<0?(W=G,G=G.left):G=G.right}return W},nt.prototype.prev=function(A){var G=this._root,W=null;if(null!==A.left){for(W=A.left;W.right;)W=W.right;return W}for(var it=this._comparator;G;){var at=it(A.key,G.key);if(0===at)break;at<0?G=G.left:(W=G,G=G.right)}return W},nt.prototype.clear=function(){return this._root=null,this._size=0,this},nt.prototype.toList=function(){return function ht(nt){for(var A=nt,G=[],W=!1,it=new I(null,null),at=it;!W;)A?(G.push(A),A=A.left):G.length>0?A=(A=at=at.next=G.pop()).right:W=!0;return at.next=null,it.next}(this._root)},nt.prototype.load=function(A,G,W){void 0===G&&(G=[]),void 0===W&&(W=!1);var it=A.length,at=this._comparator;if(W&&K(A,G,0,it-1,at),null===this._root)this._root=dt(A,G,0,it),this._size=it;else{var Nt=function xt(nt,A,G){for(var W=new I(null,null),it=W,at=nt,Nt=A;null!==at&&null!==Nt;)G(at.key,Nt.key)<0?(it.next=at,at=at.next):(it.next=Nt,Nt=Nt.next),it=it.next;return null!==at?it.next=at:null!==Nt&&(it.next=Nt),W.next}(this.toList(),function St(nt,A){for(var G=new I(null,null),W=G,it=0;it<nt.length;it++)W=W.next=new I(nt[it],A[it]);return W.next=null,G.next}(A,G),at);this._root=_t({head:Nt},0,it=this._size+it)}return this},nt.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(nt.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(nt.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),nt.prototype.toString=function(A){void 0===A&&(A=function(W){return String(W.key)});var G=[];return Et(this._root,"",!0,function(W){return G.push(W)},A),G.join("")},nt.prototype.update=function(A,G,W){var it=this._comparator,at=tt(A,this._root,it),Nt=at.left,vt=at.right;it(A,G)<0?vt=H(G,W,vt,it):Nt=H(G,W,Nt,it),this._root=function bt(nt,A,G){return null===A?nt:(null===nt||((A=N(nt.key,A,G)).left=nt),A)}(Nt,vt,it)},nt.prototype.split=function(A){return tt(A,this._root,this._comparator)},nt}();function dt(nt,A,G,W){var it=W-G;if(it>0){var at=G+Math.floor(it/2),Wt=new I(nt[at],A[at]);return Wt.left=dt(nt,A,G,at),Wt.right=dt(nt,A,at+1,W),Wt}return null}function _t(nt,A,G){var W=G-A;if(W>0){var it=A+Math.floor(W/2),at=_t(nt,A,it),Nt=nt.head;return Nt.left=at,nt.head=nt.head.next,Nt.right=_t(nt,it+1,G),Nt}return null}function K(nt,A,G,W,it){if(!(G>=W)){for(var at=nt[G+W>>1],Nt=G-1,vt=W+1;;){do{Nt++}while(it(nt[Nt],at)<0);do{vt--}while(it(nt[vt],at)>0);if(Nt>=vt)break;var Wt=nt[Nt];nt[Nt]=nt[vt],nt[vt]=Wt,Wt=A[Nt],A[Nt]=A[vt],A[vt]=Wt}K(nt,A,G,vt,it),K(nt,A,vt+1,W,it)}}var st=function(nt,A){return nt.ll.x<=A.x&&A.x<=nt.ur.x&&nt.ll.y<=A.y&&A.y<=nt.ur.y},mt=function(nt,A){return A.ur.x<nt.ll.x||nt.ur.x<A.ll.x||A.ur.y<nt.ll.y||nt.ur.y<A.ll.y?null:{ll:{x:nt.ll.x<A.ll.x?A.ll.x:nt.ll.x,y:nt.ll.y<A.ll.y?A.ll.y:nt.ll.y},ur:{x:nt.ur.x<A.ur.x?nt.ur.x:A.ur.x,y:nt.ur.y<A.ur.y?nt.ur.y:A.ur.y}}},zt=Number.EPSILON;void 0===zt&&(zt=Math.pow(2,-52));var Ut=zt*zt,Gt=function(nt,A){if(-zt<nt&&nt<zt&&-zt<A&&A<zt)return 0;var G=nt-A;return G*G<Ut*nt*A?0:nt<A?-1:1},Yt=function(){function nt(){h(this,nt),this.reset()}return x(nt,[{key:"reset",value:function(){this.xRounder=new Qt,this.yRounder=new Qt}},{key:"round",value:function(A,G){return{x:this.xRounder.round(A),y:this.yRounder.round(G)}}}]),nt}(),Qt=function(){function nt(){h(this,nt),this.tree=new Ct,this.round(0)}return x(nt,[{key:"round",value:function(A){var G=this.tree.add(A),W=this.tree.prev(G);if(null!==W&&0===Gt(G.key,W.key))return this.tree.remove(A),W.key;var it=this.tree.next(G);return null!==it&&0===Gt(G.key,it.key)?(this.tree.remove(A),it.key):A}}]),nt}(),Ft=new Yt,te=function(nt,A){return nt.x*A.y-nt.y*A.x},je=function(nt,A){return nt.x*A.x+nt.y*A.y},jt=function(nt,A,G){var at=te({x:A.x-nt.x,y:A.y-nt.y},{x:G.x-nt.x,y:G.y-nt.y});return Gt(at,0)},ce=function(nt){return Math.sqrt(je(nt,nt))},ie=function(nt,A,G){var W={x:A.x-nt.x,y:A.y-nt.y},it={x:G.x-nt.x,y:G.y-nt.y};return te(it,W)/ce(it)/ce(W)},me=function(nt,A,G){var W={x:A.x-nt.x,y:A.y-nt.y},it={x:G.x-nt.x,y:G.y-nt.y};return je(it,W)/ce(it)/ce(W)},He=function(nt,A,G){return 0===A.y?null:{x:nt.x+A.x/A.y*(G-nt.y),y:G}},se=function(nt,A,G){return 0===A.x?null:{x:G,y:nt.y+A.y/A.x*(G-nt.x)}},de=function(){function nt(A,G){h(this,nt),void 0===A.events?A.events=[this]:A.events.push(this),this.point=A,this.isLeft=G}return x(nt,null,[{key:"compare",value:function(A,G){var W=nt.comparePoints(A.point,G.point);return 0!==W?W:(A.point!==G.point&&A.link(G),A.isLeft!==G.isLeft?A.isLeft?1:-1:Di.compare(A.segment,G.segment))}},{key:"comparePoints",value:function(A,G){return A.x<G.x?-1:A.x>G.x?1:A.y<G.y?-1:A.y>G.y?1:0}}]),x(nt,[{key:"link",value:function(A){if(A.point===this.point)throw new Error("Tried to link already linked events");for(var G=A.point.events,W=0,it=G.length;W<it;W++){var at=G[W];this.point.events.push(at),at.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var A=this.point.events.length,G=0;G<A;G++){var W=this.point.events[G];if(void 0===W.segment.consumedBy)for(var it=G+1;it<A;it++){var at=this.point.events[it];void 0===at.consumedBy&&W.otherSE.point.events===at.otherSE.point.events&&W.segment.consume(at.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var A=[],G=0,W=this.point.events.length;G<W;G++){var it=this.point.events[G];it!==this&&!it.segment.ringOut&&it.segment.isInResult()&&A.push(it)}return A}},{key:"getLeftmostComparator",value:function(A){var G=this,W=new Map,it=function(at){var Nt=at.otherSE;W.set(at,{sine:ie(G.point,A.point,Nt.point),cosine:me(G.point,A.point,Nt.point)})};return function(at,Nt){W.has(at)||it(at),W.has(Nt)||it(Nt);var vt=W.get(at),Wt=vt.sine,Ee=vt.cosine,Re=W.get(Nt),Ue=Re.sine,qe=Re.cosine;return Wt>=0&&Ue>=0?Ee<qe?1:Ee>qe?-1:0:Wt<0&&Ue<0?Ee<qe?-1:Ee>qe?1:0:Ue<Wt?-1:Ue>Wt?1:0}}}]),nt}(),we=0,Di=function(){function nt(A,G,W,it){h(this,nt),this.id=++we,this.leftSE=A,A.segment=this,A.otherSE=G,this.rightSE=G,G.segment=this,G.otherSE=A,this.rings=W,this.windings=it}return x(nt,null,[{key:"compare",value:function(A,G){var W=A.leftSE.point.x,it=G.leftSE.point.x,at=A.rightSE.point.x,Nt=G.rightSE.point.x;if(Nt<W)return 1;if(at<it)return-1;var vt=A.leftSE.point.y,Wt=G.leftSE.point.y,Ee=A.rightSE.point.y,Re=G.rightSE.point.y;if(W<it){if(Wt<vt&&Wt<Ee)return 1;if(Wt>vt&&Wt>Ee)return-1;var Ue=A.comparePoint(G.leftSE.point);if(Ue<0)return 1;if(Ue>0)return-1;var qe=G.comparePoint(A.rightSE.point);return 0!==qe?qe:-1}if(W>it){if(vt<Wt&&vt<Re)return-1;if(vt>Wt&&vt>Re)return 1;var ye=G.comparePoint(A.leftSE.point);if(0!==ye)return ye;var Te=A.comparePoint(G.rightSE.point);return Te<0?1:Te>0?-1:1}if(vt<Wt)return-1;if(vt>Wt)return 1;if(at<Nt){var Un=G.comparePoint(A.rightSE.point);if(0!==Un)return Un}if(at>Nt){var Jn=A.comparePoint(G.rightSE.point);if(Jn<0)return 1;if(Jn>0)return-1}if(at!==Nt){var Pi=Ee-vt,Ri=at-W,Ni=Re-Wt,gi=Nt-it;if(Pi>Ri&&Ni<gi)return 1;if(Pi<Ri&&Ni>gi)return-1}return at>Nt?1:at<Nt||Ee<Re?-1:Ee>Re?1:A.id<G.id?-1:A.id>G.id?1:0}}]),x(nt,[{key:"replaceRightSE",value:function(A){this.rightSE=A,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var A=this.leftSE.point.y,G=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:A<G?A:G},ur:{x:this.rightSE.point.x,y:A>G?A:G}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(A){return A.x===this.leftSE.point.x&&A.y===this.leftSE.point.y||A.x===this.rightSE.point.x&&A.y===this.rightSE.point.y}},{key:"comparePoint",value:function(A){if(this.isAnEndpoint(A))return 0;var G=this.leftSE.point,W=this.rightSE.point,it=this.vector();if(G.x===W.x)return A.x===G.x?0:A.x<G.x?1:-1;if(A.x===G.x+(A.y-G.y)/it.y*it.x)return 0;var Wt=G.y+(A.x-G.x)/it.x*it.y;return A.y===Wt?0:A.y<Wt?-1:1}},{key:"getIntersection",value:function(A){var G=this.bbox(),W=A.bbox(),it=mt(G,W);if(null===it)return null;var at=this.leftSE.point,Nt=this.rightSE.point,vt=A.leftSE.point,Wt=A.rightSE.point,Ee=st(G,vt)&&0===this.comparePoint(vt),Re=st(W,at)&&0===A.comparePoint(at),Ue=st(G,Wt)&&0===this.comparePoint(Wt),qe=st(W,Nt)&&0===A.comparePoint(Nt);if(Re&&Ee)return qe&&!Ue?Nt:!qe&&Ue?Wt:null;if(Re)return Ue&&at.x===Wt.x&&at.y===Wt.y?null:at;if(Ee)return qe&&Nt.x===vt.x&&Nt.y===vt.y?null:vt;if(qe&&Ue)return null;if(qe)return Nt;if(Ue)return Wt;var ye=function(nt,A,G,W){if(0===A.x)return se(G,W,nt.x);if(0===W.x)return se(nt,A,G.x);if(0===A.y)return He(G,W,nt.y);if(0===W.y)return He(nt,A,G.y);var it=te(A,W);if(0==it)return null;var at={x:G.x-nt.x,y:G.y-nt.y},Nt=te(at,A)/it,vt=te(at,W)/it;return{x:(nt.x+vt*A.x+(G.x+Nt*W.x))/2,y:(nt.y+vt*A.y+(G.y+Nt*W.y))/2}}(at,this.vector(),vt,A.vector());return null===ye?null:st(it,ye)?Ft.round(ye.x,ye.y):null}},{key:"split",value:function(A){var G=[],W=void 0!==A.events,it=new de(A,!0),at=new de(A,!1),Nt=this.rightSE;this.replaceRightSE(at),G.push(at),G.push(it);var vt=new nt(it,Nt,this.rings.slice(),this.windings.slice());return de.comparePoints(vt.leftSE.point,vt.rightSE.point)>0&&vt.swapEvents(),de.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),W&&(it.checkForConsuming(),at.checkForConsuming()),G}},{key:"swapEvents",value:function(){var A=this.rightSE;this.rightSE=this.leftSE,this.leftSE=A,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var G=0,W=this.windings.length;G<W;G++)this.windings[G]*=-1}},{key:"consume",value:function(A){for(var G=this,W=A;G.consumedBy;)G=G.consumedBy;for(;W.consumedBy;)W=W.consumedBy;var it=nt.compare(G,W);if(0!==it){if(it>0){var at=G;G=W,W=at}if(G.prev===W){var Nt=G;G=W,W=Nt}for(var vt=0,Wt=W.rings.length;vt<Wt;vt++){var Ee=W.rings[vt],Re=W.windings[vt],Ue=G.rings.indexOf(Ee);-1===Ue?(G.rings.push(Ee),G.windings.push(Re)):G.windings[Ue]+=Re}W.rings=null,W.windings=null,W.consumedBy=G,W.leftSE.consumedBy=G.leftSE,W.rightSE.consumedBy=G.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var A=this.beforeState();this._afterState={rings:A.rings.slice(0),windings:A.windings.slice(0),multiPolys:[]};for(var G=this._afterState.rings,W=this._afterState.windings,it=this._afterState.multiPolys,at=0,Nt=this.rings.length;at<Nt;at++){var vt=this.rings[at],Wt=this.windings[at],Ee=G.indexOf(vt);-1===Ee?(G.push(vt),W.push(Wt)):W[Ee]+=Wt}for(var Re=[],Ue=[],qe=0,ye=G.length;qe<ye;qe++)if(0!==W[qe]){var Te=G[qe],Un=Te.poly;if(-1===Ue.indexOf(Un))if(Te.isExterior)Re.push(Un);else{-1===Ue.indexOf(Un)&&Ue.push(Un);var Jn=Re.indexOf(Te.poly);-1!==Jn&&Re.splice(Jn,1)}}for(var Pi=0,Ri=Re.length;Pi<Ri;Pi++){var Ni=Re[Pi].multiPoly;-1===it.indexOf(Ni)&&it.push(Ni)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var A=this.beforeState().multiPolys,G=this.afterState().multiPolys;switch(ze.type){case"union":this._isInResult=0===A.length!=(0===G.length);break;case"intersection":var at,Nt;A.length<G.length?(at=A.length,Nt=G.length):(at=G.length,Nt=A.length),this._isInResult=Nt===ze.numMultiPolys&&at<Nt;break;case"xor":var vt=Math.abs(A.length-G.length);this._isInResult=vt%2==1;break;case"difference":var Wt=function(Ee){return 1===Ee.length&&Ee[0].isSubject};this._isInResult=Wt(A)!==Wt(G);break;default:throw new Error("Unrecognized operation type found ".concat(ze.type))}return this._isInResult}}],[{key:"fromRing",value:function(A,G,W){var it,at,Nt,vt=de.comparePoints(A,G);if(vt<0)it=A,at=G,Nt=1;else{if(!(vt>0))throw new Error("Tried to create degenerate segment at [".concat(A.x,", ").concat(A.y,"]"));it=G,at=A,Nt=-1}return new nt(new de(it,!0),new de(at,!1),[W],[Nt])}}]),nt}(),Dn=function(){function nt(A,G,W){if(h(this,nt),!Array.isArray(A)||0===A.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=G,this.isExterior=W,this.segments=[],"number"!=typeof A[0][0]||"number"!=typeof A[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var it=Ft.round(A[0][0],A[0][1]);this.bbox={ll:{x:it.x,y:it.y},ur:{x:it.x,y:it.y}};for(var at=it,Nt=1,vt=A.length;Nt<vt;Nt++){if("number"!=typeof A[Nt][0]||"number"!=typeof A[Nt][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var Wt=Ft.round(A[Nt][0],A[Nt][1]);Wt.x===at.x&&Wt.y===at.y||(this.segments.push(Di.fromRing(at,Wt,this)),Wt.x<this.bbox.ll.x&&(this.bbox.ll.x=Wt.x),Wt.y<this.bbox.ll.y&&(this.bbox.ll.y=Wt.y),Wt.x>this.bbox.ur.x&&(this.bbox.ur.x=Wt.x),Wt.y>this.bbox.ur.y&&(this.bbox.ur.y=Wt.y),at=Wt)}it.x===at.x&&it.y===at.y||this.segments.push(Di.fromRing(at,it,this))}return x(nt,[{key:"getSweepEvents",value:function(){for(var A=[],G=0,W=this.segments.length;G<W;G++){var it=this.segments[G];A.push(it.leftSE),A.push(it.rightSE)}return A}}]),nt}(),li=function(){function nt(A,G){if(h(this,nt),!Array.isArray(A))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Dn(A[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var W=1,it=A.length;W<it;W++){var at=new Dn(A[W],this,!1);at.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=at.bbox.ll.x),at.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=at.bbox.ll.y),at.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=at.bbox.ur.x),at.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=at.bbox.ur.y),this.interiorRings.push(at)}this.multiPoly=G}return x(nt,[{key:"getSweepEvents",value:function(){for(var A=this.exteriorRing.getSweepEvents(),G=0,W=this.interiorRings.length;G<W;G++)for(var it=this.interiorRings[G].getSweepEvents(),at=0,Nt=it.length;at<Nt;at++)A.push(it[at]);return A}}]),nt}(),Ki=function(){function nt(A,G){if(h(this,nt),!Array.isArray(A))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof A[0][0][0]&&(A=[A])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var W=0,it=A.length;W<it;W++){var at=new li(A[W],this);at.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=at.bbox.ll.x),at.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=at.bbox.ll.y),at.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=at.bbox.ur.x),at.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=at.bbox.ur.y),this.polys.push(at)}this.isSubject=G}return x(nt,[{key:"getSweepEvents",value:function(){for(var A=[],G=0,W=this.polys.length;G<W;G++)for(var it=this.polys[G].getSweepEvents(),at=0,Nt=it.length;at<Nt;at++)A.push(it[at]);return A}}]),nt}(),Oi=function(){function nt(A){h(this,nt),this.events=A;for(var G=0,W=A.length;G<W;G++)A[G].segment.ringOut=this;this.poly=null}return x(nt,null,[{key:"factory",value:function(A){for(var G=[],W=0,it=A.length;W<it;W++){var at=A[W];if(at.isInResult()&&!at.ringOut){for(var Nt=null,vt=at.leftSE,Wt=at.rightSE,Ee=[vt],Re=vt.point,Ue=[];Nt=vt,Ee.push(vt=Wt),vt.point!==Re;)for(;;){var qe=vt.getAvailableLinkedEvents();if(0===qe.length){var ye=Ee[0].point,Te=Ee[Ee.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(ye.x,",")+" ".concat(ye.y,"]. Last matching segment found ends at")+" [".concat(Te.x,", ").concat(Te.y,"]."))}if(1===qe.length){Wt=qe[0].otherSE;break}for(var Un=null,Jn=0,Pi=Ue.length;Jn<Pi;Jn++)if(Ue[Jn].point===vt.point){Un=Jn;break}if(null===Un){Ue.push({index:Ee.length,point:vt.point});var Ri=vt.getLeftmostComparator(Nt);Wt=qe.sort(Ri)[0].otherSE;break}var Ni=Ue.splice(Un)[0],gi=Ee.splice(Ni.index);gi.unshift(gi[0].otherSE),G.push(new nt(gi.reverse()))}G.push(new nt(Ee))}}return G}}]),x(nt,[{key:"getGeom",value:function(){for(var A=this.events[0].point,G=[A],W=1,it=this.events.length-1;W<it;W++){var at=this.events[W].point;0!==jt(at,A,this.events[W+1].point)&&(G.push(at),A=at)}if(1===G.length)return null;0===jt(G[0],A,G[1])&&G.shift(),G.push(G[0]);for(var Ee=this.isExteriorRing()?1:-1,Re=this.isExteriorRing()?0:G.length-1,Ue=this.isExteriorRing()?G.length:-1,qe=[],ye=Re;ye!=Ue;ye+=Ee)qe.push([G[ye].x,G[ye].y]);return qe}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var A=this.enclosingRing();this._isExteriorRing=!A||!A.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var A=this.events[0],G=1,W=this.events.length;G<W;G++){var it=this.events[G];de.compare(A,it)>0&&(A=it)}for(var at=A.segment.prevInResult(),Nt=at?at.prevInResult():null;;){if(!at)return null;if(!Nt)return at.ringOut;if(Nt.ringOut!==at.ringOut)return Nt.ringOut.enclosingRing()!==at.ringOut?at.ringOut:at.ringOut.enclosingRing();at=Nt.prevInResult(),Nt=at?at.prevInResult():null}}}]),nt}(),Tr=function(){function nt(A){h(this,nt),this.exteriorRing=A,A.poly=this,this.interiorRings=[]}return x(nt,[{key:"addInterior",value:function(A){this.interiorRings.push(A),A.poly=this}},{key:"getGeom",value:function(){var A=[this.exteriorRing.getGeom()];if(null===A[0])return null;for(var G=0,W=this.interiorRings.length;G<W;G++){var it=this.interiorRings[G].getGeom();null!==it&&A.push(it)}return A}}]),nt}(),qr=function(){function nt(A){h(this,nt),this.rings=A,this.polys=this._composePolys(A)}return x(nt,[{key:"getGeom",value:function(){for(var A=[],G=0,W=this.polys.length;G<W;G++){var it=this.polys[G].getGeom();null!==it&&A.push(it)}return A}},{key:"_composePolys",value:function(A){for(var G=[],W=0,it=A.length;W<it;W++){var at=A[W];if(!at.poly)if(at.isExteriorRing())G.push(new Tr(at));else{var Nt=at.enclosingRing();Nt.poly||G.push(new Tr(Nt)),Nt.poly.addInterior(at)}}return G}}]),nt}(),Hs=function(){function nt(A){var G=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di.compare;h(this,nt),this.queue=A,this.tree=new Ct(G),this.segments=[]}return x(nt,[{key:"process",value:function(A){var G=A.segment,W=[];if(A.consumedBy)return A.isLeft?this.queue.remove(A.otherSE):this.tree.remove(G),W;var it=A.isLeft?this.tree.insert(G):this.tree.find(G);if(!it)throw new Error("Unable to find segment #".concat(G.id," ")+"[".concat(G.leftSE.point.x,", ").concat(G.leftSE.point.y,"] -> ")+"[".concat(G.rightSE.point.x,", ").concat(G.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var at=it,Nt=it,vt=void 0,Wt=void 0;void 0===vt;)null===(at=this.tree.prev(at))?vt=null:void 0===at.key.consumedBy&&(vt=at.key);for(;void 0===Wt;)null===(Nt=this.tree.next(Nt))?Wt=null:void 0===Nt.key.consumedBy&&(Wt=Nt.key);if(A.isLeft){var Ee=null;if(vt){var Re=vt.getIntersection(G);if(null!==Re&&(G.isAnEndpoint(Re)||(Ee=Re),!vt.isAnEndpoint(Re)))for(var Ue=this._splitSafely(vt,Re),qe=0,ye=Ue.length;qe<ye;qe++)W.push(Ue[qe])}var Te=null;if(Wt){var Un=Wt.getIntersection(G);if(null!==Un&&(G.isAnEndpoint(Un)||(Te=Un),!Wt.isAnEndpoint(Un)))for(var Jn=this._splitSafely(Wt,Un),Pi=0,Ri=Jn.length;Pi<Ri;Pi++)W.push(Jn[Pi])}if(null!==Ee||null!==Te){var Ni;Ni=null===Ee?Te:null===Te||de.comparePoints(Ee,Te)<=0?Ee:Te,this.queue.remove(G.rightSE),W.push(G.rightSE);for(var gi=G.split(Ni),Vr=0,Ji=gi.length;Vr<Ji;Vr++)W.push(gi[Vr])}W.length>0?(this.tree.remove(G),W.push(A)):(this.segments.push(G),G.prev=vt)}else{if(vt&&Wt){var Hi=vt.getIntersection(Wt);if(null!==Hi){if(!vt.isAnEndpoint(Hi))for(var In=this._splitSafely(vt,Hi),lr=0,Qi=In.length;lr<Qi;lr++)W.push(In[lr]);if(!Wt.isAnEndpoint(Hi))for(var Ei=this._splitSafely(Wt,Hi),Hn=0,$i=Ei.length;Hn<$i;Hn++)W.push(Ei[Hn])}}this.tree.remove(G)}return W}},{key:"_splitSafely",value:function(A,G){this.tree.remove(A);var W=A.rightSE;this.queue.remove(W);var it=A.split(G);return it.push(W),void 0===A.consumedBy&&this.tree.insert(A),it}}]),nt}(),vs=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,so=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ze=new(function(){function nt(){h(this,nt)}return x(nt,[{key:"run",value:function(A,G,W){ze.type=A,Ft.reset();for(var it=[new Ki(G,!0)],at=0,Nt=W.length;at<Nt;at++)it.push(new Ki(W[at],!1));if(ze.numMultiPolys=it.length,"difference"===ze.type)for(var vt=it[0],Wt=1;Wt<it.length;)null!==mt(it[Wt].bbox,vt.bbox)?Wt++:it.splice(Wt,1);if("intersection"===ze.type)for(var Ee=0,Re=it.length;Ee<Re;Ee++)for(var Ue=it[Ee],qe=Ee+1,ye=it.length;qe<ye;qe++)if(null===mt(Ue.bbox,it[qe].bbox))return[];for(var Te=new Ct(de.compare),Un=0,Jn=it.length;Un<Jn;Un++)for(var Pi=it[Un].getSweepEvents(),Ri=0,Ni=Pi.length;Ri<Ni;Ri++)if(Te.insert(Pi[Ri]),Te.size>vs)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var gi=new Hs(Te),Vr=Te.size,Ji=Te.pop();Ji;){var Hi=Ji.key;if(Te.size===Vr){var In=Hi.segment;throw new Error("Unable to pop() ".concat(Hi.isLeft?"left":"right"," SweepEvent ")+"[".concat(Hi.point.x,", ").concat(Hi.point.y,"] from segment #").concat(In.id," ")+"[".concat(In.leftSE.point.x,", ").concat(In.leftSE.point.y,"] -> ")+"[".concat(In.rightSE.point.x,", ").concat(In.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(Te.size>vs)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(gi.segments.length>so)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var lr=gi.process(Hi),Qi=0,Ei=lr.length;Qi<Ei;Qi++){var Hn=lr[Qi];void 0===Hn.consumedBy&&Te.insert(Hn)}Vr=Te.size,Ji=Te.pop()}Ft.reset();var $i=Oi.factory(gi.segments);return new qr($i).getGeom()}}]),nt}());return{union:function(nt){for(var A=arguments.length,G=new Array(A>1?A-1:0),W=1;W<A;W++)G[W-1]=arguments[W];return ze.run("union",nt,G)},intersection:function(nt){for(var A=arguments.length,G=new Array(A>1?A-1:0),W=1;W<A;W++)G[W-1]=arguments[W];return ze.run("intersection",nt,G)},xor:function(nt){for(var A=arguments.length,G=new Array(A>1?A-1:0),W=1;W<A;W++)G[W-1]=arguments[W];return ze.run("xor",nt,G)},difference:function(nt){for(var A=arguments.length,G=new Array(A>1?A-1:0),W=1;W<A;W++)G[W-1]=arguments[W];return ze.run("difference",nt,G)}}}()},2582:function(Y){Y.exports=function(){"use strict";function h(K,st,mt,zt,Ut){!function Gt(Yt,Qt,Ft,te,je){for(;te>Ft;){if(te-Ft>600){var jt=te-Ft+1,ce=Qt-Ft+1,ie=Math.log(jt),me=.5*Math.exp(2*ie/3),He=.5*Math.sqrt(ie*me*(jt-me)/jt)*(ce-jt/2<0?-1:1);Gt(Yt,Qt,Math.max(Ft,Math.floor(Qt-ce*me/jt+He)),Math.min(te,Math.floor(Qt+(jt-ce)*me/jt+He)),je)}var se=Yt[Qt],fe=Ft,de=te;for(d(Yt,Ft,Qt),je(Yt[te],se)>0&&d(Yt,Ft,te);fe<de;){for(d(Yt,fe,de),fe++,de--;je(Yt[fe],se)<0;)fe++;for(;je(Yt[de],se)>0;)de--}0===je(Yt[Ft],se)?d(Yt,Ft,de):d(Yt,++de,te),de<=Qt&&(Ft=de+1),Qt<=de&&(te=de-1)}}(K,st,mt||0,zt||K.length-1,Ut||x)}function d(K,st,mt){var zt=K[st];K[st]=K[mt],K[mt]=zt}function x(K,st){return K<st?-1:K>st?1:0}var I=function(K){void 0===K&&(K=9),this._maxEntries=Math.max(4,K),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function U(K,st,mt){if(!mt)return st.indexOf(K);for(var zt=0;zt<st.length;zt++)if(mt(K,st[zt]))return zt;return-1}function N(K,st){H(K,0,K.children.length,st,K)}function H(K,st,mt,zt,Ut){Ut||(Ut=_t(null)),Ut.minX=1/0,Ut.minY=1/0,Ut.maxX=-1/0,Ut.maxY=-1/0;for(var Gt=st;Gt<mt;Gt++){var Yt=K.children[Gt];tt(Ut,K.leaf?zt(Yt):Yt)}return Ut}function tt(K,st){return K.minX=Math.min(K.minX,st.minX),K.minY=Math.min(K.minY,st.minY),K.maxX=Math.max(K.maxX,st.maxX),K.maxY=Math.max(K.maxY,st.maxY),K}function bt(K,st){return K.minX-st.minX}function Et(K,st){return K.minY-st.minY}function Ct(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function dt(K){return K.maxX-K.minX+(K.maxY-K.minY)}function St(K,st){return K.minX<=st.minX&&K.minY<=st.minY&&st.maxX<=K.maxX&&st.maxY<=K.maxY}function ht(K,st){return st.minX<=K.maxX&&st.minY<=K.maxY&&st.maxX>=K.minX&&st.maxY>=K.minY}function _t(K){return{children:K,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function xt(K,st,mt,zt,Ut){for(var Gt=[st,mt];Gt.length;)if(!((mt=Gt.pop())-(st=Gt.pop())<=zt)){var Yt=st+Math.ceil((mt-st)/zt/2)*zt;h(K,Yt,st,mt,Ut),Gt.push(st,Yt,Yt,mt)}}return I.prototype.all=function(){return this._all(this.data,[])},I.prototype.search=function(K){var st=this.data,mt=[];if(!ht(K,st))return mt;for(var zt=this.toBBox,Ut=[];st;){for(var Gt=0;Gt<st.children.length;Gt++){var Yt=st.children[Gt],Qt=st.leaf?zt(Yt):Yt;ht(K,Qt)&&(st.leaf?mt.push(Yt):St(K,Qt)?this._all(Yt,mt):Ut.push(Yt))}st=Ut.pop()}return mt},I.prototype.collides=function(K){var st=this.data;if(!ht(K,st))return!1;for(var mt=[];st;){for(var zt=0;zt<st.children.length;zt++){var Ut=st.children[zt],Gt=st.leaf?this.toBBox(Ut):Ut;if(ht(K,Gt)){if(st.leaf||St(K,Gt))return!0;mt.push(Ut)}}st=mt.pop()}return!1},I.prototype.load=function(K){if(!K||!K.length)return this;if(K.length<this._minEntries){for(var st=0;st<K.length;st++)this.insert(K[st]);return this}var mt=this._build(K.slice(),0,K.length-1,0);if(this.data.children.length)if(this.data.height===mt.height)this._splitRoot(this.data,mt);else{if(this.data.height<mt.height){var zt=this.data;this.data=mt,mt=zt}this._insert(mt,this.data.height-mt.height-1,!0)}else this.data=mt;return this},I.prototype.insert=function(K){return K&&this._insert(K,this.data.height-1),this},I.prototype.clear=function(){return this.data=_t([]),this},I.prototype.remove=function(K,st){if(!K)return this;for(var mt,zt,Ut,Gt=this.data,Yt=this.toBBox(K),Qt=[],Ft=[];Gt||Qt.length;){if(Gt||(Gt=Qt.pop(),zt=Qt[Qt.length-1],mt=Ft.pop(),Ut=!0),Gt.leaf){var te=U(K,Gt.children,st);if(-1!==te)return Gt.children.splice(te,1),Qt.push(Gt),this._condense(Qt),this}Ut||Gt.leaf||!St(Gt,Yt)?zt?(mt++,Gt=zt.children[mt],Ut=!1):Gt=null:(Qt.push(Gt),Ft.push(mt),mt=0,zt=Gt,Gt=Gt.children[0])}return this},I.prototype.toBBox=function(K){return K},I.prototype.compareMinX=function(K,st){return K.minX-st.minX},I.prototype.compareMinY=function(K,st){return K.minY-st.minY},I.prototype.toJSON=function(){return this.data},I.prototype.fromJSON=function(K){return this.data=K,this},I.prototype._all=function(K,st){for(var mt=[];K;)K.leaf?st.push.apply(st,K.children):mt.push.apply(mt,K.children),K=mt.pop();return st},I.prototype._build=function(K,st,mt,zt){var Ut,Gt=mt-st+1,Yt=this._maxEntries;if(Gt<=Yt)return N(Ut=_t(K.slice(st,mt+1)),this.toBBox),Ut;zt||(zt=Math.ceil(Math.log(Gt)/Math.log(Yt)),Yt=Math.ceil(Gt/Math.pow(Yt,zt-1))),(Ut=_t([])).leaf=!1,Ut.height=zt;var Qt=Math.ceil(Gt/Yt),Ft=Qt*Math.ceil(Math.sqrt(Yt));xt(K,st,mt,Ft,this.compareMinX);for(var te=st;te<=mt;te+=Ft){var je=Math.min(te+Ft-1,mt);xt(K,te,je,Qt,this.compareMinY);for(var jt=te;jt<=je;jt+=Qt){var ce=Math.min(jt+Qt-1,je);Ut.children.push(this._build(K,jt,ce,zt-1))}}return N(Ut,this.toBBox),Ut},I.prototype._chooseSubtree=function(K,st,mt,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==mt;){for(var Ut=1/0,Gt=1/0,Yt=void 0,Qt=0;Qt<st.children.length;Qt++){var Ft=st.children[Qt],te=Ct(Ft),je=(jt=K,ce=Ft,(Math.max(ce.maxX,jt.maxX)-Math.min(ce.minX,jt.minX))*(Math.max(ce.maxY,jt.maxY)-Math.min(ce.minY,jt.minY))-te);je<Gt?(Gt=je,Ut=te<Ut?te:Ut,Yt=Ft):je===Gt&&te<Ut&&(Ut=te,Yt=Ft)}st=Yt||st.children[0]}var jt,ce;return st},I.prototype._insert=function(K,st,mt){var zt=mt?K:this.toBBox(K),Ut=[],Gt=this._chooseSubtree(zt,this.data,st,Ut);for(Gt.children.push(K),tt(Gt,zt);st>=0&&Ut[st].children.length>this._maxEntries;)this._split(Ut,st),st--;this._adjustParentBBoxes(zt,Ut,st)},I.prototype._split=function(K,st){var mt=K[st],zt=mt.children.length,Ut=this._minEntries;this._chooseSplitAxis(mt,Ut,zt);var Gt=this._chooseSplitIndex(mt,Ut,zt),Yt=_t(mt.children.splice(Gt,mt.children.length-Gt));Yt.height=mt.height,Yt.leaf=mt.leaf,N(mt,this.toBBox),N(Yt,this.toBBox),st?K[st-1].children.push(Yt):this._splitRoot(mt,Yt)},I.prototype._splitRoot=function(K,st){this.data=_t([K,st]),this.data.height=K.height+1,this.data.leaf=!1,N(this.data,this.toBBox)},I.prototype._chooseSplitIndex=function(K,st,mt){for(var zt,Ut,Gt,Yt,Qt,Ft,te,je=1/0,jt=1/0,ce=st;ce<=mt-st;ce++){var ie=H(K,0,ce,this.toBBox),me=H(K,ce,mt,this.toBBox),He=(Ut=ie,Gt=me,Yt=Math.max(Ut.minX,Gt.minX),Qt=Math.max(Ut.minY,Gt.minY),Ft=Math.min(Ut.maxX,Gt.maxX),te=Math.min(Ut.maxY,Gt.maxY),Math.max(0,Ft-Yt)*Math.max(0,te-Qt)),se=Ct(ie)+Ct(me);He<je?(je=He,zt=ce,jt=se<jt?se:jt):He===je&&se<jt&&(jt=se,zt=ce)}return zt||mt-st},I.prototype._chooseSplitAxis=function(K,st,mt){var zt=K.leaf?this.compareMinX:bt,Ut=K.leaf?this.compareMinY:Et;this._allDistMargin(K,st,mt,zt)<this._allDistMargin(K,st,mt,Ut)&&K.children.sort(zt)},I.prototype._allDistMargin=function(K,st,mt,zt){K.children.sort(zt);for(var Ut=this.toBBox,Gt=H(K,0,st,Ut),Yt=H(K,mt-st,mt,Ut),Qt=dt(Gt)+dt(Yt),Ft=st;Ft<mt-st;Ft++){var te=K.children[Ft];tt(Gt,K.leaf?Ut(te):te),Qt+=dt(Gt)}for(var je=mt-st-1;je>=st;je--){var jt=K.children[je];tt(Yt,K.leaf?Ut(jt):jt),Qt+=dt(Yt)}return Qt},I.prototype._adjustParentBBoxes=function(K,st,mt){for(var zt=mt;zt>=0;zt--)tt(st[zt],K)},I.prototype._condense=function(K){for(var st=K.length-1,mt=void 0;st>=0;st--)0===K[st].children.length?st>0?(mt=K[st-1].children).splice(mt.indexOf(K[st]),1):this.clear():N(K[st],this.toBBox)},I}()}},he={};function wi(Y){var h=he[Y];if(void 0!==h)return h.exports;var d=he[Y]={id:Y,loaded:!1,exports:{}};return X[Y].call(d.exports,d,d.exports,wi),d.loaded=!0,d.exports}wi.n=Y=>{var h=Y&&Y.__esModule?()=>Y.default:()=>Y;return wi.d(h,{a:h}),h},wi.d=(Y,h)=>{for(var d in h)wi.o(h,d)&&!wi.o(Y,d)&&Object.defineProperty(Y,d,{enumerable:!0,get:h[d]})},wi.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),wi.o=(Y,h)=>Object.prototype.hasOwnProperty.call(Y,h),wi.nmd=Y=>(Y.paths=[],Y.children||(Y.children=[]),Y),wi(5975)})(),function(X,he){"object"==typeof exports&&typeof module<"u"?he(exports):"function"==typeof define&&define.amd?define(["exports"],he):he((X=typeof globalThis<"u"?globalThis:X||self).turf={})}(this,function(X){"use strict";var he=6371008.8,wi={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*he,kilometers:6371.0088,kilometres:6371.0088,meters:he,metres:he,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:he/1852,radians:1,yards:6967335.223679999},Y={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/he,yards:1.0936133},h={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function d(t,e,n){void 0===n&&(n={});var i={type:"Feature"};return(0===n.id||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function x(t,e,n){switch(t){case"Point":return I(e).geometry;case"LineString":return tt(e).geometry;case"Polygon":return N(e).geometry;case"MultiPoint":return dt(e).geometry;case"MultiLineString":return Ct(e).geometry;case"MultiPolygon":return St(e).geometry;default:throw new Error(t+" is invalid")}}function I(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Qt(t[0])||!Qt(t[1]))throw new Error("coordinates must contain numbers");return d({type:"Point",coordinates:t},e,n)}function U(t,e,n){return void 0===n&&(n={}),Et(t.map(function(i){return I(i,e)}),n)}function N(t,e,n){void 0===n&&(n={});for(var i=0,r=t;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return d({type:"Polygon",coordinates:t},e,n)}function H(t,e,n){return void 0===n&&(n={}),Et(t.map(function(i){return N(i,e)}),n)}function tt(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return d({type:"LineString",coordinates:t},e,n)}function bt(t,e,n){return void 0===n&&(n={}),Et(t.map(function(i){return tt(i,e)}),n)}function Et(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Ct(t,e,n){return void 0===n&&(n={}),d({type:"MultiLineString",coordinates:t},e,n)}function dt(t,e,n){return void 0===n&&(n={}),d({type:"MultiPoint",coordinates:t},e,n)}function St(t,e,n){return void 0===n&&(n={}),d({type:"MultiPolygon",coordinates:t},e,n)}function ht(t,e,n){return void 0===n&&(n={}),d({type:"GeometryCollection",geometries:t},e,n)}function _t(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function xt(t,e){void 0===e&&(e="kilometers");var n=wi[e];if(!n)throw new Error(e+" units is invalid");return t*n}function K(t,e){void 0===e&&(e="kilometers");var n=wi[e];if(!n)throw new Error(e+" units is invalid");return t/n}function st(t,e){return zt(K(t,e))}function mt(t){var e=t%360;return e<0&&(e+=360),e}function zt(t){return t%(2*Math.PI)*180/Math.PI}function Ut(t){return t%360*Math.PI/180}function Gt(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return xt(K(t,e),n)}function Yt(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=h[e];if(!i)throw new Error("invalid original units");var r=h[n];if(!r)throw new Error("invalid final units");return t/i*r}function Qt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ft(t){return!!t&&t.constructor===Object}function te(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!Qt(e))throw new Error("bbox must only contain numbers")})}function je(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var jt=Object.freeze({__proto__:null,earthRadius:he,factors:wi,unitsFactors:Y,areaFactors:h,feature:d,geometry:x,point:I,points:U,polygon:N,polygons:H,lineString:tt,lineStrings:bt,featureCollection:Et,multiLineString:Ct,multiPoint:dt,multiPolygon:St,geometryCollection:ht,round:_t,radiansToLength:xt,lengthToRadians:K,lengthToDegrees:st,bearingToAzimuth:mt,radiansToDegrees:zt,degreesToRadians:Ut,convertLength:Gt,convertArea:Yt,isNumber:Qt,isObject:Ft,validateBBox:te,validateId:je});function ce(t,e,n){if(null!==t)for(var i,r,o,a,l,p,f,m,_=0,b=0,M=t.type,k="FeatureCollection"===M,S="Feature"===M,w=k?t.features.length:1,R=0;R<w;R++){l=(m=!!(f=k?t.features[R].geometry:S?t.geometry:t)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var q=0;q<l;q++){var P=0,O=0;if(null!==(a=m?f.geometries[q]:f)){p=a.coordinates;var B=a.type;switch(_=!n||"Polygon"!==B&&"MultiPolygon"!==B?0:1,B){case null:break;case"Point":if(!1===e(p,b,R,P,O))return!1;b++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(!1===e(p[i],b,R,P,O))return!1;b++,"MultiPoint"===B&&P++}"LineString"===B&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(r=0;r<p[i].length-_;r++){if(!1===e(p[i][r],b,R,P,O))return!1;b++}"MultiLineString"===B&&P++,"Polygon"===B&&O++}"Polygon"===B&&P++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(O=0,r=0;r<p[i].length;r++){for(o=0;o<p[i][r].length-_;o++){if(!1===e(p[i][r][o],b,R,P,O))return!1;b++}O++}P++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===ce(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ie(t,e,n,i){var r=n;return ce(t,function(o,a,l,p,f){r=0===a&&void 0===n?o:e(r,o,a,l,p,f)},i),r}function me(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function He(t,e,n){var i=n;return me(t,function(r,o){i=0===o&&void 0===n?r:e(i,r,o)}),i}function se(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function fe(t,e,n){var i=n;return se(t,function(r,o){i=0===o&&void 0===n?r:e(i,r,o)}),i}function de(t){var e=[];return ce(t,function(n){e.push(n)}),e}function we(t,e){var n,i,r,o,a,l,p,f,m,_,b=0,M="FeatureCollection"===t.type,k="Feature"===t.type,S=M?t.features.length:1;for(n=0;n<S;n++){for(f=M?t.features[n].properties:k?t.properties:{},m=M?t.features[n].bbox:k?t.bbox:void 0,_=M?t.features[n].id:k?t.id:void 0,a=(p=!!(l=M?t.features[n].geometry:k?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1,r=0;r<a;r++)if(null!==(o=p?l.geometries[r]:l))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,b,f,m,_))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],b,f,m,_))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,b,f,m,_))return!1;b++}}function Di(t,e,n){var i=n;return we(t,function(r,o,a,l,p){i=0===o&&void 0===n?r:e(i,r,o,a,l,p)}),i}function Dn(t,e){we(t,function(n,i,r,o,a){var l,p=null===n?null:n.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return!1!==e(d(n,r,{bbox:o,id:a}),i,0)&&void 0}switch(p){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}for(var f=0;f<n.coordinates.length;f++)if(!1===e(d({type:l,coordinates:n.coordinates[f]},r),i,f))return!1})}function li(t,e,n){var i=n;return Dn(t,function(r,o,a){i=0===o&&0===a&&void 0===n?r:e(i,r,o,a)}),i}function Ki(t,e){Dn(t,function(n,i,r){var o=0;if(n.geometry){var a=n.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,p=0,f=0,m=0;return!1!==ce(n,function(_,b,M,k,S){if(void 0===l||i>p||k>f||S>m)return l=_,p=i,f=k,m=S,void(o=0);var w=tt([l,_],n.properties);if(!1===e(w,i,r,S,o))return!1;o++,l=_})&&void 0}}})}function Oi(t,e,n){var i=n,r=!1;return Ki(t,function(o,a,l,p,f){i=!1===r&&void 0===n?o:e(i,o,a,l,p,f),r=!0}),i}function Tr(t,e){if(!t)throw new Error("geojson is required");Dn(t,function(n,i,r){if(null!==n.geometry){var a=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===e(n,i,r,0,0))return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(!1===e(tt(a[l],n.properties),i,r,l))return!1}}})}function qr(t,e,n){var i=n;return Tr(t,function(r,o,a,l){i=0===o&&void 0===n?r:e(i,r,o,a,l)}),i}function Hs(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var p=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=p.length+a-1),tt([p[a],p[a+1]],l,e);case"Polygon":return o<0&&(o=p.length+o),a<0&&(a=p[o].length+a-1),tt([p[o][a],p[o][a+1]],l,e);case"MultiLineString":return r<0&&(r=p.length+r),a<0&&(a=p[r].length+a-1),tt([p[r][a],p[r][a+1]],l,e);case"MultiPolygon":return r<0&&(r=p.length+r),o<0&&(o=p[r].length+o),a<0&&(a=p[r][o].length-a-1),tt([p[r][o][a],p[r][o][a+1]],l,e)}throw new Error("geojson is invalid")}function vs(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var p=n.coordinates;switch(n.type){case"Point":return I(p,l,e);case"MultiPoint":return r<0&&(r=p.length+r),I(p[r],l,e);case"LineString":return a<0&&(a=p.length+a),I(p[a],l,e);case"Polygon":return o<0&&(o=p.length+o),a<0&&(a=p[o].length+a),I(p[o][a],l,e);case"MultiLineString":return r<0&&(r=p.length+r),a<0&&(a=p[r].length+a),I(p[r][a],l,e);case"MultiPolygon":return r<0&&(r=p.length+r),o<0&&(o=p[r].length+o),a<0&&(a=p[r][o].length-a),I(p[r][o][a],l,e)}throw new Error("geojson is invalid")}var so=Object.freeze({__proto__:null,coordAll:de,coordEach:ce,coordReduce:ie,featureEach:se,featureReduce:fe,findPoint:vs,findSegment:Hs,flattenEach:Dn,flattenReduce:li,geomEach:we,geomReduce:Di,lineEach:Tr,lineReduce:qr,propEach:me,propReduce:He,segmentEach:Ki,segmentReduce:Oi});function ze(t){var e=[1/0,1/0,-1/0,-1/0];return ce(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}function Ze(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ge(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Zs(t){if(t.length>1&&Qt(t[0])&&Qt(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Zs(t[0]);throw new Error("coordinates must only contain numbers")}function Ys(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function nt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function A(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0,r=t.features;i<r.length;i++){var o=r[i];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function G(t){return"Feature"===t.type?t.geometry:t}function W(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}ze.default=ze;var it=Object.freeze({__proto__:null,getCoord:Ze,getCoords:ge,containsNumber:Zs,geojsonType:Ys,featureOf:nt,collectionOf:A,getGeom:G,getType:W}),at=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,Ee=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(r){return e[r]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(r){i[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch{return!1}}()?Object.assign:function(t,e){for(var n,i,r=function Wt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))Nt.call(n,a)&&(r[a]=n[a]);if(at){i=at(n);for(var l=0;l<i.length;l++)vt.call(n,i[l])&&(r[i[l]]=n[i[l]])}}return r},Re={successCallback:null,verbose:!1},Ue={};function qe(t,e,n){n=n||{};for(var i=Object.keys(Re),r=0;r<i.length;r++){var o=i[r],a=n[o];Ue[o]=a=a??Re[o]}Ue.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var p,f,m,l=(p=function(p,f){for(var m=p.length-1,_=p[0].length-1,b={rows:m,cols:_,cells:[]},M=0;M<m;++M){b.cells[M]=[];for(var k=0;k<_;++k){var S=0,w=p[M+1][k],R=p[M+1][k+1],q=p[M][k+1],P=p[M][k];if(!(isNaN(w)||isNaN(R)||isNaN(q)||isNaN(P))){S|=w>=f?8:0,S|=R>=f?4:0,S|=q>=f?2:0;var O,B,F,z,Mt=!1;if(5==(S|=P>=f?1:0)||10===S){var lt=(w+R+q+P)/4;5===S&&lt<f?(S=10,Mt=!0):10===S&&lt<f&&(S=5,Mt=!0)}0!==S&&15!==S&&(O=B=F=z=.5,1===S?(F=1-ye(f,w,P),B=1-ye(f,q,P)):2===S?(B=ye(f,P,q),z=1-ye(f,R,q)):3===S?(F=1-ye(f,w,P),z=1-ye(f,R,q)):4===S?(O=ye(f,w,R),z=ye(f,q,R)):5===S?(O=ye(f,w,R),z=ye(f,q,R),B=1-ye(f,q,P),F=1-ye(f,w,P)):6===S?(B=ye(f,P,q),O=ye(f,w,R)):7===S?(F=1-ye(f,w,P),O=ye(f,w,R)):8===S?(F=ye(f,P,w),O=1-ye(f,R,w)):9===S?(B=1-ye(f,q,P),O=1-ye(f,R,w)):10===S?(O=1-ye(f,R,w),z=1-ye(f,R,q),B=ye(f,P,q),F=ye(f,P,w)):11===S?(O=1-ye(f,R,w),z=1-ye(f,R,q)):12===S?(F=ye(f,P,w),z=ye(f,q,R)):13===S?(B=1-ye(f,q,P),z=ye(f,q,R)):14===S?(F=ye(f,P,w),B=ye(f,P,q)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+S),b.cells[M][k]={cval:S,flipped:Mt,top:O,right:z,bottom:B,left:F})}}}return b}(t,e),f=[],m=0,p.cells.forEach(function(b,M){b.forEach(function(k,S){if(void 0!==k&&5!==(F=k).cval&&10!==F.cval&&!Te(k)){var w=function(z,Mt,lt){var Pt,ct,Dt=z.length,yt=[],gt=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],pt=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],Lt=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],Ot=z[Mt][lt],$=Ot.cval,oe=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][$],Ht=Jn(Ot,oe);yt.push([lt+Ht[0],Mt+Ht[1]]),Ht=Jn(Ot,oe=Lt[$]),yt.push([lt+Ht[0],Mt+Ht[1]]),Un(Ot);for(var Oe=lt+gt[$],ee=Mt+pt[$],be=$;Oe>=0&&ee>=0&&ee<Dt&&(Oe!=lt||ee!=Mt)&&void 0!==(Ot=z[ee][Oe]);){if(0===($=Ot.cval)||15===$)return{path:yt,info:"mergeable"};oe=Lt[$],Pt=gt[$],ct=pt[$],5!==$&&10!==$||(5===$?Ot.flipped?-1===pt[be]?(oe="left",Pt=-1,ct=0):(oe="right",Pt=1,ct=0):-1===gt[be]&&(oe="bottom",Pt=0,ct=-1):10===$&&(Ot.flipped?-1===gt[be]?(oe="top",Pt=0,ct=1):(oe="bottom",Pt=0,ct=-1):1===pt[be]&&(oe="left",Pt=-1,ct=0))),Ht=Jn(Ot,oe),yt.push([Oe+Ht[0],ee+Ht[1]]),Un(Ot),Oe+=Pt,ee+=ct,be=$}return{path:yt,info:"closed"}}(p.cells,M,S),R=!1;if("mergeable"===w.info)for(var q=w.path[w.path.length-1][0],P=w.path[w.path.length-1][1],O=m-1;O>=0;O--)if(Math.abs(f[O][0][0]-q)<=1e-7&&Math.abs(f[O][0][1]-P)<=1e-7){for(var B=w.path.length-2;B>=0;--B)f[O].unshift(w.path[B]);R=!0;break}R||(f[m++]=w.path)}var F})}),f);return"function"==typeof Ue.successCallback&&Ue.successCallback(l),l}function ye(t,e,n){return(t-e)/(n-e)}function Te(t){return 0===t.cval||15===t.cval}function Un(t){Te(t)||5===t.cval||10===t.cval||(t.cval=15)}function Jn(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var Ri=gi;function gi(t,e,n,i,r){Vr(t,e,n||0,i||t.length-1,r||Hi)}function Vr(t,e,n,i,r){for(;i>n;){if(i-n>600){var o=i-n+1,a=e-n+1,l=Math.log(o),p=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*p*(o-p)/o)*(a-o/2<0?-1:1);Vr(t,e,Math.max(n,Math.floor(e-a*p/o+f)),Math.min(i,Math.floor(e+(o-a)*p/o+f)),r)}var m=t[e],_=n,b=i;for(Ji(t,n,e),r(t[i],m)>0&&Ji(t,n,i);_<b;){for(Ji(t,_,b),_++,b--;r(t[_],m)<0;)_++;for(;r(t[b],m)>0;)b--}0===r(t[n],m)?Ji(t,n,b):Ji(t,++b,i),b<=e&&(n=b+1),e<=b&&(i=b-1)}}function Ji(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function Hi(t,e){return t<e?-1:t>e?1:0}Ri.default=gi;var In=Qi,lr=Qi;function Qi(t,e){if(!(this instanceof Qi))return new Qi(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ei(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Hn(t,e){$i(t,0,t.children.length,e,t)}function $i(t,e,n,i,r){r||(r=Lr(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Hr(r,t.leaf?i(o):o);return r}function Hr(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Xs(t,e){return t.minX-e.minX}function Xo(t,e){return t.minY-e.minY}function Wo(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Ye(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Fn(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ao(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Lr(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hr(t,e,n,i,r){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,Ri(t,o,e,n,r),a.push(e,o,o,n))}function Mi(t){var e={exports:{}};return t(e,e.exports),e.exports}Qi.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!ao(t,e))return n;for(var r,o,a,l,p=[];e;){for(r=0,o=e.children.length;r<o;r++)a=e.children[r],ao(t,l=e.leaf?i(a):a)&&(e.leaf?n.push(a):Fn(t,l)?this._all(a,n):p.push(a));e=p.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!ao(t,e))return!1;for(var i,r,o,a,l=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],ao(t,a=e.leaf?n(o):o)){if(e.leaf||Fn(t,a))return!0;l.push(o)}e=l.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Lr([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,a=this.data,l=this.toBBox(t),p=[],f=[];a||p.length;){if(a||(a=p.pop(),i=p[p.length-1],n=f.pop(),o=!0),a.leaf&&-1!==(r=Ei(t,a.children,e)))return a.children.splice(r,1),p.push(a),this._condense(p),this;o||a.leaf||!Fn(a,l)?i?(n++,a=i.children[n],o=!1):a=null:(p.push(a),f.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Xs,compareMinY:Xo,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return Hn(r=Lr(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=Lr([])).leaf=!1,r.height=i;var l,p,f,m,_=Math.ceil(o/a),b=_*Math.ceil(Math.sqrt(a));for(hr(t,e,n,b,this.compareMinX),l=e;l<=n;l+=b)for(hr(t,l,f=Math.min(l+b-1,n),_,this.compareMinY),p=l;p<=f;p+=_)m=Math.min(p+_-1,f),r.children.push(this._build(t,p,m,i-1));return Hn(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,a,l,p,f,m,_,b,M;i.push(e),!e.leaf&&i.length-1!==n;){for(m=_=1/0,r=0,o=e.children.length;r<o;r++)p=Wo(a=e.children[r]),b=t,M=a,(f=(Math.max(M.maxX,b.maxX)-Math.min(M.minX,b.minX))*(Math.max(M.maxY,b.maxY)-Math.min(M.minY,b.minY))-p)<_?(_=f,m=p<m?p:m,l=a):f===_&&p<m&&(m=p,l=a);e=l||e.children[0]}return e},_insert:function(t,e,n){var r=n?t:(0,this.toBBox)(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),Hr(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=Lr(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Hn(n,this.toBBox),Hn(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Lr([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Hn(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,a,l,p,f,m,_,b,M,k,S,w;for(p=f=1/0,i=e;i<=n-e;i++)_=r=$i(t,0,i,this.toBBox),b=o=$i(t,i,n,this.toBBox),M=Math.max(_.minX,b.minX),k=Math.max(_.minY,b.minY),S=Math.min(_.maxX,b.maxX),w=Math.min(_.maxY,b.maxY),a=Math.max(0,S-M)*Math.max(0,w-k),l=Wo(r)+Wo(o),a<p?(p=a,m=i,f=l<f?l:f):a===p&&l<f&&(f=l,m=i);return m},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Xs,r=t.leaf?this.compareMinY:Xo;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,a=this.toBBox,l=$i(t,0,e,a),p=$i(t,n-e,n,a),f=Ye(l)+Ye(p);for(r=e;r<n-e;r++)o=t.children[r],Hr(l,t.leaf?a(o):o),f+=Ye(l);for(r=n-e-1;r>=e;r--)o=t.children[r],Hr(p,t.leaf?a(o):o),f+=Ye(p);return f},_adjustParentBBoxes:function(t,e,n){for(var i=n;i>=0;i--)Hr(e[i],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Hn(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},In.default=lr;var Ne=function(t,e,n){var i=t*e,r=Zn*t,o=r-(r-t),a=t-o,l=Zn*e,p=l-(l-e),f=e-p,m=a*f-(i-o*p-a*p-o*f);return n?(n[0]=m,n[1]=i,n):[m,i]},Zn=+(Math.pow(2,27)+1),Ko=function(t,e){var F,z,Mt,lt,Pt,n=0|t.length,i=0|e.length;if(1===n&&1===i)return(Pt=(F=t[0])-((Mt=F+(z=e[0]))-(lt=Mt-F))+(z-lt))?[Pt,Mt]:[Mt];var r,o,a=new Array(n+i),l=0,p=0,f=0,m=Math.abs,_=t[p],b=m(_),M=e[f],k=m(M);b<k?(o=_,(p+=1)<n&&(b=m(_=t[p]))):(o=M,(f+=1)<i&&(k=m(M=e[f]))),p<n&&b<k||f>=i?(r=_,(p+=1)<n&&(b=m(_=t[p]))):(r=M,(f+=1)<i&&(k=m(M=e[f])));for(var S,w,R=r+o,q=R-r,P=o-q,O=P,B=R;p<n&&f<i;)b<k?(r=_,(p+=1)<n&&(b=m(_=t[p]))):(r=M,(f+=1)<i&&(k=m(M=e[f]))),(P=(o=O)-(q=(R=r+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S;for(;p<n;)(P=(o=O)-(q=(R=(r=_)+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S,(p+=1)<n&&(_=t[p]);for(;f<i;)(P=(o=O)-(q=(R=(r=M)+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S,(f+=1)<i&&(M=e[f]);return O&&(a[l++]=O),B&&(a[l++]=B),l||(a[l++]=0),a.length=l,a},xa=function(t,e,n){var i=t+e,r=i-t,o=e-r,a=t-(i-r);return n?(n[0]=a+o,n[1]=i,n):[a+o,i]},cr=function(t,e){var n=t.length;if(1===n){var i=Ne(t[0],e);return i[0]?i:[i[1]]}var r=new Array(2*n),o=[.1,.1],a=[.1,.1],l=0;Ne(t[0],e,o),o[0]&&(r[l++]=o[0]);for(var p=1;p<n;++p){Ne(t[p],e,a),xa(o[1],a[0],o),o[0]&&(r[l++]=o[0]);var m=a[1],_=o[1],b=m+_,M=_-(b-m);o[1]=b,M&&(r[l++]=M)}return o[1]&&(r[l++]=o[1]),0===l&&(r[l++]=0),r.length=l,r},Ws=function(t,e){var F,z,Mt,lt,Pt,n=0|t.length,i=0|e.length;if(1===n&&1===i)return(Pt=(F=t[0])-((Mt=F+(z=-e[0]))-(lt=Mt-F))+(z-lt))?[Pt,Mt]:[Mt];var r,o,a=new Array(n+i),l=0,p=0,f=0,m=Math.abs,_=t[p],b=m(_),M=-e[f],k=m(M);b<k?(o=_,(p+=1)<n&&(b=m(_=t[p]))):(o=M,(f+=1)<i&&(k=m(M=-e[f]))),p<n&&b<k||f>=i?(r=_,(p+=1)<n&&(b=m(_=t[p]))):(r=M,(f+=1)<i&&(k=m(M=-e[f])));for(var S,w,R=r+o,q=R-r,P=o-q,O=P,B=R;p<n&&f<i;)b<k?(r=_,(p+=1)<n&&(b=m(_=t[p]))):(r=M,(f+=1)<i&&(k=m(M=-e[f]))),(P=(o=O)-(q=(R=r+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S;for(;p<n;)(P=(o=O)-(q=(R=(r=_)+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S,(p+=1)<n&&(_=t[p]);for(;f<i;)(P=(o=O)-(q=(R=(r=M)+o)-r))&&(a[l++]=P),O=B-((S=B+R)-(w=S-B))+(R-w),B=S,(f+=1)<i&&(M=-e[f]);return O&&(a[l++]=O),B&&(a[l++]=B),l||(a[l++]=0),a.length=l,a},wo=Mi(function(t){function e(f,m){for(var _=new Array(f.length-1),b=1;b<f.length;++b)for(var M=_[b-1]=new Array(f.length-1),k=0,S=0;k<f.length;++k)k!==m&&(M[S++]=f[b][k]);return _}function n(f){if(1===f.length)return f[0];if(2===f.length)return["sum(",f[0],",",f[1],")"].join("");var m=f.length>>1;return["sum(",n(f.slice(0,m)),",",n(f.slice(m)),")"].join("")}function i(f){if(2===f.length)return[["sum(prod(",f[0][0],",",f[1][1],"),prod(-",f[0][1],",",f[1][0],"))"].join("")];for(var m=[],_=0;_<f.length;++_)m.push(["scale(",n(i(e(f,_))),",",(b=_,1&b?"-":""),f[0][_],")"].join(""));return m;var b}function r(f){for(var m=[],_=[],b=function(P){for(var O=new Array(P),B=0;B<P;++B){O[B]=new Array(P);for(var F=0;F<P;++F)O[B][F]=["m",F,"[",P-B-1,"]"].join("")}return O}(f),M=[],k=0;k<f;++k)1&k?_.push.apply(_,i(e(b,k))):m.push.apply(m,i(e(b,k))),M.push("m"+k);var S=n(m),w=n(_),R="orientation"+f+"Exact",q=["function ",R,"(",M.join(),"){var p=",S,",n=",w,",d=sub(p,n);return d[d.length-1];};return ",R].join("");return new Function("sum","prod","scale","sub",q)(Ko,Ne,cr,Ws)}var o=r(3),a=r(4),l=[function(){return 0},function(){return 0},function(f,m){return m[0]-f[0]},function(f,m,_){var b,M=(f[1]-_[1])*(m[0]-_[0]),k=(f[0]-_[0])*(m[1]-_[1]),S=M-k;if(M>0){if(k<=0)return S;b=M+k}else{if(!(M<0)||k>=0)return S;b=-(M+k)}var w=33306690738754716e-32*b;return S>=w||S<=-w?S:o(f,m,_)},function(f,m,_,b){var M=f[0]-b[0],k=m[0]-b[0],S=_[0]-b[0],w=f[1]-b[1],R=m[1]-b[1],q=_[1]-b[1],P=f[2]-b[2],O=m[2]-b[2],B=_[2]-b[2],F=k*q,z=S*R,Mt=S*w,lt=M*q,Pt=M*R,ct=k*w,Dt=P*(F-z)+O*(Mt-lt)+B*(Pt-ct),yt=7771561172376103e-31*((Math.abs(F)+Math.abs(z))*Math.abs(P)+(Math.abs(Mt)+Math.abs(lt))*Math.abs(O)+(Math.abs(Pt)+Math.abs(ct))*Math.abs(B));return Dt>yt||-Dt>yt?Dt:a(f,m,_,b)}];function p(f){var m=l[f.length];return m||(m=l[f.length]=r(f.length)),m.apply(void 0,f)}!function(){for(;l.length<=5;)l.push(r(l.length));for(var f=[],m=["slow"],_=0;_<=5;++_)f.push("a"+_),m.push("o"+_);var b=["function getOrientation(",f.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(_=2;_<=5;++_)b.push("case ",_,":return o",_,"(",f.slice(0,_).join(),");");b.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),m.push(b.join(""));var M=Function.apply(void 0,m);for(t.exports=M.apply(void 0,[p].concat(l)),_=0;_<=5;++_)t.exports[_]=l[_]}()}),Zr=wo[3],Ks=Jo,Js=Jo;function Jo(t,e){if(!(this instanceof Jo))return new Jo(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Qo,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Qo(t,e){return t<e?-1:t>e?1:0}Jo.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var r=t-1>>1,o=e[r];if(n(i,o)>=0)break;e[t]=o,t=r}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,r=e[t];t<i;){var o=1+(t<<1),a=o+1,l=e[o];if(a<this.length&&n(e[a],l)<0&&(o=a,l=e[a]),n(l,r)>=0)break;e[t]=l,t=o}e[t]=r}},Ks.default=Js;var Ja=function(t,e){for(var n=t[0],i=t[1],r=!1,o=0,a=e.length-1;o<e.length;a=o++){var l=e[o][0],p=e[o][1],m=e[a][1];p>i!=m>i&&n<(e[a][0]-l)*(i-p)/(m-p)+l&&(r=!r)}return r},Ls=wo[3],Se=Bn;function Bn(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var i,r=function(q){for(var P=q[0],O=q[0],B=q[0],F=q[0],z=0;z<q.length;z++){var Mt=q[z];Mt[0]<P[0]&&(P=Mt),Mt[0]>B[0]&&(B=Mt),Mt[1]<O[1]&&(O=Mt),Mt[1]>F[1]&&(F=Mt)}var lt=[P,O,B,F],Pt=lt.slice();for(z=0;z<q.length;z++)Ja(q[z],lt)||Pt.push(q[z]);var ct=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var r=new Array(e);for(i=0;i<e;++i)r[i]=i;r.sort(function(M,k){return t[M][0]-t[k][0]||t[M][1]-t[k][1]});var o=[r[0],r[1]],a=[r[0],r[1]];for(i=2;i<e;++i){for(var l=r[i],p=t[l],f=o.length;f>1&&Zr(t[o[f-2]],t[o[f-1]],p)<=0;)f-=1,o.pop();for(o.push(l),f=a.length;f>1&&Zr(t[a[f-2]],t[a[f-1]],p)>=0;)f-=1,a.pop();a.push(l)}n=new Array(a.length+o.length-2);for(var m=0,_=(i=0,o.length);i<_;++i)n[m++]=o[i];for(var b=a.length-2;b>0;--b)n[m++]=a[b];return n}(Pt),Dt=[];for(z=0;z<ct.length;z++)Dt.push(Pt[ct[z]]);return Dt}(t),o=In(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],l=0;l<r.length;l++){var p=r[l];o.remove(p),i=$o(p,i),a.push(i)}var f=In(16);for(l=0;l<a.length;l++)f.insert(Eo(a[l]));for(var m=e*e,_=n*n;a.length;){var b=a.shift(),M=b.p,k=b.next.p,S=hi(M,k);if(!(S<_)){var w=S/m;(p=wa(o,b.prev.p,M,k,b.next.next.p,w,f))&&Math.min(hi(p,M),hi(p,k))<=w&&(a.push(b),a.push($o(p,b)),o.remove(p),f.remove(b),f.insert(Eo(b)),f.insert(Eo(b.next)))}}b=i;var R=[];do{R.push(b.p),b=b.next}while(b!==i);return R.push(b.p),R}function wa(t,e,n,i,r,o,a){for(var l=new Ks(null,Qa),p=t.data;p;){for(var f=0;f<p.children.length;f++){var m=p.children[f],_=p.leaf?Xr(m,n,i):$a(n,i,m);_>o||l.push({node:m,dist:_})}for(;l.length&&!l.peek().node.children;){var b=l.pop(),M=b.node,k=Xr(M,e,n),S=Xr(M,i,r);if(b.dist<k&&b.dist<S&&Dr(n,M,a)&&Dr(i,M,a))return M}(p=l.pop())&&(p=p.node)}return null}function Qa(t,e){return t.dist-e.dist}function $a(t,e,n){if(Qs(t,n)||Qs(e,n))return 0;var i=bs(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===i)return 0;var r=bs(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===r)return 0;var o=bs(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=bs(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(i,r,o,a)}function Qs(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function Dr(t,e,n){for(var i,r,o,a,l=Math.min(t[0],e[0]),p=Math.min(t[1],e[1]),f=Math.max(t[0],e[0]),m=Math.max(t[1],e[1]),_=n.search({minX:l,minY:p,maxX:f,maxY:m}),b=0;b<_.length;b++)if(r=_[b].next.p,o=t,(i=_[b].p)!==(a=e)&&r!==o&&Ls(i,r,o)>0!=Ls(i,r,a)>0&&Ls(o,a,i)>0!=Ls(o,a,r)>0)return!1;return!0}function Eo(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function $o(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function hi(t,e){var n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function Xr(t,e,n){var i=e[0],r=e[1],o=n[0]-i,a=n[1]-r;if(0!==o||0!==a){var l=((t[0]-i)*o+(t[1]-r)*a)/(o*o+a*a);l>1?(i=n[0],r=n[1]):l>0&&(i+=o*l,r+=a*l)}return(o=t[0]-i)*o+(a=t[1]-r)*a}function bs(t,e,n,i,r,o,a,l){var p,f,m,_,b=n-t,M=i-e,k=a-r,S=l-o,w=t-r,R=e-o,q=b*b+M*M,P=b*k+M*S,O=k*k+S*S,B=b*w+M*R,F=k*w+S*R,z=q*O-P*P,Mt=z,lt=z;0===z?(f=0,Mt=1,_=F,lt=O):(_=q*F-P*B,(f=P*F-O*B)<0?(f=0,_=F,lt=O):f>Mt&&(f=Mt,_=F+P,lt=O)),_<0?(_=0,-B<0?f=0:-B>q?f=Mt:(f=-B,Mt=q)):_>lt&&(_=lt,-B+P<0?f=0:-B+P>q?f=Mt:(f=-B+P,Mt=q));var Pt=(1-(m=0===_?0:_/lt))*r+m*a-((1-(p=0===f?0:f/Mt))*t+p*n),ct=(1-m)*o+m*l-((1-p)*e+p*i);return Pt*Pt+ct*ct}function tu(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(ce(t,function(r){n.push([r[0],r[1]])}),!n.length)return null;var i=Se(n,e.concavity);return i.length>3?N([i]):null}function On(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var b,M,i=Ze(t),r=G(e),a=e.bbox,l=r.coordinates;if(a&&0==((M=a)[0]<=(b=i)[0]&&M[1]<=b[1]&&M[2]>=b[0]&&M[3]>=b[1]))return!1;"Polygon"===r.type&&(l=[l]);for(var p=!1,f=0;f<l.length&&!p;f++)if(eu(i,l[f][0],n.ignoreBoundary)){for(var m=!1,_=1;_<l[f].length&&!m;)eu(i,l[f][_],!n.ignoreBoundary)&&(m=!0),_++;m||(p=!0)}return p}function eu(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var a=e[r][0],l=e[r][1],p=e[o][0],f=e[o][1];if(t[1]*(a-p)+l*(p-t[0])+f*(t[0]-a)==0&&(a-t[0])*(p-t[0])<=0&&(l-t[1])*(f-t[1])<=0)return!n;l>t[1]!=f>t[1]&&t[0]<(p-a)*(t[1]-l)/(f-l)+a&&(i=!i)}return i}function xs(t,e){var n=[];return se(t,function(i){var r=!1;if("Point"===i.geometry.type)we(e,function(a){On(i,a)&&(r=!0)}),r&&n.push(i);else{if("MultiPoint"!==i.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var o=[];we(e,function(a){ce(i,function(l){On(l,a)&&(r=!0,o.push(l))})}),r&&n.push(dt(o))}}),Et(n)}function Ke(t,e,n){void 0===n&&(n={});var i=Ze(t),r=Ze(e),o=Ut(r[1]-i[1]),a=Ut(r[0]-i[0]),l=Ut(i[1]),p=Ut(r[1]),f=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(l)*Math.cos(p);return xt(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n.units)}function $s(t,e){var n=!1;return Et(function(i){if(i.length<3)return[];i.sort(ws);for(var r,o,a,m=i.length-1,_=i[m].x,b=i[0].x,M=i[m].y,k=M;m--;)i[m].y<M&&(M=i[m].y),i[m].y>k&&(k=i[m].y);var w,R=b-_,q=k-M,P=R>q?R:q,O=.5*(b+_),B=.5*(k+M),F=[new Je({__sentinel:!0,x:O-20*P,y:B-P},{__sentinel:!0,x:O,y:B+20*P},{__sentinel:!0,x:O+20*P,y:B-P})],z=[],Mt=[];for(m=i.length;m--;){for(Mt.length=0,w=F.length;w--;)(R=i[m].x-F[w].x)>0&&R*R>F[w].r?(z.push(F[w]),F.splice(w,1)):R*R+(q=i[m].y-F[w].y)*q>F[w].r||(Mt.push(F[w].a,F[w].b,F[w].b,F[w].c,F[w].c,F[w].a),F.splice(w,1));for(Ai(Mt),w=Mt.length;w;)o=Mt[--w],r=Mt[--w],a=i[m],Math.abs(2*((o.x-r.x)*(a.y-o.y)-(o.y-r.y)*(a.x-o.x)))>1e-12&&F.push(new Je(r,o,a))}for(Array.prototype.push.apply(z,F),m=z.length;m--;)(z[m].a.__sentinel||z[m].b.__sentinel||z[m].c.__sentinel)&&z.splice(m,1);return z}(t.features.map(function(i){var r={x:i.geometry.coordinates[0],y:i.geometry.coordinates[1]};return e?r.z=i.properties[e]:3===i.geometry.coordinates.length&&(n=!0,r.z=i.geometry.coordinates[2]),r})).map(function(i){var r=[i.a.x,i.a.y],o=[i.b.x,i.b.y],a=[i.c.x,i.c.y],l={};return n?(r.push(i.a.z),o.push(i.b.z),a.push(i.c.z)):l={a:i.a.z,b:i.b.z,c:i.c.z},N([[r,o,a,r]],l)}))}Se.default=Bn;var Je=function(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o=e.x-t.x,a=e.y-t.y,l=n.x-t.x,p=n.y-t.y,f=o*(t.x+e.x)+a*(t.y+e.y),m=l*(t.x+n.x)+p*(t.y+n.y),_=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(p*f-a*m)/_,this.y=(o*m-l*f)/_,this.r=(i=this.x-t.x)*i+(r=this.y-t.y)*r};function ws(t,e){return e.x-t.x}function Ai(t){var e,n,i,r,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],i=a;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(a,2),t.splice(i,2),a-=2;continue t}}function Qn(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ea(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(i){switch(i){case"type":case"features":return;default:n[i]=e[i]}}),n.features=e.features.map(function(i){return Ea(i)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return $n(t);default:throw new Error("unknown GeoJSON type")}var e,n}function Ea(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=nu(t.properties),e.geometry=$n(t.geometry),e}function nu(t){var e={};return t&&Object.keys(t).forEach(function(n){var i=t[n];e[n]="object"==typeof i?null===i?null:Array.isArray(i)?i.map(function(r){return r}):nu(i):i}),e}function $n(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(n){return $n(n)}),e):(e.coordinates=Ci(t.coordinates),e)}function Ci(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map(function(n){return Ci(n)})}function ta(t){return t[0].toString()+","+t[1].toString()}function Mo(t){return t}function Ma(t,e){var n=function(f){if(null==f)return Mo;var m,_,b=f.scale[0],M=f.scale[1],k=f.translate[0],S=f.translate[1];return function(w,R){R||(m=_=0);var q=2,P=w.length,O=new Array(P);for(O[0]=(m+=w[0])*b+k,O[1]=(_+=w[1])*M+S;q<P;)O[q]=w[q],++q;return O}}(t.transform),i=t.arcs;function r(f,m){m.length&&m.pop();for(var _=i[f<0?~f:f],b=0,M=_.length;b<M;++b)m.push(n(_[b],b));f<0&&function(k,S){for(var w,R=k.length,q=R-S;q<--R;)w=k[q],k[q++]=k[R],k[R]=w}(m,M)}function o(f){return n(f)}function a(f){for(var m=[],_=0,b=f.length;_<b;++_)r(f[_],m);return m.length<2&&m.push(m[0]),m}function l(f){for(var m=a(f);m.length<4;)m.push(m[0]);return m}function p(f){return f.map(l)}return function f(m){var _,b=m.type;switch(b){case"GeometryCollection":return{type:b,geometries:m.geometries.map(f)};case"Point":_=o(m.coordinates);break;case"MultiPoint":_=m.coordinates.map(o);break;case"LineString":_=a(m.arcs);break;case"MultiLineString":_=m.arcs.map(a);break;case"Polygon":_=p(m.arcs);break;case"MultiPolygon":_=m.arcs.map(p);break;default:return null}return{type:b,coordinates:_}}(e)}function ea(t,e){var n={},i=[],r=[];function o(l){l.forEach(function(p){p.forEach(function(f){(n[f=f<0?~f:f]||(n[f]=[])).push(l)})}),i.push(l)}function a(l){return function(p){for(var f,m=-1,_=p.length,b=p[_-1],M=0;++m<_;)M+=(f=b)[0]*(b=p[m])[1]-f[1]*b[0];return Math.abs(M)}(Ma(t,{type:"Polygon",arcs:[l]}).coordinates[0])}return e.forEach(function l(p){switch(p.type){case"GeometryCollection":p.geometries.forEach(l);break;case"Polygon":o(p.arcs);break;case"MultiPolygon":p.arcs.forEach(o)}}),i.forEach(function(l){if(!l._){var p=[],f=[l];for(l._=1,r.push(p);l=f.pop();)p.push(l),l.forEach(function(m){m.forEach(function(_){n[_<0?~_:_].forEach(function(b){b._||(b._=1,f.push(b))})})})}}),i.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:r.map(function(l){var p,f=[];if(l.forEach(function(k){k.forEach(function(S){S.forEach(function(w){n[w<0?~w:w].length<2&&f.push(w)})})}),(p=(f=function Cu(t,e){var n={},i={},r={},o=[],a=-1;function l(p,f){for(var m in p){var _=p[m];delete f[_.start],delete _.start,delete _.end,_.forEach(function(b){n[b<0?~b:b]=1}),o.push(_)}}return e.forEach(function(p,f){var m,_=t.arcs[p<0?~p:p];_.length<3&&!_[1][0]&&!_[1][1]&&(m=e[++a],e[a]=p,e[f]=m)}),e.forEach(function(p){var f,m,w,R,q,P,_=(P=(q=t.arcs[(w=p)<0?~w:w])[0],t.transform?(R=[0,0],q.forEach(function(O){R[0]+=O[0],R[1]+=O[1]})):R=q[q.length-1],w<0?[R,P]:[P,R]),b=_[0],M=_[1];if(f=r[b])if(delete r[f.end],f.push(p),f.end=M,m=i[M]){delete i[m.start];var k=m===f?f:f.concat(m);i[k.start=f.start]=r[k.end=m.end]=k}else i[f.start]=r[f.end]=f;else if(f=i[M])if(delete i[f.start],f.unshift(p),f.start=b,m=r[b]){delete r[m.end];var S=m===f?f:m.concat(f);i[S.start=m.start]=r[S.end=f.end]=S}else i[f.start]=r[f.end]=f;else i[(f=[p]).start=b]=r[f.end=M]=f}),l(r,i),l(i,r),e.forEach(function(p){n[p<0?~p:p]||o.push([p])}),o}(t,f)).length)>1)for(var m,_,b=1,M=a(f[0]);b<p;++b)(m=a(f[b]))>M&&(_=f[0],f[0]=f[b],f[b]=_,M=m);return f}).filter(function(l){return l.length>0})}}var es=Object.prototype.hasOwnProperty;function Es(t,e,n,i,r,o){3===arguments.length&&(i=o=Array,r=null);for(var a=new i(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),l=new o(t),p=t-1,f=0;f<t;++f)a[f]=r;return{set:function m(k,S){for(var w=e(k)&p,R=a[w],q=0;R!=r;){if(n(R,k))return l[w]=S;if(++q>=t)throw new Error("full hashmap");R=a[w=w+1&p]}return a[w]=k,l[w]=S,S},maybeSet:function _(k,S){for(var w=e(k)&p,R=a[w],q=0;R!=r;){if(n(R,k))return l[w];if(++q>=t)throw new Error("full hashmap");R=a[w=w+1&p]}return a[w]=k,l[w]=S,S},get:function b(k,S){for(var w=e(k)&p,R=a[w],q=0;R!=r;){if(n(R,k))return l[w];if(++q>=t)break;R=a[w=w+1&p]}return S},keys:function M(){for(var k=[],S=0,w=a.length;S<w;++S){var R=a[S];R!=r&&k.push(R)}return k}}}function ko(t,e){return t[0]===e[0]&&t[1]===e[1]}var iu=new ArrayBuffer(16),u=new Float64Array(iu),g=new Uint32Array(iu);function v(t){u[0]=t[0],u[1]=t[1];var e=g[0]^g[1];return 2147483647&(e<<5^e>>7^g[2]^g[3])}function D(t,e,n,i){Z(t,e,n),Z(t,e,e+i),Z(t,e+i,n)}function Z(t,e,n){for(var i,r=e+(n---e>>1);e<r;++e,--n)i=t[e],t[e]=t[n],t[n]=i}function et(t){var e={type:"GeometryCollection",geometries:t.features.map(Q)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Q(t){var e,n=rt(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function rt(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(rt)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function At(t){var e,n=t[0],i=t[1];return i<n&&(e=n,n=i,i=e),n+31*i}function Rt(t,e){var n,i=t[0],r=t[1],o=e[0],a=e[1];return r<i&&(n=i,i=r,r=n),a<o&&(n=o,o=a,a=n),i===o&&r===a}function Vt(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==W(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=Qn(t));var n=[];Dn(t,function(r){n.push(r.geometry)});var i=function wt(t,e){var n=function(b){var M=1/0,k=1/0,S=-1/0,w=-1/0;function R(z){null!=z&&es.call(q,z.type)&&q[z.type](z)}var q={GeometryCollection:function(z){z.geometries.forEach(R)},Point:function(z){P(z.coordinates)},MultiPoint:function(z){z.coordinates.forEach(P)},LineString:function(z){O(z.arcs)},MultiLineString:function(z){z.arcs.forEach(O)},Polygon:function(z){z.arcs.forEach(O)},MultiPolygon:function(z){z.arcs.forEach(B)}};function P(z){var Mt=z[0],lt=z[1];Mt<M&&(M=Mt),Mt>S&&(S=Mt),lt<k&&(k=lt),lt>w&&(w=lt)}function O(z){z.forEach(P)}function B(z){z.forEach(O)}for(var F in b)R(b[F]);return S>=M&&w>=k?[M,k,S,w]:void 0}(t=function J(t){var e,n,i={};for(e in t)i[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?et:"Feature"===n.type?Q:rt)(n);return i}(t)),i=e>0&&n&&function(b,M,k){var S=M[0],w=M[1],R=M[2],q=M[3],P=R-S?(k-1)/(R-S):1,O=q-w?(k-1)/(q-w):1;function B(yt){return[Math.round((yt[0]-S)*P),Math.round((yt[1]-w)*O)]}function F(yt,gt){for(var pt,It,Lt,Ot,$,oe=-1,Ht=0,Oe=yt.length,ee=new Array(Oe);++oe<Oe;)pt=yt[oe],Ot=Math.round((pt[0]-S)*P),$=Math.round((pt[1]-w)*O),Ot===It&&$===Lt||(ee[Ht++]=[It=Ot,Lt=$]);for(ee.length=Ht;Ht<gt;)Ht=ee.push([ee[0][0],ee[0][1]]);return ee}function z(yt){return F(yt,2)}function Mt(yt){return F(yt,4)}function lt(yt){return yt.map(Mt)}function Pt(yt){null!=yt&&es.call(ct,yt.type)&&ct[yt.type](yt)}var ct={GeometryCollection:function(yt){yt.geometries.forEach(Pt)},Point:function(yt){yt.coordinates=B(yt.coordinates)},MultiPoint:function(yt){yt.coordinates=yt.coordinates.map(B)},LineString:function(yt){yt.arcs=z(yt.arcs)},MultiLineString:function(yt){yt.arcs=yt.arcs.map(z)},Polygon:function(yt){yt.arcs=lt(yt.arcs)},MultiPolygon:function(yt){yt.arcs=yt.arcs.map(lt)}};for(var Dt in b)Pt(b[Dt]);return{scale:[1/P,1/O],translate:[S,w]}}(t,n,e),r=function(b){var M,k,S,w,R=b.coordinates,q=b.lines,P=b.rings,O=q.length+P.length;for(delete b.lines,delete b.rings,S=0,w=q.length;S<w;++S)for(M=q[S];M=M.next;)++O;for(S=0,w=P.length;S<w;++S)for(k=P[S];k=k.next;)++O;var B=Es(2*O*1.4,v,ko),F=b.arcs=[];for(S=0,w=q.length;S<w;++S){M=q[S];do{z(M)}while(M=M.next)}for(S=0,w=P.length;S<w;++S)if((k=P[S]).next)do{z(k)}while(k=k.next);else Mt(k);function z(gt){var pt,It,Lt,Ot,$,oe,Ht,Oe;if(Lt=B.get(pt=R[gt[0]]))for(Ht=0,Oe=Lt.length;Ht<Oe;++Ht)if(lt(Ot=Lt[Ht],gt))return gt[0]=Ot[0],void(gt[1]=Ot[1]);if($=B.get(It=R[gt[1]]))for(Ht=0,Oe=$.length;Ht<Oe;++Ht)if(Pt(oe=$[Ht],gt))return gt[1]=oe[0],void(gt[0]=oe[1]);Lt?Lt.push(gt):B.set(pt,[gt]),$?$.push(gt):B.set(It,[gt]),F.push(gt)}function Mt(gt){var pt,It,Lt,Ot,$;if(It=B.get(R[gt[0]]))for(Ot=0,$=It.length;Ot<$;++Ot){if(ct(Lt=It[Ot],gt))return gt[0]=Lt[0],void(gt[1]=Lt[1]);if(Dt(Lt,gt))return gt[0]=Lt[1],void(gt[1]=Lt[0])}if(It=B.get(pt=R[gt[0]+yt(gt)]))for(Ot=0,$=It.length;Ot<$;++Ot){if(ct(Lt=It[Ot],gt))return gt[0]=Lt[0],void(gt[1]=Lt[1]);if(Dt(Lt,gt))return gt[0]=Lt[1],void(gt[1]=Lt[0])}It?It.push(gt):B.set(pt,[gt]),F.push(gt)}function lt(gt,pt){var It=gt[0],Lt=pt[0],Ot=gt[1];if(It-Ot!=Lt-pt[1])return!1;for(;It<=Ot;++It,++Lt)if(!ko(R[It],R[Lt]))return!1;return!0}function Pt(gt,pt){var It=gt[0],Ot=gt[1],$=pt[1];if(It-Ot!=pt[0]-$)return!1;for(;It<=Ot;++It,--$)if(!ko(R[It],R[$]))return!1;return!0}function ct(gt,pt){var It=gt[0],Lt=pt[0],Ot=gt[1]-It;if(Ot!==pt[1]-Lt)return!1;for(var $=yt(gt),oe=yt(pt),Ht=0;Ht<Ot;++Ht)if(!ko(R[It+(Ht+$)%Ot],R[Lt+(Ht+oe)%Ot]))return!1;return!0}function Dt(gt,pt){var It=gt[0],$=pt[1],oe=gt[1]-It;if(oe!==$-pt[0])return!1;for(var Ht=yt(gt),Oe=oe-yt(pt),ee=0;ee<oe;++ee)if(!ko(R[It+(ee+Ht)%oe],R[$-(ee+Oe)%oe]))return!1;return!0}function yt(gt){for(var pt=gt[0],It=gt[1],Lt=pt,Ot=Lt,$=R[Lt];++Lt<It;){var oe=R[Lt];(oe[0]<$[0]||oe[0]===$[0]&&oe[1]<$[1])&&(Ot=Lt,$=oe)}return Ot-pt}return b}(function(b){var M,k,S,w=function C(t){var e,n,i,r,o=t.coordinates,a=t.lines,l=t.rings,p=function(){for(var lt=Es(1.4*o.length,B,F,Int32Array,-1,Int32Array),Pt=new Int32Array(o.length),ct=0,Dt=o.length;ct<Dt;++ct)Pt[ct]=lt.maybeSet(ct,ct);return Pt}(),f=new Int32Array(o.length),m=new Int32Array(o.length),_=new Int32Array(o.length),b=new Int8Array(o.length),M=0;for(e=0,n=o.length;e<n;++e)f[e]=m[e]=_[e]=-1;for(e=0,n=a.length;e<n;++e){var k=a[e],S=k[0],w=k[1];for(i=p[S],r=p[++S],++M,b[i]=1;++S<=w;)O(e,i,i=r,r=p[S]);++M,b[r]=1}for(e=0,n=o.length;e<n;++e)f[e]=-1;for(e=0,n=l.length;e<n;++e){var R=l[e],q=R[0]+1,P=R[1];for(O(e,p[P-1],i=p[q-1],r=p[q]);++q<=P;)O(e,i,i=r,r=p[q])}function O(lt,Pt,ct,Dt){if(f[ct]!==lt){f[ct]=lt;var yt=m[ct];if(yt>=0){var gt=_[ct];yt===Pt&&gt===Dt||yt===Dt&&gt===Pt||(++M,b[ct]=1)}else m[ct]=Pt,_[ct]=Dt}}function B(lt){return v(o[lt])}function F(lt,Pt){return ko(o[lt],o[Pt])}f=m=_=null;var z,Mt=function(lt,Pt,ct,Dt,yt){3===arguments.length&&(Dt=Array,yt=null);for(var gt=new Dt(lt=1<<Math.max(4,Math.ceil(Math.log(lt)/Math.LN2))),pt=lt-1,It=0;It<lt;++It)gt[It]=yt;return{add:function Lt(oe){for(var Ht=Pt(oe)&pt,Oe=gt[Ht],ee=0;Oe!=yt;){if(ct(Oe,oe))return!0;if(++ee>=lt)throw new Error("full hashset");Oe=gt[Ht=Ht+1&pt]}return gt[Ht]=oe,!0},has:function Ot(oe){for(var Ht=Pt(oe)&pt,Oe=gt[Ht],ee=0;Oe!=yt;){if(ct(Oe,oe))return!0;if(++ee>=lt)break;Oe=gt[Ht=Ht+1&pt]}return!1},values:function $(){for(var oe=[],Ht=0,Oe=gt.length;Ht<Oe;++Ht){var ee=gt[Ht];ee!=yt&&oe.push(ee)}return oe}}}(1.4*M,v,ko);for(e=0,n=o.length;e<n;++e)b[z=p[e]]&&Mt.add(o[z]);return Mt}(b),R=b.coordinates,q=b.lines,P=b.rings;for(k=0,S=q.length;k<S;++k)for(var O=q[k],B=O[0],F=O[1];++B<F;)w.has(R[B])&&(M={0:B,1:O[1]},O[1]=B,O=O.next=M);for(k=0,S=P.length;k<S;++k)for(var z=P[k],Mt=z[0],lt=Mt,Pt=z[1],ct=w.has(R[Mt]);++lt<Pt;)w.has(R[lt])&&(ct?(M={0:lt,1:z[1]},z[1]=lt,z=z.next=M):(D(R,Mt,Pt,Pt-lt),R[Pt]=R[Mt],ct=!0,lt=Mt));return b}(function(b){var M=-1,k=[],S=[],w=[];function R(z){z&&es.call(q,z.type)&&q[z.type](z)}var q={GeometryCollection:function(z){z.geometries.forEach(R)},LineString:function(z){z.arcs=P(z.arcs)},MultiLineString:function(z){z.arcs=z.arcs.map(P)},Polygon:function(z){z.arcs=z.arcs.map(O)},MultiPolygon:function(z){z.arcs=z.arcs.map(B)}};function P(z){for(var Mt=0,lt=z.length;Mt<lt;++Mt)w[++M]=z[Mt];var Pt={0:M-lt+1,1:M};return k.push(Pt),Pt}function O(z){for(var Mt=0,lt=z.length;Mt<lt;++Mt)w[++M]=z[Mt];var Pt={0:M-lt+1,1:M};return S.push(Pt),Pt}function B(z){return z.map(O)}for(var F in b)R(b[F]);return{type:"Topology",coordinates:w,lines:k,rings:S,objects:b}}(t))),o=r.coordinates,a=Es(1.4*r.arcs.length,At,Rt);function l(b){b&&es.call(p,b.type)&&p[b.type](b)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(b,M){return a.set(b,M),o.slice(b[0],b[1]+1)}),delete r.coordinates,o=null;var p={GeometryCollection:function(b){b.geometries.forEach(l)},LineString:function(b){b.arcs=f(b.arcs)},MultiLineString:function(b){b.arcs=b.arcs.map(f)},Polygon:function(b){b.arcs=b.arcs.map(f)},MultiPolygon:function(b){b.arcs=b.arcs.map(m)}};function f(b){var M=[];do{var k=a.get(b);M.push(b[0]<b[1]?k:~k)}while(b=b.next);return M}function m(b){return b.map(f)}for(var _ in t)l(t[_]);return i&&(r.transform=i,r.arcs=function(b){for(var M=-1,k=b.length;++M<k;){for(var S,w,R=b[M],q=0,P=1,O=R.length,B=R[0],F=B[0],z=B[1];++q<O;)S=(B=R[q])[0],w=B[1],S===F&&w===z||(R[P++]=[S-F,w-z],F=S,z=w);1===P&&(R[P++]=[0,0]),R.length=P}return b}(r.arcs)),r}({geoms:ht(n).geometry});return function(r){return Ma(r,ea.apply(this,arguments))}(i,i.objects.geoms.geometries)}function _e(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var i=W(t),r=[];switch(i){case"LineString":r=Me(t);break;case"MultiLineString":case"Polygon":ge(t).forEach(function(a){r.push(Me(a))});break;case"MultiPolygon":ge(t).forEach(function(a){var l=[];a.forEach(function(p){l.push(Me(p))}),r.push(l)});break;case"Point":return t;case"MultiPoint":var o={};ge(t).forEach(function(a){var l=a.join("-");Object.prototype.hasOwnProperty.call(o,l)||(r.push(a),o[l]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=r,t):{type:i,coordinates:r}:!0===n?(t.geometry.coordinates=r,t):d({type:i,coordinates:r},t.properties,{bbox:t.bbox,id:t.id})}function Me(t){var e=ge(t);if(2===e.length&&!Mn(e[0],e[1]))return e;var n=[],i=e.length-1,r=n.length;n.push(e[0]);for(var o=1;o<i;o++){var a=n[n.length-1];e[o][0]===a[0]&&e[o][1]===a[1]||(n.push(e[o]),(r=n.length)>2&&qn(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),r=n.length,Mn(e[0],e[e.length-1])&&r<4)throw new Error("invalid polygon");return qn(n[r-3],n[r-1],n[r-2])&&n.splice(n.length-2,1),n}function Mn(t,e){return t[0]===e[0]&&t[1]===e[1]}function qn(t,e,n){var i=n[0],r=n[1],o=t[0],a=t[1],l=e[0],p=e[1],f=l-o,m=p-a;return(i-o)*m-(r-a)*f==0&&(Math.abs(f)>=Math.abs(m)?f>0?o<=i&&i<=l:l<=i&&i<=o:m>0?a<=r&&r<=p:p<=r&&r<=a)}function Rn(t,e,n){var i=e.x,r=e.y,o=n.x-i,a=n.y-r;if(0!==o||0!==a){var l=((t.x-i)*o+(t.y-r)*a)/(o*o+a*a);l>1?(i=n.x,r=n.y):l>0&&(i+=o*l,r+=a*l)}return(o=t.x-i)*o+(a=t.y-r)*a}function ri(t,e,n,i,r){for(var o,a=i,l=e+1;l<n;l++){var p=Rn(t[l],t[e],t[n]);p>a&&(o=l,a=p)}a>i&&(o-e>1&&ri(t,e,o,i,r),r.push(t[o]),n-o>1&&ri(t,o,n,i,r))}function _i(t,e){var n=t.length-1,i=[t[0]];return ri(t,0,n,e,i),i.push(t[n]),i}function pr(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return _i(t=n?t:function(r,o){for(var a,l,p,f,m,_=r[0],b=[_],M=1,k=r.length;M<k;M++)(f=(l=a=r[M]).x-(p=_).x)*f+(m=l.y-p.y)*m>o&&(b.push(a),_=a);return _!==a&&b.push(a),b}(t,i),i)}function na(t,e,n){return pr(t.map(function(i){return{x:i[0],y:i[1],z:i[2]}}),e,n).map(function(i){return i.z?[i.x,i.y,i.z]:[i.x,i.y]})}function br(t,e,n){return t.map(function(i){var r=i.map(function(a){return{x:a[0],y:a[1]}});if(r.length<4)throw new Error("invalid polygon");for(var o=pr(r,e,n).map(function(a){return[a.x,a.y]});!xr(o);)o=pr(r,e-=.01*e,n).map(function(a){return[a.x,a.y]});return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o})}function xr(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var Wr=function(){function t(e){this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(n=0;n<this.length-1;n++){var i=this.points[n],r=this.points[n+1];this.centers.push({x:(i.x+r.x)/2,y:(i.y+r.y)/2,z:(i.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),n=0;n<this.centers.length-1;n++){var o=this.points[n+1].x-(this.centers[n].x+this.centers[n+1].x)/2,a=this.points[n+1].y-(this.centers[n].y+this.centers[n+1].y)/2,l=this.points[n+1].z-(this.centers[n].y+this.centers[n+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n].y+a),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n].z+l)},{x:(1-this.sharpness)*this.points[n+1].x+this.sharpness*(this.centers[n+1].x+o),y:(1-this.sharpness)*this.points[n+1].y+this.sharpness*(this.centers[n+1].y+a),z:(1-this.sharpness)*this.points[n+1].z+this.sharpness*(this.centers[n+1].z+l)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(e){var n=[],i=this.pos(0);n.push(0);for(var r=0;r<this.duration;r+=10){var o=this.pos(r);Math.sqrt((o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y)+(o.z-i.z)*(o.z-i.z))>e&&(n.push(r),i=o)}return n},t.prototype.vector=function(e){var n=this.pos(e+10),i=this.pos(e-10);return{angle:180*Math.atan2(n.y-i.y,n.x-i.x)/3.14,speed:Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))}},t.prototype.pos=function(e){var n=e-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var i=n/this.duration;if(i>=1)return this.points[this.length-1];var a,l,p,f,_,b,m,r=Math.floor((this.points.length-1)*i);return m=[(b=(_=(this.length-1)*i-r)*_)*_,3*b*(1-_),3*_*(1-_)*(1-_),(1-_)*(1-_)*(1-_)],{x:(f=this.points[r+1]).x*m[0]+(p=this.controls[r+1][0]).x*m[1]+(l=this.controls[r][1]).x*m[2]+(a=this.points[r]).x*m[3],y:f.y*m[0]+p.y*m[1]+l.y*m[2]+a.y*m[3],z:f.z*m[0]+p.z*m[1]+l.z*m[2]+a.z*m[3]}},t}();function Ms(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,i=e.sharpness||.85,r=[],o=G(t).coordinates.map(function(f){return{x:f[0],y:f[1]}}),a=new Wr({duration:n,points:o,sharpness:i}),l=function(f){var m=a.pos(f);Math.floor(f/100)%2==0&&r.push([m.x,m.y])},p=0;p<a.duration;p+=10)l(p);return l(a.duration),tt(r,e.properties)}function ka(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,i];return N([[a,[r,i],[r,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}function ks(t){return ka(ze(t))}function ia(t){var e=t[0],n=t[1],i=t[2],r=t[3];if(Ke(t.slice(0,2),[i,n])>=Ke(t.slice(0,2),[e,r])){var o=(n+r)/2;return[e,o-(i-e)/2,i,o+(i-e)/2]}var a=(e+i)/2;return[a-(r-n)/2,n,a+(r-n)/2,r]}function wr(t,e,n,i){void 0===i&&(i={});var r=Ze(t),o=Ut(r[0]),a=Ut(r[1]),l=Ut(n),p=K(e,i.units),f=Math.asin(Math.sin(a)*Math.cos(p)+Math.cos(a)*Math.sin(p)*Math.cos(l));return I([zt(o+Math.atan2(Math.sin(l)*Math.sin(p)*Math.cos(a),Math.cos(p)-Math.sin(a)*Math.sin(f))),zt(f)],i.properties)}function Pa(t,e,n){void 0===n&&(n={});for(var i=n.steps||64,r=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<i;a++)o.push(wr(t,e,-360*a/i,n).geometry.coordinates);return o.push(o[0]),N([o],r)}function Er(t,e,n){if(void 0===n&&(n={}),!0===n.final)return(Er(e,t)+180)%360;var i=Ze(t),r=Ze(e),o=Ut(i[0]),a=Ut(r[0]),l=Ut(i[1]),p=Ut(r[1]),f=Math.sin(a-o)*Math.cos(p),m=Math.cos(l)*Math.sin(p)-Math.sin(l)*Math.cos(p)*Math.cos(a-o);return zt(Math.atan2(f,m))}function ra(t,e){void 0===e&&(e={});var n=ze(t);return I([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function ns(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return ce(t,function(o){n+=o[0],i+=o[1],r++},!0),I([n/r,i/r],e.properties)}function oa(t){var e=[];return"FeatureCollection"===t.type?se(t,function(n){ce(n,function(i){e.push(I(i,n.properties))})}):ce(t,function(n){e.push(I(n,t.properties))}),Et(e)}var ru=ou,oh=ou;function ou(t,e,n){n=n||2;var i,r,o,a,l,p,f,m=e&&e.length,_=m?e[0]*n:t.length,b=uo(t,0,_,n,!0),M=[];if(!b)return M;if(m&&(b=function(S,w,R,q){var P,O,B,F=[];for(P=0,O=w.length;P<O;P++)(B=uo(S,w[P]*q,P<O-1?w[P+1]*q:S.length,q,!1))===B.next&&(B.steiner=!0),F.push(lh(B));for(F.sort(uh),P=0;P<F.length;P++)is(F[P],R),R=Ps(R,R.next);return R}(t,e,b,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var k=n;k<_;k+=n)(l=t[k])<i&&(i=l),(p=t[k+1])<r&&(r=p),l>o&&(o=l),p>a&&(a=p);f=0!==(f=Math.max(o-i,a-r))?1/f:0}return Cs(b,M,n,i,r,f),M}function uo(t,e,n,i,r){var o,a;if(r===Ta(t,e,n,i)>0)for(o=e;o<n;o+=i)a=uu(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=uu(o,t[o],t[o+1],a);return a&&lo(a,a.next)&&(Kr(a),a=a.next),a}function Ps(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!lo(i,i.next)&&0!==ki(i.prev,i,i.next))i=i.next;else{if(Kr(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Cs(t,e,n,i,r,o,a){if(t){!a&&o&&function(m,_,b,M){var k=m;do{null===k.z&&(k.z=Su(k.x,k.y,_,b,M)),k.prevZ=k.prev,k.nextZ=k.next,k=k.next}while(k!==m);k.prevZ.nextZ=null,k.prevZ=null,function(S){var w,R,q,P,O,B,F,z,Mt=1;do{for(R=S,S=null,O=null,B=0;R;){for(B++,q=R,F=0,w=0;w<Mt&&(F++,q=q.nextZ);w++);for(z=Mt;F>0||z>0&&q;)0!==F&&(0===z||!q||R.z<=q.z)?(P=R,R=R.nextZ,F--):(P=q,q=q.nextZ,z--),O?O.nextZ=P:S=P,P.prevZ=O,O=P;R=q}O.nextZ=null,Mt*=2}while(B>1)}(k)}(t,i,r,o);for(var l,p,f=t;t.prev!==t.next;)if(l=t.prev,p=t.next,o?su(t,i,r,o):sh(t))e.push(l.i/n),e.push(t.i/n),e.push(p.i/n),Kr(t),t=p.next,f=p.next;else if((t=p)===f){a?1===a?Cs(t=Ca(t,e,n),e,n,i,r,o,2):2===a&&ah(t,e,n,i,r,o):Cs(Ps(t),e,n,i,r,o,1);break}}}function sh(t){var e=t.prev,n=t,i=t.next;if(ki(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Po(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&ki(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function su(t,e,n,i){var r=t.prev,o=t,a=t.next;if(ki(r,o,a)>=0)return!1;for(var f=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,m=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,_=Su(r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,e,n,i),b=Su(f,m,e,n,i),M=t.prevZ,k=t.nextZ;M&&M.z>=_&&k&&k.z<=b;){if(M!==t.prev&&M!==t.next&&Po(r.x,r.y,o.x,o.y,a.x,a.y,M.x,M.y)&&ki(M.prev,M,M.next)>=0||(M=M.prevZ,k!==t.prev&&k!==t.next&&Po(r.x,r.y,o.x,o.y,a.x,a.y,k.x,k.y)&&ki(k.prev,k,k.next)>=0))return!1;k=k.nextZ}for(;M&&M.z>=_;){if(M!==t.prev&&M!==t.next&&Po(r.x,r.y,o.x,o.y,a.x,a.y,M.x,M.y)&&ki(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;k&&k.z<=b;){if(k!==t.prev&&k!==t.next&&Po(r.x,r.y,o.x,o.y,a.x,a.y,k.x,k.y)&&ki(k.prev,k,k.next)>=0)return!1;k=k.nextZ}return!0}function Ca(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!lo(r,o)&&gl(r,i,i.next,o)&&Sa(r,o)&&Sa(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Kr(i),Kr(i.next),i=t=o),i=i.next}while(i!==t);return i}function ah(t,e,n,i,r,o){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&au(a,l)){var p=Co(a,l);return a=Ps(a,a.next),p=Ps(p,p.next),Cs(a,e,n,i,r,o),void Cs(p,e,n,i,r,o)}l=l.next}a=a.next}while(a!==t)}function uh(t,e){return t.x-e.x}function is(t,e){if(e=function(i,r){var o,a=r,l=i.x,p=i.y,f=-1/0;do{if(p<=a.y&&p>=a.next.y&&a.next.y!==a.y){var m=a.x+(p-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(m<=l&&m>f){if(f=m,m===l){if(p===a.y)return a;if(p===a.next.y)return a.next}o=a.x<a.next.x?a:a.next}}a=a.next}while(a!==r);if(!o)return null;if(l===f)return o.prev;var _,b=o,M=o.x,k=o.y,S=1/0;for(a=o.next;a!==b;)l>=a.x&&a.x>=M&&l!==a.x&&Po(p<k?l:f,p,M,k,p<k?f:l,p,a.x,a.y)&&((_=Math.abs(p-a.y)/(l-a.x))<S||_===S&&a.x>o.x)&&Sa(a,i)&&(o=a,S=_),a=a.next;return o}(t,e)){var n=Co(e,t);Ps(n,n.next)}}function Su(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function lh(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Po(t,e,n,i,r,o,a,l){return(r-a)*(e-l)-(t-a)*(o-l)>=0&&(t-a)*(i-l)-(n-a)*(e-l)>=0&&(n-a)*(o-l)-(r-a)*(i-l)>=0}function au(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(n,i){var r=n;do{if(r.i!==n.i&&r.next.i!==n.i&&r.i!==i.i&&r.next.i!==i.i&&gl(r,r.next,n,i))return!0;r=r.next}while(r!==n);return!1}(t,e)&&Sa(t,e)&&Sa(e,t)&&function(n,i){var r=n,o=!1,a=(n.x+i.x)/2,l=(n.y+i.y)/2;do{r.y>l!=r.next.y>l&&r.next.y!==r.y&&a<(r.next.x-r.x)*(l-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next}while(r!==n);return o}(t,e)}function ki(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function lo(t,e){return t.x===e.x&&t.y===e.y}function gl(t,e,n,i){return!!(lo(t,e)&&lo(n,i)||lo(t,i)&&lo(n,e))||ki(t,e,n)>0!=ki(t,e,i)>0&&ki(n,i,t)>0!=ki(n,i,e)>0}function Sa(t,e){return ki(t.prev,t,t.next)<0?ki(t,e,t.next)>=0&&ki(t,t.prev,e)>=0:ki(t,e,t.prev)<0||ki(t,t.next,e)<0}function Co(t,e){var n=new Ia(t.i,t.x,t.y),i=new Ia(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function uu(t,e,n,i){var r=new Ia(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Kr(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ia(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ta(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Da(t){var e=function(l){for(var p=l[0][0].length,f={vertices:[],holes:[],dimensions:p},m=0,_=0;_<l.length;_++){for(var b=0;b<l[_].length;b++)for(var M=0;M<p;M++)f.vertices.push(l[_][b][M]);_>0&&f.holes.push(m+=l[_-1].length)}return f}(t),n=ru(e.vertices,e.holes,2),i=[],r=[];n.forEach(function(l,p){var f=n[p];r.push([e.vertices[2*f],e.vertices[2*f+1]])});for(var o=0;o<r.length;o+=3){var a=r.slice(o,o+3);a.push(r[o]),i.push(N([a]))}return i}function Ss(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,i=1/0,r=0;return se(e,function(o,a){var l=Ke(t,o);l<i&&(r=a,i=l)}),(n=Qn(e.features[r])).properties.featureIndex=r,n.properties.distanceToPoint=i,n}function sa(t){if(!t)throw new Error("geojson is required");var e=[];return Dn(t,function(n){!function(i,r){var o=[],a=i.geometry;if(null!==a){switch(a.type){case"Polygon":o=ge(a);break;case"LineString":o=[ge(a)]}o.forEach(function(l){var p,f,m;(p=l,f=i.properties,m=[],p.reduce(function(_,b){var k,S,w,R,q,P,M=tt([_,b],f);return M.bbox=[(w=(k=_)[0])<(q=(S=b)[0])?w:q,(R=k[1])<(P=S[1])?R:P,w>q?w:q,R>P?R:P],m.push(M),b}),m).forEach(function(p){p.id=r.length,r.push(p)})})}}(n,e)}),Et(e)}ou.deviation=function(t,e,n,i){var r=e&&e.length,a=Math.abs(Ta(t,0,r?e[0]*n:t.length,n));if(r)for(var l=0,p=e.length;l<p;l++)a-=Math.abs(Ta(t,e[l]*n,l<p-1?e[l+1]*n:t.length,n));var _=0;for(l=0;l<i.length;l+=3){var b=i[l]*n,M=i[l+1]*n,k=i[l+2]*n;_+=Math.abs((t[b]-t[k])*(t[M+1]-t[b+1])-(t[b]-t[M])*(t[k+1]-t[b+1]))}return 0===a&&0===_?0:Math.abs((_-a)/a)},ou.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[r][o][a]);r>0&&n.holes.push(i+=t[r-1].length)}return n},ru.default=oh;var s=Mi(function(t,e){function n(k,S,w){void 0===w&&(w={});var R={type:"Feature"};return(0===w.id||w.id)&&(R.id=w.id),w.bbox&&(R.bbox=w.bbox),R.properties=S||{},R.geometry=k,R}function i(k,S,w){if(void 0===w&&(w={}),!k)throw new Error("coordinates is required");if(!Array.isArray(k))throw new Error("coordinates must be an Array");if(k.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!M(k[0])||!M(k[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:k},S,w)}function r(k,S,w){void 0===w&&(w={});for(var R=0,q=k;R<q.length;R++){var P=q[R];if(P.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var O=0;O<P[P.length-1].length;O++)if(P[P.length-1][O]!==P[0][O])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:k},S,w)}function o(k,S,w){if(void 0===w&&(w={}),k.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:k},S,w)}function a(k,S){void 0===S&&(S={});var w={type:"FeatureCollection"};return S.id&&(w.id=S.id),S.bbox&&(w.bbox=S.bbox),w.features=k,w}function l(k,S,w){return void 0===w&&(w={}),n({type:"MultiLineString",coordinates:k},S,w)}function p(k,S,w){return void 0===w&&(w={}),n({type:"MultiPoint",coordinates:k},S,w)}function f(k,S,w){return void 0===w&&(w={}),n({type:"MultiPolygon",coordinates:k},S,w)}function m(k,S){void 0===S&&(S="kilometers");var w=e.factors[S];if(!w)throw new Error(S+" units is invalid");return k*w}function _(k,S){void 0===S&&(S="kilometers");var w=e.factors[S];if(!w)throw new Error(S+" units is invalid");return k/w}function b(k){return k%(2*Math.PI)*180/Math.PI}function M(k){return!isNaN(k)&&null!==k&&!Array.isArray(k)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(k,S,w){switch(k){case"Point":return i(S).geometry;case"LineString":return o(S).geometry;case"Polygon":return r(S).geometry;case"MultiPoint":return p(S).geometry;case"MultiLineString":return l(S).geometry;case"MultiPolygon":return f(S).geometry;default:throw new Error(k+" is invalid")}},e.point=i,e.points=function(k,S,w){return void 0===w&&(w={}),a(k.map(function(R){return i(R,S)}),w)},e.polygon=r,e.polygons=function(k,S,w){return void 0===w&&(w={}),a(k.map(function(R){return r(R,S)}),w)},e.lineString=o,e.lineStrings=function(k,S,w){return void 0===w&&(w={}),a(k.map(function(R){return o(R,S)}),w)},e.featureCollection=a,e.multiLineString=l,e.multiPoint=p,e.multiPolygon=f,e.geometryCollection=function(k,S,w){return void 0===w&&(w={}),n({type:"GeometryCollection",geometries:k},S,w)},e.round=function(k,S){if(void 0===S&&(S=0),S&&!(S>=0))throw new Error("precision must be a positive number");var w=Math.pow(10,S||0);return Math.round(k*w)/w},e.radiansToLength=m,e.lengthToRadians=_,e.lengthToDegrees=function(k,S){return b(_(k,S))},e.bearingToAzimuth=function(k){var S=k%360;return S<0&&(S+=360),S},e.radiansToDegrees=b,e.degreesToRadians=function(k){return k%360*Math.PI/180},e.convertLength=function(k,S,w){if(void 0===S&&(S="kilometers"),void 0===w&&(w="kilometers"),!(k>=0))throw new Error("length must be a positive number");return m(_(k,S),w)},e.convertArea=function(k,S,w){if(void 0===S&&(S="meters"),void 0===w&&(w="kilometers"),!(k>=0))throw new Error("area must be a positive number");var R=e.areaFactors[S];if(!R)throw new Error("invalid original units");var q=e.areaFactors[w];if(!q)throw new Error("invalid final units");return k/R*q},e.isNumber=M,e.isObject=function(k){return!!k&&k.constructor===Object},e.validateBBox=function(k){if(!k)throw new Error("bbox is required");if(!Array.isArray(k))throw new Error("bbox must be an Array");if(4!==k.length&&6!==k.length)throw new Error("bbox must be an Array of 4 or 6 numbers");k.forEach(function(S){if(!M(S))throw new Error("bbox must only contain numbers")})},e.validateId=function(k){if(!k)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof k))throw new Error("id must be a number or a string")}});function c(t,e,n){if(null!==t)for(var i,r,o,a,l,p,f,m,_=0,b=0,M=t.type,k="FeatureCollection"===M,S="Feature"===M,w=k?t.features.length:1,R=0;R<w;R++){l=(m=!!(f=k?t.features[R].geometry:S?t.geometry:t)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var q=0;q<l;q++){var P=0,O=0;if(null!==(a=m?f.geometries[q]:f)){p=a.coordinates;var B=a.type;switch(_=!n||"Polygon"!==B&&"MultiPolygon"!==B?0:1,B){case null:break;case"Point":if(!1===e(p,b,R,P,O))return!1;b++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(!1===e(p[i],b,R,P,O))return!1;b++,"MultiPoint"===B&&P++}"LineString"===B&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(r=0;r<p[i].length-_;r++){if(!1===e(p[i][r],b,R,P,O))return!1;b++}"MultiLineString"===B&&P++,"Polygon"===B&&O++}"Polygon"===B&&P++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(O=0,r=0;r<p[i].length;r++){for(o=0;o<p[i][r].length-_;o++){if(!1===e(p[i][r][o],b,R,P,O))return!1;b++}O++}P++}break;case"GeometryCollection":for(i=0;i<a.geometries.length;i++)if(!1===c(a.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function y(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function E(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function T(t,e){var n,i,r,o,a,l,p,f,m,_,b=0,M="FeatureCollection"===t.type,k="Feature"===t.type,S=M?t.features.length:1;for(n=0;n<S;n++){for(f=M?t.features[n].properties:k?t.properties:{},m=M?t.features[n].bbox:k?t.bbox:void 0,_=M?t.features[n].id:k?t.id:void 0,a=(p=!!(l=M?t.features[n].geometry:k?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1,r=0;r<a;r++)if(null!==(o=p?l.geometries[r]:l))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,b,f,m,_))return!1;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],b,f,m,_))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,b,f,m,_))return!1;b++}}function V(t,e){T(t,function(n,i,r,o,a){var l,p=null===n?null:n.type;switch(p){case null:case"Point":case"LineString":case"Polygon":return!1!==e(s.feature(n,r,{bbox:o,id:a}),i,0)&&void 0}switch(p){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon"}for(var f=0;f<n.coordinates.length;f++)if(!1===e(s.feature({type:l,coordinates:n.coordinates[f]},r),i,f))return!1})}function ut(t,e){V(t,function(n,i,r){var o=0;if(n.geometry){var a=n.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,p=0,f=0,m=0;return!1!==c(n,function(_,b,M,k,S){if(void 0===l||i>p||k>f||S>m)return l=_,p=i,f=k,m=S,void(o=0);var w=s.lineString([l,_],n.properties);if(!1===e(w,i,r,S,o))return!1;o++,l=_})&&void 0}}})}function ot(t,e){if(!t)throw new Error("geojson is required");V(t,function(n,i,r){if(null!==n.geometry){var a=n.geometry.coordinates;switch(n.geometry.type){case"LineString":if(!1===e(n,i,r,0,0))return!1;break;case"Polygon":for(var l=0;l<a.length;l++)if(!1===e(s.lineString(a[l],n.properties),i,r,l))return!1}}})}var rc=Object.defineProperty({coordAll:function(t){var e=[];return c(t,function(n){e.push(n)}),e},coordEach:c,coordReduce:function(t,e,n,i){var r=n;return c(t,function(o,a,l,p,f){r=0===a&&void 0===n?o:e(r,o,a,l,p,f)},i),r},featureEach:E,featureReduce:function(t,e,n){var i=n;return E(t,function(r,o){i=0===o&&void 0===n?r:e(i,r,o)}),i},findPoint:function(t,e){if(!s.isObject(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var p=n.coordinates;switch(n.type){case"Point":return s.point(p,l,e);case"MultiPoint":return r<0&&(r=p.length+r),s.point(p[r],l,e);case"LineString":return a<0&&(a=p.length+a),s.point(p[a],l,e);case"Polygon":return o<0&&(o=p.length+o),a<0&&(a=p[o].length+a),s.point(p[o][a],l,e);case"MultiLineString":return r<0&&(r=p.length+r),a<0&&(a=p[r].length+a),s.point(p[r][a],l,e);case"MultiPolygon":return r<0&&(r=p.length+r),o<0&&(o=p[r].length+o),a<0&&(a=p[r][o].length-a),s.point(p[r][o][a],l,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(!s.isObject(e=e||{}))throw new Error("options is invalid");var n,i=e.featureIndex||0,r=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),l=l||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var p=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=p.length+a-1),s.lineString([p[a],p[a+1]],l,e);case"Polygon":return o<0&&(o=p.length+o),a<0&&(a=p[o].length+a-1),s.lineString([p[o][a],p[o][a+1]],l,e);case"MultiLineString":return r<0&&(r=p.length+r),a<0&&(a=p[r].length+a-1),s.lineString([p[r][a],p[r][a+1]],l,e);case"MultiPolygon":return r<0&&(r=p.length+r),o<0&&(o=p[r].length+o),a<0&&(a=p[r][o].length-a-1),s.lineString([p[r][o][a],p[r][o][a+1]],l,e)}throw new Error("geojson is invalid")},flattenEach:V,flattenReduce:function(t,e,n){var i=n;return V(t,function(r,o,a){i=0===o&&0===a&&void 0===n?r:e(i,r,o,a)}),i},geomEach:T,geomReduce:function(t,e,n){var i=n;return T(t,function(r,o,a,l,p){i=0===o&&void 0===n?r:e(i,r,o,a,l,p)}),i},lineEach:ot,lineReduce:function(t,e,n){var i=n;return ot(t,function(r,o,a,l){i=0===o&&void 0===n?r:e(i,r,o,a,l)}),i},propEach:y,propReduce:function(t,e,n){var i=n;return y(t,function(r,o){i=0===o&&void 0===n?r:e(i,r,o)}),i},segmentEach:ut,segmentReduce:function(t,e,n){var i=n,r=!1;return ut(t,function(o,a,l,p,f){i=!1===r&&void 0===n?o:e(i,o,a,l,p,f),r=!0}),i}},"__esModule",{value:!0});function oc(t){var e=[1/0,1/0,-1/0,-1/0];return rc.coordEach(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}oc.default=oc;var Tu=Object.defineProperty({default:oc},"__esModule",{value:!0}).default,Mg=rc.featureEach,gp=s.featureCollection;function _p(t){var e=In(t);return e.insert=function(n){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Tu(n),In.prototype.insert.call(this,n)},e.load=function(n){var i=[];return Array.isArray(n)?n.forEach(function(r){if("Feature"!==r.type)throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Tu(r),i.push(r)}):Mg(n,function(r){if("Feature"!==r.type)throw new Error("invalid features");r.bbox=r.bbox?r.bbox:Tu(r),i.push(r)}),In.prototype.load.call(this,i)},e.remove=function(n,i){if("Feature"!==n.type)throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Tu(n),In.prototype.remove.call(this,n,i)},e.clear=function(){return In.prototype.clear.call(this)},e.search=function(n){var i=In.prototype.search.call(this,this.toBBox(n));return gp(i)},e.collides=function(n){return In.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=In.prototype.all.call(this);return gp(n)},e.toJSON=function(){return In.prototype.toJSON.call(this)},e.fromJSON=function(n){return In.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var i;if(n.bbox)i=n.bbox;else if(Array.isArray(n)&&4===n.length)i=n;else if(Array.isArray(n)&&6===n.length)i=[n[0],n[1],n[3],n[4]];else if("Feature"===n.type)i=Tu(n);else{if("FeatureCollection"!==n.type)throw new Error("invalid geojson");i=Tu(n)}return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},e}var _l=_p;function aa(t,e){var n={},i=[];if("LineString"===t.type&&(t=d(t)),"LineString"===e.type&&(e=d(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=mp(t,e);return r&&i.push(r),Et(i)}var o=_l();return o.load(sa(e)),se(sa(t),function(a){se(o.search(a),function(l){var p=mp(a,l);if(p){var f=ge(p).join(",");n[f]||(n[f]=!0,i.push(p))}})}),Et(i)}function mp(t,e){var n=ge(t),i=ge(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],a=n[1][0],l=n[1][1],p=i[0][0],f=i[0][1],m=i[1][0],_=i[1][1],b=(_-f)*(a-r)-(m-p)*(l-o);if(0===b)return null;var S=((m-p)*(o-f)-(_-f)*(r-p))/b,w=((a-r)*(o-f)-(l-o)*(r-p))/b;return S>=0&&S<=1&&w>=0&&w<=1?I([r+S*(a-r),o+S*(l-o)]):null}function ua(t,e,n){void 0===n&&(n={});var i=I([1/0,1/0],{dist:1/0}),r=0;return Dn(t,function(o){for(var a=ge(o),l=0;l<a.length-1;l++){var p=I(a[l]);p.properties.dist=Ke(e,p,n);var f=I(a[l+1]);f.properties.dist=Ke(e,f,n);var m=Ke(p,f,n),_=Math.max(p.properties.dist,f.properties.dist),b=Er(p,f),M=wr(e,_,b+90,n),k=wr(e,_,b-90,n),S=aa(tt([M.geometry.coordinates,k.geometry.coordinates]),tt([p.geometry.coordinates,f.geometry.coordinates])),w=null;S.features.length>0&&((w=S.features[0]).properties.dist=Ke(e,w,n),w.properties.location=r+Ke(p,w,n)),p.properties.dist<i.properties.dist&&((i=p).properties.index=l,i.properties.location=r),f.properties.dist<i.properties.dist&&((i=f).properties.index=l+1,i.properties.location=r+m),w&&w.properties.dist<i.properties.dist&&((i=w).properties.index=l),r+=m}}),i}function ph(t,e,n){void 0===n&&(n={});var i=Ze(t),r=Ze(e);return r[0]+=r[0]-i[0]>180?-360:i[0]-r[0]>180?360:0,Gt(function(o,a,l){var p=l=void 0===l?he:Number(l),f=o[1]*Math.PI/180,m=a[1]*Math.PI/180,_=m-f,b=Math.abs(a[0]-o[0])*Math.PI/180;b>Math.PI&&(b-=2*Math.PI);var M=Math.log(Math.tan(m/2+Math.PI/4)/Math.tan(f/2+Math.PI/4)),k=Math.abs(M)>1e-11?_/M:Math.cos(f);return Math.sqrt(_*_+k*k*b*b)*p}(i,r),"meters",n.units)}function yp(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=I(t):"Point"===t.type?t=d(t):nt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=tt(e):"LineString"===e.type?e=d(e):nt(e,"LineString","line");var i=1/0,r=t.geometry.coordinates;return Ki(e,function(o){var p=function(f,m,_,b){var M=[_[0]-m[0],_[1]-m[1]],k=vp([f[0]-m[0],f[1]-m[1]],M);if(k<=0)return sc(f,m,{method:b.method,units:"degrees"});var S=vp(M,M);if(S<=k)return sc(f,_,{method:b.method,units:"degrees"});var w=k/S;return sc(f,[m[0]+w*M[0],m[1]+w*M[1]],{method:b.method,units:"degrees"})}(r,o.geometry.coordinates[0],o.geometry.coordinates[1],n);p<i&&(i=p)}),Gt(i,"degrees",n.units)}function vp(t,e){return t[0]*e[0]+t[1]*e[1]}function sc(t,e,n){return"planar"===n.method?ph(t,e,n):Ke(t,e,n)}function Pg(t,e,n,i,r,o,a,l){var p,f,m,_,b={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(p=(l-o)*(n-t)-(a-r)*(i-e))?null!==b.x&&null!==b.y&&b:(_=(n-t)*(f=e-o)-(i-e)*(m=t-r),f=((a-r)*f-(l-o)*m)/p,m=_/p,b.x=t+f*(n-t),b.y=e+f*(i-e),f>=0&&f<=1&&(b.onLine1=!0),m>=0&&m<=1&&(b.onLine2=!0),!(!b.onLine1||!b.onLine2)&&[b.x,b.y])}function Lp(t){for(var e="FeatureCollection"!==(b=t).type?Et("Feature"!==b.type?[d(b)]:[b]):b,n=ra(e),i=!1,r=0;!i&&r<e.features.length;){var o,a=e.features[r].geometry,l=!1;if("Point"===a.type)n.geometry.coordinates[0]===a.coordinates[0]&&n.geometry.coordinates[1]===a.coordinates[1]&&(i=!0);else if("MultiPoint"===a.type){var p=!1;for(o=0;!p&&o<a.coordinates.length;)n.geometry.coordinates[0]===a.coordinates[o][0]&&n.geometry.coordinates[1]===a.coordinates[o][1]&&(i=!0,p=!0),o++}else if("LineString"===a.type)for(o=0;!l&&o<a.coordinates.length-1;)bp(n.geometry.coordinates[0],n.geometry.coordinates[1],a.coordinates[o][0],a.coordinates[o][1],a.coordinates[o+1][0],a.coordinates[o+1][1])&&(l=!0,i=!0),o++;else if("MultiLineString"===a.type)for(var f=0;f<a.coordinates.length;){l=!1,o=0;for(var m=a.coordinates[f];!l&&o<m.length-1;)bp(n.geometry.coordinates[0],n.geometry.coordinates[1],m[o][0],m[o][1],m[o+1][0],m[o+1][1])&&(l=!0,i=!0),o++;f++}else"Polygon"!==a.type&&"MultiPolygon"!==a.type||On(n,a)&&(i=!0);r++}var b;if(i)return n;var _=Et([]);for(r=0;r<e.features.length;r++)_.features=_.features.concat(oa(e.features[r]).features);return I(Ss(n,_).geometry.coordinates)}function bp(t,e,n,i,r,o){return Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))}_l.default=_p;var xp=6378137;function ac(t){return Di(t,function(e,n){return e+function(i){var r,o=0;switch(i.type){case"Polygon":return wp(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)o+=wp(i.coordinates[r]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n)},0)}function wp(t){var e=0;if(t&&t.length>0){e+=Math.abs(Ep(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Ep(t[n]))}return e}function Ep(t){var e,n,i,r,o,a,l=0,p=t.length;if(p>2){for(a=0;a<p;a++)a===p-2?(i=p-2,r=p-1,o=0):a===p-1?(i=p-1,r=0,o=1):(i=a,r=a+1,o=a+2),e=t[i],n=t[r],l+=(uc(t[o][0])-uc(e[0]))*Math.sin(uc(n[1]));l=l*xp*xp/2}return l}function uc(t){return t*Math.PI/180}function lc(t,e){return void 0===e&&(e={}),Oi(t,function(n,i){var r=i.geometry.coordinates;return n+Ke(r[0],r[1],e)},0)}function Mp(t,e,n,i){if(!Ft(i=i||{}))throw new Error("options is invalid");var r,o=[];if("Feature"===t.type)r=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");r=t.coordinates}for(var a,l,p,f=r.length,m=0,_=0;_<r.length&&!(e>=m&&_===r.length-1);_++){if(m>e&&0===o.length){if(!(a=e-m))return o.push(r[_]),tt(o);l=Er(r[_],r[_-1])-180,p=wr(r[_],a,l,i),o.push(p.geometry.coordinates)}if(m>=n)return(a=n-m)?(l=Er(r[_],r[_-1])-180,p=wr(r[_],a,l,i),o.push(p.geometry.coordinates),tt(o)):(o.push(r[_]),tt(o));if(m>=e&&o.push(r[_]),_===r.length-1)return tt(o);m+=Ke(r[_],r[_+1],i)}if(m<e&&r.length===f)throw new Error("Start position is beyond line");var b=r[r.length-1];return tt([b,b])}function Jr(t,e,n){void 0===n&&(n={});for(var i=Ze(t),r=ge(e),o=0;o<r.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===r.length-2&&(a="end"),0===o&&o+1===r.length-1&&(a="both")),Cg(r[o],r[o+1],i,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Cg(t,e,n,i,r){var o=n[0],a=n[1],l=t[0],p=t[1],f=e[0],m=e[1],_=f-l,b=m-p,M=(n[0]-l)*b-(n[1]-p)*_;if(null!==r){if(Math.abs(M)>r)return!1}else if(0!==M)return!1;return i?"start"===i?Math.abs(_)>=Math.abs(b)?_>0?l<o&&o<=f:f<=o&&o<l:b>0?p<a&&a<=m:m<=a&&a<p:"end"===i?Math.abs(_)>=Math.abs(b)?_>0?l<=o&&o<f:f<o&&o<=l:b>0?p<=a&&a<m:m<a&&a<=p:"both"===i&&(Math.abs(_)>=Math.abs(b)?_>0?l<o&&o<f:f<o&&o<l:b>0?p<a&&a<m:m<a&&a<p):Math.abs(_)>=Math.abs(b)?_>0?l<=o&&o<=f:f<=o&&o<=l:b>0?p<=a&&a<=m:m<=a&&a<=p}function kp(t,e){var n=G(t),i=G(e),r=n.type,o=i.type;switch(r){case"Point":switch(o){case"MultiPoint":return function(a,l){var p,f=!1;for(p=0;p<l.coordinates.length;p++)if(Cp(l.coordinates[p],a.coordinates)){f=!0;break}return f}(n,i);case"LineString":return Jr(n,i,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return On(n,i,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(a,l){for(var p=0;p<a.coordinates.length;p++){for(var f=!1,m=0;m<l.coordinates.length;m++)Cp(a.coordinates[p],l.coordinates[m])&&(f=!0);if(!f)return!1}return!0}(n,i);case"LineString":return function(a,l){for(var p=!1,f=0;f<a.coordinates.length;f++){if(!Jr(a.coordinates[f],l))return!1;p||(p=Jr(a.coordinates[f],l,{ignoreEndVertices:!0}))}return p}(n,i);case"Polygon":case"MultiPolygon":return function(a,l){for(var p=!0,f=!1,m=0;m<a.coordinates.length;m++){if(!(f=On(a.coordinates[1],l))){p=!1;break}f=On(a.coordinates[1],l,{ignoreBoundary:!0})}return p&&f}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(a,l){for(var p=0;p<a.coordinates.length;p++)if(!Jr(a.coordinates[p],l))return!1;return!0}(n,i);case"Polygon":case"MultiPolygon":return function(a,l){if(!Pp(ze(l),ze(a)))return!1;for(var m=!1,_=0;_<a.coordinates.length-1;_++){if(!On(a.coordinates[_],l))return!1;m||(m=On(a.coordinates[_],l,{ignoreBoundary:!0})),!m&&(m=On(Sg(a.coordinates[_],a.coordinates[_+1]),l,{ignoreBoundary:!0}))}return m}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(a,l){var p=ze(a);if(!Pp(ze(l),p))return!1;for(var f=0;f<a.coordinates[0].length;f++)if(!On(a.coordinates[0][f],l))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}}function Pp(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Cp(t,e){return t[0]===e[0]&&t[1]===e[1]}function Sg(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Sp(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var i=[],r=t[0],o=t[1],a=t[2],l=t[3],p=e/Ke([r,o],[a,o],n)*(a-r),f=e/Ke([r,o],[r,l],n)*(l-o),m=a-r,_=l-o,b=Math.floor(m/p),M=(_-Math.floor(_/f)*f)/2,k=r+(m-b*p)/2;k<=a;){for(var S=o+M;S<=l;){var w=I([k,S],n.properties);n.mask?kp(w,n.mask)&&i.push(w):i.push(w),S+=f}k+=p}return Et(i)}function Ip(t,e){void 0===e&&(e={});var n=e.precision,i=e.coordinates,r=e.mutate;if(n=null==n||isNaN(n)?6:n,i=null==i||isNaN(i)?3:i,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof i)throw new Error("<coordinates> must be a number");!1!==r&&void 0!==r||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return ce(t,function(a){!function(l,p,f){l.length>f&&l.splice(f,l.length);for(var m=0;m<l.length;m++)l[m]=Math.round(l[m]*p)/p}(a,o,i)}),t}function hc(t){if(!t)throw new Error("geojson is required");var e=[];return Dn(t,function(n){e.push(n)}),Et(e)}function ml(t,e){if(!t||!e||t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!ml(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}var Tp=function(t,e,n,i,r){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=i,this.nxtIsectAlongEdgeIn=r},Dp=function(t,e,n,i,r,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=i,this.nxtIsectAlongRingAndEdge2=r,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function fh(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Dg(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(fh([t[Du(e-1,t.length-1)],t[e],t[Du(e+1,t.length-1)]],!0))var i=1;else i=-1;return i}function yl(t,e){if(!t||!e||t.length!=e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!yl(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Du(t,e){return(t%e+e)%e}var Op=Math.PI/180,Rp=180/Math.PI,vl=function(t,e){this.lon=t,this.lat=e,this.x=Op*t,this.y=Op*e};vl.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},vl.prototype.antipode=function(){return new vl(this.lon<0?180+this.lon:-1*(180-this.lon),-1*this.lat)};var Np=function(){this.coords=[],this.length=0};Np.prototype.move_to=function(t){this.length++,this.coords.push(t)};var cc=function(t){this.properties=t||{},this.geometries=[]};cc.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},cc.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(r){e+=r[0]+" "+r[1]+","},i=0;i<this.geometries.length;i++){if(0===this.geometries[i].coords.length)return"LINESTRING(empty)";this.geometries[i].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var pc=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new vl(t.x,t.y),this.end=new vl(e.x,e.y),this.properties=n||{};var i=this.start.x-this.end.x,o=Math.pow(Math.sin((this.start.y-this.end.y)/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(i/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Ap(t,e){var n=[],i=_l();return Dn(e,function(r){if(n.forEach(function(l,p){l.id=p}),n.length){var o=i.search(r);if(o.features.length){var a=Bp(r,o);n=n.filter(function(l){return l.id!==a.id}),i.remove(a),se(fc(a,r),function(l){n.push(l),i.insert(l)})}}else(n=fc(t,r).features).forEach(function(l){l.bbox||(l.bbox=ia(ze(l)))}),i.load(Et(n))}),Et(n)}function fc(t,e){var n=[],i=ge(t)[0],r=ge(t)[t.geometry.coordinates.length-1];if(dc(i,Ze(e))||dc(r,Ze(e)))return Et([t]);var o=_l(),a=sa(t);o.load(a);var l=o.search(e);if(!l.features.length)return Et([t]);var p=Bp(e,l),f=fe(a,function(m,_,b){var M=ge(_)[1],k=Ze(e);return b===p.id?(m.push(k),n.push(tt(m)),dc(k,M)?[k]:[k,M]):(m.push(M),m)},[i]);return f.length>1&&n.push(tt(f)),Et(n)}function Bp(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,i=1/0;return se(e,function(r){var o=ua(r,t).properties.dist;o<i&&(n=r,i=o)}),n}function dc(t,e){return t[0]===e[0]&&t[1]===e[1]}function zp(t,e,n,i,r){void 0===r&&(r={});var o=r.steps||64,a=Fp(n),l=Fp(i),p=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===l)return tt(Pa(t,e,r).geometry.coordinates[0],p);for(var f=a,m=a<l?l:l+360,_=f,b=[],M=0;_<m;)b.push(wr(t,e,_,r).geometry.coordinates),_=f+360*++M/o;return _>m&&b.push(wr(t,e,m,r).geometry.coordinates),tt(b,p)}function Fp(t){var e=t%360;return e<0&&(e+=360),e}function Ll(t,e){void 0===e&&(e={});var n=G(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return Gp(n,e);case"MultiPolygon":return function(i,r){void 0===r&&(r={});var o=G(i).coordinates,a=r.properties?r.properties:"Feature"===i.type?i.properties:{},l=[];return o.forEach(function(p){l.push(jp(p,a))}),Et(l)}(n,e);default:throw new Error("invalid poly")}}function Gp(t,e){return void 0===e&&(e={}),jp(G(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function jp(t,e){return t.length>1?Ct(t,e):tt(t[0],e)}function Up(t,e){var n,i,r;void 0===e&&(e={});var o=e.properties,a=null===(n=e.autoComplete)||void 0===n||n,l=null===(i=e.orderCoords)||void 0===i||i;if("FeatureCollection"===(null!==(r=e.mutate)&&void 0!==r&&r||(t=Qn(t)),t.type)){var p=[];return t.features.forEach(function(f){p.push(ge(qp(f,{},a,l)))}),St(p,o)}return qp(t,o,a,l)}function qp(t,e,n,i){e=e||("Feature"===t.type?t.properties:{});var r=G(t),o=r.coordinates,a=r.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(o=Vp(o)),N([o],e);case"MultiLineString":var l=[],p=0;return o.forEach(function(f){if(n&&(f=Vp(f)),i){var m=(M=(_=ze(tt(f)))[1],S=_[3],Math.abs(_[0]-_[2])*Math.abs(M-S));m>p?(l.unshift(f),p=m):l.push(f)}else l.push(f);var _,M,S}),N(l,e);default:throw new Error("geometry type "+a+" is not supported")}}function Vp(t){var e=t[0],r=t[t.length-1];return e[0]===r[0]&&e[1]===r[1]||t.push(e),t}function Og(t,e){var n,i,r,o,a,l,p;for(i=1;i<=8;i*=2){for(n=[],o=!(Ou(r=t[t.length-1],e)&i),a=0;a<t.length;a++)(p=!(Ou(l=t[a],e)&i))!==o&&n.push(gc(r,l,i,e)),p&&n.push(l),r=l,o=p;if(!(t=n).length)break}return n}function gc(t,e,n,i){return 8&n?[t[0]+(e[0]-t[0])*(i[3]-t[1])/(e[1]-t[1]),i[3]]:4&n?[t[0]+(e[0]-t[0])*(i[1]-t[1])/(e[1]-t[1]),i[1]]:2&n?[i[2],t[1]+(e[1]-t[1])*(i[2]-t[0])/(e[0]-t[0])]:1&n?[i[0],t[1]+(e[1]-t[1])*(i[0]-t[0])/(e[0]-t[0])]:null}function Ou(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function Hp(t,e){for(var n=[],i=0,r=t;i<r.length;i++){var o=Og(r[i],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}pc.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),i=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Rp*Math.atan2(o,Math.sqrt(Math.pow(i,2)+Math.pow(r,2)));return[Rp*Math.atan2(r,i),a]},pc.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var i=1/(t-1),r=0;r<t;++r){var a=this.interpolate(i*r);n.push(a)}for(var l=!1,p=0,f=e&&e.offset?e.offset:10,m=180-f,_=-180+f,b=360-f,M=1;M<n.length;++M){var k=n[M-1][0],S=n[M][0],w=Math.abs(S-k);w>b&&(S>m&&k<_||k>m&&S<_)?l=!0:w>p&&(p=w)}var R=[];if(l&&p<f){var q=[];R.push(q);for(var P=0;P<n.length;++P){var O=parseFloat(n[P][0]);if(P>0&&Math.abs(O-n[P-1][0])>b){var B=parseFloat(n[P-1][0]),F=parseFloat(n[P-1][1]),z=parseFloat(n[P][0]),Mt=parseFloat(n[P][1]);if(B>-180&&B<_&&180===z&&P+1<n.length&&n[P-1][0]>-180&&n[P-1][0]<_){q.push([-180,n[P][1]]),P++,q.push([n[P][0],n[P][1]]);continue}if(B>m&&B<180&&-180===z&&P+1<n.length&&n[P-1][0]>m&&n[P-1][0]<180){q.push([180,n[P][1]]),P++,q.push([n[P][0],n[P][1]]);continue}if(B<_&&z>m){var lt=B;B=z,z=lt;var Pt=F;F=Mt,Mt=Pt}if(B>m&&z<_&&(z+=360),B<=180&&z>=180&&B<z){var ct=(180-B)/(z-B),Dt=ct*Mt+(1-ct)*F;q.push([n[P-1][0]>m?180:-180,Dt]),(q=[]).push([n[P-1][0]>m?-180:180,Dt]),R.push(q)}else R.push(q=[]);q.push([O,n[P][1]])}else q.push([n[P][0],n[P][1]])}}else{var yt=[];R.push(yt);for(var gt=0;gt<n.length;++gt)yt.push([n[gt][0],n[gt][1]])}for(var pt=new cc(this.properties),It=0;It<R.length;++It){var Lt=new Np;pt.geometries.push(Lt);for(var Ot=R[It],$=0;$<Ot.length;++$)Lt.move_to(Ot[$])}return pt};var Zp=Mi(function(t,e){function n(i){var r=[];for(var o in i)r.push(o);return r}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Yp=Mi(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(o){return"[object Arguments]"==Object.prototype.toString.call(o)}function r(o){return o&&"object"==typeof o&&"number"==typeof o.length&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r}),Ru=Mi(function(t){var e=Array.prototype.slice,n=t.exports=function(o,a,l){return l||(l={}),o===a||(o instanceof Date&&a instanceof Date?o.getTime()===a.getTime():!o||!a||"object"!=typeof o&&"object"!=typeof a?l.strict?o===a:o==a:function(p,f,m){var _,b;if(i(p)||i(f)||p.prototype!==f.prototype)return!1;if(Yp(p))return!!Yp(f)&&(p=e.call(p),f=e.call(f),n(p,f,m));if(r(p)){if(!r(f)||p.length!==f.length)return!1;for(_=0;_<p.length;_++)if(p[_]!==f[_])return!1;return!0}try{var M=Zp(p),k=Zp(f)}catch{return!1}if(M.length!=k.length)return!1;for(M.sort(),k.sort(),_=M.length-1;_>=0;_--)if(M[_]!=k[_])return!1;for(_=M.length-1;_>=0;_--)if(!n(p[b=M[_]],f[b],m))return!1;return typeof p==typeof f}(o,a,l))};function i(o){return null==o}function r(o){return!(!o||"object"!=typeof o||"number"!=typeof o.length||"function"!=typeof o.copy||"function"!=typeof o.slice||o.length>0&&"number"!=typeof o[0])}});function Xp(t,e,n){if(void 0===n&&(n={}),!Ft(n=n||{}))throw new Error("options is invalid");var i,r=n.tolerance||0,o=[],a=_l(),l=sa(t);return a.load(l),Ki(e,function(p){var f=!1;p&&(se(a.search(p),function(m){if(!1===f){var _=ge(p).sort(),b=ge(m).sort();Ru(_,b)||(0===r?Jr(_[0],m)&&Jr(_[1],m):ua(m,_[0]).properties.dist<=r&&ua(m,_[1]).properties.dist<=r)?(f=!0,i=i?Wp(i,p):p):(0===r?Jr(b[0],p)&&Jr(b[1],p):ua(p,b[0]).properties.dist<=r&&ua(p,b[1]).properties.dist<=r)&&(i=i?Wp(i,m):m)}}),!1===f&&i&&(o.push(i),i=void 0))}),i&&o.push(i),Et(o)}function Wp(t,e){var n=ge(e),i=ge(t),r=i[0],o=i[i.length-1],a=t.geometry.coordinates;return Ru(n[0],r)?a.unshift(n[1]):Ru(n[0],o)?a.push(n[1]):Ru(n[1],r)?a.unshift(n[0]):Ru(n[1],o)&&a.push(n[0]),t}function Kp(t){var e=t%360;return e<0&&(e+=360),e}function lu(t,e,n){var i;return void 0===n&&(n={}),(i=n.final?Jp(Ze(e),Ze(t)):Jp(Ze(t),Ze(e)))>180?-(360-i):i}function Jp(t,e){var n=Ut(t[1]),i=Ut(e[1]),r=Ut(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(zt(Math.atan2(r,o))+360)%360}function Nu(t,e,n,i){void 0===i&&(i={});var r=e<0,o=Gt(Math.abs(e),i.units,"meters");r&&(o=-Math.abs(o));var a=Ze(t),l=function(p,f,m,_){var b=f/(_=void 0===_?he:Number(_)),M=p[0]*Math.PI/180,k=Ut(p[1]),S=Ut(m),w=b*Math.cos(S),R=k+w;Math.abs(R)>Math.PI/2&&(R=R>0?Math.PI-R:-Math.PI-R);var q=Math.log(Math.tan(R/2+Math.PI/4)/Math.tan(k/2+Math.PI/4)),P=Math.abs(q)>1e-11?w/q:Math.cos(k);return[(180*(M+b*Math.sin(S)/P)/Math.PI+540)%360-180,180*R/Math.PI]}(a,o,n);return l[0]+=l[0]-a[0]>180?-360:a[0]-l[0]>180?360:0,I(l,i.properties)}function Qp(t,e,n,i,r,o){for(var a=0;a<t.length;a++){var l=t[a],p=t[a+1];a===t.length-1&&(p=t[0]),i=bl(l,p,e),n<=0&&i>0?bl(e,l,r)<0||(r=l):n>0&&i<=0&&(Rg(e,l,o)||(o=l)),n=i}return[r,o]}function Rg(t,e,n){return bl(t,e,n)>0}function bl(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function dh(t){for(var e,n,i=ge(t),r=0,o=1;o<i.length;)e=n||i[0],r+=((n=i[o])[0]-e[0])*(n[1]+e[1]),o++;return r>0}function gh(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return we(t,function(n){gh(n,e)}),t;case"LineString":return $p(ge(t),e),t;case"Polygon":return tf(ge(t),e),t;case"MultiLineString":return ge(t).forEach(function(n){$p(n,e)}),t;case"MultiPolygon":return ge(t).forEach(function(n){tf(n,e)}),t;case"Point":case"MultiPoint":return t}}function $p(t,e){dh(t)===e&&t.reverse()}function tf(t,e){dh(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)dh(t[n])===e&&t[n].reverse()}var ef={successCallback:null,verbose:!1,polygons:!1},hu={};function Ag(t,e,n,i){i=i||{};for(var r=Object.keys(ef),o=0;o<r.length;o++){var a=r[o],l=i[a];hu[a]=l=l??ef[a]}hu.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var p,_,b,f=function(m,_,b){for(var M=m.length-1,k=m[0].length-1,S={rows:M,cols:k,cells:[]},w=_+Math.abs(b),R=0;R<M;++R){S.cells[R]=[];for(var q=0;q<k;++q){var P=0,O=m[R+1][q],B=m[R+1][q+1],F=m[R][q+1],z=m[R][q];if(!(isNaN(O)||isNaN(B)||isNaN(F)||isNaN(z))){P|=O<_?0:O>w?128:64,P|=B<_?0:B>w?32:16,P|=F<_?0:F>w?8:4;var Mt=+(P|=z<_?0:z>w?2:1),lt=0;if(17===P||18===P||33===P||34===P||38===P||68===P||72===P||98===P||102===P||132===P||136===P||137===P||152===P||153===P){var Pt=(O+B+F+z)/4;lt=Pt>w?2:Pt<_?0:1,34===P?1===lt?P=35:0===lt&&(P=136):136===P?1===lt?(P=35,lt=4):0===lt&&(P=34):17===P?1===lt?(P=155,lt=4):0===lt&&(P=153):68===P?1===lt?(P=103,lt=4):0===lt&&(P=102):153===P?1===lt&&(P=155):102===P?1===lt&&(P=103):152===P?lt<2&&(P=156,lt=1):137===P?lt<2&&(P=139,lt=1):98===P?lt<2&&(P=99,lt=1):38===P?lt<2&&(P=39,lt=1):18===P?lt>0?(P=156,lt=4):P=152:33===P?lt>0?(P=139,lt=4):P=137:72===P?lt>0?(P=99,lt=4):P=98:132===P&&(lt>0?(P=39,lt=4):P=38)}if(0!=P&&170!=P){var ct,Dt,yt,gt,pt,It,Lt,Ot;ct=Dt=yt=gt=pt=It=Lt=Ot=.5;var $=[];1===P?(yt=1-j(_,F,z),Ot=1-j(_,O,z),$.push(pe[P])):169===P?(yt=j(w,z,F),Ot=j(w,z,O),$.push(pe[P])):4===P?(It=1-j(_,B,F),gt=j(_,z,F),$.push(ne[P])):166===P?(It=j(w,F,B),gt=1-j(w,F,z),$.push(ne[P])):16===P?(pt=j(_,F,B),Dt=j(_,O,B),$.push(re[P])):154===P?(pt=1-j(w,B,F),Dt=1-j(w,B,O),$.push(re[P])):64===P?(Lt=j(_,z,O),ct=1-j(_,B,O),$.push(ke[P])):106===P?(Lt=1-j(w,O,z),ct=j(w,O,B),$.push(ke[P])):168===P?(gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),$.push(ve[P]),$.push(pe[P])):2===P?(gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),$.push(ve[P]),$.push(pe[P])):162===P?(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),$.push(ve[P]),$.push(pe[P])):8===P?(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),$.push(re[P]),$.push(ne[P])):138===P?(pt=1-j(_,B,F),It=1-j(w,B,F),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(re[P]),$.push(ne[P])):32===P?(pt=j(w,F,B),It=j(_,F,B),ct=j(_,O,B),Dt=j(w,O,B),$.push(re[P]),$.push(ne[P])):42===P?(Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B),$.push(Pe[P]),$.push(ke[P])):128===P&&(Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(Pe[P]),$.push(ke[P])),5===P?(It=1-j(_,B,F),Ot=1-j(_,O,z),$.push(ne[P])):165===P?(It=j(w,F,B),Ot=j(w,z,O),$.push(ne[P])):20===P?(gt=j(_,z,F),Dt=j(_,O,B),$.push(ve[P])):150===P?(gt=1-j(w,F,z),Dt=1-j(w,B,O),$.push(ve[P])):80===P?(pt=j(_,F,B),Lt=j(_,z,O),$.push(re[P])):90===P?(pt=1-j(w,B,F),Lt=1-j(w,O,z),$.push(re[P])):65===P?(yt=1-j(_,F,z),ct=1-j(_,B,O),$.push(pe[P])):105===P?(yt=j(w,z,F),ct=j(w,O,B),$.push(pe[P])):160===P?(pt=j(w,F,B),It=j(_,F,B),Ot=j(_,z,O),Lt=j(w,z,O),$.push(re[P]),$.push(ne[P])):10===P?(pt=1-j(_,B,F),It=1-j(w,B,F),Ot=1-j(w,O,z),Lt=1-j(_,O,z),$.push(re[P]),$.push(ne[P])):130===P?(gt=1-j(_,F,z),yt=1-j(w,F,z),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(ve[P]),$.push(pe[P])):40===P?(gt=j(w,z,F),yt=j(_,z,F),ct=j(_,O,B),Dt=j(w,O,B),$.push(ve[P]),$.push(pe[P])):101===P?(It=j(w,F,B),ct=j(w,O,B),$.push(ne[P])):69===P?(It=1-j(_,B,F),ct=1-j(_,B,O),$.push(ne[P])):149===P?(Ot=j(w,z,O),Dt=1-j(w,B,O),$.push(Pe[P])):21===P?(Ot=1-j(_,O,z),Dt=j(_,O,B),$.push(Pe[P])):86===P?(gt=1-j(w,F,z),Lt=1-j(w,O,z),$.push(ve[P])):84===P?(gt=j(_,z,F),Lt=j(_,z,O),$.push(ve[P])):89===P?(pt=1-j(w,B,F),yt=j(w,z,F),$.push(pe[P])):81===P?(pt=j(_,F,B),yt=1-j(_,F,z),$.push(pe[P])):96===P?(pt=j(w,F,B),It=j(_,F,B),Lt=j(_,z,O),ct=j(w,O,B),$.push(re[P]),$.push(ne[P])):74===P?(pt=1-j(_,B,F),It=1-j(w,B,F),Lt=1-j(w,O,z),ct=1-j(_,B,O),$.push(re[P]),$.push(ne[P])):24===P?(pt=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Dt=j(_,O,B),$.push(re[P]),$.push(pe[P])):146===P?(pt=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Dt=1-j(w,B,O),$.push(re[P]),$.push(pe[P])):6===P?(It=1-j(_,B,F),gt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),$.push(ne[P]),$.push(ve[P])):164===P?(It=j(w,F,B),gt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),$.push(ne[P]),$.push(ve[P])):129===P?(yt=1-j(_,F,z),Ot=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(pe[P]),$.push(Pe[P])):41===P?(yt=j(w,z,F),Ot=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B),$.push(pe[P]),$.push(Pe[P])):66===P?(gt=1-j(_,F,z),yt=1-j(w,F,z),Lt=1-j(w,O,z),ct=1-j(_,B,O),$.push(ve[P]),$.push(pe[P])):104===P?(gt=j(w,z,F),yt=j(_,z,F),Lt=j(_,z,O),ct=j(w,O,B),$.push(pe[P]),$.push(wn[P])):144===P?(pt=j(_,F,B),Ot=j(_,z,O),Lt=j(w,z,O),Dt=1-j(w,B,O),$.push(re[P]),$.push(ke[P])):26===P?(pt=1-j(w,B,F),Ot=1-j(w,O,z),Lt=1-j(_,O,z),Dt=j(_,O,B),$.push(re[P]),$.push(ke[P])):36===P?(It=j(w,F,B),gt=j(_,z,F),ct=j(_,O,B),Dt=j(w,O,B),$.push(ne[P]),$.push(ve[P])):134===P?(It=1-j(_,B,F),gt=1-j(w,F,z),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(ne[P]),$.push(ve[P])):9===P?(pt=1-j(_,B,F),It=1-j(w,B,F),yt=j(w,z,F),Ot=1-j(_,O,z),$.push(re[P]),$.push(ne[P])):161===P?(pt=j(w,F,B),It=j(_,F,B),yt=1-j(_,F,z),Ot=j(w,z,O),$.push(re[P]),$.push(ne[P])):37===P?(It=j(w,F,B),Ot=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B),$.push(ne[P]),$.push(Pe[P])):133===P?(It=1-j(_,B,F),Ot=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O),$.push(ne[P]),$.push(Pe[P])):148===P?(gt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),Dt=1-j(w,B,O),$.push(ve[P]),$.push(ke[P])):22===P?(gt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),Dt=j(_,O,B),$.push(ve[P]),$.push(ke[P])):82===P?(pt=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Lt=1-j(w,O,z),$.push(re[P]),$.push(pe[P])):88===P?(pt=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Lt=j(_,z,O),$.push(re[P]),$.push(pe[P])):73===P?(pt=1-j(_,B,F),It=1-j(w,B,F),yt=j(w,z,F),ct=1-j(_,B,O),$.push(re[P]),$.push(ne[P])):97===P?(pt=j(w,F,B),It=j(_,F,B),yt=1-j(_,F,z),ct=j(w,O,B),$.push(re[P]),$.push(ne[P])):145===P?(pt=j(_,F,B),yt=1-j(_,F,z),Ot=j(w,z,O),Dt=1-j(w,B,O),$.push(re[P]),$.push(Pe[P])):25===P?(pt=1-j(w,B,F),yt=j(w,z,F),Ot=1-j(_,O,z),Dt=j(_,O,B),$.push(re[P]),$.push(Pe[P])):70===P?(It=1-j(_,B,F),gt=1-j(w,F,z),Lt=1-j(w,O,z),ct=1-j(_,B,O),$.push(ne[P]),$.push(ve[P])):100===P?(It=j(w,F,B),gt=j(_,z,F),Lt=j(_,z,O),ct=j(w,O,B),$.push(ne[P]),$.push(ve[P])):34===P?(0===lt?(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)):(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)),$.push(re[P]),$.push(ne[P]),$.push(Pe[P]),$.push(ke[P])):35===P?(4===lt?(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)):(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)),$.push(re[P]),$.push(ne[P]),$.push(pe[P]),$.push(ke[P])):136===P?(0===lt?(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)):(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)),$.push(re[P]),$.push(ne[P]),$.push(Pe[P]),$.push(ke[P])):153===P?(0===lt?(pt=j(_,F,B),yt=1-j(_,F,z),Ot=1-j(_,O,z),Dt=j(_,O,B)):(pt=1-j(w,B,F),yt=j(w,z,F),Ot=j(w,z,O),Dt=1-j(w,B,O)),$.push(re[P]),$.push(pe[P])):102===P?(0===lt?(It=1-j(_,B,F),gt=j(_,z,F),Lt=j(_,z,O),ct=1-j(_,B,O)):(It=j(w,F,B),gt=1-j(w,F,z),Lt=1-j(w,O,z),ct=j(w,O,B)),$.push(ne[P]),$.push(ke[P])):155===P?(4===lt?(pt=j(_,F,B),yt=1-j(_,F,z),Ot=1-j(_,O,z),Dt=j(_,O,B)):(pt=1-j(w,B,F),yt=j(w,z,F),Ot=j(w,z,O),Dt=1-j(w,B,O)),$.push(re[P]),$.push(Pe[P])):103===P?(4===lt?(It=1-j(_,B,F),gt=j(_,z,F),Lt=j(_,z,O),ct=1-j(_,B,O)):(It=j(w,F,B),gt=1-j(w,F,z),Lt=1-j(w,O,z),ct=j(w,O,B)),$.push(ne[P]),$.push(ve[P])):152===P?(0===lt?(pt=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),Dt=j(_,O,B)):(pt=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),Dt=1-j(w,B,O)),$.push(re[P]),$.push(ve[P]),$.push(pe[P])):156===P?(4===lt?(pt=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),Dt=j(_,O,B)):(pt=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),Dt=1-j(w,B,O)),$.push(re[P]),$.push(pe[P]),$.push(ke[P])):137===P?(0===lt?(pt=j(w,F,B),It=j(_,F,B),yt=1-j(_,F,z),Ot=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)):(pt=1-j(_,B,F),It=1-j(w,B,F),yt=j(w,z,F),Ot=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)),$.push(re[P]),$.push(ne[P]),$.push(pe[P])):139===P?(4===lt?(pt=j(w,F,B),It=j(_,F,B),yt=1-j(_,F,z),Ot=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)):(pt=1-j(_,B,F),It=1-j(w,B,F),yt=j(w,z,F),Ot=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)),$.push(re[P]),$.push(ne[P]),$.push(Pe[P])):98===P?(0===lt?(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Lt=j(_,z,O),ct=1-j(_,B,O)):(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Lt=1-j(w,O,z),ct=j(w,O,B)),$.push(re[P]),$.push(ne[P]),$.push(ke[P])):99===P?(4===lt?(pt=1-j(_,B,F),It=1-j(w,B,F),gt=j(w,z,F),yt=j(_,z,F),Lt=j(_,z,O),ct=1-j(_,B,O)):(pt=j(w,F,B),It=j(_,F,B),gt=1-j(_,F,z),yt=1-j(w,F,z),Lt=1-j(w,O,z),ct=j(w,O,B)),$.push(re[P]),$.push(ne[P]),$.push(pe[P])):38===P?(0===lt?(It=1-j(_,B,F),gt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)):(It=j(w,F,B),gt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)),$.push(ne[P]),$.push(Pe[P]),$.push(ke[P])):39===P?(4===lt?(It=1-j(_,B,F),gt=j(_,z,F),Ot=j(_,z,O),Lt=j(w,z,O),ct=1-j(w,B,O),Dt=1-j(_,B,O)):(It=j(w,F,B),gt=1-j(w,F,z),Ot=1-j(w,O,z),Lt=1-j(_,O,z),ct=j(_,O,B),Dt=j(w,O,B)),$.push(ne[P]),$.push(ve[P]),$.push(ke[P])):85===P&&(pt=1,It=0,gt=1,yt=0,Ot=0,Lt=1,ct=0,Dt=1),(ct<0||ct>1||Dt<0||Dt>1||pt<0||pt>1||gt<0||gt>1||Ot<0||Ot>1||Lt<0||Lt>1)&&console.log("MarchingSquaresJS-isoBands: "+P+" "+Mt+" "+O+","+B+","+F+","+z+" "+lt+" "+ct+" "+Dt+" "+pt+" "+It+" "+gt+" "+yt+" "+Ot+" "+Lt),S.cells[R][q]={cval:P,cval_real:Mt,flipped:lt,topleft:ct,topright:Dt,righttop:pt,rightbottom:It,bottomright:gt,bottomleft:yt,leftbottom:Ot,lefttop:Lt,edges:$}}}}}return S}(t,e,n);return hu.polygons?(hu.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),_=[],b=0,f.cells.forEach(function(M,k){M.forEach(function(S,w){if(void 0!==S){var R=$t[S.cval](S);"object"==typeof R&&Ec(R)?"object"==typeof R[0]&&Ec(R[0])?"object"==typeof R[0][0]&&Ec(R[0][0])?R.forEach(function(q){q.forEach(function(P){P[0]+=w,P[1]+=k}),_[b++]=q}):(R.forEach(function(q){q[0]+=w,q[1]+=k}),_[b++]=R):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),p=_):(hu.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),p=function(m){for(var _=[],b=m.rows,M=m.cols,k=[],S=0;S<b;S++)for(var w=0;w<M;w++)if(void 0!==m.cells[S][w]&&m.cells[S][w].edges.length>0){var R=zg(m.cells[S][w]),q=null,P=w,O=S;null!==R&&k.push([R.p[0]+P,R.p[1]+O]);do{if(null===(q=Fg(m.cells[O][P],R.x,R.y,R.o)))break;if(k.push([q.p[0]+P,q.p[1]+O]),P+=q.x,R=q,(O+=q.y)<0||O>=b||P<0||P>=M||void 0===m.cells[O][P]){var B=Bg(m,P-=q.x,O-=q.y,q.x,q.y,q.o);if(null===B)break;B.path.forEach(function(F){k.push(F)}),P=B.i,O=B.j,R=B}}while(void 0!==m.cells[O][P]&&m.cells[O][P].edges.length>0);_.push(k),k=[],m.cells[S][w].edges.length>0&&w--}return _}(f)),"function"==typeof hu.successCallback&&hu.successCallback(p),p}var dr=64,rs=16,Qe=[],$e=[],tn=[],en=[],nn=[],rn=[],on=[],sn=[],an=[],un=[],ln=[],hn=[],cn=[],pn=[],fn=[],dn=[],gn=[],_n=[],mn=[],yn=[],vn=[],Ln=[],bn=[],xn=[];on[85]=un[85]=-1,sn[85]=ln[85]=0,an[85]=hn[85]=1,mn[85]=Ln[85]=1,yn[85]=bn[85]=0,vn[85]=xn[85]=1,Qe[85]=en[85]=0,$e[85]=nn[85]=-1,tn[85]=fn[85]=0,dn[85]=cn[85]=0,gn[85]=pn[85]=1,rn[85]=_n[85]=1,Ln[1]=Ln[169]=0,bn[1]=bn[169]=-1,xn[1]=xn[169]=0,cn[1]=cn[169]=-1,pn[1]=pn[169]=0,fn[1]=fn[169]=0,un[4]=un[166]=0,ln[4]=ln[166]=-1,hn[4]=hn[166]=1,dn[4]=dn[166]=1,gn[4]=gn[166]=0,_n[4]=_n[166]=0,on[16]=on[154]=0,sn[16]=sn[154]=1,an[16]=an[154]=1,en[16]=en[154]=1,nn[16]=nn[154]=0,rn[16]=rn[154]=1,mn[64]=mn[106]=0,yn[64]=yn[106]=1,vn[64]=vn[106]=0,Qe[64]=Qe[106]=-1,$e[64]=$e[106]=0,tn[64]=tn[106]=1,mn[2]=mn[168]=0,yn[2]=yn[168]=-1,vn[2]=vn[168]=1,Ln[2]=Ln[168]=0,bn[2]=bn[168]=-1,xn[2]=xn[168]=0,cn[2]=cn[168]=-1,pn[2]=pn[168]=0,fn[2]=fn[168]=0,dn[2]=dn[168]=-1,gn[2]=gn[168]=0,_n[2]=_n[168]=1,on[8]=on[162]=0,sn[8]=sn[162]=-1,an[8]=an[162]=0,un[8]=un[162]=0,ln[8]=ln[162]=-1,hn[8]=hn[162]=1,cn[8]=cn[162]=1,pn[8]=pn[162]=0,fn[8]=fn[162]=1,dn[8]=dn[162]=1,gn[8]=gn[162]=0,_n[8]=_n[162]=0,on[32]=on[138]=0,sn[32]=sn[138]=1,an[32]=an[138]=1,un[32]=un[138]=0,ln[32]=ln[138]=1,hn[32]=hn[138]=0,Qe[32]=Qe[138]=1,$e[32]=$e[138]=0,tn[32]=tn[138]=0,en[32]=en[138]=1,nn[32]=nn[138]=0,rn[32]=rn[138]=1,Ln[128]=Ln[42]=0,bn[128]=bn[42]=1,xn[128]=xn[42]=1,mn[128]=mn[42]=0,yn[128]=yn[42]=1,vn[128]=vn[42]=0,Qe[128]=Qe[42]=-1,$e[128]=$e[42]=0,tn[128]=tn[42]=1,en[128]=en[42]=-1,nn[128]=nn[42]=0,rn[128]=rn[42]=0,un[5]=un[165]=-1,ln[5]=ln[165]=0,hn[5]=hn[165]=0,Ln[5]=Ln[165]=1,bn[5]=bn[165]=0,xn[5]=xn[165]=0,dn[20]=dn[150]=0,gn[20]=gn[150]=1,_n[20]=_n[150]=1,en[20]=en[150]=0,nn[20]=nn[150]=-1,rn[20]=rn[150]=1,on[80]=on[90]=-1,sn[80]=sn[90]=0,an[80]=an[90]=1,mn[80]=mn[90]=1,yn[80]=yn[90]=0,vn[80]=vn[90]=1,cn[65]=cn[105]=0,pn[65]=pn[105]=1,fn[65]=fn[105]=0,Qe[65]=Qe[105]=0,$e[65]=$e[105]=-1,tn[65]=tn[105]=0,on[160]=on[10]=-1,sn[160]=sn[10]=0,an[160]=an[10]=1,un[160]=un[10]=-1,ln[160]=ln[10]=0,hn[160]=hn[10]=0,Ln[160]=Ln[10]=1,bn[160]=bn[10]=0,xn[160]=xn[10]=0,mn[160]=mn[10]=1,yn[160]=yn[10]=0,vn[160]=vn[10]=1,dn[130]=dn[40]=0,gn[130]=gn[40]=1,_n[130]=_n[40]=1,cn[130]=cn[40]=0,pn[130]=pn[40]=1,fn[130]=fn[40]=0,Qe[130]=Qe[40]=0,$e[130]=$e[40]=-1,tn[130]=tn[40]=0,en[130]=en[40]=0,nn[130]=nn[40]=-1,rn[130]=rn[40]=1,un[37]=un[133]=0,ln[37]=ln[133]=1,hn[37]=hn[133]=1,Ln[37]=Ln[133]=0,bn[37]=bn[133]=1,xn[37]=xn[133]=0,Qe[37]=Qe[133]=-1,$e[37]=$e[133]=0,tn[37]=tn[133]=0,en[37]=en[133]=1,nn[37]=nn[133]=0,rn[37]=rn[133]=0,dn[148]=dn[22]=-1,gn[148]=gn[22]=0,_n[148]=_n[22]=0,Ln[148]=Ln[22]=0,bn[148]=bn[22]=-1,xn[148]=xn[22]=1,mn[148]=mn[22]=0,yn[148]=yn[22]=1,vn[148]=vn[22]=1,en[148]=en[22]=-1,nn[148]=nn[22]=0,rn[148]=rn[22]=1,on[82]=on[88]=0,sn[82]=sn[88]=-1,an[82]=an[88]=1,dn[82]=dn[88]=1,gn[82]=gn[88]=0,_n[82]=_n[88]=1,cn[82]=cn[88]=-1,pn[82]=pn[88]=0,fn[82]=fn[88]=1,mn[82]=mn[88]=0,yn[82]=yn[88]=-1,vn[82]=vn[88]=0,on[73]=on[97]=0,sn[73]=sn[97]=1,an[73]=an[97]=0,un[73]=un[97]=0,ln[73]=ln[97]=-1,hn[73]=hn[97]=0,cn[73]=cn[97]=1,pn[73]=pn[97]=0,fn[73]=fn[97]=0,Qe[73]=Qe[97]=1,$e[73]=$e[97]=0,tn[73]=tn[97]=1,on[145]=on[25]=0,sn[145]=sn[25]=-1,an[145]=an[25]=0,cn[145]=cn[25]=1,pn[145]=pn[25]=0,fn[145]=fn[25]=1,Ln[145]=Ln[25]=0,bn[145]=bn[25]=1,xn[145]=xn[25]=1,en[145]=en[25]=-1,nn[145]=nn[25]=0,rn[145]=rn[25]=0,un[70]=un[100]=0,ln[70]=ln[100]=1,hn[70]=hn[100]=0,dn[70]=dn[100]=-1,gn[70]=gn[100]=0,_n[70]=_n[100]=1,mn[70]=mn[100]=0,yn[70]=yn[100]=-1,vn[70]=vn[100]=1,Qe[70]=Qe[100]=1,$e[70]=$e[100]=0,tn[70]=tn[100]=0,un[101]=un[69]=0,ln[101]=ln[69]=1,hn[101]=hn[69]=0,Qe[101]=Qe[69]=1,$e[101]=$e[69]=0,tn[101]=tn[69]=0,Ln[149]=Ln[21]=0,bn[149]=bn[21]=1,xn[149]=xn[21]=1,en[149]=en[21]=-1,nn[149]=nn[21]=0,rn[149]=rn[21]=0,dn[86]=dn[84]=-1,gn[86]=gn[84]=0,_n[86]=_n[84]=1,mn[86]=mn[84]=0,yn[86]=yn[84]=-1,vn[86]=vn[84]=1,on[89]=on[81]=0,sn[89]=sn[81]=-1,an[89]=an[81]=0,cn[89]=cn[81]=1,pn[89]=pn[81]=0,fn[89]=fn[81]=1,on[96]=on[74]=0,sn[96]=sn[74]=1,an[96]=an[74]=0,un[96]=un[74]=-1,ln[96]=ln[74]=0,hn[96]=hn[74]=1,mn[96]=mn[74]=1,yn[96]=yn[74]=0,vn[96]=vn[74]=0,Qe[96]=Qe[74]=1,$e[96]=$e[74]=0,tn[96]=tn[74]=1,on[24]=on[146]=0,sn[24]=sn[146]=-1,an[24]=an[146]=1,dn[24]=dn[146]=1,gn[24]=gn[146]=0,_n[24]=_n[146]=1,cn[24]=cn[146]=0,pn[24]=pn[146]=1,fn[24]=fn[146]=1,en[24]=en[146]=0,nn[24]=nn[146]=-1,rn[24]=rn[146]=0,un[6]=un[164]=-1,ln[6]=ln[164]=0,hn[6]=hn[164]=1,dn[6]=dn[164]=-1,gn[6]=gn[164]=0,_n[6]=_n[164]=0,Ln[6]=Ln[164]=0,bn[6]=bn[164]=-1,xn[6]=xn[164]=1,mn[6]=mn[164]=1,yn[6]=yn[164]=0,vn[6]=vn[164]=0,cn[129]=cn[41]=0,pn[129]=pn[41]=1,fn[129]=fn[41]=1,Ln[129]=Ln[41]=0,bn[129]=bn[41]=1,xn[129]=xn[41]=0,Qe[129]=Qe[41]=-1,$e[129]=$e[41]=0,tn[129]=tn[41]=0,en[129]=en[41]=0,nn[129]=nn[41]=-1,rn[129]=rn[41]=0,dn[66]=dn[104]=0,gn[66]=gn[104]=1,_n[66]=_n[104]=0,cn[66]=cn[104]=-1,pn[66]=pn[104]=0,fn[66]=fn[104]=1,mn[66]=mn[104]=0,yn[66]=yn[104]=-1,vn[66]=vn[104]=0,Qe[66]=Qe[104]=0,$e[66]=$e[104]=-1,tn[66]=tn[104]=1,on[144]=on[26]=-1,sn[144]=sn[26]=0,an[144]=an[26]=0,Ln[144]=Ln[26]=1,bn[144]=bn[26]=0,xn[144]=xn[26]=1,mn[144]=mn[26]=0,yn[144]=yn[26]=1,vn[144]=vn[26]=1,en[144]=en[26]=-1,nn[144]=nn[26]=0,rn[144]=rn[26]=1,un[36]=un[134]=0,ln[36]=ln[134]=1,hn[36]=hn[134]=1,dn[36]=dn[134]=0,gn[36]=gn[134]=1,_n[36]=_n[134]=0,Qe[36]=Qe[134]=0,$e[36]=$e[134]=-1,tn[36]=tn[134]=1,en[36]=en[134]=1,nn[36]=nn[134]=0,rn[36]=rn[134]=0,on[9]=on[161]=-1,sn[9]=sn[161]=0,an[9]=an[161]=0,un[9]=un[161]=0,ln[9]=ln[161]=-1,hn[9]=hn[161]=0,cn[9]=cn[161]=1,pn[9]=pn[161]=0,fn[9]=fn[161]=0,Ln[9]=Ln[161]=1,bn[9]=bn[161]=0,xn[9]=xn[161]=1,on[136]=0,sn[136]=1,an[136]=1,un[136]=0,ln[136]=1,hn[136]=0,dn[136]=-1,gn[136]=0,_n[136]=1,cn[136]=-1,pn[136]=0,fn[136]=0,Ln[136]=0,bn[136]=-1,xn[136]=0,mn[136]=0,yn[136]=-1,vn[136]=1,Qe[136]=1,$e[136]=0,tn[136]=0,en[136]=1,nn[136]=0,rn[136]=1,on[34]=0,sn[34]=-1,an[34]=0,un[34]=0,ln[34]=-1,hn[34]=1,dn[34]=1,gn[34]=0,_n[34]=0,cn[34]=1,pn[34]=0,fn[34]=1,Ln[34]=0,bn[34]=1,xn[34]=1,mn[34]=0,yn[34]=1,vn[34]=0,Qe[34]=-1,$e[34]=0,tn[34]=1,en[34]=-1,nn[34]=0,rn[34]=0,on[35]=0,sn[35]=1,an[35]=1,un[35]=0,ln[35]=-1,hn[35]=1,dn[35]=1,gn[35]=0,_n[35]=0,cn[35]=-1,pn[35]=0,fn[35]=0,Ln[35]=0,bn[35]=-1,xn[35]=0,mn[35]=0,yn[35]=1,vn[35]=0,Qe[35]=-1,$e[35]=0,tn[35]=1,en[35]=1,nn[35]=0,rn[35]=1,on[153]=0,sn[153]=1,an[153]=1,cn[153]=-1,pn[153]=0,fn[153]=0,Ln[153]=0,bn[153]=-1,xn[153]=0,en[153]=1,nn[153]=0,rn[153]=1,un[102]=0,ln[102]=-1,hn[102]=1,dn[102]=1,gn[102]=0,_n[102]=0,mn[102]=0,yn[102]=1,vn[102]=0,Qe[102]=-1,$e[102]=0,tn[102]=1,on[155]=0,sn[155]=-1,an[155]=0,cn[155]=1,pn[155]=0,fn[155]=1,Ln[155]=0,bn[155]=1,xn[155]=1,en[155]=-1,nn[155]=0,rn[155]=0,un[103]=0,ln[103]=1,hn[103]=0,dn[103]=-1,gn[103]=0,_n[103]=1,mn[103]=0,yn[103]=-1,vn[103]=1,Qe[103]=1,$e[103]=0,tn[103]=0,on[152]=0,sn[152]=1,an[152]=1,dn[152]=-1,gn[152]=0,_n[152]=1,cn[152]=-1,pn[152]=0,fn[152]=0,Ln[152]=0,bn[152]=-1,xn[152]=0,mn[152]=0,yn[152]=-1,vn[152]=1,en[152]=1,nn[152]=0,rn[152]=1,on[156]=0,sn[156]=-1,an[156]=1,dn[156]=1,gn[156]=0,_n[156]=1,cn[156]=-1,pn[156]=0,fn[156]=0,Ln[156]=0,bn[156]=-1,xn[156]=0,mn[156]=0,yn[156]=1,vn[156]=1,en[156]=-1,nn[156]=0,rn[156]=1,on[137]=0,sn[137]=1,an[137]=1,un[137]=0,ln[137]=1,hn[137]=0,cn[137]=-1,pn[137]=0,fn[137]=0,Ln[137]=0,bn[137]=-1,xn[137]=0,Qe[137]=1,$e[137]=0,tn[137]=0,en[137]=1,nn[137]=0,rn[137]=1,on[139]=0,sn[139]=1,an[139]=1,un[139]=0,ln[139]=-1,hn[139]=0,cn[139]=1,pn[139]=0,fn[139]=0,Ln[139]=0,bn[139]=1,xn[139]=0,Qe[139]=-1,$e[139]=0,tn[139]=0,en[139]=1,nn[139]=0,rn[139]=1,on[98]=0,sn[98]=-1,an[98]=0,un[98]=0,ln[98]=-1,hn[98]=1,dn[98]=1,gn[98]=0,_n[98]=0,cn[98]=1,pn[98]=0,fn[98]=1,mn[98]=0,yn[98]=1,vn[98]=0,Qe[98]=-1,$e[98]=0,tn[98]=1,on[99]=0,sn[99]=1,an[99]=0,un[99]=0,ln[99]=-1,hn[99]=1,dn[99]=1,gn[99]=0,_n[99]=0,cn[99]=-1,pn[99]=0,fn[99]=1,mn[99]=0,yn[99]=-1,vn[99]=0,Qe[99]=1,$e[99]=0,tn[99]=1,un[38]=0,ln[38]=-1,hn[38]=1,dn[38]=1,gn[38]=0,_n[38]=0,Ln[38]=0,bn[38]=1,xn[38]=1,mn[38]=0,yn[38]=1,vn[38]=0,Qe[38]=-1,$e[38]=0,tn[38]=1,en[38]=-1,nn[38]=0,rn[38]=0,un[39]=0,ln[39]=1,hn[39]=1,dn[39]=-1,gn[39]=0,_n[39]=0,Ln[39]=0,bn[39]=-1,xn[39]=1,mn[39]=0,yn[39]=1,vn[39]=0,Qe[39]=-1,$e[39]=0,tn[39]=1,en[39]=1,nn[39]=0,rn[39]=0;var _c=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},mc=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},yc=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},vc=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Lc=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},bc=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},xc=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},wc=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},re=[],ne=[],ve=[],pe=[],Pe=[],ke=[],wn=[],En=[];pe[1]=Pe[1]=18,pe[169]=Pe[169]=18,ve[4]=ne[4]=12,ve[166]=ne[166]=12,re[16]=En[16]=4,re[154]=En[154]=4,ke[64]=wn[64]=22,ke[106]=wn[106]=22,ve[2]=ke[2]=17,pe[2]=Pe[2]=18,ve[168]=ke[168]=17,pe[168]=Pe[168]=18,re[8]=pe[8]=9,ne[8]=ve[8]=12,re[162]=pe[162]=9,ne[162]=ve[162]=12,re[32]=En[32]=4,ne[32]=wn[32]=1,re[138]=En[138]=4,ne[138]=wn[138]=1,Pe[128]=En[128]=21,ke[128]=wn[128]=22,Pe[42]=En[42]=21,ke[42]=wn[42]=22,ne[5]=Pe[5]=14,ne[165]=Pe[165]=14,ve[20]=En[20]=6,ve[150]=En[150]=6,re[80]=ke[80]=11,re[90]=ke[90]=11,pe[65]=wn[65]=3,pe[105]=wn[105]=3,re[160]=ke[160]=11,ne[160]=Pe[160]=14,re[10]=ke[10]=11,ne[10]=Pe[10]=14,ve[130]=En[130]=6,pe[130]=wn[130]=3,ve[40]=En[40]=6,pe[40]=wn[40]=3,ne[101]=wn[101]=1,ne[69]=wn[69]=1,Pe[149]=En[149]=21,Pe[21]=En[21]=21,ve[86]=ke[86]=17,ve[84]=ke[84]=17,re[89]=pe[89]=9,re[81]=pe[81]=9,re[96]=wn[96]=0,ne[96]=ke[96]=15,re[74]=wn[74]=0,ne[74]=ke[74]=15,re[24]=ve[24]=8,pe[24]=En[24]=7,re[146]=ve[146]=8,pe[146]=En[146]=7,ne[6]=ke[6]=15,ve[6]=Pe[6]=16,ne[164]=ke[164]=15,ve[164]=Pe[164]=16,pe[129]=En[129]=7,Pe[129]=wn[129]=20,pe[41]=En[41]=7,Pe[41]=wn[41]=20,ve[66]=wn[66]=2,pe[66]=ke[66]=19,ve[104]=wn[104]=2,pe[104]=ke[104]=19,re[144]=Pe[144]=10,ke[144]=En[144]=23,re[26]=Pe[26]=10,ke[26]=En[26]=23,ne[36]=En[36]=5,ve[36]=wn[36]=2,ne[134]=En[134]=5,ve[134]=wn[134]=2,re[9]=Pe[9]=10,ne[9]=pe[9]=13,re[161]=Pe[161]=10,ne[161]=pe[161]=13,ne[37]=En[37]=5,Pe[37]=wn[37]=20,ne[133]=En[133]=5,Pe[133]=wn[133]=20,ve[148]=Pe[148]=16,ke[148]=En[148]=23,ve[22]=Pe[22]=16,ke[22]=En[22]=23,re[82]=ve[82]=8,pe[82]=ke[82]=19,re[88]=ve[88]=8,pe[88]=ke[88]=19,re[73]=wn[73]=0,ne[73]=pe[73]=13,re[97]=wn[97]=0,ne[97]=pe[97]=13,re[145]=pe[145]=9,Pe[145]=En[145]=21,re[25]=pe[25]=9,Pe[25]=En[25]=21,ne[70]=wn[70]=1,ve[70]=ke[70]=17,ne[100]=wn[100]=1,ve[100]=ke[100]=17,re[34]=pe[34]=9,ne[34]=ve[34]=12,Pe[34]=En[34]=21,ke[34]=wn[34]=22,re[136]=En[136]=4,ne[136]=wn[136]=1,ve[136]=ke[136]=17,pe[136]=Pe[136]=18,re[35]=En[35]=4,ne[35]=ve[35]=12,pe[35]=Pe[35]=18,ke[35]=wn[35]=22,re[153]=En[153]=4,pe[153]=Pe[153]=18,ne[102]=ve[102]=12,ke[102]=wn[102]=22,re[155]=pe[155]=9,Pe[155]=En[155]=23,ne[103]=wn[103]=1,ve[103]=ke[103]=17,re[152]=En[152]=4,ve[152]=ke[152]=17,pe[152]=Pe[152]=18,re[156]=ve[156]=8,pe[156]=Pe[156]=18,ke[156]=En[156]=23,re[137]=En[137]=4,ne[137]=wn[137]=1,pe[137]=Pe[137]=18,re[139]=En[139]=4,ne[139]=pe[139]=13,Pe[139]=wn[139]=20,re[98]=pe[98]=9,ne[98]=ve[98]=12,ke[98]=wn[98]=22,re[99]=wn[99]=0,ne[99]=ve[99]=12,pe[99]=ke[99]=19,ne[38]=ve[38]=12,Pe[38]=En[38]=21,ke[38]=wn[38]=22,ne[39]=En[39]=5,ve[39]=Pe[39]=16,ke[39]=wn[39]=22;var $t=[];function j(t,e,n){return(t-e)/(n-e)}function Ec(t){return t.constructor.toString().indexOf("Array")>-1}function Bg(t,e,n,i,r,o){for(var a=t.cells[n][e],l=a.cval_real,p=e+i,f=n+r,m=[],_=!1;!_;){if(void 0===t.cells[f]||void 0===t.cells[f][p])if(l=(a=t.cells[f-=r][p-=i]).cval_real,-1===r)if(0===o)if(1&l)m.push([p,f]),i=-1,r=0,o=0;else{if(!(4&l)){m.push([p+a.bottomright,f]),i=0,r=1,o=1,_=!0;break}m.push([p+1,f]),i=1,r=0,o=0}else{if(!(1&l)){if(4&l){m.push([p+a.bottomright,f]),i=0,r=1,o=1,_=!0;break}m.push([p+a.bottomleft,f]),i=0,r=1,o=0,_=!0;break}m.push([p,f]),i=-1,r=0,o=0}else if(1===r)if(0===o){if(!(l&rs)){if(l&dr){m.push([p+a.topleft,f+1]),i=0,r=-1,o=0,_=!0;break}m.push([p+a.topright,f+1]),i=0,r=-1,o=1,_=!0;break}m.push([p+1,f+1]),i=1,r=0,o=1}else m.push([p+1,f+1]),i=1,r=0,o=1;else if(-1===i)if(0===o){if(!(l&dr)){if(1&l){m.push([p,f+a.leftbottom]),i=1,r=0,o=0,_=!0;break}m.push([p,f+a.lefttop]),i=1,r=0,o=1,_=!0;break}m.push([p,f+1]),i=0,r=1,o=0}else{if(!(l&dr)){console.log("MarchingSquaresJS-isoBands: wtf");break}m.push([p,f+1]),i=0,r=1,o=0}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&l)){m.push([p+1,f+a.rightbottom]),i=-1,r=0,o=0,_=!0;break}m.push([p+1,f]),i=0,r=-1,o=1}else{if(!(4&l)){if(l&rs){m.push([p+1,f+a.righttop]),i=-1,r=0,o=1;break}m.push([p+1,f+a.rightbottom]),i=-1,r=0,o=0,_=!0;break}m.push([p+1,f]),i=0,r=-1,o=1}}else if(l=(a=t.cells[f][p]).cval_real,-1===i)if(0===o)if(void 0!==t.cells[f-1]&&void 0!==t.cells[f-1][p])i=0,r=-1,o=1;else{if(!(1&l)){m.push([p+a.bottomright,f]),i=0,r=1,o=1,_=!0;break}m.push([p,f])}else{if(!(l&dr)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+p+","+f);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===i){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[f+1]&&void 0!==t.cells[f+1][p])i=0,r=1,o=0;else{if(!(l&rs)){m.push([p+a.topleft,f+1]),i=0,r=-1,o=0,_=!0;break}m.push([p+1,f+1]),i=1,r=0,o=1}}else if(-1===r){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[f][p+1])i=1,r=0,o=1;else{if(!(4&l)){m.push([p+1,f+a.righttop]),i=-1,r=0,o=1,_=!0;break}m.push([p+1,f]),i=0,r=-1,o=1}}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[f][p-1])i=-1,r=0,o=0;else{if(!(l&dr)){m.push([p,f+a.leftbottom]),i=1,r=0,o=0,_=!0;break}m.push([p,f+1]),i=0,r=1,o=0}}if(f+=r,(p+=i)===e&&f===n)break}return{path:m,i:p,j:f,x:i,y:r,o}}function zg(t){if(t.edges.length>0){var n=t.cval_real;switch(t.edges[t.edges.length-1]){case 0:return n&rs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&rs?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&dr?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&dr?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&dr?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&dr?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&dr?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&rs?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&dr?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&rs?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Fg(t,e,n,i){var r,o,a,l,p,f=t.cval;switch(e){case-1:0===i?(r=ne[f],a=un[f],l=ln[f],p=hn[f]):(r=re[f],a=on[f],l=sn[f],p=an[f]);break;case 1:0===i?(r=Pe[f],a=Ln[f],l=bn[f],p=xn[f]):(r=ke[f],a=mn[f],l=yn[f],p=vn[f]);break;default:switch(n){case-1:0===i?(r=wn[f],a=Qe[f],l=$e[f],p=tn[f]):(r=En[f],a=en[f],l=nn[f],p=rn[f]);break;case 1:0===i?(r=pe[f],a=cn[f],l=pn[f],p=fn[f]):(r=ve[f],a=dn[f],l=gn[f],p=_n[f])}}if(o=t.edges.indexOf(r),void 0===t.edges[o])return null;switch(function(m,_){delete m.edges[_];for(var b=_+1;b<m.edges.length;b++)m.edges[b-1]=m.edges[b];m.edges.pop()}(t,o),f=t.cval_real,r){case 0:f&rs?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&f?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&f?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&f?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:f&rs?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&f?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&f?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&f?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&f?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&f?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&f?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:f&dr?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&f?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&f?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&f?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:f&dr?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&f?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:f&dr?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&f?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:f&dr?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:f&dr?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:f&rs?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:f&dr?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:f&rs?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==l&&void 0!==p||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+l+" "+p)),{p:[e,n],x:a,y:l,o:p}}function Gg(t){var e=[],n=[];t.forEach(function(r){var o=ac(N([r]));n.push(o),e.push({ring:r,area:o})}),n.sort(function(r,o){return o-r});var i=[];return n.forEach(function(r){for(var o=0;o<e.length;o++)if(e[o].area===r){i.push(e[o].ring),e.splice(o,1);break}}),i}function jg(t){for(var e=t.map(function(l){return{lrCoordinates:l,grouped:!1}}),n=[];!qg(e);)for(var i=0;i<e.length;i++)if(!e[i].grouped){var r=[];r.push(e[i].lrCoordinates),e[i].grouped=!0;for(var o=N([e[i].lrCoordinates]),a=i+1;a<e.length;a++)e[a].grouped||Ug(N([e[a].lrCoordinates]),o)&&(r.push(e[a].lrCoordinates),e[a].grouped=!0);n.push(r)}return n}function Ug(t,e){for(var n=oa(t),i=0;i<n.features.length;i++)if(!On(n.features[i],e))return!1;return!0}function qg(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function nf(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.pivot,r=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(i||(i=ns(t)),!1!==r&&void 0!==r||(t=Qn(t)),ce(t,function(o){var a=lu(i,o)+e,l=ph(i,o),p=ge(Nu(i,l,a));o[0]=p[0],o[1]=p[1]})),t}function rf(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.origin,r=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(i)||"object"==typeof i;return!0!==r&&(t=Qn(t)),"FeatureCollection"!==t.type||o?of(t,e,i):(se(t,function(a,l){t.features[l]=of(a,e,i)}),t)}function of(t,e,n){var i="Point"===W(t);return n=function(r,o){if(null==o&&(o="centroid"),Array.isArray(o)||"object"==typeof o)return Ze(o);var a=r.bbox?r.bbox:ze(r),l=a[0],p=a[1],f=a[2],m=a[3];switch(o){case"sw":case"southwest":case"westsouth":case"bottomleft":return I([l,p]);case"se":case"southeast":case"eastsouth":case"bottomright":return I([f,p]);case"nw":case"northwest":case"westnorth":case"topleft":return I([l,m]);case"ne":case"northeast":case"eastnorth":case"topright":return I([f,m]);case"center":return ra(r);case void 0:case null:case"centroid":return ns(r);default:throw new Error("invalid origin")}}(t,n),1===e||i||ce(t,function(r){var o=ph(n,r),a=lu(n,r),l=ge(Nu(n,o*e,a));r[0]=l[0],r[1]=l[1],3===r.length&&(r[2]*=e)}),t}function _h(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Mc(t,e){return t[0]*e[1]-e[0]*t[1]}function sf(t,e,n){var i=[],r=st(e,n),o=ge(t),a=[];return o.forEach(function(l,p){if(p!==o.length-1){var f=(b=l,M=o[p+1],k=r,S=Math.sqrt((b[0]-M[0])*(b[0]-M[0])+(b[1]-M[1])*(b[1]-M[1])),[[b[0]+k*(M[1]-b[1])/S,b[1]+k*(b[0]-M[0])/S],[M[0]+k*(M[1]-b[1])/S,M[1]+k*(b[0]-M[0])/S]]);if(i.push(f),p>0){var m=i[p-1],_=function Vg(t,e){return i=e,!(0===Mc(_h(t),_h(i)))&&function(n,i){var r,o,_,b,a=n[0],l=_h(n),p=i[0],f=_h(i),m=Mc(l,f);return function(_,b){return[_[0]+b[0],_[1]+b[1]]}(a,[(_=Mc([(r=p)[0]-(o=a)[0],r[1]-o[1]],f)/m)*(b=l)[0],_*b[1]])}(t,e);var i}(f,m);!1!==_&&(m[1]=_,f[0]=_),a.push(m[0]),p===o.length-2&&(a.push(f[0]),a.push(f[1]))}2===o.length&&(a.push(f[0]),a.push(f[1]))}var b,M,k,S}),tt(a,t.properties)}function kc(t,e,n){var a;return((a=(e[0]-t[0])*(n[1]-e[1])-(n[0]-e[0])*(e[1]-t[1]))>0)-(a<0)||+a}function af(t,e){return e.geometry.coordinates[0].every(function(n){return On(I(n),t)})}$t[1]=$t[169]=_c,$t[4]=$t[166]=mc,$t[16]=$t[154]=yc,$t[64]=$t[106]=vc,$t[168]=$t[2]=Lc,$t[162]=$t[8]=bc,$t[138]=$t[32]=xc,$t[42]=$t[128]=wc,$t[5]=$t[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},$t[20]=$t[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},$t[80]=$t[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},$t[65]=$t[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},$t[160]=$t[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},$t[130]=$t[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},$t[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},$t[101]=$t[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},$t[149]=$t[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},$t[86]=$t[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},$t[89]=$t[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},$t[96]=$t[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},$t[24]=$t[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},$t[6]=$t[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},$t[129]=$t[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},$t[66]=$t[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},$t[144]=$t[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},$t[36]=$t[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},$t[9]=$t[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},$t[37]=$t[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},$t[148]=$t[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},$t[82]=$t[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},$t[73]=$t[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},$t[145]=$t[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},$t[70]=$t[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},$t[34]=function(t){return[wc(t),bc(t)]},$t[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},$t[136]=function(t){return[xc(t),Lc(t)]},$t[153]=function(t){return[yc(t),_c(t)]},$t[102]=function(t){return[mc(t),vc(t)]},$t[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},$t[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},$t[152]=function(t){return[yc(t),Lc(t)]},$t[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},$t[137]=function(t){return[xc(t),_c(t)]},$t[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},$t[98]=function(t){return[bc(t),vc(t)]},$t[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},$t[38]=function(t){return[mc(t),wc(t)]},$t[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var uf=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(e){return e.join(",")},t.prototype.removeInnerEdge=function(e){this.innerEdges=this.innerEdges.filter(function(n){return n.from.id!==e.from.id})},t.prototype.removeOuterEdge=function(e){this.outerEdges=this.outerEdges.filter(function(n){return n.to.id!==e.to.id})},t.prototype.addOuterEdge=function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var e=this;this.outerEdgesSorted||(this.outerEdges.sort(function(n,i){var r=n.to,o=i.to;if(r.coordinates[0]-e.coordinates[0]>=0&&o.coordinates[0]-e.coordinates[0]<0)return 1;if(r.coordinates[0]-e.coordinates[0]<0&&o.coordinates[0]-e.coordinates[0]>=0)return-1;if(r.coordinates[0]-e.coordinates[0]==0&&o.coordinates[0]-e.coordinates[0]==0)return r.coordinates[1]-e.coordinates[1]>=0||o.coordinates[1]-e.coordinates[1]>=0?r.coordinates[1]-o.coordinates[1]:o.coordinates[1]-r.coordinates[1];var a=kc(e.coordinates,r.coordinates,o.coordinates);return a<0?1:a>0?-1:Math.pow(r.coordinates[0]-e.coordinates[0],2)+Math.pow(r.coordinates[1]-e.coordinates[1],2)-(Math.pow(o.coordinates[0]-e.coordinates[0],2)+Math.pow(o.coordinates[1]-e.coordinates[1],2))}),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(e){return this.sortOuterEdges(),this.outerEdges[e]},t.prototype.addInnerEdge=function(e){this.innerEdges.push(e)},t}(),Hg=function(){function t(e,n){this.from=e,this.to=n,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(e){return this.from.id===e.from.id&&this.to.id===e.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return tt([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(e){return kc(e.from.coordinates,e.to.coordinates,this.to.coordinates)},t}(),lf=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(e){this.edges.push(e),this.polygon=this.envelope=void 0},t.prototype.get=function(e){return this.edges[e]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(e){this.edges.forEach(e)},t.prototype.map=function(e){return this.edges.map(e)},t.prototype.some=function(e){return this.edges.some(e)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var e=this,n=this.edges.reduce(function(a,l,p){return l.from.coordinates[1]>e.edges[a].from.coordinates[1]&&(a=p),a},0),i=(0===n?this.length:n)-1,r=(n+1)%this.length,o=kc(this.edges[i].from.coordinates,this.edges[n].from.coordinates,this.edges[r].from.coordinates);return 0===o?this.edges[i].from.coordinates[0]>this.edges[r].from.coordinates[0]:o>0},t.prototype.toMultiPoint=function(){return dt(this.edges.map(function(e){return e.from.coordinates}))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(n){return n.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=N([e])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=ks(this.toPolygon())},t.findEdgeRingContaining=function(e,n){var i,r,o=e.getEnvelope();return n.forEach(function(a){var l,p,f,m,_,b,M=a.getEnvelope();if(r&&(i=r.getEnvelope()),p=o,f=(l=M).geometry.coordinates[0].map(function(P){return P[0]}),m=l.geometry.coordinates[0].map(function(P){return P[1]}),_=p.geometry.coordinates[0].map(function(P){return P[0]}),b=p.geometry.coordinates[0].map(function(P){return P[1]}),(Math.max.apply(null,f)!==Math.max.apply(null,_)||Math.max.apply(null,m)!==Math.max.apply(null,b)||Math.min.apply(null,f)!==Math.min.apply(null,_)||Math.min.apply(null,m)!==Math.min.apply(null,b))&&af(M,o)){for(var k=e.map(function(P){return P.from.coordinates}),S=void 0,w=function(P){a.some(function(O){return(B=P)[0]===(F=O.from.coordinates)[0]&&B[1]===F[1];var B,F})||(S=P)},R=0,q=k;R<q.length;R++)w(q[R]);S&&a.inside(I(S))&&(r&&!af(i,M)||(r=a))}}),r},t.prototype.inside=function(e){return On(e,this.toPolygon())},t}(),Zg=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(i){if(!i)throw new Error("No geojson passed");if("FeatureCollection"!==i.type&&"GeometryCollection"!==i.type&&"MultiLineString"!==i.type&&"LineString"!==i.type&&"Feature"!==i.type)throw new Error("Invalid input type '"+i.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return Dn(e,function(i){nt(i,"LineString","Graph::fromGeoJson"),ie(i,function(r,o){if(r){var a=n.getNode(r),l=n.getNode(o);n.addEdge(a,l)}return o})}),n},t.prototype.getNode=function(e){var n=uf.buildId(e),i=this.nodes[n];return i||(i=this.nodes[n]=new uf(e)),i},t.prototype.addEdge=function(e,n){var i=new Hg(e,n),r=i.getSymetric();this.edges.push(i),this.edges.push(r)},t.prototype.deleteDangles=function(){var e=this;Object.keys(this.nodes).map(function(n){return e.nodes[n]}).forEach(function(n){return e._removeIfDangle(n)})},t.prototype._removeIfDangle=function(e){var n=this;if(e.innerEdges.length<=1){var i=e.getOuterEdges().map(function(r){return r.to});this.removeNode(e),i.forEach(function(r){return n._removeIfDangle(r)})}},t.prototype.deleteCutEdges=function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(n){n.label===n.symetric.label&&(e.removeEdge(n.symetric),e.removeEdge(n))})},t.prototype._computeNextCWEdges=function(e){var n=this;void 0===e?Object.keys(this.nodes).forEach(function(i){return n._computeNextCWEdges(n.nodes[i])}):e.getOuterEdges().forEach(function(i,r){e.getOuterEdge((0===r?e.getOuterEdges().length:r)-1).symetric.next=i})},t.prototype._computeNextCCWEdges=function(e,n){for(var i,r,o=e.getOuterEdges(),a=o.length-1;a>=0;--a){var l=o[a],p=l.symetric,f=void 0,m=void 0;l.label===n&&(f=l),p.label===n&&(m=p),f&&m&&(m&&(r=m),f&&(r&&(r.next=f,r=void 0),i||(i=f)))}r&&(r.next=i)},t.prototype._findLabeledEdgeRings=function(){var e=[],n=0;return this.edges.forEach(function(i){if(!(i.label>=0)){e.push(i);var r=i;do{r.label=n,r=r.next}while(!i.isEqual(r));n++}}),e},t.prototype.getEdgeRings=function(){var e=this;this._computeNextCWEdges(),this.edges.forEach(function(i){i.label=void 0}),this._findLabeledEdgeRings().forEach(function(i){e._findIntersectionNodes(i).forEach(function(r){e._computeNextCCWEdges(r,i.label)})});var n=[];return this.edges.forEach(function(i){i.ring||n.push(e._findEdgeRing(i))}),n},t.prototype._findIntersectionNodes=function(e){var n=[],i=e,r=function(){var o=0;i.from.getOuterEdges().forEach(function(a){a.label===e.label&&++o}),o>1&&n.push(i.from),i=i.next};do{r()}while(!e.isEqual(i));return n},t.prototype._findEdgeRing=function(e){var n=e,i=new lf;do{i.push(n),n.ring=i,n=n.next}while(!e.isEqual(n));return i},t.prototype.removeNode=function(e){var n=this;e.getOuterEdges().forEach(function(i){return n.removeEdge(i)}),e.innerEdges.forEach(function(i){return n.removeEdge(i)}),delete this.nodes[e.id]},t.prototype.removeEdge=function(e){this.edges=this.edges.filter(function(n){return!n.isEqual(e)}),e.deleteEdge()},t}();function hf(t,e){var n=!0;return Dn(t,function(i){Dn(e,function(r){if(!1===n)return!1;n=function(o,a){switch(o.type){case"Point":switch(a.type){case"Point":return!((l=o.coordinates)[0]===(p=a.coordinates)[0]&&l[1]===p[1]);case"LineString":return!cf(a,o);case"Polygon":return!On(o,a)}break;case"LineString":switch(a.type){case"Point":return!cf(o,a);case"LineString":return!(aa(o,a).features.length>0);case"Polygon":return!pf(a,o)}break;case"Polygon":switch(a.type){case"Point":return!On(a,o);case"LineString":return!pf(o,a);case"Polygon":return!function(f,m){for(var _=0,b=f.coordinates[0];_<b.length;_++)if(On(b[_],m))return!0;for(var M=0,k=m.coordinates[0];M<k.length;M++)if(On(k[M],f))return!0;return aa(Ll(f),Ll(m)).features.length>0}(a,o)}}var l,p;return!1}(i.geometry,r.geometry)})}),n}function cf(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Yg(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function pf(t,e){for(var n=0,i=e.coordinates;n<i.length;n++)if(On(i[n],t))return!0;return aa(e,Ll(t)).features.length>0}function Yg(t,e,n){var o=e[0]-t[0],a=e[1]-t[1];return(n[0]-t[0])*a-(n[1]-t[1])*o==0&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ff(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function Pc(t,e){return t[0]===e[0]&&t[1]===e[1]}function Xg(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function df(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var a=0;a<e.coordinates.length-1;a++){var l=!0;0!==a&&a!==e.coordinates.length-2||(l=!1),mf(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],l)?n=!0:i=!0}o++}return n&&i}function gf(t,e){return aa(t,Gp(e)).features.length>0}function _f(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&(!n||!i);o++)On(I(t.coordinates[o]),e)?n=!0:i=!0;return i&&n}function mf(t,e,n,i){var a=e[0]-t[0],l=e[1]-t[1];return(n[0]-t[0])*l-(n[1]-t[1])*a==0&&(i?Math.abs(a)>=Math.abs(l)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:l>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(l)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:l>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Is=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Wg};function yf(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function vf(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Wg(t,e){return Ru(t,e,{strict:!0})}Is.prototype.compare=function(t,e){if(t.type!==e.type||!vf(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=yf(t),r=yf(e);return i.every(function(o){return this.some(function(a){return n.compare(o,a)})},r)}}return!1},Is.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Is.prototype.compareLine=function(t,e,n,i){if(!vf(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var a=this.compareCoord(r[n],o[n]);return this.direction||a?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},Is.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return i>=0&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},Is.prototype.comparePath=function(t,e){var n=this;return t.every(function(i,r){return n.compareCoord(i,this[r])},e)},Is.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every(function(o){return this.some(function(a){return r.compareLine(o,a,1,!0)})},i)}return!1},Is.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Is.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Is.prototype.removePseudo=function(t){return t};var Lf=Is;function bf(t,e){var n=!1;return Dn(t,function(i){Dn(e,function(r){if(!0===n)return!0;n=!hf(i.geometry,r.geometry)})}),n}var Kg=Mi(function(t){function e(n,i,r,o){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(n,i,r,o)}e.prototype.run=function(n,i,r,o){this._init(n,i,r,o);for(var a=0;a<this._datasetLength;a++)if(1!==this._visited[a]){this._visited[a]=1;var l=this._regionQuery(a);if(l.length<this.minPts)this.noise.push(a);else{var p=this.clusters.length;this.clusters.push([]),this._addToCluster(a,p),this._expandCluster(p,l)}}return this.clusters},e.prototype._init=function(n,i,r,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this.noise=[],this._datasetLength=n.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}i&&(this.epsilon=i),r&&(this.minPts=r),o&&(this.distance=o)},e.prototype._expandCluster=function(n,i){for(var r=0;r<i.length;r++){var o=i[r];if(1!==this._visited[o]){this._visited[o]=1;var a=this._regionQuery(o);a.length>=this.minPts&&(i=this._mergeArrays(i,a))}1!==this._assigned[o]&&this._addToCluster(o,n)}},e.prototype._addToCluster=function(n,i){this.clusters[i].push(n),this._assigned[n]=1},e.prototype._regionQuery=function(n){for(var i=[],r=0;r<this._datasetLength;r++)this.distance(this.dataset[n],this.dataset[r])<this.epsilon&&i.push(r);return i},e.prototype._mergeArrays=function(n,i){for(var r=i.length,o=0;o<r;o++){var a=i[o];n.indexOf(a)<0&&n.push(a)}return n},e.prototype._euclideanDistance=function(n,i){for(var r=0,o=Math.min(n.length,i.length);o--;)r+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(r)},t.exports&&(t.exports=e)}),Jg=Mi(function(t){function e(n,i,r){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(n,i,r)}e.prototype.init=function(n,i,r){this.assignments=[],this.centroids=[],void 0!==n&&(this.dataset=n),void 0!==i&&(this.k=i),void 0!==r&&(this.distance=r)},e.prototype.run=function(n,i){this.init(n,i);for(var r=this.dataset.length,o=0;o<this.k;o++)this.centroids[o]=this.randomCentroid();for(var a=!0;a;){a=this.assign();for(var l=0;l<this.k;l++){for(var p=new Array(b),f=0,m=0;m<b;m++)p[m]=0;for(var _=0;_<r;_++){var b=this.dataset[_].length;if(l===this.assignments[_]){for(m=0;m<b;m++)p[m]+=this.dataset[_][m];f++}}if(f>0){for(m=0;m<b;m++)p[m]/=f;this.centroids[l]=p}else this.centroids[l]=this.randomCentroid(),a=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var n,i,r=this.dataset.length-1;do{i=Math.round(Math.random()*r),n=this.dataset[i]}while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var n,i=!1,r=this.dataset.length,o=0;o<r;o++)(n=this.argmin(this.dataset[o],this.centroids,this.distance))!=this.assignments[o]&&(this.assignments[o]=n,i=!0);return i},e.prototype.getClusters=function(){for(var n,i=new Array(this.k),r=0;r<this.assignments.length;r++)void 0===i[n=this.assignments[r]]&&(i[n]=[]),i[n].push(r);return i},e.prototype.argmin=function(n,i,r){for(var o,a=Number.MAX_VALUE,l=0,p=i.length,f=0;f<p;f++)(o=r(n,i[f]))<a&&(a=o,l=f);return l},e.prototype.distance=function(n,i){for(var r=0,o=Math.min(n.length,i.length);o--;){var a=n[o]-i[o];r+=a*a}return Math.sqrt(r)},t.exports&&(t.exports=e)}),xf=Mi(function(t){function e(n,i,r){this._queue=[],this._priorities=[],this._sorting="desc",this._init(n,i,r)}e.prototype.insert=function(n,i){for(var r=this._queue.length,o=r;o--;){var a=this._priorities[o];"desc"===this._sorting?i>a&&(r=o):i<a&&(r=o)}this._insertAt(n,i,r)},e.prototype.remove=function(n){for(var i=this._queue.length;i--;)if(n===this._queue[i]){this._queue.splice(i,1),this._priorities.splice(i,1);break}},e.prototype.forEach=function(n){this._queue.forEach(n)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(n){return this._priorities[n]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var n=[],i=0,r=this._queue.length;i<r;i++)n.push([this._queue[i],this._priorities[i]]);return n},e.prototype._init=function(n,i,r){if(n&&i){if(this._queue=[],this._priorities=[],n.length!==i.length)throw new Error("Arrays must have the same length");for(var o=0;o<n.length;o++)this.insert(n[o],i[o])}r&&(this._sorting=r)},e.prototype._insertAt=function(n,i,r){this._queue.length===r?(this._queue.push(n),this._priorities.push(i)):(this._queue.splice(r,0,n),this._priorities.splice(r,0,i))},t.exports&&(t.exports=e)}),Qg=Mi(function(t){if(t.exports)var e=xf;function n(i,r,o,a){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(i,r,o,a)}n.prototype.run=function(i,r,o,a){this._init(i,r,o,a);for(var l=0,p=this.dataset.length;l<p;l++)if(1!==this._processed[l]){this._processed[l]=1,this.clusters.push([l]);var f=this.clusters.length-1;this._orderedList.push(l);var m=new e(null,null,"asc"),_=this._regionQuery(l);void 0!==this._distanceToCore(l)&&(this._updateQueue(l,_,m),this._expandCluster(f,m))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var i=[],r=0,o=this._orderedList.length;r<o;r++){var a=this._orderedList[r];i.push([a,this._reachability[a]])}return i},n.prototype._init=function(i,r,o,a){if(i){if(!(i instanceof Array))throw Error("Dataset must be of type array, "+typeof i+" given");this.dataset=i,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}r&&(this.epsilon=r),o&&(this.minPts=o),a&&(this.distance=a)},n.prototype._updateQueue=function(i,r,o){var a=this;this._coreDistance=this._distanceToCore(i),r.forEach(function(l){if(void 0===a._processed[l]){var p=a.distance(a.dataset[i],a.dataset[l]),f=Math.max(a._coreDistance,p);void 0===a._reachability[l]?(a._reachability[l]=f,o.insert(l,f)):f<a._reachability[l]&&(a._reachability[l]=f,o.remove(l),o.insert(l,f))}})},n.prototype._expandCluster=function(i,r){for(var o=r.getElements(),a=0,l=o.length;a<l;a++){var p=o[a];if(void 0===this._processed[p]){var f=this._regionQuery(p);this._processed[p]=1,this.clusters[i].push(p),this._orderedList.push(p),void 0!==this._distanceToCore(p)&&(this._updateQueue(p,f,r),this._expandCluster(i,r))}}},n.prototype._distanceToCore=function(i){for(var r=this.epsilon,o=0;o<r;o++)if(this._regionQuery(i,o).length>=this.minPts)return o},n.prototype._regionQuery=function(i,r){r=r||this.epsilon;for(var o=[],a=0,l=this.dataset.length;a<l;a++)this.distance(this.dataset[i],this.dataset[a])<r&&o.push(a);return o},n.prototype._euclideanDistance=function(i,r){for(var o=0,a=Math.min(i.length,r.length);a--;)o+=(i[a]-r[a])*(i[a]-r[a]);return Math.sqrt(o)},t.exports&&(t.exports=n)}),$g=Mi(function(t){t.exports&&(t.exports={DBSCAN:Kg,KMEANS:Jg,OPTICS:Qg,PriorityQueue:xf})}),wf=function(t,e,n){for(var i=t.length,r=0,o=0;o<i;o++){var a=(t[o]||0)-(e[o]||0);r+=a*a}return n?Math.sqrt(r):r},t_=wf,e_=function(t,e,n){var i=Math.abs(t-e);return n?i:i*i},n_=wf;function Ef(t,e,n){n=n||[];for(var i=0;i<t;i++)n[i]=e;return n}function s_(t,e){return mt(lu(t[0],t[1]))===mt(lu(e[0],e[1]))}function Mf(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function kf(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var mh={search:function(t,e,n,i){t.cleanDirty();var r=(i=i||{}).heuristic||mh.heuristics.manhattan,o=i.closest||!1,a=new Pf(function(S){return S.f}),l=e;for(e.h=r(e,n),a.push(e);a.size()>0;){var p=a.pop();if(p===n)return kf(p);p.closed=!0;for(var f=t.neighbors(p),m=0,_=f.length;m<_;++m){var b=f[m];if(!b.closed&&!b.isWall()){var M=p.g+b.getCost(p),k=b.visited;(!k||M<b.g)&&(b.visited=!0,b.parent=p,b.h=b.h||r(b,n),b.g=M,b.f=b.g+b.h,t.markDirty(b),o&&(b.h<l.h||b.h===l.h&&b.g<l.g)&&(l=b),k?a.rescoreElement(b):a.push(b))}}}return o?kf(l):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),i=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(i+r)+(n-2)*Math.min(i,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function Au(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var i=0,r=t[n];i<r.length;i++){var o=new yh(n,i,r[i]);this.grid[n][i]=o,this.nodes.push(o)}}this.init()}function yh(t,e,n){this.x=t,this.y=e,this.weight=n}function Pf(t){this.content=[],this.scoreFunction=t}function a_(t,e){for(var n=0;n<e.features.length;n++)if(On(t,e.features[n]))return!0;return!1}function Cf(t){return function(){return t}}function u_(t){return t[0]}function l_(t){return t[1]}function vh(){this._=null}function Lh(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function xl(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function wl(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Sf(t){for(;t.L;)t=t.L;return t}function El(t,e,n,i){var r=[null,null],o=Mr.push(r)-1;return r.left=t,r.right=e,n&&bh(r,t,e,n),i&&bh(r,e,t,i),ho[t.index].halfedges.push(o),ho[e.index].halfedges.push(o),r}function Ml(t,e,n){var i=[e,n];return i.left=t,i}function bh(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function h_(t,e,n,i,r){var o,a=t[0],l=t[1],p=a[0],f=a[1],m=0,_=1,b=l[0]-p,M=l[1]-f;if(o=e-p,b||!(o>0)){if(o/=b,b<0){if(o<m)return;o<_&&(_=o)}else if(b>0){if(o>_)return;o>m&&(m=o)}if(o=i-p,b||!(o<0)){if(o/=b,b<0){if(o>_)return;o>m&&(m=o)}else if(b>0){if(o<m)return;o<_&&(_=o)}if(o=n-f,M||!(o>0)){if(o/=M,M<0){if(o<m)return;o<_&&(_=o)}else if(M>0){if(o>_)return;o>m&&(m=o)}if(o=r-f,M||!(o<0)){if(o/=M,M<0){if(o>_)return;o>m&&(m=o)}else if(M>0){if(o<m)return;o<_&&(_=o)}return!(m>0||_<1)||(m>0&&(t[0]=[p+m*b,f+m*M]),_<1&&(t[1]=[p+_*b,f+_*M]),!0)}}}}}function c_(t,e,n,i,r){var o=t[1];if(o)return!0;var a,l,p=t[0],f=t.left,m=t.right,_=f[0],b=f[1],M=m[0],k=m[1],S=(_+M)/2;if(k===b){if(S<e||S>=i)return;if(_>M){if(p){if(p[1]>=r)return}else p=[S,n];o=[S,r]}else{if(p){if(p[1]<n)return}else p=[S,r];o=[S,n]}}else if(l=(b+k)/2-(a=(_-M)/(k-b))*S,a<-1||a>1)if(_>M){if(p){if(p[1]>=r)return}else p=[(n-l)/a,n];o=[(r-l)/a,r]}else{if(p){if(p[1]<n)return}else p=[(r-l)/a,r];o=[(n-l)/a,n]}else if(b<k){if(p){if(p[0]>=i)return}else p=[e,a*e+l];o=[i,a*i+l]}else{if(p){if(p[0]<e)return}else p=[i,a*i+l];o=[e,a*e+l]}return t[0]=p,t[1]=o,!0}function p_(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function If(t,e){return e[+(e.left!==t.site)]}function f_(t,e){return e[+(e.left===t.site)]}Au.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)mh.cleanNode(this.nodes[t])},Au.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)mh.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Au.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Au.prototype.neighbors=function(t){var e=[],n=t.x,i=t.y,r=this.grid;return r[n-1]&&r[n-1][i]&&e.push(r[n-1][i]),r[n+1]&&r[n+1][i]&&e.push(r[n+1][i]),r[n]&&r[n][i-1]&&e.push(r[n][i-1]),r[n]&&r[n][i+1]&&e.push(r[n][i+1]),this.diagonal&&(r[n-1]&&r[n-1][i-1]&&e.push(r[n-1][i-1]),r[n+1]&&r[n+1][i-1]&&e.push(r[n+1][i-1]),r[n-1]&&r[n-1][i+1]&&e.push(r[n-1][i+1]),r[n+1]&&r[n+1][i+1]&&e.push(r[n+1][i+1])),e},Au.prototype.toString=function(){for(var t,e,n,i,r=[],o=this.grid,a=0,l=o.length;a<l;a++){for(t=[],n=0,i=(e=o[a]).length;n<i;n++)t.push(e[n].weight);r.push(t.join(" "))}return r.join("\n")},yh.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},yh.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},yh.prototype.isWall=function(){return 0===this.weight},Pf.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=t+1<<1,a=o-1,l=null;if(a<e&&(r=this.scoreFunction(this.content[a]))<i&&(l=a),o<e&&this.scoreFunction(this.content[o])<(null===l?i:r)&&(l=o),null===l)break;this.content[t]=this.content[l],this.content[l]=n,t=l}}},vh.prototype={constructor:vh,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Sf(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(xl(this,n),n=(t=n).U),n.C=!1,i.C=!0,wl(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(wl(this,n),n=(t=n).U),n.C=!1,i.C=!0,xl(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Sf(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(r=n.U,n.U=t.U,r.L=t=n.R,n.R=a,a.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,xl(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,wl(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,xl(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,wl(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,xl(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,wl(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Cc,Tf=[];function d_(){Lh(this),this.x=this.y=this.arc=this.site=this.cy=null}function Bu(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],l=r[1],p=i[0]-a,f=i[1]-l,m=o[0]-a,_=o[1]-l,b=2*(p*_-f*m);if(!(b>=-v_)){var M=p*p+f*f,k=m*m+_*_,S=(_*M-f*k)/b,w=(p*k-m*M)/b,R=Tf.pop()||new d_;R.arc=t,R.site=r,R.x=S+a,R.y=(R.cy=w+l)+Math.sqrt(S*S+w*w),t.circle=R;for(var q=null,P=kl._;P;)if(R.y<P.y||R.y===P.y&&R.x<=P.x){if(!P.L){q=P.P;break}P=P.L}else{if(!P.R){q=P;break}P=P.R}kl.insert(q,R),q||(Cc=R)}}}}function zu(t){var e=t.circle;e&&(e.P||(Cc=e.N),kl.remove(e),Tf.push(e),Lh(e),t.circle=null)}var Df=[];function g_(){Lh(this),this.edge=this.site=this.circle=null}function Of(t){var e=Df.pop()||new g_;return e.site=t,e}function Sc(t){zu(t),Fu.remove(t),Df.push(t),Lh(t)}function __(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,l=[t];Sc(t);for(var p=o;p.circle&&Math.abs(n-p.circle.x)<Yn&&Math.abs(i-p.circle.cy)<Yn;)o=p.P,l.unshift(p),Sc(p),p=o;l.unshift(p),zu(p);for(var f=a;f.circle&&Math.abs(n-f.circle.x)<Yn&&Math.abs(i-f.circle.cy)<Yn;)a=f.N,l.push(f),Sc(f),f=a;l.push(f),zu(f);var m,_=l.length;for(m=1;m<_;++m)bh((f=l[m]).edge,(p=l[m-1]).site,f.site,r);(f=l[_-1]).edge=El((p=l[0]).site,f.site,null,r),Bu(p),Bu(f)}function m_(t){for(var e,n,i,r,o=t[0],a=t[1],l=Fu._;l;)if((i=Rf(l,a)-o)>Yn)l=l.L;else{if(!((r=o-y_(l,a))>Yn)){i>-Yn?(e=l.P,n=l):r>-Yn?(e=l,n=l.N):e=n=l;break}if(!l.R){e=l;break}l=l.R}var B;ho[(B=t).index]={site:B,halfedges:[]};var p=Of(t);if(Fu.insert(e,p),e||n){if(e===n)return zu(e),n=Of(e.site),Fu.insert(p,n),p.edge=n.edge=El(e.site,p.site),Bu(e),void Bu(n);if(n){zu(e),zu(n);var f=e.site,m=f[0],_=f[1],b=t[0]-m,M=t[1]-_,k=n.site,S=k[0]-m,w=k[1]-_,R=2*(b*w-M*S),q=b*b+M*M,P=S*S+w*w,O=[(w*q-M*P)/R+m,(b*P-S*q)/R+_];bh(n.edge,f,k,O),p.edge=El(f,t,null,O),n.edge=El(t,k,null,O),Bu(e),Bu(n)}else p.edge=El(e.site,p.site)}}function Rf(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var l=(n=a.site)[0],p=n[1],f=p-e;if(!f)return l;var m=l-i,_=1/o-1/f,b=m/f;return _?(-b+Math.sqrt(b*b-2*_*(m*m/(-2*f)-p+f/2+r-o/2)))/_+i:(i+l)/2}function y_(t,e){var n=t.N;if(n)return Rf(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var Fu,ho,kl,Mr,Yn=1e-6,v_=1e-12;function L_(t,e){return e[1]-t[1]||e[0]-t[0]}function Ic(t,e){var n,i,r,o=t.sort(L_).pop();for(Mr=[],ho=new Array(t.length),Fu=new vh,kl=new vh;;)if(r=Cc,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(m_(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;__(r.arc)}if(function(){for(var m,_,b,M,k=0,S=ho.length;k<S;++k)if((m=ho[k])&&(M=(_=m.halfedges).length)){var w=new Array(M),R=new Array(M);for(b=0;b<M;++b)w[b]=b,R[b]=p_(m,Mr[_[b]]);for(w.sort(function(q,P){return R[P]-R[q]}),b=0;b<M;++b)R[b]=_[w[b]];for(b=0;b<M;++b)_[b]=R[b]}}(),e){var a=+e[0][0],l=+e[0][1],p=+e[1][0],f=+e[1][1];(function(m,_,b,M){for(var k,S=Mr.length;S--;)c_(k=Mr[S],m,_,b,M)&&h_(k,m,_,b,M)&&(Math.abs(k[0][0]-k[1][0])>Yn||Math.abs(k[0][1]-k[1][1])>Yn)||delete Mr[S]})(a,l,p,f),function(m,_,b,M){var k,S,w,R,q,P,O,B,F,z,Mt,lt,Pt=ho.length,ct=!0;for(k=0;k<Pt;++k)if(S=ho[k]){for(w=S.site,R=(q=S.halfedges).length;R--;)Mr[q[R]]||q.splice(R,1);for(R=0,P=q.length;R<P;)Mt=(z=f_(S,Mr[q[R]]))[0],lt=z[1],B=(O=If(S,Mr[q[++R%P]]))[0],F=O[1],(Math.abs(Mt-B)>Yn||Math.abs(lt-F)>Yn)&&(q.splice(R,0,Mr.push(Ml(w,z,Math.abs(Mt-m)<Yn&&M-lt>Yn?[m,Math.abs(B-m)<Yn?F:M]:Math.abs(lt-M)<Yn&&b-Mt>Yn?[Math.abs(F-M)<Yn?B:b,M]:Math.abs(Mt-b)<Yn&&lt-_>Yn?[b,Math.abs(B-b)<Yn?F:_]:Math.abs(lt-_)<Yn&&Mt-m>Yn?[Math.abs(F-_)<Yn?B:m,_]:null))-1),++P);P&&(ct=!1)}if(ct){var Dt,yt,gt,pt=1/0;for(k=0,ct=null;k<Pt;++k)(S=ho[k])&&(gt=(Dt=(w=S.site)[0]-m)*Dt+(yt=w[1]-_)*yt)<pt&&(pt=gt,ct=S);if(ct){var It=[m,_],Lt=[m,M],Ot=[b,M],$=[b,_];ct.halfedges.push(Mr.push(Ml(w=ct.site,It,Lt))-1,Mr.push(Ml(w,Lt,Ot))-1,Mr.push(Ml(w,Ot,$))-1,Mr.push(Ml(w,$,It))-1)}}for(k=0;k<Pt;++k)(S=ho[k])&&(S.halfedges.length||delete ho[k])}(a,l,p,f)}this.edges=Mr,this.cells=ho,Fu=kl=Mr=ho=null}function b_(t){return(t=t.slice()).push(t[0]),N([t])}function Nf(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",a=i.angle||0,l=i.pivot||t,p=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Ft(i))throw new Error("options must be an object");if(!Qt(r))throw new Error("steps must be a number");if(!Qt(a))throw new Error("angle must be a number");var f=Ze(t);if("degrees"===o)var m=Ut(a);else e=Nu(t,e,90,{units:o}),n=Nu(t,n,0,{units:o}),e=Ze(e)[0]-f[0],n=Ze(n)[1]-f[1];for(var _=[],b=0;b<r;b+=1){var M=-360*b/r,k=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Af(M),2)),S=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Af(M),2));if(M<-90&&M>=-270&&(k=-k),M<-180&&M>=-360&&(S=-S),"degrees"===o){var w=k*Math.cos(m)+S*Math.sin(m),R=S*Math.cos(m)-k*Math.sin(m);k=w,S=R}_.push([k+f[0],S+f[1]])}return _.push(_[0]),"degrees"===o?N([_],p):nf(N([_],p),a,{pivot:l})}function Af(t){var e=t*Math.PI/180;return Math.tan(e)}function Tc(t,e){void 0===e&&(e={});var n=0,i=0,r=0;return we(t,function(o,a,l){var p=e.weight?l?.[e.weight]:void 0;if(!Qt(p=p??1))throw new Error("weight value must be a number for feature index "+a);(p=Number(p))>0&&ce(o,function(f){n+=f[0]*p,i+=f[1]*p,r+=p})}),I([n/r,i/r],e.properties,e)}function Bf(t,e,n,i,r){var o=i.tolerance||.001,a=0,l=0,p=0,f=0;if(se(n,function(b){var M,S=(null===(M=b.properties)||void 0===M?void 0:M.weight)??1;if(!Qt(S=Number(S)))throw new Error("weight value must be a number");if(S>0){f+=1;var w=S*Ke(b,t);0===w&&(w=1);var R=S/w;a+=b.geometry.coordinates[0]*R,l+=b.geometry.coordinates[1]*R,p+=R}}),f<1)throw new Error("no features to measure");var m=a/p,_=l/p;return 1===f||0===r||Math.abs(m-e[0])<o&&Math.abs(_-e[1])<o?I([m,_],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([m,_]),Bf([m,_],t,n,i,r-1))}function zf(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function x_(t,e){var n=0,i=0;ce(t,function(r,o,a,l,p){p>n&&(n=p,i=o,e.push([]));var m=t.coordinates[p][o-i+1],_=r[0],b=r[1],M=m[0],k=m[1];e[p].push([.75*_+.25*M,.75*b+.25*k]),e[p].push([.25*_+.75*M,.25*b+.75*k])},!0),e.forEach(function(r){r.push(r[0])})}function w_(t,e){var n=0,i=0,r=0;ce(t,function(o,a,l,p,f){p>r&&(r=p,i=a,e.push([[]])),f>n&&(n=f,i=a,e[p].push([]));var _=t.coordinates[p][f][a-i+1],b=o[0],M=o[1],k=_[0],S=_[1];e[p][f].push([.75*b+.25*k,.75*M+.25*S]),e[p][f].push([.25*b+.75*k,.25*M+.75*S])},!0),e.forEach(function(o){o.forEach(function(a){a.push(a[0])})})}function E_(t,e,n){void 0===n&&(n=2);var i=Ze(t),r=Ze(e),o=i[0]-r[0],a=i[1]-r[1];return 1===n?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,n)+Math.pow(a,n),1/n)}function Ff(t,e){var n=(e=e||{}).threshold||1e4,i=e.p||2,r=e.binary||!1,o=e.alpha||-1,a=e.standardization||!1,l=[];se(t,function(M){l.push(ns(M))});for(var p=[],f=0;f<l.length;f++)p[f]=[];for(f=0;f<l.length;f++)for(var m=f;m<l.length;m++){f===m&&(p[f][m]=0);var _=E_(l[f],l[m],i);p[f][m]=_,p[m][f]=_}for(f=0;f<l.length;f++)for(m=0;m<l.length;m++)0!==(_=p[f][m])&&(p[f][m]=r?_<=n?1:0:_<=n?Math.pow(_,o):0);if(a)for(f=0;f<l.length;f++){var b=p[f].reduce(function(M,k){return M+k},0);for(m=0;m<l.length;m++)p[f][m]=p[f][m]/b}return p}function Gf(t){for(var e=0,n=0,i=t;n<i.length;n++)e+=i[n];return e/t.length}function jf(t,e){return void 0===e&&(e={}),qf(t,"mercator",e)}function Uf(t,e){return void 0===e&&(e={}),qf(t,"wgs84",e)}function qf(t,e,n){void 0===n&&(n={});var i=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&Qt(t[0])?t="mercator"===e?Vf(t):Hf(t):(!0!==i&&(t=Qn(t)),ce(t,function(r){var o="mercator"===e?Vf(r):Hf(r);r[0]=o[0],r[1]=o[1]})),t}function Vf(t){var o,e=Math.PI/180,n=6378137,i=20037508.342789244,r=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*(o=t[0],o<0?-1:o>0?1:0))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function Hf(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}Ic.prototype={constructor:Ic,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return If(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(r=n.halfedges).length)for(var r,o,a,l,p,f,m=n.site,_=-1,b=e[r[o-1]],M=b.left===m?b.right:b.left;++_<o;)a=M,M=(b=e[r[_]]).left===m?b.right:b.left,a&&M&&i<a.index&&i<M.index&&((l=m)[0]-(f=M)[0])*((p=a)[1]-l[1])-(l[0]-p[0])*(f[1]-l[1])<0&&t.push([m.data,a.data,M.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,a=o._found||0,l=o.cells.length;!(r=o.cells[a]);)if(++a>=l)return null;var p=t-r.site[0],f=e-r.site[1],m=p*p+f*f;do{r=o.cells[i=a],a=null,r.halfedges.forEach(function(_){var b=o.edges[_],M=b.left;if(M!==r.site&&M||(M=b.right)){var k=t-M[0],S=e-M[1],w=k*k+S*S;w<m&&(m=w,a=M.index)}})}while(null!==a);return o._found=i,null==n||m<=n*n?r.site:null}};var M_=Object.freeze({__proto__:null,toMercator:jf,toWgs84:Uf});function Pl(t){return Array.isArray(t)?Kf(t):t&&t.bbox?Kf(t.bbox):[360*Wf(),180*Wf()]}function Zf(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],i=0;i<t;i++)n.push(I(Pl(e.bbox)));return Et(n)}function Yf(t,e){void 0===e&&(e={}),null==t&&(t=1),Qt(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),Qt(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],i=function(o){var a,l=[],p=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,l=o.length;a<l;a++,r++)i[r]=o[a];return i}(Array(e.num_vertices+1)).map(Math.random);p.forEach(function(f,m,_){_[m]=m>0?f+_[m-1]:f}),p.forEach(function(f){f=2*f*Math.PI/p[p.length-1];var m=Math.random();l.push([m*(e.max_radial_length||10)*Math.sin(f),m*(e.max_radial_length||10)*Math.cos(f)])}),l[l.length-1]=l[0],l=l.map((a=Pl(e.bbox),function(f){return[f[0]+a[0],f[1]+a[1]]})),n.push(N([l]))},r=0;r<t;r++)i();return Et(n)}function Xf(t,e){if(void 0===e&&(e={}),!Ft(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.num_vertices,r=e.max_length,o=e.max_rotation;null==t&&(t=1),(!Qt(i)||void 0===i||i<2)&&(i=10),Qt(r)&&void 0!==r||(r=1e-4),Qt(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],l=0;l<t;l++){for(var p=[Pl(n)],f=0;f<i-1;f++){var m=(0===f?2*Math.random()*Math.PI:Math.tan((p[f][1]-p[f-1][1])/(p[f][0]-p[f-1][0])))+(Math.random()-.5)*o*2,_=Math.random()*r;p.push([p[f][0]+_*Math.cos(m),p[f][1]+_*Math.sin(m)])}a.push(tt(p))}return Et(a)}function Wf(){return Math.random()-.5}function Kf(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var P_=Object.freeze({__proto__:null,randomPosition:Pl,randomPoint:Zf,randomPolygon:Yf,randomLineString:Xf});function Jf(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return se(t,function(i){xh(i.properties,e)&&n.push(i)}),Et(n)}function Dc(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var i=Oc(t,e),r=Object.keys(i),o=0;o<r.length;o++){for(var a=r[o],l=i[a],p=[],f=0;f<l.length;f++)p.push(t.features[l[f]]);n(Et(p),a,o)}}function Qf(t,e,n,i){var r=i;return Dc(t,e,function(o,a,l){r=0===l&&void 0===i?o:n(r,o,a,l)}),r}function Oc(t,e){var n={};return se(t,function(i,r){var o=i.properties||{};if(Object.prototype.hasOwnProperty.call(o,String(e))){var a=o[e];Object.prototype.hasOwnProperty.call(n,a)?n[a].push(r):n[a]=[r]}}),n}function xh(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(!xh(t,e[i]))return!1;return!0}return Rc(t,e)}function Rc(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i];if(t[r]!==e[r])return!1}return!0}function $f(t,e){if(!e)return{};if(!e.length)return{};for(var n={},i=0;i<e.length;i++){var r=e[i];Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}var C_=Object.freeze({__proto__:null,getCluster:Jf,clusterEach:Dc,clusterReduce:Qf,createBins:Oc,applyFilter:xh,propertiesContainsFilter:Rc,filterProperties:$f}),Oa=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function S_(t,e){return t>e?1:t<e?-1:0}function Ra(t,e,n){for(var i=new Oa(null,null),r=i,o=i;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0)||null===e.right||n(t,e.right.key)>0&&(e.right=(l=e.right).left,l.left=e,null===(e=l).right))break;r.right=e,r=e,e=e.right}}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function Nc(t,e,n,i){var r=new Oa(t,e);if(null===n)return r.left=r.right=null,r;var o=i(t,(n=Ra(t,n,i)).key);return o<0?(r.left=n.left,r.right=n,n.left=null):o>=0&&(r.right=n.right,r.left=n,n.right=null),r}function td(t,e,n){var i=null,r=null;if(e){var o=n((e=Ra(t,e,n)).key,t);0===o?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function Ac(t,e,n,i,r){if(t){i(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+r(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&Ac(t.left,o,!1,i,r),t.right&&Ac(t.right,o,!0,i,r)}}var Bc=function(){function t(e){void 0===e&&(e=S_),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=Nc(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var i=new Oa(e,n);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,o=Ra(e,this._root,r),a=r(e,o.key);return 0===a?this._root=o:(a<0?(i.left=o.left,i.right=o,o.left=null):a>0&&(i.right=o.right,i.left=o,o.right=null),this._size++,this._root=i),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,i){var r;return null===n?null:0===i(e,(n=Ra(e,n,i)).key)?(null===n.left?r=n.right:(r=Ra(e,n.left,i)).right=n.right,this._size--,r):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Ra(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,i=this._comparator;n;){var r=i(e,n.key);if(0===r)return n;n=r<0?n.left:n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=Ra(e,this._root,this._comparator),0!==this._comparator(e,this._root.key))?null:this._root},t.prototype.contains=function(e){for(var n=this._root,i=this._comparator;n;){var r=i(e,n.key);if(0===r)return!0;n=r<0?n.left:n.right}return!1},t.prototype.forEach=function(e,n){for(var i=this._root,r=[],o=!1;!o;)null!==i?(r.push(i),i=i.left):0!==r.length?(i=r.pop(),e.call(n,i),i=i.right):o=!0;return this},t.prototype.range=function(e,n,i,r){for(var o=[],a=this._comparator,l=this._root;0!==o.length||l;)if(l)o.push(l),l=l.left;else{if(a((l=o.pop()).key,n)>0)break;if(a(l.key,e)>=0&&i.call(r,l))return this;l=l.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){return e.push(n.key)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){return e.push(n.data)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,i=!1,r=0,o=[];!i;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),r===e)return n;r++,n=n.right}else i=!0;return null},t.prototype.next=function(e){var n=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var r=this._comparator;n;){var o=r(e.key,n.key);if(0===o)break;o<0?(i=n,n=n.left):n=n.right}return i},t.prototype.prev=function(e){var n=this._root,i=null;if(null!==e.left){for(i=e.left;i.right;)i=i.right;return i}for(var r=this._comparator;n;){var o=r(e.key,n.key);if(0===o)break;o<0?n=n.left:(i=n,n=n.right)}return i},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(e){for(var n=e,i=[],r=!1,o=new Oa(null,null),a=o;!r;)n?(i.push(n),n=n.left):i.length>0?n=(n=a=a.next=i.pop()).right:r=!0;return a.next=null,o.next}(this._root)},t.prototype.load=function(e,n,i){void 0===n&&(n=[]),void 0===i&&(i=!1);var r=e.length,o=this._comparator;if(i&&Gc(e,n,0,r-1,o),null===this._root)this._root=zc(e,n,0,r),this._size=r;else{var a=function(l,p,f){for(var m=new Oa(null,null),_=m,b=l,M=p;null!==b&&null!==M;)f(b.key,M.key)<0?(_.next=b,b=b.next):(_.next=M,M=M.next),_=_.next;return null!==b?_.next=b:null!==M&&(_.next=M),m.next}(this.toList(),function(l,p){for(var f=new Oa(null,null),m=f,_=0;_<l.length;_++)m=m.next=new Oa(l[_],p[_]);return m.next=null,f.next}(e,n),o);this._root=Fc({head:a},0,r=this._size+r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){void 0===e&&(e=function(i){return String(i.key)});var n=[];return Ac(this._root,"",!0,function(i){return n.push(i)},e),n.join("")},t.prototype.update=function(e,n,i){var p,f,r=this._comparator,o=td(e,this._root,r),a=o.left,l=o.right;r(e,n)<0?l=Nc(n,i,l,r):a=Nc(n,i,a,r),this._root=(p=a,null===(f=l)?p:(null===p||((f=Ra(p.key,f,r)).left=p),f))},t.prototype.split=function(e){return td(e,this._root,this._comparator)},t}();function zc(t,e,n,i){var r=i-n;if(r>0){var o=n+Math.floor(r/2),p=new Oa(t[o],e[o]);return p.left=zc(t,e,n,o),p.right=zc(t,e,o+1,i),p}return null}function Fc(t,e,n){var i=n-e;if(i>0){var r=e+Math.floor(i/2),o=Fc(t,e,r),a=t.head;return a.left=o,t.head=t.head.next,a.right=Fc(t,r+1,n),a}return null}function Gc(t,e,n,i,r){if(!(n>=i)){for(var o=t[n+i>>1],a=n-1,l=i+1;;){do{a++}while(r(t[a],o)<0);do{l--}while(r(t[l],o)>0);if(a>=l)break;var p=t[a];t[a]=t[l],t[l]=p,p=e[a],e[a]=e[l],e[l]=p}Gc(t,e,n,l,r),Gc(t,e,l+1,i,r)}}function So(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ed(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nr(t,e,n){return e&&ed(t.prototype,e),n&&ed(t,n),t}var Cl=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},jc=function(t,e){return e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y?null:{ll:{x:t.ll.x<e.ll.x?e.ll.x:t.ll.x,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:t.ur.x<e.ur.x?t.ur.x:e.ur.x,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Na=Number.EPSILON;void 0===Na&&(Na=Math.pow(2,-52));var I_=Na*Na,Uc=function(t,e){if(-Na<t&&t<Na&&-Na<e&&e<Na)return 0;var n=t-e;return n*n<I_*t*e?0:t<e?-1:1},T_=function(){function t(){So(this,t),this.reset()}return Nr(t,[{key:"reset",value:function(){this.xRounder=new nd,this.yRounder=new nd}},{key:"round",value:function(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}]),t}(),nd=function(){function t(){So(this,t),this.tree=new Bc,this.round(0)}return Nr(t,[{key:"round",value:function(e){var n=this.tree.add(e),i=this.tree.prev(n);if(null!==i&&0===Uc(n.key,i.key))return this.tree.remove(e),i.key;var r=this.tree.next(n);return null!==r&&0===Uc(n.key,r.key)?(this.tree.remove(e),r.key):e}}]),t}(),Sl=new T_,Il=function(t,e){return t.x*e.y-t.y*e.x},id=function(t,e){return t.x*e.x+t.y*e.y},rd=function(t,e,n){var o=Il({x:e.x-t.x,y:e.y-t.y},{x:n.x-t.x,y:n.y-t.y});return Uc(o,0)},wh=function(t){return Math.sqrt(id(t,t))},D_=function(t,e,n){var i={x:e.x-t.x,y:e.y-t.y},r={x:n.x-t.x,y:n.y-t.y};return id(r,i)/wh(r)/wh(i)},od=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},sd=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},Ts=function(){function t(e,n){So(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Nr(t,null,[{key:"compare",value:function(e,n){var i=t.comparePoints(e.point,n.point);return 0!==i?i:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Eh.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}}]),Nr(t,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var n=e.point.events,i=0,r=n.length;i<r;i++){var o=n[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,n=0;n<e;n++){var i=this.point.events[n];if(void 0===i.segment.consumedBy)for(var r=n+1;r<e;r++){var o=this.point.events[r];void 0===o.consumedBy&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],n=0,i=this.point.events.length;n<i;n++){var r=this.point.events[n];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(e){var n=this,i=new Map,r=function(o){var a,l,p,f,m,_=o.otherSE;i.set(o,{sine:(a=n.point,l=e.point,p=_.point,f={x:l.x-a.x,y:l.y-a.y},m={x:p.x-a.x,y:p.y-a.y},Il(m,f)/wh(m)/wh(f)),cosine:D_(n.point,e.point,_.point)})};return function(o,a){i.has(o)||r(o),i.has(a)||r(a);var l=i.get(o),p=l.sine,f=l.cosine,m=i.get(a),_=m.sine,b=m.cosine;return p>=0&&_>=0?f<b?1:f>b?-1:0:p<0&&_<0?f<b?-1:f>b?1:0:_<p?-1:_>p?1:0}}}]),t}(),O_=0,Eh=function(){function t(e,n,i,r){So(this,t),this.id=++O_,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=i,this.windings=r}return Nr(t,null,[{key:"compare",value:function(e,n){var i=e.leftSE.point.x,r=n.leftSE.point.x,o=e.rightSE.point.x,a=n.rightSE.point.x;if(a<i)return 1;if(o<r)return-1;var l=e.leftSE.point.y,p=n.leftSE.point.y,f=e.rightSE.point.y,m=n.rightSE.point.y;if(i<r){if(p<l&&p<f)return 1;if(p>l&&p>f)return-1;var _=e.comparePoint(n.leftSE.point);if(_<0)return 1;if(_>0)return-1;var b=n.comparePoint(e.rightSE.point);return 0!==b?b:-1}if(i>r){if(l<p&&l<m)return-1;if(l>p&&l>m)return 1;var M=n.comparePoint(e.leftSE.point);if(0!==M)return M;var k=e.comparePoint(n.rightSE.point);return k<0?1:k>0?-1:1}if(l<p)return-1;if(l>p)return 1;if(o<a){var S=n.comparePoint(e.rightSE.point);if(0!==S)return S}if(o>a){var w=e.comparePoint(n.rightSE.point);if(w<0)return 1;if(w>0)return-1}if(o!==a){var R=f-l,q=o-i,P=m-p,O=a-r;if(R>q&&P<O)return 1;if(R<q&&P>O)return-1}return o>a?1:o<a||f<m?-1:f>m?1:e.id<n.id?-1:e.id>n.id?1:0}}]),Nr(t,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}},{key:"comparePoint",value:function(e){if(this.isAnEndpoint(e))return 0;var n=this.leftSE.point,i=this.rightSE.point,r=this.vector();if(n.x===i.x)return e.x===n.x?0:e.x<n.x?1:-1;if(e.x===n.x+(e.y-n.y)/r.y*r.x)return 0;var p=n.y+(e.x-n.x)/r.x*r.y;return e.y===p?0:e.y<p?-1:1}},{key:"getIntersection",value:function(e){var n=this.bbox(),i=e.bbox(),r=jc(n,i);if(null===r)return null;var o=this.leftSE.point,a=this.rightSE.point,l=e.leftSE.point,p=e.rightSE.point,f=Cl(n,l)&&0===this.comparePoint(l),m=Cl(i,o)&&0===e.comparePoint(o),_=Cl(n,p)&&0===this.comparePoint(p),b=Cl(i,a)&&0===e.comparePoint(a);if(m&&f)return b&&!_?a:!b&&_?p:null;if(m)return _&&o.x===p.x&&o.y===p.y?null:o;if(f)return b&&a.x===l.x&&a.y===l.y?null:l;if(b&&_)return null;if(b)return a;if(_)return p;var M=function(k,S,w,R){if(0===S.x)return sd(w,R,k.x);if(0===R.x)return sd(k,S,w.x);if(0===S.y)return od(w,R,k.y);if(0===R.y)return od(k,S,w.y);var q=Il(S,R);if(0==q)return null;var P={x:w.x-k.x,y:w.y-k.y},O=Il(P,S)/q,B=Il(P,R)/q;return{x:(k.x+B*S.x+(w.x+O*R.x))/2,y:(k.y+B*S.y+(w.y+O*R.y))/2}}(o,this.vector(),l,e.vector());return null===M?null:Cl(r,M)?Sl.round(M.x,M.y):null}},{key:"split",value:function(e){var n=[],i=void 0!==e.events,r=new Ts(e,!0),o=new Ts(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(r);var l=new t(r,a,this.rings.slice(),this.windings.slice());return Ts.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),Ts.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(e){for(var n=this,i=e;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var r=t.compare(n,i);if(0!==r){if(r>0){var o=n;n=i,i=o}if(n.prev===i){var a=n;n=i,i=a}for(var l=0,p=i.rings.length;l<p;l++){var f=i.rings[l],m=i.windings[l],_=n.rings.indexOf(f);-1===_?(n.rings.push(f),n.windings.push(m)):n.windings[_]+=m}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this._prevInResult=this.prev?this.prev.isInResult()?this.prev:this.prev.prevInResult():null),this._prevInResult}},{key:"beforeState",value:function(){return void 0!==this._beforeState||(this._beforeState=this.prev?(this.prev.consumedBy||this.prev).afterState():{rings:[],windings:[],multiPolys:[]}),this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys,o=0,a=this.rings.length;o<a;o++){var l=this.rings[o],p=this.windings[o],f=n.indexOf(l);-1===f?(n.push(l),i.push(p)):i[f]+=p}for(var m=[],_=[],b=0,M=n.length;b<M;b++)if(0!==i[b]){var k=n[b],S=k.poly;if(-1===_.indexOf(S))if(k.isExterior)m.push(S);else{-1===_.indexOf(S)&&_.push(S);var w=m.indexOf(k.poly);-1!==w&&m.splice(w,1)}}for(var R=0,q=m.length;R<q;R++){var P=m[R].multiPoly;-1===r.indexOf(P)&&r.push(P)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(os.type){case"union":this._isInResult=0===e.length!=(0===n.length);break;case"intersection":var o,a;e.length<n.length?(o=e.length,a=n.length):(o=n.length,a=e.length),this._isInResult=a===os.numMultiPolys&&o<a;break;case"xor":var l=Math.abs(e.length-n.length);this._isInResult=l%2==1;break;case"difference":var p=function(f){return 1===f.length&&f[0].isSubject};this._isInResult=p(e)!==p(n);break;default:throw new Error("Unrecognized operation type found ".concat(os.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,i){var r,o,a,l=Ts.comparePoints(e,n);if(l<0)r=e,o=n,a=1;else{if(!(l>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=n,o=e,a=-1}return new t(new Ts(r,!0),new Ts(o,!1),[i],[a])}}]),t}(),ad=function(){function t(e,n,i){if(So(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=Sl.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,a=1,l=e.length;a<l;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var p=Sl.round(e[a][0],e[a][1]);p.x===o.x&&p.y===o.y||(this.segments.push(Eh.fromRing(o,p,this)),p.x<this.bbox.ll.x&&(this.bbox.ll.x=p.x),p.y<this.bbox.ll.y&&(this.bbox.ll.y=p.y),p.x>this.bbox.ur.x&&(this.bbox.ur.x=p.x),p.y>this.bbox.ur.y&&(this.bbox.ur.y=p.y),o=p)}r.x===o.x&&r.y===o.y||this.segments.push(Eh.fromRing(o,r,this))}return Nr(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.segments.length;n<i;n++){var r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}}]),t}(),R_=function(){function t(e,n){if(So(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ad(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new ad(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Nr(t,[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var r=this.interiorRings[n].getSweepEvents(),o=0,a=r.length;o<a;o++)e.push(r[o]);return e}}]),t}(),ud=function(){function t(e,n){if(So(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new R_(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Nr(t,[{key:"getSweepEvents",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++)for(var r=this.polys[n].getSweepEvents(),o=0,a=r.length;o<a;o++)e.push(r[o]);return e}}]),t}(),N_=function(){function t(e){So(this,t),this.events=e;for(var n=0,i=e.length;n<i;n++)e[n].segment.ringOut=this;this.poly=null}return Nr(t,null,[{key:"factory",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(o.isInResult()&&!o.ringOut){for(var a=null,l=o.leftSE,p=o.rightSE,f=[l],m=l.point,_=[];a=l,f.push(l=p),l.point!==m;)for(;;){var b=l.getAvailableLinkedEvents();if(0===b.length){var M=f[0].point,k=f[f.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(M.x,",")+" ".concat(M.y,"]. Last matching segment found ends at")+" [".concat(k.x,", ").concat(k.y,"]."))}if(1===b.length){p=b[0].otherSE;break}for(var S=null,w=0,R=_.length;w<R;w++)if(_[w].point===l.point){S=w;break}if(null===S){_.push({index:f.length,point:l.point});var q=l.getLeftmostComparator(a);p=b.sort(q)[0].otherSE;break}var P=_.splice(S)[0],O=f.splice(P.index);O.unshift(O[0].otherSE),n.push(new t(O.reverse()))}n.push(new t(f))}}return n}}]),Nr(t,[{key:"getGeom",value:function(){for(var e=this.events[0].point,n=[e],i=1,r=this.events.length-1;i<r;i++){var o=this.events[i].point;0!==rd(o,e,this.events[i+1].point)&&(n.push(o),e=o)}if(1===n.length)return null;0===rd(n[0],e,n[1])&&n.shift(),n.push(n[0]);for(var f=this.isExteriorRing()?1:-1,m=this.isExteriorRing()?0:n.length-1,_=this.isExteriorRing()?n.length:-1,b=[],M=m;M!=_;M+=f)b.push([n[M].x,n[M].y]);return b}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],n=1,i=this.events.length;n<i;n++){var r=this.events[n];Ts.compare(e,r)>0&&(e=r)}for(var o=e.segment.prevInResult(),a=o?o.prevInResult():null;;){if(!o)return null;if(!a)return o.ringOut;if(a.ringOut!==o.ringOut)return a.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=a.prevInResult(),a=o?o.prevInResult():null}}}]),t}(),ld=function(){function t(e){So(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Nr(t,[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=[this.exteriorRing.getGeom()];if(null===e[0])return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var r=this.interiorRings[n].getGeom();null!==r&&e.push(r)}return e}}]),t}(),A_=function(){function t(e){So(this,t),this.rings=e,this.polys=this._composePolys(e)}return Nr(t,[{key:"getGeom",value:function(){for(var e=[],n=0,i=this.polys.length;n<i;n++){var r=this.polys[n].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];if(!o.poly)if(o.isExteriorRing())n.push(new ld(o));else{var a=o.enclosingRing();a.poly||n.push(new ld(a)),a.poly.addInterior(o)}}return n}}]),t}(),B_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eh.compare;So(this,t),this.queue=e,this.tree=new Bc(n),this.segments=[]}return Nr(t,[{key:"process",value:function(e){var n=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),i;var r=e.isLeft?this.tree.insert(n):this.tree.find(n);if(!r)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=r,a=r,l=void 0,p=void 0;void 0===l;)null===(o=this.tree.prev(o))?l=null:void 0===o.key.consumedBy&&(l=o.key);for(;void 0===p;)null===(a=this.tree.next(a))?p=null:void 0===a.key.consumedBy&&(p=a.key);if(e.isLeft){var f=null;if(l){var m=l.getIntersection(n);if(null!==m&&(n.isAnEndpoint(m)||(f=m),!l.isAnEndpoint(m)))for(var _=this._splitSafely(l,m),b=0,M=_.length;b<M;b++)i.push(_[b])}var k=null;if(p){var S=p.getIntersection(n);if(null!==S&&(n.isAnEndpoint(S)||(k=S),!p.isAnEndpoint(S)))for(var w=this._splitSafely(p,S),R=0,q=w.length;R<q;R++)i.push(w[R])}if(null!==f||null!==k){var P;P=null===f?k:null===k||Ts.comparePoints(f,k)<=0?f:k,this.queue.remove(n.rightSE),i.push(n.rightSE);for(var O=n.split(P),B=0,F=O.length;B<F;B++)i.push(O[B])}i.length>0?(this.tree.remove(n),i.push(e)):(this.segments.push(n),n.prev=l)}else{if(l&&p){var z=l.getIntersection(p);if(null!==z){if(!l.isAnEndpoint(z))for(var Mt=this._splitSafely(l,z),lt=0,Pt=Mt.length;lt<Pt;lt++)i.push(Mt[lt]);if(!p.isAnEndpoint(z))for(var ct=this._splitSafely(p,z),Dt=0,yt=ct.length;Dt<yt;Dt++)i.push(ct[Dt])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(e,n){this.tree.remove(e);var i=e.rightSE;this.queue.remove(i);var r=e.split(n);return r.push(i),void 0===e.consumedBy&&this.tree.insert(e),r}}]),t}(),hd=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,z_=typeof process<"u"&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,os=new(function(){function t(){So(this,t)}return Nr(t,[{key:"run",value:function(e,n,i){os.type=e,Sl.reset();for(var r=[new ud(n,!0)],o=0,a=i.length;o<a;o++)r.push(new ud(i[o],!1));if(os.numMultiPolys=r.length,"difference"===os.type)for(var l=r[0],p=1;p<r.length;)null!==jc(r[p].bbox,l.bbox)?p++:r.splice(p,1);if("intersection"===os.type)for(var f=0,m=r.length;f<m;f++)for(var _=r[f],b=f+1,M=r.length;b<M;b++)if(null===jc(_.bbox,r[b].bbox))return[];for(var k=new Bc(Ts.compare),S=0,w=r.length;S<w;S++)for(var R=r[S].getSweepEvents(),q=0,P=R.length;q<P;q++)if(k.insert(R[q]),k.size>hd)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var O=new B_(k),B=k.size,F=k.pop();F;){var z=F.key;if(k.size===B){var Mt=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(Mt.id," ")+"[".concat(Mt.leftSE.point.x,", ").concat(Mt.leftSE.point.y,"] -> ")+"[".concat(Mt.rightSE.point.x,", ").concat(Mt.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(k.size>hd)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(O.segments.length>z_)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var lt=O.process(z),Pt=0,ct=lt.length;Pt<ct;Pt++){var Dt=lt[Pt];void 0===Dt.consumedBy&&k.insert(Dt)}B=k.size,F=k.pop()}Sl.reset();var yt=N_.factory(O.segments);return new A_(yt).getGeom()}}]),t}()),la={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return os.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return os.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return os.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return os.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var cu=function(){};cu.prototype.interfaces_=function(){return[]},cu.prototype.getClass=function(){return cu},cu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var Xn=function(t){function e(n){t.call(this,n),this.name="IllegalArgumentException",this.message=n,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Ce=function(){},cd={MAX_VALUE:{configurable:!0}};Ce.isNaN=function(t){return Number.isNaN(t)},Ce.doubleToLongBits=function(t){return t},Ce.longBitsToDouble=function(t){return t},Ce.isInfinite=function(t){return!Number.isFinite(t)},cd.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(Ce,cd);var Qr=function(){},Mh=function(){},Gu=function(){};function $r(){}var ft=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},pu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ft.prototype.setOrdinate=function(t,e){switch(t){case ft.X:this.x=e;break;case ft.Y:this.y=e;break;case ft.Z:this.z=e;break;default:throw new Xn("Invalid ordinate index: "+t)}},ft.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!cu.equalsWithTolerance(this.x,e.x,n)&&!!cu.equalsWithTolerance(this.y,e.y,n)}},ft.prototype.getOrdinate=function(t){switch(t){case ft.X:return this.x;case ft.Y:return this.y;case ft.Z:return this.z}throw new Xn("Invalid ordinate index: "+t)},ft.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||Ce.isNaN(this.z))&&Ce.isNaN(t.z)},ft.prototype.equals=function(t){return t instanceof ft&&this.equals2D(t)},ft.prototype.equalInZ=function(t,e){return cu.equalsWithTolerance(this.z,t.z,e)},ft.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},ft.prototype.clone=function(){},ft.prototype.copy=function(){return new ft(this)},ft.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ft.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},ft.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},ft.prototype.hashCode=function(){var t=17;return 37*(t=37*t+ft.hashCode(this.x))+ft.hashCode(this.y)},ft.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ft.prototype.interfaces_=function(){return[Qr,Mh,$r]},ft.prototype.getClass=function(){return ft},ft.hashCode=function(){if(1===arguments.length){var e=Ce.doubleToLongBits(arguments[0]);return Math.trunc((e^e)>>>32)}},pu.DimensionalComparator.get=function(){return ha},pu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},pu.NULL_ORDINATE.get=function(){return Ce.NaN},pu.X.get=function(){return 0},pu.Y.get=function(){return 1},pu.Z.get=function(){return 2},Object.defineProperties(ft,pu);var ha=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new Xn("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};ha.prototype.compare=function(t,e){var n=t,i=e,r=ha.compare(n.x,i.x);if(0!==r)return r;var o=ha.compare(n.y,i.y);return 0!==o?o:this._dimensionsToTest<=2?0:ha.compare(n.z,i.z)},ha.prototype.interfaces_=function(){return[Gu]},ha.prototype.getClass=function(){return ha},ha.compare=function(t,e){return t<e?-1:t>e?1:Ce.isNaN(t)?Ce.isNaN(e)?0:-1:Ce.isNaN(e)?1:0};var ju=function(){};ju.prototype.create=function(){},ju.prototype.interfaces_=function(){return[]},ju.prototype.getClass=function(){return ju};var kt=function(){},Tl={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};kt.prototype.interfaces_=function(){return[]},kt.prototype.getClass=function(){return kt},kt.toLocationSymbol=function(t){switch(t){case kt.EXTERIOR:return"e";case kt.BOUNDARY:return"b";case kt.INTERIOR:return"i";case kt.NONE:return"-"}throw new Xn("Unknown location value: "+t)},Tl.INTERIOR.get=function(){return 0},Tl.BOUNDARY.get=function(){return 1},Tl.EXTERIOR.get=function(){return 2},Tl.NONE.get=function(){return-1},Object.defineProperties(kt,Tl);var xe=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Ar=function(){},pd={LOG_10:{configurable:!0}};Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.log10=function(t){var e=Math.log(t);return Ce.isInfinite(e)||Ce.isNaN(e)?e:e/Ar.LOG_10},Ar.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},Ar.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:i>o?o:i}},Ar.wrap=function(t,e){return t<0?e- -t%e:t%e},Ar.max=function(){if(3===arguments.length){var e=arguments[1],n=arguments[2],i=arguments[0];return e>i&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var o=arguments[1],a=arguments[2],l=arguments[3],p=arguments[0];return o>p&&(p=o),a>p&&(p=a),l>p&&(p=l),p}},Ar.average=function(t,e){return(t+e)/2},pd.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ar,pd);var Io=function(t){this.str=t};Io.prototype.append=function(t){this.str+=t},Io.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Io.prototype.toString=function(t){return this.str};var To=function(t){this.value=t};To.prototype.intValue=function(){return this.value},To.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},To.isNaN=function(t){return Number.isNaN(t)};var Dl=function(){};Dl.isWhitespace=function(t){return t<=32&&t>=0||127===t},Dl.toUpperCase=function(t){return t.toUpperCase()};var Tt=function t(){this._hi=0,this._lo=0,0===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]||arguments[0]instanceof t?this.init(arguments[0]):"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0])):2===arguments.length&&this.init(arguments[0],arguments[1])},co={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Tt.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Tt.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),i=Tt.magnitude(n._hi),r=Tt.TEN.pow(i);(n=n.divide(r)).gt(Tt.TEN)?(n=n.divide(Tt.TEN),i+=1):n.lt(Tt.ONE)&&(n=n.multiply(Tt.TEN),i-=1);for(var o=i+1,a=new Io,l=Tt.MAX_PRINT_DIGITS-1,p=0;p<=l;p++){t&&p===o&&a.append(".");var f=Math.trunc(n._hi);if(f<0)break;var m=!1,_=0;f>9?(m=!0,_="9"):_="0"+f,a.append(_),n=n.subtract(Tt.valueOf(f)).multiply(Tt.TEN),m&&n.selfAdd(Tt.TEN);var b=!0,M=Tt.magnitude(n._hi);if(M<0&&Math.abs(M)>=l-p&&(b=!1),!b)break}return e[0]=i,a.toString()},Tt.prototype.sqr=function(){return this.multiply(this)},Tt.prototype.doubleValue=function(){return this._hi+this._lo},Tt.prototype.subtract=function(){return arguments[0]instanceof Tt?this.add(arguments[0].negate()):"number"==typeof arguments[0]?this.add(-arguments[0]):void 0},Tt.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Tt.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Tt.prototype.selfSubtract=function(){if(arguments[0]instanceof Tt){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Tt.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Tt.prototype.min=function(t){return this.le(t)?this:t},Tt.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Tt){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfDivide(arguments[0],0)}else if(2===arguments.length){var o,l,p,m,n=arguments[0],r=null,a=null,f=null,_=null;return _=(r=(f=Tt.SPLIT*(p=this._hi/n))-(r=f-p))*(a=(_=Tt.SPLIT*n)-(a=_-n))-(m=p*n)+r*(l=n-a)+(o=p-r)*a+o*l,_=p+(f=(this._hi-m-_+this._lo-p*arguments[1])/n),this._hi=_,this._lo=p-_+f,this}},Tt.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Tt.prototype.divide=function(){if(arguments[0]instanceof Tt){var n,r,o,l,t=arguments[0],e=null,i=null,a=null,p=null;n=(o=this._hi/t._hi)-(e=(a=Tt.SPLIT*o)-(e=a-o)),p=e*(i=(p=Tt.SPLIT*t._hi)-(i=p-t._hi))-(l=o*t._hi)+e*(r=t._hi-i)+n*i+n*r;var f=p=o+(a=(this._hi-l-p+this._lo-o*t._lo)/t._hi);return new Tt(f,o-p+a)}if("number"==typeof arguments[0]){var _=arguments[0];return Ce.isNaN(_)?Tt.createNaN():Tt.copy(this).selfDivide(_,0)}},Tt.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Tt.prototype.pow=function(t){if(0===t)return Tt.valueOf(1);var e=new Tt(this),n=Tt.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Tt.prototype.ceil=function(){if(this.isNaN())return Tt.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Tt(t,e)},Tt.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},Tt.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Tt.prototype.setValue=function(){return arguments[0]instanceof Tt||"number"==typeof arguments[0]?(this.init(arguments[0]),this):void 0},Tt.prototype.max=function(t){return this.ge(t)?this:t},Tt.prototype.sqrt=function(){if(this.isZero())return Tt.valueOf(0);if(this.isNegative())return Tt.NaN;var t=1/Math.sqrt(this._hi),n=Tt.valueOf(this._hi*t),i=this.subtract(n.sqr())._hi*(.5*t);return n.add(i)},Tt.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Tt){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var n,i,r,a,l,e=arguments[0],o=null;return o=(r=this._hi+e)-(a=r-this._hi),i=(l=(o=e-a+(this._hi-o))+this._lo)+(r-(n=r+l)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var m,_,M,w,p=arguments[0],f=arguments[1],b=null,k=null,S=null;k=(M=this._hi+p)-(S=M-this._hi),b=(_=this._lo+f)-(w=_-this._lo);var R=(m=M+(S=(k=p-S+(this._hi-k))+_))+(S=(b=f-w+(this._lo-b))+(S+(M-m))),q=S+(m-R);return this._hi=R,this._lo=q,this}},Tt.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Tt){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0])return this.selfMultiply(arguments[0],0)}else if(2===arguments.length){var o,l,n=arguments[0],r=null,a=null,p=null,f=null;r=(p=Tt.SPLIT*this._hi)-this._hi,r=p-r;var m=(p=this._hi*n)+(f=r*(a=(f=Tt.SPLIT*n)-(a=f-n))-p+r*(l=n-a)+(o=this._hi-r)*a+o*l+(this._hi*arguments[1]+this._lo*n)),_=f+(r=p-m);return this._hi=m,this._lo=_,this}},Tt.prototype.selfSqr=function(){return this.selfMultiply(this)},Tt.prototype.floor=function(){if(this.isNaN())return Tt.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Tt(t,e)},Tt.prototype.negate=function(){return this.isNaN()?this:new Tt(-this._hi,-this._lo)},Tt.prototype.clone=function(){},Tt.prototype.multiply=function(){if(arguments[0]instanceof Tt){var t=arguments[0];return t.isNaN()?Tt.createNaN():Tt.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Ce.isNaN(e)?Tt.createNaN():Tt.copy(this).selfMultiply(e,0)}},Tt.prototype.isNaN=function(){return Ce.isNaN(this._hi)},Tt.prototype.intValue=function(){return Math.trunc(this._hi)},Tt.prototype.toString=function(){var t=Tt.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Tt.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;return"."===n.charAt(0)?r="0"+n:i<0?r="0."+Tt.stringOfChar("0",-i)+n:-1===n.indexOf(".")&&(r=n+Tt.stringOfChar("0",i-n.length)+".0"),this.isNegative()?"-"+r:r},Tt.prototype.reciprocal=function(){var t,e,n,i,r=null,o=null,a=null,l=null;t=(n=1/this._hi)-(r=(a=Tt.SPLIT*n)-(r=a-n)),o=(l=Tt.SPLIT*this._hi)-this._hi;var p=n+(a=(1-(i=n*this._hi)-(l=r*(o=l-o)-i+r*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Tt(p,n-p+a)},Tt.prototype.toSciNotation=function(){if(this.isZero())return Tt.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=Tt.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},Tt.prototype.abs=function(){return this.isNaN()?Tt.NaN:this.isNegative()?this.negate():new Tt(this)},Tt.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Tt.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Tt.prototype.add=function(){if(arguments[0]instanceof Tt){var t=arguments[0];return Tt.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Tt.copy(this).selfAdd(e)}},Tt.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0])this._hi=arguments[0],this._lo=0;else if(arguments[0]instanceof Tt){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[1];this._hi=arguments[0],this._lo=i}},Tt.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Tt.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Tt.prototype.trunc=function(){return this.isNaN()?Tt.NaN:this.isPositive()?this.floor():this.ceil()},Tt.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Tt.prototype.interfaces_=function(){return[$r,Qr,Mh]},Tt.prototype.getClass=function(){return Tt},Tt.sqr=function(t){return Tt.valueOf(t).selfMultiply(t)},Tt.valueOf=function(){return"string"==typeof arguments[0]?Tt.parse(arguments[0]):"number"==typeof arguments[0]?new Tt(arguments[0]):void 0},Tt.sqrt=function(t){return Tt.valueOf(t).sqrt()},Tt.parse=function(t){for(var e=0,n=t.length;Dl.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new Tt,a=0,l=0,p=0;!(e>=n);){var f=t.charAt(e);if(e++,Dl.isDigit(f)){var m=f-"0";o.selfMultiply(Tt.TEN),o.selfAdd(m),a++}else{if("."!==f){if("e"===f||"E"===f){var _=t.substring(e);try{p=To.parseInt(_)}catch(w){throw w instanceof Error?new Error("Invalid exponent "+_+" in string "+t):w}break}throw new Error("Unexpected character '"+f+"' at position "+e+" in string "+t)}l=a}}var b=o,M=a-l-p;if(0===M)b=o;else if(M>0){var k=Tt.TEN.pow(M);b=o.divide(k)}else if(M<0){var S=Tt.TEN.pow(-M);b=o.multiply(S)}return i?b.negate():b},Tt.createNaN=function(){return new Tt(Ce.NaN,Ce.NaN)},Tt.copy=function(t){return new Tt(t)},Tt.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i},Tt.stringOfChar=function(t,e){for(var n=new Io,i=0;i<e;i++)n.append(t);return n.toString()},co.PI.get=function(){return new Tt(3.141592653589793,12246467991473532e-32)},co.TWO_PI.get=function(){return new Tt(6.283185307179586,24492935982947064e-32)},co.PI_2.get=function(){return new Tt(1.5707963267948966,6123233995736766e-32)},co.E.get=function(){return new Tt(2.718281828459045,14456468917292502e-32)},co.NaN.get=function(){return new Tt(Ce.NaN,Ce.NaN)},co.EPS.get=function(){return 123259516440783e-46},co.SPLIT.get=function(){return 134217729},co.MAX_PRINT_DIGITS.get=function(){return 32},co.TEN.get=function(){return Tt.valueOf(10)},co.ONE.get=function(){return Tt.valueOf(1)},co.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},co.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Tt,co);var gr=function(){},fd={DP_SAFE_EPSILON:{configurable:!0}};gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.orientationIndex=function(t,e,n){var i=gr.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=Tt.valueOf(e.x).selfAdd(-t.x),o=Tt.valueOf(e.y).selfAdd(-t.y),a=Tt.valueOf(n.x).selfAdd(-e.x),l=Tt.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(l).selfSubtract(o.selfMultiply(a)).signum()},gr.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},gr.intersection=function(t,e,n,i){var r=Tt.valueOf(i.y).selfSubtract(n.y).selfMultiply(Tt.valueOf(e.x).selfSubtract(t.x)),o=Tt.valueOf(i.x).selfSubtract(n.x).selfMultiply(Tt.valueOf(e.y).selfSubtract(t.y)),a=r.subtract(o),l=Tt.valueOf(i.x).selfSubtract(n.x).selfMultiply(Tt.valueOf(t.y).selfSubtract(n.y)),p=Tt.valueOf(i.y).selfSubtract(n.y).selfMultiply(Tt.valueOf(t.x).selfSubtract(n.x)),f=l.subtract(p).selfDivide(a).doubleValue(),m=Tt.valueOf(t.x).selfAdd(Tt.valueOf(e.x).selfSubtract(t.x).selfMultiply(f)).doubleValue(),_=Tt.valueOf(e.x).selfSubtract(t.x).selfMultiply(Tt.valueOf(t.y).selfSubtract(n.y)),b=Tt.valueOf(e.y).selfSubtract(t.y).selfMultiply(Tt.valueOf(t.x).selfSubtract(n.x)),M=_.subtract(b).selfDivide(a).doubleValue(),k=Tt.valueOf(n.y).selfAdd(Tt.valueOf(i.y).selfSubtract(n.y).selfMultiply(M)).doubleValue();return new ft(m,k)},gr.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=r-o;if(r>0){if(o<=0)return gr.signum(a);i=r+o}else{if(!(r<0)||o>=0)return gr.signum(a);i=-r-o}var l=gr.DP_SAFE_EPSILON*i;return a>=l||-a>=l?gr.signum(a):2},gr.signum=function(t){return t>0?1:t<0?-1:0},fd.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(gr,fd);var We=function(){},Ol={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Ol.X.get=function(){return 0},Ol.Y.get=function(){return 1},Ol.Z.get=function(){return 2},Ol.M.get=function(){return 3},We.prototype.setOrdinate=function(t,e,n){},We.prototype.size=function(){},We.prototype.getOrdinate=function(t,e){},We.prototype.getCoordinate=function(){},We.prototype.getCoordinateCopy=function(t){},We.prototype.getDimension=function(){},We.prototype.getX=function(t){},We.prototype.clone=function(){},We.prototype.expandEnvelope=function(t){},We.prototype.copy=function(){},We.prototype.getY=function(t){},We.prototype.toCoordinateArray=function(){},We.prototype.interfaces_=function(){return[Mh]},We.prototype.getClass=function(){return We},Object.defineProperties(We,Ol);var dd=function(){},Uu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dd),Bi=function(){};Bi.arraycopy=function(t,e,n,i,r){for(var o=0,a=e;a<e+r;a++)n[i+o]=t[a],o++},Bi.getProperty=function(t){return{"line.separator":"\n"}[t]};var po=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[1];this.x=arguments[0],this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof ft&&arguments[1]instanceof ft){var a=arguments[0],l=arguments[1];this.x=a.y-l.y,this.y=l.x-a.x,this.w=a.x*l.y-l.x*a.y}}else if(3===arguments.length){var f=arguments[1],m=arguments[2];this.x=arguments[0],this.y=f,this.w=m}else if(4===arguments.length){var _=arguments[0],b=arguments[1],M=arguments[2],k=arguments[3],S=_.y-b.y,w=b.x-_.x,R=_.x*b.y-b.x*_.y,q=M.y-k.y,P=k.x-M.x,O=M.x*k.y-k.x*M.y;this.x=w*O-P*R,this.y=q*R-S*O,this.w=S*P-q*w}};po.prototype.getY=function(){var t=this.y/this.w;if(Ce.isNaN(t)||Ce.isInfinite(t))throw new Uu;return t},po.prototype.getX=function(){var t=this.x/this.w;if(Ce.isNaN(t)||Ce.isInfinite(t))throw new Uu;return t},po.prototype.getCoordinate=function(){var t=new ft;return t.x=this.getX(),t.y=this.getY(),t},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po},po.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,l=n.y-i.y,p=i.x-n.x,f=n.x*i.y-i.x*n.y,m=r*p-l*o,_=(o*f-p*a)/m,b=(l*a-r*f)/m;if(Ce.isNaN(_)||Ce.isInfinite(_)||Ce.isNaN(b)||Ce.isInfinite(b))throw new Uu;return new ft(_,b)};var ae=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length)if(arguments[0]instanceof ft){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else arguments[0]instanceof t&&this.init(arguments[0]);else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else 4===arguments.length&&this.init(arguments[0],arguments[1],arguments[2],arguments[3])},gd={serialVersionUID:{configurable:!0}};ae.prototype.getArea=function(){return this.getWidth()*this.getHeight()},ae.prototype.equals=function(t){if(!(t instanceof ae))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},ae.prototype.intersection=function(t){return this.isNull()||t.isNull()||!this.intersects(t)?new ae:new ae(this._minx>t._minx?this._minx:t._minx,this._maxx<t._maxx?this._maxx:t._maxx,this._miny>t._miny?this._miny:t._miny,this._maxy<t._maxy?this._maxy:t._maxy)},ae.prototype.isNull=function(){return this._maxx<this._minx},ae.prototype.getMaxX=function(){return this._maxx},ae.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ft){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof ae){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&i>=this._miny&&i<=this._maxy}},ae.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof ae){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ft){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||i>this._maxy||i<this._miny)}},ae.prototype.getMinY=function(){return this._miny},ae.prototype.getMinX=function(){return this._minx},ae.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ft){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof ae){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=i,this._maxy=i):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),i<this._miny&&(this._miny=i),i>this._maxy&&(this._maxy=i))}},ae.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},ae.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},ae.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},ae.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},ae.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},ae.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},ae.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},ae.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},ae.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},ae.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof ae)return this.covers(arguments[0]);if(arguments[0]instanceof ft)return this.covers(arguments[0])}else if(2===arguments.length)return this.covers(arguments[0],arguments[1])},ae.prototype.centre=function(){return this.isNull()?null:new ft((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},ae.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ft){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof ae){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),a<l?(this._miny=a,this._maxy=l):(this._miny=l,this._maxy=a)}},ae.prototype.getMaxY=function(){return this._maxy},ae.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},ae.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+ft.hashCode(this._minx))+ft.hashCode(this._maxx))+ft.hashCode(this._miny))+ft.hashCode(this._maxy)},ae.prototype.interfaces_=function(){return[Qr,$r]},ae.prototype.getClass=function(){return ae},ae.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],l=Math.min(o.x,a.x),p=Math.max(o.x,a.x),f=Math.min(i.x,r.x),m=Math.max(i.x,r.x);return!(f>p||m<l||(l=Math.min(o.y,a.y),p=Math.max(o.y,a.y),f=Math.min(i.y,r.y),m=Math.max(i.y,r.y),f>p||m<l))}},gd.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(ae,gd);var Do={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},kh=function(t){this.geometryFactory=t||new Be};kh.prototype.read=function(t){var e,n;t=t.replace(/[\n\r]/g," ");var r=Do.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=Do.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),qu[n]&&(e=qu[n].apply(this,[r[2]]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},kh.prototype.write=function(t){return this.extractGeometry(t)},kh.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Ds[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Ds[e].apply(this,[t])+")"};var Ds={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Ds.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ds.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ds.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t._points._coordinates.length;n<i;++n)e.push(Ds.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ds.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Ds.linestring.apply(this,[t._shell])+")");for(var n=0,i=t._holes.length;n<i;++n)e.push("("+Ds.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push("("+Ds.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t._geometries.length;n<i;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},qu={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Do.spaces);return this.geometryFactory.createPoint(new ft(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Do.trimParens,"$1"),i.push(qu.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Do.spaces),i.push(new ft(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(Do.spaces),i.push(new ft(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Do.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Do.trimParens,"$1"),i.push(qu.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e,n,i;if(void 0===t)return this.geometryFactory.createPolygon();for(var r,o=t.trim().split(Do.parenComma),a=[],l=0,p=o.length;l<p;++l)e=o[l].replace(Do.trimParens,"$1"),n=qu.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n._points),0===l?r=i:a.push(i);return this.geometryFactory.createPolygon(r,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Do.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(Do.trimParens,"$1"),i.push(qu.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}},fo=function(t){this.parser=new kh(t)};fo.prototype.write=function(t){return this.parser.write(t)},fo.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Os=function(t){function e(n){t.call(this,n),this.name="RuntimeException",this.message=n,this.stack=(new t).stack}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Ph=function(t){function e(){t.call(this),0===arguments.length?t.call(this):1===arguments.length&&t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Os),De=function(){};De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De},De.shouldNeverReachHere=function(){if(0===arguments.length)De.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Ph("Should never reach here"+(null!==t?": "+t:""))}},De.isTrue=function(){var t;if(1===arguments.length)De.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new Ph:new Ph(t)},De.equals=function(){var t,e,n;if(2===arguments.length)De.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(n=arguments[2],!(e=arguments[1]).equals(t=arguments[0])))throw new Ph("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Wn=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ft,this._intPt[1]=new ft,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},fu={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Wn.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Wn.prototype.getTopologySummary=function(){var t=new Io;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Wn.prototype.computeIntersection=function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)},Wn.prototype.getIntersectionNum=function(){return this._result},Wn.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Wn.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Wn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Wn.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Wn.prototype.getIntersection=function(t){return this._intPt[t]},Wn.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Wn.prototype.hasIntersection=function(){return this._result!==Wn.NO_INTERSECTION},Wn.prototype.getEdgeDistance=function(t,e){return Wn.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},Wn.prototype.isCollinear=function(){return this._result===Wn.COLLINEAR_INTERSECTION},Wn.prototype.toString=function(){return fo.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+fo.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Wn.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Wn.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},Wn.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var a=Math.abs(t.x-e.x),l=Math.abs(t.y-e.y);0!==(o=i>r?a:l)||t.equals(e)||(o=Math.max(a,l))}return De.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Wn.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return De.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},fu.DONT_INTERSECT.get=function(){return 0},fu.DO_INTERSECT.get=function(){return 1},fu.COLLINEAR.get=function(){return 2},fu.NO_INTERSECTION.get=function(){return 0},fu.POINT_INTERSECTION.get=function(){return 1},fu.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Wn,fu);var Aa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isInSegmentEnvelopes=function(n){var i=new ae(this._inputLines[0][0],this._inputLines[0][1]),r=new ae(this._inputLines[1][0],this._inputLines[1][1]);return i.contains(n)&&r.contains(n)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var n=arguments[0],i=arguments[1],r=arguments[2];if(this._isProper=!1,ae.intersects(i,r,n)&&0===Jt.orientationIndex(i,r,n)&&0===Jt.orientationIndex(r,i,n))return this._isProper=!0,(n.equals(i)||n.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(n,i,r,o,a){a.x=this.smallestInAbsValue(n.x,i.x,r.x,o.x),a.y=this.smallestInAbsValue(n.y,i.y,r.y,o.y),n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,r.x-=a.x,r.y-=a.y,o.x-=a.x,o.y-=a.y},e.prototype.safeHCoordinateIntersection=function(n,i,r,o){var a=null;try{a=po.intersection(n,i,r,o)}catch(l){if(!(l instanceof Uu))throw l;a=e.nearestEndpoint(n,i,r,o)}return a},e.prototype.intersection=function(n,i,r,o){var a=this.intersectionWithNormalization(n,i,r,o);return this.isInSegmentEnvelopes(a)||(a=new ft(e.nearestEndpoint(n,i,r,o))),null!==this._precisionModel&&this._precisionModel.makePrecise(a),a},e.prototype.smallestInAbsValue=function(n,i,r,o){var a=n,l=Math.abs(a);return Math.abs(i)<l&&(a=i,l=Math.abs(i)),Math.abs(r)<l&&(a=r,l=Math.abs(r)),Math.abs(o)<l&&(a=o),a},e.prototype.checkDD=function(n,i,r,o,a){var l=gr.intersection(n,i,r,o),p=this.isInSegmentEnvelopes(l);Bi.out.println("DD in env = "+p+"  --------------------- "+l),a.distance(l)>1e-4&&Bi.out.println("Distance = "+a.distance(l))},e.prototype.intersectionWithNormalization=function(n,i,r,o){var a=new ft(n),l=new ft(i),p=new ft(r),f=new ft(o),m=new ft;this.normalizeToEnvCentre(a,l,p,f,m);var _=this.safeHCoordinateIntersection(a,l,p,f);return _.x+=m.x,_.y+=m.y,_},e.prototype.computeCollinearIntersection=function(n,i,r,o){var a=ae.intersects(n,i,r),l=ae.intersects(n,i,o),p=ae.intersects(r,o,n),f=ae.intersects(r,o,i);return a&&l?(this._intPt[0]=r,this._intPt[1]=o,t.COLLINEAR_INTERSECTION):p&&f?(this._intPt[0]=n,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&p?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||l||f?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&f?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||l||p?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):l&&p?(this._intPt[0]=o,this._intPt[1]=n,!o.equals(n)||a||f?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):l&&f?(this._intPt[0]=o,this._intPt[1]=i,!o.equals(i)||a||p?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(n,i,r,o,a){var l=n.x<i.x?n.x:i.x,p=n.y<i.y?n.y:i.y,f=n.x>i.x?n.x:i.x,m=n.y>i.y?n.y:i.y,_=r.x<o.x?r.x:o.x,b=r.y<o.y?r.y:o.y,M=r.x>o.x?r.x:o.x,k=r.y>o.y?r.y:o.y,w=((p>b?p:b)+(m<k?m:k))/2;a.x=((l>_?l:_)+(f<M?f:M))/2,a.y=w,n.x-=a.x,n.y-=a.y,i.x-=a.x,i.y-=a.y,r.x-=a.x,r.y-=a.y,o.x-=a.x,o.y-=a.y},e.prototype.computeIntersect=function(n,i,r,o){if(this._isProper=!1,!ae.intersects(n,i,r,o))return t.NO_INTERSECTION;var a=Jt.orientationIndex(n,i,r),l=Jt.orientationIndex(n,i,o);if(a>0&&l>0||a<0&&l<0)return t.NO_INTERSECTION;var p=Jt.orientationIndex(r,o,n),f=Jt.orientationIndex(r,o,i);return p>0&&f>0||p<0&&f<0?t.NO_INTERSECTION:0===a&&0===l&&0===p&&0===f?this.computeCollinearIntersection(n,i,r,o):(0===a||0===l||0===p||0===f?(this._isProper=!1,n.equals2D(r)||n.equals2D(o)?this._intPt[0]=n:i.equals2D(r)||i.equals2D(o)?this._intPt[0]=i:0===a?this._intPt[0]=new ft(r):0===l?this._intPt[0]=new ft(o):0===p?this._intPt[0]=new ft(n):0===f&&(this._intPt[0]=new ft(i))):(this._isProper=!0,this._intPt[0]=this.intersection(n,i,r,o)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(n,i,r,o){var a=n,l=Jt.distancePointLine(n,r,o),p=Jt.distancePointLine(i,r,o);return p<l&&(l=p,a=i),(p=Jt.distancePointLine(r,n,i))<l&&(l=p,a=r),(p=Jt.distancePointLine(o,n,i))<l&&(l=p,a=o),a},e}(Wn),du=function(){};du.prototype.interfaces_=function(){return[]},du.prototype.getClass=function(){return du},du.orientationIndex=function(t,e,n){return du.signOfDet2x2(e.x-t.x,e.y-t.y,n.x-e.x,n.y-e.y)},du.signOfDet2x2=function(t,e,n,i){var r=null,o=null,a=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0&&t<=n))return r}else{if(n>0||!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if((i-=(a=Math.floor(n/t))*e)<0)return-r;if(i>e)return r;if(t>(n-=a*t)+n){if(e<i+i)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n||(e-=(a=Math.floor(t/n))*i)<0)return r;if(e>i)return-r;if(n>(t-=a*n)+t){if(i<e+e)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var Oo=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=arguments[0]};Oo.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var o=t.y-this._p.y,l=e.y-this._p.y,p=du.signOfDet2x2(t.x-this._p.x,o,e.x-this._p.x,l);if(0===p)return this._isPointOnSegment=!0,null;l<o&&(p=-p),p>0&&this._crossingCount++}},Oo.prototype.isPointInPolygon=function(){return this.getLocation()!==kt.EXTERIOR},Oo.prototype.getLocation=function(){return this._isPointOnSegment?kt.BOUNDARY:this._crossingCount%2==1?kt.INTERIOR:kt.EXTERIOR},Oo.prototype.isOnSegment=function(){return this._isPointOnSegment},Oo.prototype.interfaces_=function(){return[]},Oo.prototype.getClass=function(){return Oo},Oo.locatePointInRing=function(){if(arguments[0]instanceof ft&&xe(arguments[1],We)){for(var e=arguments[1],n=new Oo(arguments[0]),i=new ft,r=new ft,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof ft&&arguments[1]instanceof Array){for(var l=arguments[1],p=new Oo(arguments[0]),f=1;f<l.length;f++)if(p.countSegment(l[f],l[f-1]),p.isOnSegment())return p.getLocation();return p.getLocation()}};var Jt=function(){},gu={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt},Jt.orientationIndex=function(t,e,n){return gr.orientationIndex(t,e,n)},Jt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++)e+=(t[i].x-n)*(t[i-1].y-t[i+1].y);return e/2}if(xe(arguments[0],We)){var l=arguments[0],p=l.size();if(p<3)return 0;var f=new ft,m=new ft,_=new ft;l.getCoordinate(0,m),l.getCoordinate(1,_);var b=m.x;_.x-=b;for(var M=0,k=1;k<p-1;k++)f.y=m.y,m.x=_.x,m.y=_.y,l.getCoordinate(k+1,_),_.x-=b,M+=m.x*(f.y-_.y);return M/2}},Jt.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Jt.distancePointLine(t,n,i);if(n.equals(i))return Jt.distancePointLine(i,t,e);var r=!1;if(ae.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var l=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,p=((t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y))/o;(p<0||p>1||l<0||l>1)&&(r=!0)}}else r=!0;return r?Ar.min(Jt.distancePointLine(t,n,i),Jt.distancePointLine(e,n,i),Jt.distancePointLine(n,t,e),Jt.distancePointLine(i,t,e)):0},Jt.isPointInRing=function(t,e){return Jt.locatePointInRing(t,e)!==kt.EXTERIOR},Jt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new ft;t.getCoordinate(0,i);for(var r=i.x,o=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var l=i.x,p=i.y,f=l-r,m=p-o;n+=Math.sqrt(f*f+m*m),r=l,o=p}return n},Jt.isCCW=function(t){var e=t.length-1;if(e<3)throw new Xn("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}var a=i;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==i);var l=i;do{l=(l+1)%e}while(t[l].equals2D(n)&&l!==i);var p=t[a],f=t[l];if(p.equals2D(n)||f.equals2D(n)||p.equals2D(f))return!1;var m=Jt.computeOrientation(p,n,f);return 0===m?p.x>f.x:m>0},Jt.locatePointInRing=function(t,e){return Oo.locatePointInRing(t,e)},Jt.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y);return Math.abs(((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i)*Math.sqrt(i)},Jt.computeOrientation=function(t,e,n){return Jt.orientationIndex(t,e,n)},Jt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new Xn("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Jt.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2];if(a.x===l.x&&a.y===l.y)return o.distance(a);var p=(l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y),f=((o.x-a.x)*(l.x-a.x)+(o.y-a.y)*(l.y-a.y))/p;return f<=0?o.distance(a):f>=1?o.distance(l):Math.abs(((a.y-o.y)*(l.x-a.x)-(a.x-o.x)*(l.y-a.y))/p)*Math.sqrt(p)}},Jt.isOnLine=function(t,e){for(var n=new Aa,i=1;i<e.length;i++)if(n.computeIntersection(t,e[i-1],e[i]),n.hasIntersection())return!0;return!1},gu.CLOCKWISE.get=function(){return-1},gu.RIGHT.get=function(){return Jt.CLOCKWISE},gu.COUNTERCLOCKWISE.get=function(){return 1},gu.LEFT.get=function(){return Jt.COUNTERCLOCKWISE},gu.COLLINEAR.get=function(){return 0},gu.STRAIGHT.get=function(){return Jt.COLLINEAR},Object.defineProperties(Jt,gu);var Rs=function(){};Rs.prototype.filter=function(t){},Rs.prototype.interfaces_=function(){return[]},Rs.prototype.getClass=function(){return Rs};var Le=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ss={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};Le.prototype.isGeometryCollection=function(){return this.getSortIndex()===Le.SORTINDEX_GEOMETRYCOLLECTION},Le.prototype.getFactory=function(){return this._factory},Le.prototype.getGeometryN=function(t){return this},Le.prototype.getArea=function(){return 0},Le.prototype.isRectangle=function(){return!1},Le.prototype.equals=function(){if(arguments[0]instanceof Le){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];return e instanceof Le&&this.equalsExact(e)}},Le.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},Le.prototype.geometryChanged=function(){this.apply(Le.geometryChangedFilter)},Le.prototype.geometryChangedAction=function(){this._envelope=null},Le.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},Le.prototype.getLength=function(){return 0},Le.prototype.getNumGeometries=function(){return 1},Le.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,i)}},Le.prototype.getUserData=function(){return this._userData},Le.prototype.getSRID=function(){return this._SRID},Le.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},Le.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===Le.SORTINDEX_GEOMETRYCOLLECTION)throw new Xn("This method does not support GeometryCollection arguments")},Le.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},Le.prototype.norm=function(){var t=this.copy();return t.normalize(),t},Le.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},Le.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new ae(this._envelope)},Le.prototype.setSRID=function(t){this._SRID=t},Le.prototype.setUserData=function(t){this._userData=t},Le.prototype.compare=function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),a=r.compareTo(o);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0},Le.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},Le.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===Le.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Le.SORTINDEX_MULTIPOINT||this.getSortIndex()===Le.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Le.SORTINDEX_MULTIPOLYGON},Le.prototype.interfaces_=function(){return[Mh,Qr,$r]},Le.prototype.getClass=function(){return Le},Le.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Le.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ss.serialVersionUID.get=function(){return 0x799ea46522854c00},ss.SORTINDEX_POINT.get=function(){return 0},ss.SORTINDEX_MULTIPOINT.get=function(){return 1},ss.SORTINDEX_LINESTRING.get=function(){return 2},ss.SORTINDEX_LINEARRING.get=function(){return 3},ss.SORTINDEX_MULTILINESTRING.get=function(){return 4},ss.SORTINDEX_POLYGON.get=function(){return 5},ss.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ss.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ss.geometryChangedFilter.get=function(){return qc},Object.defineProperties(Le,ss);var qc=function(){};qc.interfaces_=function(){return[Rs]},qc.filter=function(t){t.geometryChangedAction()};var as=function(){};as.prototype.filter=function(t){},as.prototype.interfaces_=function(){return[]},as.prototype.getClass=function(){return as};var to=function(){},Ns={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};to.prototype.isInBoundary=function(t){},to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to},Ns.Mod2BoundaryNodeRule.get=function(){return Vu},Ns.EndPointBoundaryNodeRule.get=function(){return Hu},Ns.MultiValentEndPointBoundaryNodeRule.get=function(){return Zu},Ns.MonoValentEndPointBoundaryNodeRule.get=function(){return Yu},Ns.MOD2_BOUNDARY_RULE.get=function(){return new Vu},Ns.ENDPOINT_BOUNDARY_RULE.get=function(){return new Hu},Ns.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Zu},Ns.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Yu},Ns.OGC_SFS_BOUNDARY_RULE.get=function(){return to.MOD2_BOUNDARY_RULE},Object.defineProperties(to,Ns);var Vu=function(){};Vu.prototype.isInBoundary=function(t){return t%2==1},Vu.prototype.interfaces_=function(){return[to]},Vu.prototype.getClass=function(){return Vu};var Hu=function(){};Hu.prototype.isInBoundary=function(t){return t>0},Hu.prototype.interfaces_=function(){return[to]},Hu.prototype.getClass=function(){return Hu};var Zu=function(){};Zu.prototype.isInBoundary=function(t){return t>1},Zu.prototype.interfaces_=function(){return[to]},Zu.prototype.getClass=function(){return Zu};var Yu=function(){};Yu.prototype.isInBoundary=function(t){return 1===t},Yu.prototype.interfaces_=function(){return[to]},Yu.prototype.getClass=function(){return Yu};var yi=function(){};function Vc(t){this.message=t||""}yi.prototype.add=function(){},yi.prototype.addAll=function(){},yi.prototype.isEmpty=function(){},yi.prototype.iterator=function(){},yi.prototype.size=function(){},yi.prototype.toArray=function(){},yi.prototype.remove=function(){},(Vc.prototype=new Error).name="IndexOutOfBoundsException";var Xu=function(){};Xu.prototype.hasNext=function(){},Xu.prototype.next=function(){},Xu.prototype.remove=function(){};var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(yi);function Wu(t){this.message=t||""}(Wu.prototype=new Error).name="NoSuchElementException";var Zt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof yi&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,yi]},e.prototype.add=function(n){return 1===arguments.length?this.array_.push(n):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(n){for(var i=n.iterator();i.hasNext();)this.add(i.next());return!0},e.prototype.set=function(n,i){var r=this.array_[n];return this.array_[n]=i,r},e.prototype.iterator=function(){return new F_(this)},e.prototype.get=function(n){if(n<0||n>=this.size())throw new Vc;return this.array_[n]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var n=[],i=0,r=this.array_.length;i<r;i++)n.push(this.array_[i]);return n},e.prototype.remove=function(n){for(var i=!1,r=0,o=this.array_.length;r<o;r++)if(this.array_[r]===n){this.array_.splice(r,1),i=!0;break}return i},e}(go),F_=function(t){function e(n){t.call(this),this.arrayList_=n,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Wu;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(n){return this.arrayList_.set(this.position_-1,n)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Xu),Rl=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var i=arguments[0];this.ensureCapacity(i.length),this.add(i,!0)}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.ensureCapacity(r.length),this.add(r,o)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(i){return this.get(i)},e.prototype.addAll=function(){if(2===arguments.length){for(var o=arguments[1],a=!1,l=arguments[0].iterator();l.hasNext();)this.add(l.next(),o),a=!0;return a}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var i=t.prototype.clone.call(this),r=0;r<this.size();r++)i.add(r,this.get(r).copy());return i},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var i=this;if(1===arguments.length)t.prototype.add.call(this,arguments[0]);else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1],!0),!0;if(arguments[0]instanceof ft&&"boolean"==typeof arguments[1]){var l=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(l))return null;t.prototype.add.call(this,l)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1])return this.add(arguments[0],arguments[1]),!0}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var b=arguments[0],M=arguments[1];if(arguments[2])for(var S=0;S<b.length;S++)i.add(b[S],M);else for(var w=b.length-1;w>=0;w--)i.add(b[w],M);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ft){var R=arguments[0],q=arguments[1];if(!arguments[2]){var O=this.size();if(O>0){if(R>0&&this.get(R-1).equals2D(q))return null;if(R<O&&this.get(R).equals2D(q))return null}}t.prototype.add.call(this,R,q)}}else if(4===arguments.length){var z=arguments[0],Mt=arguments[1],lt=arguments[2],Pt=arguments[3],ct=1;lt>Pt&&(ct=-1);for(var Dt=lt;Dt!==Pt;Dt+=ct)i.add(z[Dt],Mt);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ft(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Zt),Ae=function(){},Ch={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ch.ForwardComparator.get=function(){return Nl},Ch.BidirectionalComparator.get=function(){return Ku},Ch.coordArrayType.get=function(){return new Array(0).fill(null)},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae},Ae.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Ae.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(Ae.indexOf(i,e)<0)return i}return null},Ae.scroll=function(t,e){var n=Ae.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);Bi.arraycopy(t,n,i,0,t.length-n),Bi.arraycopy(t,0,i,t.length-n,n),Bi.arraycopy(i,0,t,0,t.length)},Ae.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r||i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==o.compare(i[a],r[a]))return!1;return!0}},Ae.intersection=function(t,e){for(var n=new Rl,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},Ae.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Ae.removeRepeatedPoints=function(t){return Ae.hasRepeatedPoints(t)?new Rl(t,!1).toCoordinateArray():t},Ae.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},Ae.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(i[r++]=t[o]);return i},Ae.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new ft(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],a=arguments[3],l=arguments[4],p=0;p<l;p++)o[a+p]=new ft(i[r+p])},Ae.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++)if(0!==t[n].compareTo(e[t.length-n-1]))return!1;return!0},Ae.envelope=function(t){for(var e=new ae,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Ae.toCoordinateArray=function(t){return t.toArray(Ae.coordArrayType)},Ae.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Ae.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Ae.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t[e].compareTo(t[t.length-1-e]);if(0!==i)return i}return 1},Ae.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},Ae.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Ae.extract=function(t,e,n){e=Ar.clamp(e,0,t.length);var i=(n=Ar.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,a=e;a<=n;a++)r[o++]=t[a];return r},Object.defineProperties(Ae,Ch);var Nl=function(){};Nl.prototype.compare=function(t,e){return Ae.compare(t,e)},Nl.prototype.interfaces_=function(){return[Gu]},Nl.prototype.getClass=function(){return Nl};var Ku=function(){};Ku.prototype.compare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=Ae.compare(n,i);return Ae.isEqualReversed(n,i)?0:r},Ku.prototype.OLDcompare=function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=Ae.increasingDirection(n),o=Ae.increasingDirection(i),a=r>0?0:n.length-1,l=o>0?0:n.length-1,p=0;p<n.length;p++){var f=n[a].compareTo(i[l]);if(0!==f)return f;a+=r,l+=o}return 0},Ku.prototype.interfaces_=function(){return[Gu]},Ku.prototype.getClass=function(){return Ku};var _u=function(){};_u.prototype.get=function(){},_u.prototype.put=function(){},_u.prototype.size=function(){},_u.prototype.values=function(){},_u.prototype.entrySet=function(){};var G_=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(_u);function Al(t){this.message=t||""}function Sh(){}(Al.prototype=new Error).name="OperationNotSupported",(Sh.prototype=new yi).contains=function(){};var Hc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof yi&&this.addAll(arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.contains=function(n){for(var i=0,r=this.array_.length;i<r;i++)if(this.array_[i]===n)return!0;return!1},e.prototype.add=function(n){return!this.contains(n)&&(this.array_.push(n),!0)},e.prototype.addAll=function(n){for(var i=n.iterator();i.hasNext();)this.add(i.next());return!0},e.prototype.remove=function(n){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var n=[],i=0,r=this.array_.length;i<r;i++)n.push(this.array_[i]);return n},e.prototype.iterator=function(){return new j_(this)},e}(Sh),j_=function(t){function e(n){t.call(this),this.hashSet_=n,this.position_=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Wu;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Al},e}(Xu);function _d(t){return null===t?0:t.color}function Gn(t){return null===t?null:t.parent}function As(t,e){null!==t&&(t.color=e)}function Zc(t){return null===t?null:t.left}function md(t){return null===t?null:t.right}function Zi(){this.root_=null,this.size_=0}(Zi.prototype=new G_).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Zi.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Zi.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(Gn(t)===Zc(Gn(Gn(t)))){var n=md(Gn(Gn(t)));1===_d(n)?(As(Gn(t),0),As(n,0),As(Gn(Gn(t)),1),t=Gn(Gn(t))):(t===md(Gn(t))&&(t=Gn(t),e.rotateLeft(t)),As(Gn(t),0),As(Gn(Gn(t)),1),e.rotateRight(Gn(Gn(t))))}else{var i=Zc(Gn(Gn(t)));1===_d(i)?(As(Gn(t),0),As(i,0),As(Gn(Gn(t)),1),t=Gn(Gn(t))):(t===Zc(Gn(t))&&(t=Gn(t),e.rotateRight(t)),As(Gn(t),0),As(Gn(Gn(t)),1),e.rotateLeft(Gn(Gn(t))))}this.root_.color=0},Zi.prototype.values=function(){var t=new Zt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Zi.successor(e));)t.add(e.value);return t},Zi.prototype.entrySet=function(){var t=new Hc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Zi.successor(e));)t.add(e);return t},Zi.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Zi.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Zi.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Zi.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,i=t;null!==n&&i===n.right;)i=n,n=n.parent;return n},Zi.prototype.size=function(){return this.size_};var Bl=function(){};function yd(){}function Ro(){this.array_=[],arguments[0]instanceof yi&&this.addAll(arguments[0])}Bl.prototype.interfaces_=function(){return[]},Bl.prototype.getClass=function(){return Bl},yd.prototype=new Sh,(Ro.prototype=new yd).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Ro.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Ro.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Ro.prototype.remove=function(t){throw new Al},Ro.prototype.size=function(){return this.array_.length},Ro.prototype.isEmpty=function(){return 0===this.array_.length},Ro.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Ro.prototype.iterator=function(){return new Ih(this)};var Ih=function(t){this.treeSet_=t,this.position_=0};Ih.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Wu;return this.treeSet_.array_[this.position_++]},Ih.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ih.prototype.remove=function(){throw new Al};var Ba=function(){};Ba.sort=function(){var t,e,n,r=arguments[0];if(1===arguments.length)r.sort(function(a,l){return a.compareTo(l)});else if(2===arguments.length)n=arguments[1],r.sort(function(a,l){return n.compare(a,l)});else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],e.sort(function(a,l){return n.compare(a,l)}),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},Ba.asList=function(t){for(var e=new Zt,n=0,i=t.length;n<i;n++)e.add(t[n]);return e};var kn=function(){},_o={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};_o.P.get=function(){return 0},_o.L.get=function(){return 1},_o.A.get=function(){return 2},_o.FALSE.get=function(){return-1},_o.TRUE.get=function(){return-2},_o.DONTCARE.get=function(){return-3},_o.SYM_FALSE.get=function(){return"F"},_o.SYM_TRUE.get=function(){return"T"},_o.SYM_DONTCARE.get=function(){return"*"},_o.SYM_P.get=function(){return"0"},_o.SYM_L.get=function(){return"1"},_o.SYM_A.get=function(){return"2"},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.toDimensionSymbol=function(t){switch(t){case kn.FALSE:return kn.SYM_FALSE;case kn.TRUE:return kn.SYM_TRUE;case kn.DONTCARE:return kn.SYM_DONTCARE;case kn.P:return kn.SYM_P;case kn.L:return kn.SYM_L;case kn.A:return kn.SYM_A}throw new Xn("Unknown dimension value: "+t)},kn.toDimensionValue=function(t){switch(Dl.toUpperCase(t)){case kn.SYM_FALSE:return kn.FALSE;case kn.SYM_TRUE:return kn.TRUE;case kn.SYM_DONTCARE:return kn.DONTCARE;case kn.SYM_P:return kn.P;case kn.SYM_L:return kn.L;case kn.SYM_A:return kn.A}throw new Xn("Unknown dimension symbol: "+t)},Object.defineProperties(kn,_o);var No=function(){};No.prototype.filter=function(t){},No.prototype.interfaces_=function(){return[]},No.prototype.getClass=function(){return No};var mo=function(){};mo.prototype.filter=function(t,e){},mo.prototype.isDone=function(){},mo.prototype.isGeometryChanged=function(){},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo};var tr=function(t){function e(i,r){if(t.call(this,r),this._geometries=i||[],t.hasNullElements(this._geometries))throw new Xn("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var i=new ae,r=0;r<this._geometries.length;r++)i.expandToInclude(this._geometries[r].getEnvelopeInternal());return i},e.prototype.getGeometryN=function(i){return this._geometries[i]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var i=new Array(this.getNumPoints()).fill(null),r=-1,o=0;o<this._geometries.length;o++)for(var a=this._geometries[o].getCoordinates(),l=0;l<a.length;l++)i[++r]=a[l];return i},e.prototype.getArea=function(){for(var i=0,r=0;r<this._geometries.length;r++)i+=this._geometries[r].getArea();return i},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],o=arguments[1];if(!this.isEquivalentClass(r))return!1;var a=r;if(this._geometries.length!==a._geometries.length)return!1;for(var l=0;l<this._geometries.length;l++)if(!this._geometries[l].equalsExact(a._geometries[l],o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=0;i<this._geometries.length;i++)this._geometries[i].normalize();Ba.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var i=kn.FALSE,r=0;r<this._geometries.length;r++)i=Math.max(i,this._geometries[r].getBoundaryDimension());return i},e.prototype.getDimension=function(){for(var i=kn.FALSE,r=0;r<this._geometries.length;r++)i=Math.max(i,this._geometries[r].getDimension());return i},e.prototype.getLength=function(){for(var i=0,r=0;r<this._geometries.length;r++)i+=this._geometries[r].getLength();return i},e.prototype.getNumPoints=function(){for(var i=0,r=0;r<this._geometries.length;r++)i+=this._geometries[r].getNumPoints();return i},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var r=new Array(this._geometries.length).fill(null),o=0;o<this._geometries.length;o++)r[o]=this._geometries[o].reverse();return this.getFactory().createGeometryCollection(r)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var r=arguments[0],o=new Ro(Ba.asList(this._geometries)),a=new Ro(Ba.asList(r._geometries));return this.compare(o,a)}if(2===arguments.length){for(var p=arguments[1],f=arguments[0],m=this.getNumGeometries(),_=f.getNumGeometries(),b=0;b<m&&b<_;){var M=this.getGeometryN(b),k=f.getGeometryN(b),S=M.compareToSameClass(k,p);if(0!==S)return S;b++}return b<m?1:b<_?-1:0}},e.prototype.apply=function(){var i=this;if(xe(arguments[0],as))for(var r=arguments[0],o=0;o<this._geometries.length;o++)i._geometries[o].apply(r);else if(xe(arguments[0],mo)){var a=arguments[0];if(0===this._geometries.length)return null;for(var l=0;l<this._geometries.length&&(i._geometries[l].apply(a),!a.isDone());l++);a.isGeometryChanged()&&this.geometryChanged()}else if(xe(arguments[0],No)){var p=arguments[0];p.filter(this);for(var f=0;f<this._geometries.length;f++)i._geometries[f].apply(p)}else if(xe(arguments[0],Rs)){var m=arguments[0];m.filter(this);for(var _=0;_<this._geometries.length;_++)i._geometries[_].apply(m)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),De.shouldNeverReachHere(),null},e.prototype.clone=function(){var i=t.prototype.clone.call(this);i._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)i._geometries[r]=this._geometries[r].clone();return i},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),r=0;r<i.length;r++)i[r]=this._geometries[r].copy();return new e(i,this._factory)},e.prototype.isEmpty=function(){for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(Le),za=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Le.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1];return!!this.isEquivalentClass(i)&&t.prototype.equalsExact.call(this,i,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kn.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var i=this._geometries.length,r=new Array(i).fill(null),o=0;o<this._geometries.length;o++)r[i-1-o]=this._geometries[o].reverse();return this.getFactory().createMultiLineString(r)},e.prototype.getBoundary=function(){return new eo(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),r=0;r<i.length;r++)i[r]=this._geometries[r].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[Bl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(tr),eo=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=to.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=i}};eo.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},eo.prototype.getBoundary=function(){return this._geom instanceof ei?this.boundaryLineString(this._geom):this._geom instanceof za?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},eo.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},eo.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},eo.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Zt;this._endpointMap=new Zi;for(var i=0;i<t.getNumGeometries();i++){var r=t.getGeometryN(i);0!==r.getNumPoints()&&(e.addEndpoint(r.getCoordinateN(0)),e.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),l=a.getValue().count;e._bnRule.isInBoundary(l)&&n.add(a.getKey())}return Ae.toCoordinateArray(n)},eo.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Th,this._endpointMap.put(t,e)),e.count++},eo.prototype.interfaces_=function(){return[]},eo.prototype.getClass=function(){return eo},eo.getBoundary=function(){return 1===arguments.length?new eo(arguments[0]).getBoundary():2===arguments.length?new eo(arguments[0],arguments[1]).getBoundary():void 0};var Th=function(){this.count=null};function U_(){}function q_(){}Th.prototype.interfaces_=function(){return[]},Th.prototype.getClass=function(){return Th};var V_=function(){};function H_(){}function Z_(){}function Y_(){}var no=function(){},Yc={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};no.prototype.interfaces_=function(){return[]},no.prototype.getClass=function(){return no},no.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return String(n)},no.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new H_,n=new U_(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[1],o="",l=new Y_(new q_(no.getStackTrace(arguments[0]))),p=0;p<r;p++)try{o+=l.readLine()+no.NEWLINE}catch(f){if(!(f instanceof Z_))throw f;De.shouldNeverReachHere()}return o}},no.split=function(t,e){for(var n=e.length,i=new Zt,r=""+t,o=r.indexOf(e);o>=0;){var a=r.substring(0,o);i.add(a),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var l=new Array(i.size()).fill(null),p=0;p<l.length;p++)l[p]=i.get(p);return l},no.toString=function(){if(1===arguments.length)return no.SIMPLE_ORDINATE_FORMAT.format(arguments[0])},no.spaces=function(t){return no.chars(" ",t)},Yc.NEWLINE.get=function(){return Bi.getProperty("line.separator")},Yc.SIMPLE_ORDINATE_FORMAT.get=function(){return new V_("0.#")},Object.defineProperties(no,Yc);var oi=function(){};oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},oi.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,We.X)===t.getOrdinate(e-1,We.X)&&t.getOrdinate(0,We.Y)===t.getOrdinate(e-1,We.Y)},oi.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var o=0;o<i;o++){var a=t.getOrdinate(r,o),l=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||Ce.isNaN(a)&&Ce.isNaN(l)))return!1}return!0},oi.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(oi.copy(e,0,i,0,r),r>0)for(var o=r;o<n;o++)oi.copy(e,r-1,i,o,1);return i},oi.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)oi.swap(t,i,e-i)},oi.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},oi.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)oi.copyCoord(t,e+o,n,i+o)},oi.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new Io;i.append("(");for(var r=0;r<e;r++){r>0&&i.append(" ");for(var o=0;o<n;o++)o>0&&i.append(","),i.append(no.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},oi.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?oi.createClosedRing(t,e,4):e.getOrdinate(0,We.X)===e.getOrdinate(n-1,We.X)&&e.getOrdinate(0,We.Y)===e.getOrdinate(n-1,We.Y)?e:oi.createClosedRing(t,e,n+1)},oi.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();oi.copy(e,0,i,0,r);for(var o=r;o<n;o++)oi.copy(e,0,i,o,1);return i};var ei=function(t){function e(i,r){t.call(this,r),this._points=null,this.init(i)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new ae:this._points.expandEnvelope(new ae)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],o=arguments[1];if(!this.isEquivalentClass(r))return!1;var a=r;if(this._points.size()!==a._points.size())return!1;for(var l=0;l<this._points.size();l++)if(!this.equal(this._points.getCoordinate(l),a._points.getCoordinate(l),o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var i=this,r=0;r<Math.trunc(this._points.size()/2);r++){var o=i._points.size()-1-r;if(!i._points.getCoordinate(r).equals(i._points.getCoordinate(o)))return i._points.getCoordinate(r).compareTo(i._points.getCoordinate(o))>0&&oi.reverse(i._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?kn.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Jt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var i=this._points.copy();return oi.reverse(i),this.getFactory().createLineString(i)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var o=arguments[0],a=0,l=0;a<this._points.size()&&l<o._points.size();){var p=this._points.getCoordinate(a).compareTo(o._points.getCoordinate(l));if(0!==p)return p;a++,l++}return a<this._points.size()?1:l<o._points.size()?-1:0}if(2===arguments.length)return arguments[1].compare(this._points,arguments[0]._points)},e.prototype.apply=function(){if(xe(arguments[0],as))for(var r=arguments[0],o=0;o<this._points.size();o++)r.filter(this._points.getCoordinate(o));else if(xe(arguments[0],mo)){var a=arguments[0];if(0===this._points.size())return null;for(var l=0;l<this._points.size()&&(a.filter(this._points,l),!a.isDone());l++);a.isGeometryChanged()&&this.geometryChanged()}else(xe(arguments[0],No)||xe(arguments[0],Rs))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new eo(this).getBoundary()},e.prototype.isEquivalentClass=function(i){return i instanceof e},e.prototype.clone=function(){var i=t.prototype.clone.call(this);return i._points=this._points.clone(),i},e.prototype.getCoordinateN=function(i){return this._points.getCoordinate(i)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(i){if(null===i&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),1===i.size())throw new Xn("Invalid number of points in LineString (found "+i.size()+" - must be 0 or >= 2)");this._points=i},e.prototype.isCoordinate=function(i){for(var r=0;r<this._points.size();r++)if(this._points.getCoordinate(r).equals(i))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(i){return this.getFactory().createPoint(this._points.getCoordinate(i))},e.prototype.interfaces_=function(){return[Bl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(Le),zl=function(){};zl.prototype.interfaces_=function(){return[]},zl.prototype.getClass=function(){return zl};var kr=function(t){function e(i,r){t.call(this,r),this._coordinates=i||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new ae;var i=new ae;return i.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),i},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1];return!!this.isEquivalentClass(i)&&(!(!this.isEmpty()||!i.isEmpty())||this.isEmpty()===i.isEmpty()&&this.equal(i.getCoordinate(),this.getCoordinate(),r))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return kn.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var r=arguments[0];return this.getCoordinate().compareTo(r.getCoordinate())}if(2===arguments.length)return arguments[1].compare(this._coordinates,arguments[0]._coordinates)},e.prototype.apply=function(){if(xe(arguments[0],as)){var i=arguments[0];if(this.isEmpty())return null;i.filter(this.getCoordinate())}else if(xe(arguments[0],mo)){var r=arguments[0];if(this.isEmpty())return null;r.filter(this._coordinates,0),r.isGeometryChanged()&&this.geometryChanged()}else(xe(arguments[0],No)||xe(arguments[0],Rs))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var i=t.prototype.clone.call(this);return i._coordinates=this._coordinates.clone(),i},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(i){null===i&&(i=this.getFactory().getCoordinateSequenceFactory().create([])),De.isTrue(i.size()<=1),this._coordinates=i},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[zl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(Le),ca=function(){};ca.prototype.interfaces_=function(){return[]},ca.prototype.getClass=function(){return ca};var vi=function(t){function e(i,r,o){if(t.call(this,o),this._shell=null,this._holes=null,null===i&&(i=this.getFactory().createLinearRing()),null===r&&(r=[]),t.hasNullElements(r))throw new Xn("holes must not contain null elements");if(i.isEmpty()&&t.hasNonEmptyElements(r))throw new Xn("shell is empty but holes are not");this._shell=i,this._holes=r}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var i=new Array(this.getNumPoints()).fill(null),r=-1,o=this._shell.getCoordinates(),a=0;a<o.length;a++)i[++r]=o[a];for(var l=0;l<this._holes.length;l++)for(var p=this._holes[l].getCoordinates(),f=0;f<p.length;f++)i[++r]=p[f];return i},e.prototype.getArea=function(){var i=0;i+=Math.abs(Jt.signedArea(this._shell.getCoordinateSequence()));for(var r=0;r<this._holes.length;r++)i-=Math.abs(Jt.signedArea(this._holes[r].getCoordinateSequence()));return i},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var i=this._shell.getCoordinateSequence(),r=this.getEnvelopeInternal(),o=0;o<5;o++){var a=i.getX(o);if(a!==r.getMinX()&&a!==r.getMaxX())return!1;var l=i.getY(o);if(l!==r.getMinY()&&l!==r.getMaxY())return!1}for(var p=i.getX(0),f=i.getY(0),m=1;m<=4;m++){var _=i.getX(m),b=i.getY(m);if(_!==p==(b!==f))return!1;p=_,f=b}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var r=arguments[0],o=arguments[1];if(!this.isEquivalentClass(r))return!1;var a=r;if(!this._shell.equalsExact(a._shell,o)||this._holes.length!==a._holes.length)return!1;for(var f=0;f<this._holes.length;f++)if(!this._holes[f].equalsExact(a._holes[f],o))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var r=0;r<this._holes.length;r++)this.normalize(this._holes[r],!1);Ba.sort(this._holes)}else if(2===arguments.length){var o=arguments[0],a=arguments[1];if(o.isEmpty())return null;var l=new Array(o.getCoordinates().length-1).fill(null);Bi.arraycopy(o.getCoordinates(),0,l,0,l.length);var p=Ae.minCoordinate(o.getCoordinates());Ae.scroll(l,p),Bi.arraycopy(l,0,o.getCoordinates(),0,l.length),o.getCoordinates()[l.length]=l[0],Jt.isCCW(o.getCoordinates())===a&&Ae.reverse(o.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var i=0;i+=this._shell.getLength();for(var r=0;r<this._holes.length;r++)i+=this._holes[r].getLength();return i},e.prototype.getNumPoints=function(){for(var i=this._shell.getNumPoints(),r=0;r<this._holes.length;r++)i+=this._holes[r].getNumPoints();return i},e.prototype.reverse=function(){var i=this.copy();i._shell=this._shell.copy().reverse(),i._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)i._holes[r]=this._holes[r].copy().reverse();return i},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length)return this._shell.compareToSameClass(arguments[0]._shell);if(2===arguments.length){var p=arguments[1],f=arguments[0],b=this._shell.compareToSameClass(f._shell,p);if(0!==b)return b;for(var M=this.getNumInteriorRing(),k=f.getNumInteriorRing(),S=0;S<M&&S<k;){var w=this.getInteriorRingN(S),R=f.getInteriorRingN(S),q=w.compareToSameClass(R,p);if(0!==q)return q;S++}return S<M?1:S<k?-1:0}},e.prototype.apply=function(i){var r=this;if(xe(i,as)){this._shell.apply(i);for(var o=0;o<this._holes.length;o++)r._holes[o].apply(i)}else if(xe(i,mo)){if(this._shell.apply(i),!i.isDone())for(var a=0;a<this._holes.length&&(r._holes[a].apply(i),!i.isDone());a++);i.isGeometryChanged()&&this.geometryChanged()}else if(xe(i,No))i.filter(this);else if(xe(i,Rs)){i.filter(this),this._shell.apply(i);for(var l=0;l<this._holes.length;l++)r._holes[l].apply(i)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var i=new Array(this._holes.length+1).fill(null);i[0]=this._shell;for(var r=0;r<this._holes.length;r++)i[r+1]=this._holes[r];return i.length<=1?this.getFactory().createLinearRing(i[0].getCoordinateSequence()):this.getFactory().createMultiLineString(i)},e.prototype.clone=function(){var i=t.prototype.clone.call(this);i._shell=this._shell.clone(),i._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)i._holes[r]=this._holes[r].clone();return i},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var i=this._shell.copy(),r=new Array(this._holes.length).fill(null),o=0;o<r.length;o++)r[o]=this._holes[o].copy();return new e(i,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(i){return this._holes[i]},e.prototype.interfaces_=function(){return[ca]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(Le),Ju=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Le.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1];return!!this.isEquivalentClass(i)&&t.prototype.equalsExact.call(this,i,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){return 1===arguments.length?this._geometries[arguments[0]].getCoordinate():t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return kn.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),r=0;r<i.length;r++)i[r]=this._geometries[r].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[zl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(tr),us=function(t){function e(i,r){i instanceof ft&&r instanceof Be&&(i=r.getCoordinateSequenceFactory().create(i)),t.call(this,i,r),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Le.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return kn.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var i=this._points.copy();return oi.reverse(i),this.getFactory().createLinearRing(i)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new Xn("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new Xn("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(ei),ls=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return Le.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var i=arguments[0],r=arguments[1];return!!this.isEquivalentClass(i)&&t.prototype.equalsExact.call(this,i,r)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var r=new Array(this._geometries.length).fill(null),o=0;o<this._geometries.length;o++)r[o]=this._geometries[o].reverse();return this.getFactory().createMultiPolygon(r)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var i=new Zt,r=0;r<this._geometries.length;r++)for(var o=this._geometries[r].getBoundary(),a=0;a<o.getNumGeometries();a++)i.add(o.getGeometryN(a));var l=new Array(i.size()).fill(null);return this.getFactory().createMultiLineString(i.toArray(l))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var i=new Array(this._geometries.length).fill(null),r=0;r<i.length;r++)i[r]=this._geometries[r].copy();return new e(i,this._factory)},e.prototype.interfaces_=function(){return[ca]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(tr),io=function(t){this._factory=t||null,this._isUserDataCopied=!1},Dh={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};io.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},io.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},io.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof tr?this.editGeometryCollection(t,e):t instanceof vi?this.editPolygon(t,e):t instanceof kr||t instanceof ei?e.edit(t,this._factory):(De.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},io.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),i=new Zt,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===Ju?this._factory.createMultiPoint(i.toArray([])):n.getClass()===za?this._factory.createMultiLineString(i.toArray([])):n.getClass()===ls?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},io.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var r=new Zt,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||r.add(a)}return this._factory.createPolygon(i,r.toArray([]))},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io},io.GeometryEditorOperation=function(){},Dh.NoOpGeometryOperation.get=function(){return Fl},Dh.CoordinateOperation.get=function(){return Gl},Dh.CoordinateSequenceOperation.get=function(){return jl},Object.defineProperties(io,Dh);var Fl=function(){};Fl.prototype.edit=function(t,e){return t},Fl.prototype.interfaces_=function(){return[io.GeometryEditorOperation]},Fl.prototype.getClass=function(){return Fl};var Gl=function(){};Gl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof us?e.createLinearRing(n):t instanceof ei?e.createLineString(n):t instanceof kr?n.length>0?e.createPoint(n[0]):e.createPoint():t},Gl.prototype.interfaces_=function(){return[io.GeometryEditorOperation]},Gl.prototype.getClass=function(){return Gl};var jl=function(){};jl.prototype.edit=function(t,e){return t instanceof us?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof ei?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof kr?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},jl.prototype.interfaces_=function(){return[io.GeometryEditorOperation]},jl.prototype.getClass=function(){return jl};var si=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new ft}else if(xe(arguments[0],We)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)t._coordinates[r]=i.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],p=arguments[1];this._coordinates=new Array(l).fill(null),this._dimension=p;for(var f=0;f<l;f++)t._coordinates[f]=new ft}},vd={serialVersionUID:{configurable:!0}};si.prototype.setOrdinate=function(t,e,n){switch(e){case We.X:this._coordinates[t].x=n;break;case We.Y:this._coordinates[t].y=n;break;case We.Z:this._coordinates[t].z=n;break;default:throw new Xn("invalid ordinateIndex")}},si.prototype.size=function(){return this._coordinates.length},si.prototype.getOrdinate=function(t,e){switch(e){case We.X:return this._coordinates[t].x;case We.Y:return this._coordinates[t].y;case We.Z:return this._coordinates[t].z}return Ce.NaN},si.prototype.getCoordinate=function(){if(1===arguments.length)return this._coordinates[arguments[0]];if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},si.prototype.getCoordinateCopy=function(t){return new ft(this._coordinates[t])},si.prototype.getDimension=function(){return this._dimension},si.prototype.getX=function(t){return this._coordinates[t].x},si.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new si(t,this._dimension)},si.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},si.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new si(t,this._dimension)},si.prototype.toString=function(){if(this._coordinates.length>0){var t=new Io(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},si.prototype.getY=function(t){return this._coordinates[t].y},si.prototype.toCoordinateArray=function(){return this._coordinates},si.prototype.interfaces_=function(){return[We,$r]},si.prototype.getClass=function(){return si},vd.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(si,vd);var hs=function(){},Xc={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};hs.prototype.readResolve=function(){return hs.instance()},hs.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new si(arguments[0]);if(xe(arguments[0],We))return new si(arguments[0])}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return i>3&&(i=3),i<2?new si(n):new si(n,i)}},hs.prototype.interfaces_=function(){return[ju,$r]},hs.prototype.getClass=function(){return hs},hs.instance=function(){return hs.instanceObject},Xc.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Xc.instanceObject.get=function(){return new hs},Object.defineProperties(hs,Xc);var Ld=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(n){return this.map_.get(n)||null},e.prototype.put=function(n,i){return this.map_.set(n,i),i},e.prototype.values=function(){for(var n=new Zt,i=this.map_.values(),r=i.next();!r.done;)n.add(r.value),r=i.next();return n},e.prototype.entrySet=function(){var n=new Hc;return this.map_.entries().forEach(function(i){return n.add(i)}),n},e.prototype.size=function(){return this.map_.size()},e}(_u),Pn=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Ao){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}},Wc={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Pn.prototype.equals=function(t){return t instanceof Pn&&(this._modelType===t._modelType&&this._scale===t._scale)},Pn.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new To(n).compareTo(new To(i))},Pn.prototype.getScale=function(){return this._scale},Pn.prototype.isFloating=function(){return this._modelType===Pn.FLOATING||this._modelType===Pn.FLOATING_SINGLE},Pn.prototype.getType=function(){return this._modelType},Pn.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Pn.FLOATING?t="Floating":this._modelType===Pn.FLOATING_SINGLE?t="Floating-Single":this._modelType===Pn.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Pn.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return Ce.isNaN(t)||this._modelType===Pn.FLOATING_SINGLE?t:this._modelType===Pn.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ft){var e=arguments[0];if(this._modelType===Pn.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Pn.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Pn.FLOATING?t=16:this._modelType===Pn.FLOATING_SINGLE?t=6:this._modelType===Pn.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Pn.prototype.setScale=function(t){this._scale=Math.abs(t)},Pn.prototype.interfaces_=function(){return[$r,Qr]},Pn.prototype.getClass=function(){return Pn},Pn.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Wc.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Wc.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Pn,Wc);var Ao=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Kc={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Ao.prototype.readResolve=function(){return Ao.nameToTypeMap.get(this._name)},Ao.prototype.toString=function(){return this._name},Ao.prototype.interfaces_=function(){return[$r]},Ao.prototype.getClass=function(){return Ao},Kc.serialVersionUID.get=function(){return-552860263173159e4},Kc.nameToTypeMap.get=function(){return new Ld},Object.defineProperties(Ao,Kc),Pn.Type=Ao,Pn.FIXED=new Ao("FIXED"),Pn.FLOATING=new Ao("FLOATING"),Pn.FLOATING_SINGLE=new Ao("FLOATING SINGLE");var Be=function t(){this._precisionModel=new Pn,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?xe(arguments[0],ju)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Pn&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},bd={serialVersionUID:{configurable:!0}};Be.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ft(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ft(t.getMinX(),t.getMinY()),new ft(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ft(t.getMinX(),t.getMinY()),new ft(t.getMinX(),t.getMaxY()),new ft(t.getMaxX(),t.getMaxY()),new ft(t.getMaxX(),t.getMinY()),new ft(t.getMinX(),t.getMinY())]),null)},Be.prototype.createLineString=function(t){return t?t instanceof Array?new ei(this.getCoordinateSequenceFactory().create(t),this):xe(t,We)?new ei(t,this):void 0:new ei(this.getCoordinateSequenceFactory().create([]),this)},Be.prototype.createMultiLineString=function(){return 0===arguments.length?new za(null,this):1===arguments.length?new za(arguments[0],this):void 0},Be.prototype.buildGeometry=function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(Be.toGeometryArray(t));var l=t.iterator().next();if(t.size()>1){if(l instanceof vi)return this.createMultiPolygon(Be.toPolygonArray(t));if(l instanceof ei)return this.createMultiLineString(Be.toLineStringArray(t));if(l instanceof kr)return this.createMultiPoint(Be.toPointArray(t));De.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l},Be.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Be.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ft){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(xe(arguments[0],We))return new kr(arguments[0],this)}},Be.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Be.prototype.createPolygon=function(){if(0===arguments.length)return new vi(null,null,this);if(1===arguments.length){if(xe(arguments[0],We))return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof Array)return this.createPolygon(this.createLinearRing(arguments[0]));if(arguments[0]instanceof us)return this.createPolygon(arguments[0],null)}else if(2===arguments.length)return new vi(arguments[0],arguments[1],this)},Be.prototype.getSRID=function(){return this._SRID},Be.prototype.createGeometryCollection=function(){return 0===arguments.length?new tr(null,this):1===arguments.length?new tr(arguments[0],this):void 0},Be.prototype.createGeometry=function(t){return new io(this).edit(t,{edit:function(){if(2===arguments.length)return this._coordinateSequenceFactory.create(arguments[0])}})},Be.prototype.getPrecisionModel=function(){return this._precisionModel},Be.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(xe(arguments[0],We))return new us(arguments[0],this)}},Be.prototype.createMultiPolygon=function(){return 0===arguments.length?new ls(null,this):1===arguments.length?new ls(arguments[0],this):void 0},Be.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ju(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ju(arguments[0],this);if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(xe(arguments[0],We)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(i.size()).fill(null),o=0;o<i.size();o++){var a=this.getCoordinateSequenceFactory().create(1,i.getDimension());oi.copy(i,o,a,0,1),r[o]=this.createPoint(a)}return this.createMultiPoint(r)}}},Be.prototype.interfaces_=function(){return[$r]},Be.prototype.getClass=function(){return Be},Be.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.getDefaultCoordinateSequenceFactory=function(){return hs.instance()},Be.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Be.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},bd.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Be,bd);var X_=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Oh=function(t){this.geometryFactory=t||new Be};Oh.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Bo[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==X_.indexOf(n)?Bo[n].apply(this,[e.coordinates]):Bo[n].apply(this,"GeometryCollection"===n?[e.geometries]:[e])},Oh.prototype.write=function(t){var e=t.getGeometryType();if(!Bs[e])throw new Error("Geometry is not supported");return Bs[e].apply(this,[t])};var Bo={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){if(!Bo[t.geometry.type])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Bo.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new ft(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ft(t[0],t[1]),new ft(t[2],t[1]),new ft(t[2],t[3]),new ft(t[0],t[3]),new ft(t[0],t[1])])},Point:function(t){var e=new ft(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Bo.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Bo.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Bo.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Bo.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var a=Bo.coordinates.apply(this,[t[r]]),l=this.geometryFactory.createLinearRing(a);i.push(l)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Bo.Polygon.apply(this,[t[n]]));return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n)e.push(this.read(t[n]));return this.geometryFactory.createGeometryCollection(e)}},Bs={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Bs.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Bs.Point.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i)e.push(Bs.coordinate.apply(this,[n[i]]));return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Bs.LineString.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Bs.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var o=Bs.LineString.apply(this,[t._holes[i]]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=Bs.Polygon.apply(this,[t._geometries[n]]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(Bs[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}},Jc=function(t){this.geometryFactory=t||new Be,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Oh(this.geometryFactory)};Jc.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Pn.FIXED&&this.reducePrecision(e),e},Jc.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var xd=function(){this.parser=new Oh(this.geometryFactory)};xd.prototype.write=function(t){return this.parser.write(t)};var qt=function(){},Rh={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Nh(t){this.message=t||""}function zo(){this.array_=[]}qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.opposite=function(t){return t===qt.LEFT?qt.RIGHT:t===qt.RIGHT?qt.LEFT:t},Rh.ON.get=function(){return 0},Rh.LEFT.get=function(){return 1},Rh.RIGHT.get=function(){return 2},Object.defineProperties(qt,Rh),(Nh.prototype=new Error).name="EmptyStackException",(zo.prototype=new go).add=function(t){return this.array_.push(t),!0},zo.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},zo.prototype.push=function(t){return this.array_.push(t),t},zo.prototype.pop=function(t){if(0===this.array_.length)throw new Nh;return this.array_.pop()},zo.prototype.peek=function(){if(0===this.array_.length)throw new Nh;return this.array_[this.array_.length-1]},zo.prototype.empty=function(){return 0===this.array_.length},zo.prototype.isEmpty=function(){return this.empty()},zo.prototype.search=function(t){return this.array_.indexOf(t)},zo.prototype.size=function(){return this.array_.length},zo.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Fo=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Fo.prototype.getCoordinate=function(){return this._minCoord},Fo.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Fo.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();De.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=Jt.computeOrientation(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===Jt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===Jt.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Fo.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length||n[e].y===n[e+1].y)return-1;var i=qt.LEFT;return n[e].y<n[e+1].y&&(i=qt.RIGHT),i},Fo.prototype.getEdge=function(){return this._orientedDe},Fo.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),i=0;i<n.length-1;i++)(null===e._minCoord||n[i].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=i,e._minCoord=n[i])},Fo.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Fo.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}De.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===qt.LEFT&&(this._orientedDe=this._minDe.getSym())},Fo.prototype.interfaces_=function(){return[]},Fo.prototype.getClass=function(){return Fo};var zs=function(t){function e(n,i){t.call(this,e.msgWithCoord(n,i)),this.pt=i?new ft(i):null,this.name="TopologyException"}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(n,i){return i?n:n+" [ "+i+" ]"},e}(Os),Ah=function(){this.array_=[]};Ah.prototype.addLast=function(t){this.array_.push(t)},Ah.prototype.removeFirst=function(){return this.array_.shift()},Ah.prototype.isEmpty=function(){return 0===this.array_.length};var er=function(){this._finder=null,this._dirEdgeList=new Zt,this._nodes=new Zt,this._rightMostCoord=null,this._env=null,this._finder=new Fo};er.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},er.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},er.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new zs("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},er.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(qt.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},er.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},er.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(qt.RIGHT)>=1&&e.getDepth(qt.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},er.prototype.computeDepths=function(t){var e=new Hc,n=new Ah,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var l=a.getNode();e.contains(l)||(n.addLast(l),e.add(l))}}}},er.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},er.prototype.getEnvelope=function(){if(null===this._env){for(var t=new ae,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env},er.prototype.addReachable=function(t){var e=new zo;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},er.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(qt.LEFT,t.getDepth(qt.RIGHT)),e.setDepth(qt.RIGHT,t.getDepth(qt.LEFT))},er.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},er.prototype.getNodes=function(){return this._nodes},er.prototype.getDirectedEdges=function(){return this._dirEdgeList},er.prototype.interfaces_=function(){return[Qr]},er.prototype.getClass=function(){return er};var jn=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array)this.init(arguments[0].length);else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[qt.ON]=i}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var o=0;o<this.location.length;o++)this.location[o]=r.location[o]}}else if(3===arguments.length){var a=arguments[0],l=arguments[1],p=arguments[2];this.init(3),this.location[qt.ON]=a,this.location[qt.LEFT]=l,this.location[qt.RIGHT]=p}};jn.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},jn.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==kt.NONE)return!1;return!0},jn.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===kt.NONE&&(this.location[e]=t)},jn.prototype.isLine=function(){return 1===this.location.length},jn.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[qt.ON]=this.location[qt.ON],e[qt.LEFT]=kt.NONE,e[qt.RIGHT]=kt.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===kt.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},jn.prototype.getLocations=function(){return this.location},jn.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[qt.LEFT];this.location[qt.LEFT]=this.location[qt.RIGHT],this.location[qt.RIGHT]=t},jn.prototype.toString=function(){var t=new Io;return this.location.length>1&&t.append(kt.toLocationSymbol(this.location[qt.LEFT])),t.append(kt.toLocationSymbol(this.location[qt.ON])),this.location.length>1&&t.append(kt.toLocationSymbol(this.location[qt.RIGHT])),t.toString()},jn.prototype.setLocations=function(t,e,n){this.location[qt.ON]=t,this.location[qt.LEFT]=e,this.location[qt.RIGHT]=n},jn.prototype.get=function(t){return t<this.location.length?this.location[t]:kt.NONE},jn.prototype.isArea=function(){return this.location.length>1},jn.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===kt.NONE)return!0;return!1},jn.prototype.setLocation=function(){1===arguments.length?this.setLocation(qt.ON,arguments[0]):2===arguments.length&&(this.location[arguments[0]]=arguments[1])},jn.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(kt.NONE)},jn.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},jn.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn};var Tn=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new jn(e),this.elt[1]=new jn(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new jn(n.elt[0]),this.elt[1]=new jn(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new jn(kt.NONE),this.elt[1]=new jn(kt.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],l=arguments[2];this.elt[0]=new jn(o,a,l),this.elt[1]=new jn(o,a,l)}else if(4===arguments.length){var p=arguments[0],f=arguments[1],m=arguments[2],_=arguments[3];this.elt[0]=new jn(kt.NONE,kt.NONE,kt.NONE),this.elt[1]=new jn(kt.NONE,kt.NONE,kt.NONE),this.elt[p].setLocations(f,m,_)}};Tn.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Tn.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Tn.prototype.isNull=function(t){return this.elt[t].isNull()},Tn.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else 2===arguments.length&&this.elt[arguments[0]].setAllLocationsIfNull(arguments[1])},Tn.prototype.isLine=function(t){return this.elt[t].isLine()},Tn.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new jn(t.elt[n]):e.elt[n].merge(t.elt[n])},Tn.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Tn.prototype.getLocation=function(){return 1===arguments.length?this.elt[arguments[0]].get(qt.ON):2===arguments.length?this.elt[arguments[0]].get(arguments[1]):void 0},Tn.prototype.toString=function(){var t=new Io;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Tn.prototype.isArea=function(){return 0===arguments.length?this.elt[0].isArea()||this.elt[1].isArea():1===arguments.length?this.elt[arguments[0]].isArea():void 0},Tn.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Tn.prototype.setLocation=function(){2===arguments.length?this.elt[arguments[0]].setLocation(qt.ON,arguments[1]):3===arguments.length&&this.elt[arguments[0]].setLocation(arguments[1],arguments[2])},Tn.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Tn.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Tn.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new jn(this.elt[t].location[0]))},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.toLineLabel=function(t){for(var e=new Tn(kt.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var ci=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Zt,this._pts=new Zt,this._label=new Tn(kt.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Zt,this._geometryFactory=null;var t=arguments[0];this._geometryFactory=arguments[1],this.computePoints(t),this.computeRing()};ci.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=Jt.isCCW(this._ring.getCoordinates())},ci.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},ci.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,i=!0;do{if(null===n)throw new zs("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new zs("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var r=n.getLabel();De.isTrue(r.isArea()),e.mergeLabel(r),e.addPoints(n.getEdge(),n.isForward(),i),i=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},ci.prototype.getLinearRing=function(){return this._ring},ci.prototype.getCoordinate=function(t){return this._pts.get(t)},ci.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},ci.prototype.addPoints=function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this._pts.add(i[o])}else{var a=i.length-2;n&&(a=i.length-1);for(var l=a;l>=0;l--)this._pts.add(i[l])}},ci.prototype.isHole=function(){return this._isHole},ci.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},ci.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!Jt.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},ci.prototype.addHole=function(t){this._holes.add(t)},ci.prototype.isShell=function(){return null===this._shell},ci.prototype.getLabel=function(){return this._label},ci.prototype.getEdges=function(){return this._edges},ci.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},ci.prototype.getShell=function(){return this._shell},ci.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var n=arguments[1],i=arguments[0].getLocation(n,qt.RIGHT);if(i===kt.NONE)return null;if(this._label.getLocation(n)===kt.NONE)return this._label.setLocation(n,i),null}},ci.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},ci.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var W_=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setEdgeRing=function(n,i){n.setMinEdgeRing(i)},e.prototype.getNext=function(n){return n.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),K_=function(t){function e(){t.call(this,arguments[0],arguments[1])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildMinimalRings=function(){var n=new Zt,i=this._startDe;do{if(null===i.getMinEdgeRing()){var r=new W_(i,this._geometryFactory);n.add(r)}i=i.getNext()}while(i!==this._startDe);return n},e.prototype.setEdgeRing=function(n,i){n.setEdgeRing(i)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var n=this._startDe;do{n.getNode().getEdges().linkMinimalDirectedEdges(this),n=n.getNext()}while(n!==this._startDe)},e.prototype.getNext=function(n){return n.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),Br=function(){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length&&(this._label=arguments[0])};Br.prototype.setVisited=function(t){this._isVisited=t},Br.prototype.setInResult=function(t){this._isInResult=t},Br.prototype.isCovered=function(){return this._isCovered},Br.prototype.isCoveredSet=function(){return this._isCoveredSet},Br.prototype.setLabel=function(t){this._label=t},Br.prototype.getLabel=function(){return this._label},Br.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Br.prototype.updateIM=function(t){De.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Br.prototype.isInResult=function(){return this._isInResult},Br.prototype.isVisited=function(){return this._isVisited},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};var Bh=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var i=arguments[1];this._coord=arguments[0],this._edges=i,this._label=new Tn(0,kt.NONE)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var n=this.getEdges().getEdges().iterator();n.hasNext();)if(n.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(n){n.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(n){},e.prototype.computeMergedLocation=function(n,i){var r=kt.NONE;if(r=this._label.getLocation(i),!n.isNull(i)){var o=n.getLocation(i);r!==kt.BOUNDARY&&(r=o)}return r},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var n=arguments[0],i=arguments[1];null===this._label?this._label=new Tn(n,i):this._label.setLocation(n,i)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var n=this;if(arguments[0]instanceof e)this.mergeLabel(arguments[0]._label);else if(arguments[0]instanceof Tn)for(var r=arguments[0],o=0;o<2;o++){var a=n.computeMergedLocation(r,o);n._label.getLocation(o)===kt.NONE&&n._label.setLocation(o,a)}},e.prototype.add=function(n){this._edges.insert(n),n.setNode(this)},e.prototype.setLabelBoundary=function(n){if(null===this._label)return null;var i=kt.NONE;null!==this._label&&(i=this._label.getLocation(n));this._label.setLocation(n,i===kt.BOUNDARY?kt.INTERIOR:kt.BOUNDARY)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Br),Go=function(){this.nodeMap=new Zi,this.nodeFact=null,this.nodeFact=arguments[0]};Go.prototype.find=function(t){return this.nodeMap.get(t)},Go.prototype.addNode=function(){if(arguments[0]instanceof ft){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Bh){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}},Go.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Go.prototype.iterator=function(){return this.nodeMap.values().iterator()},Go.prototype.values=function(){return this.nodeMap.values()},Go.prototype.getBoundaryNodes=function(t){for(var e=new Zt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===kt.BOUNDARY&&e.add(i)}return e},Go.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go};var Nn=function(){},Ul={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.isNorthern=function(t){return t===Nn.NE||t===Nn.NW},Nn.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},Nn.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Nn.isInHalfPlane=function(t,e){return e===Nn.SE?t===Nn.SE||t===Nn.SW:t===e||t===e+1},Nn.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Xn("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Nn.NE:Nn.SE:e>=0?Nn.NW:Nn.SW}if(arguments[0]instanceof ft&&arguments[1]instanceof ft){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new Xn("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Nn.NE:Nn.SE:i.y>=n.y?Nn.NW:Nn.SW}},Ul.NE.get=function(){return 0},Ul.NW.get=function(){return 1},Ul.SW.get=function(){return 2},Ul.SE.get=function(){return 3},Object.defineProperties(Nn,Ul);var Yi=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length)this._edge=arguments[0];else if(3===arguments.length){var n=arguments[1],i=arguments[2];this._edge=arguments[0],this.init(n,i),this._label=null}else if(4===arguments.length){var a=arguments[1],l=arguments[2],p=arguments[3];this._edge=arguments[0],this.init(a,l),this._label=p}};Yi.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Jt.computeOrientation(t._p0,t._p1,this._p1)},Yi.prototype.getDy=function(){return this._dy},Yi.prototype.getCoordinate=function(){return this._p0},Yi.prototype.setNode=function(t){this._node=t},Yi.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Yi.prototype.compareTo=function(t){return this.compareDirection(t)},Yi.prototype.getDirectedCoordinate=function(){return this._p1},Yi.prototype.getDx=function(){return this._dx},Yi.prototype.getLabel=function(){return this._label},Yi.prototype.getEdge=function(){return this._edge},Yi.prototype.getQuadrant=function(){return this._quadrant},Yi.prototype.getNode=function(){return this._node},Yi.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Yi.prototype.computeLabel=function(t){},Yi.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Nn.quadrant(this._dx,this._dy),De.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Yi.prototype.interfaces_=function(){return[Qr]},Yi.prototype.getClass=function(){return Yi};var Qc=function(t){function e(){var n=arguments[0],i=arguments[1];if(t.call(this,n),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=i,i)this.init(n.getCoordinate(0),n.getCoordinate(1));else{var r=n.getNumPoints()-1;this.init(n.getCoordinate(r),n.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(n){return this._depth[n]},e.prototype.setVisited=function(n){this._isVisited=n},e.prototype.computeDirectedLabel=function(){this._label=new Tn(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(n,i){if(-999!==this._depth[n]&&this._depth[n]!==i)throw new zs("assigned depths do not match",this.getCoordinate());this._depth[n]=i},e.prototype.isInteriorAreaEdge=function(){for(var n=this,i=!0,r=0;r<2;r++)n._label.isArea(r)&&n._label.getLocation(r,qt.LEFT)===kt.INTERIOR&&n._label.getLocation(r,qt.RIGHT)===kt.INTERIOR||(i=!1);return i},e.prototype.setNextMin=function(n){this._nextMin=n},e.prototype.print=function(n){t.prototype.print.call(this,n),n.print(" "+this._depth[qt.LEFT]+"/"+this._depth[qt.RIGHT]),n.print(" ("+this.getDepthDelta()+")"),this._isInResult&&n.print(" inResult")},e.prototype.setMinEdgeRing=function(n){this._minEdgeRing=n},e.prototype.isLineEdge=function(){var n=this._label.isLine(0)||this._label.isLine(1),i=!this._label.isArea(0)||this._label.allPositionsEqual(0,kt.EXTERIOR),r=!this._label.isArea(1)||this._label.allPositionsEqual(1,kt.EXTERIOR);return n&&i&&r},e.prototype.setEdgeRing=function(n){this._edgeRing=n},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var n=this._edge.getDepthDelta();return this._isForward||(n=-n),n},e.prototype.setInResult=function(n){this._isInResult=n},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(n){this.print(n),n.print(" "),this._isForward?this._edge.print(n):this._edge.printReverse(n)},e.prototype.setSym=function(n){this._sym=n},e.prototype.setVisitedEdge=function(n){this.setVisited(n),this._sym.setVisited(n)},e.prototype.setEdgeDepths=function(n,i){var r=this.getEdge().getDepthDelta();this._isForward||(r=-r);var o=1;n===qt.LEFT&&(o=-1);var a=qt.opposite(n),l=i+r*o;this.setDepth(n,i),this.setDepth(a,l)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(n){this._next=n},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(n,i){return n===kt.EXTERIOR&&i===kt.INTERIOR?1:n===kt.INTERIOR&&i===kt.EXTERIOR?-1:0},e}(Yi),Qu=function(){};Qu.prototype.createNode=function(t){return new Bh(t,null)},Qu.prototype.interfaces_=function(){return[]},Qu.prototype.getClass=function(){return Qu};var Kn=function(){this._edges=new Zt,this._nodes=null,this._edgeEndList=new Zt,0===arguments.length?this._nodes=new Go(new Qu):1===arguments.length&&(this._nodes=new Go(arguments[0]))};Kn.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Kn.prototype.find=function(t){return this._nodes.find(t)},Kn.prototype.addNode=function(){return arguments[0]instanceof Bh||arguments[0]instanceof ft?this._nodes.addNode(arguments[0]):void 0},Kn.prototype.getNodeIterator=function(){return this._nodes.iterator()},Kn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Kn.prototype.debugPrintln=function(t){Bi.out.println(t)},Kn.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===kt.BOUNDARY},Kn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Kn.prototype.matchInSameDirection=function(t,e,n,i){return!!t.equals(n)&&Jt.computeOrientation(t,e,i)===Jt.COLLINEAR&&Nn.quadrant(t,e)===Nn.quadrant(n,i)},Kn.prototype.getEdgeEnds=function(){return this._edgeEndList},Kn.prototype.debugPrint=function(t){Bi.out.print(t)},Kn.prototype.getEdgeIterator=function(){return this._edges.iterator()},Kn.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,i=0;i<this._edges.size();i++){var r=n._edges.get(i),o=r.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1])||n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return r}return null},Kn.prototype.insertEdge=function(t){this._edges.add(t)},Kn.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Kn.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next();e._edges.add(i);var r=new Qc(i,!0),o=new Qc(i,!1);r.setSym(o),o.setSym(r),e.add(r),e.add(o)}},Kn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Kn.prototype.getNodes=function(){return this._nodes.values()},Kn.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Pr=function(){this._geometryFactory=null,this._shellList=new Zt,this._geometryFactory=arguments[0]};Pr.prototype.sortShellsAndHoles=function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},Pr.prototype.computePolygons=function(t){for(var e=new Zt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e},Pr.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new zs("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},Pr.prototype.buildMinimalEdgeRings=function(t,e,n){for(var i=new Zt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),l=this.findShell(a);null!==l?(this.placePolygonHoles(l,a),e.add(l)):n.addAll(a)}else i.add(o)}return i},Pr.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Pr.prototype.buildMaximalEdgeRings=function(t){for(var e=new Zt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new K_(i,this._geometryFactory);e.add(r),r.setInResult()}}return e},Pr.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},Pr.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Pr.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,a=null,l=e.iterator();l.hasNext();){var p=l.next(),f=p.getLinearRing(),m=f.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var _=!1;m.contains(i)&&Jt.isPointInRing(r,f.getCoordinates())&&(_=!0),_&&(null===o||a.contains(m))&&(o=p)}return o},Pr.prototype.findShell=function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return De.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Pr.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0];Kn.linkResultDirectedEdges(arguments[1]);var i=this.buildMaximalEdgeRings(e),r=new Zt,o=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr};var $u=function(){};$u.prototype.getBounds=function(){},$u.prototype.interfaces_=function(){return[]},$u.prototype.getClass=function(){return $u};var yo=function(){this._bounds=null,this._item=null;var e=arguments[1];this._bounds=arguments[0],this._item=e};yo.prototype.getItem=function(){return this._item},yo.prototype.getBounds=function(){return this._bounds},yo.prototype.interfaces_=function(){return[$u,$r]},yo.prototype.getClass=function(){return yo};var Fs=function(){this._size=null,this._items=null,this._size=0,this._items=new Zt,this._items.add(null)};Fs.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Fs.prototype.size=function(){return this._size},Fs.prototype.reorder=function(t){for(var e=this,n=null,i=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(i)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,i)},Fs.prototype.clear=function(){this._size=0,this._items.clear()},Fs.prototype.isEmpty=function(){return 0===this._size},Fs.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Fs.prototype.interfaces_=function(){return[]},Fs.prototype.getClass=function(){return Fs};var pa=function(){};pa.prototype.visitItem=function(t){},pa.prototype.interfaces_=function(){return[]},pa.prototype.getClass=function(){return pa};var mu=function(){};mu.prototype.insert=function(t,e){},mu.prototype.remove=function(t,e){},mu.prototype.query=function(){},mu.prototype.interfaces_=function(){return[]},mu.prototype.getClass=function(){return mu};var Li=function(){this._childBoundables=new Zt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length&&(this._level=arguments[0])},wd={serialVersionUID:{configurable:!0}};Li.prototype.getLevel=function(){return this._level},Li.prototype.size=function(){return this._childBoundables.size()},Li.prototype.getChildBoundables=function(){return this._childBoundables},Li.prototype.addChildBoundable=function(t){De.isTrue(null===this._bounds),this._childBoundables.add(t)},Li.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Li.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Li.prototype.interfaces_=function(){return[$u,$r]},Li.prototype.getClass=function(){return Li},wd.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Li,wd);var vo=function(){};vo.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},vo.min=function(t){return vo.sort(t),t.get(0)},vo.sort=function(t,e){var n=t.toArray();e?Ba.sort(n,e):Ba.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},vo.singletonList=function(t){var e=new Zt;return e.add(t),e};var pi=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[1],n=arguments[2];this._boundable1=arguments[0],this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};pi.prototype.expandToQueue=function(t,e){var n=pi.isComposite(this._boundable1),i=pi.isComposite(this._boundable2);if(n&&i)return pi.area(this._boundable1)>pi.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(i)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new Xn("neither boundable is composite")},pi.prototype.isLeaves=function(){return!(pi.isComposite(this._boundable1)||pi.isComposite(this._boundable2))},pi.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},pi.prototype.expand=function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),a=new pi(o,e,this._itemDistance);a.getDistance()<i&&n.add(a)}},pi.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},pi.prototype.getDistance=function(){return this._distance},pi.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},pi.prototype.interfaces_=function(){return[Qr]},pi.prototype.getClass=function(){return pi},pi.area=function(t){return t.getBounds().getArea()},pi.isComposite=function(t){return t instanceof Li};var Si=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Zt,this._nodeCapacity=null,0===arguments.length)this._nodeCapacity=t.DEFAULT_NODE_CAPACITY;else if(1===arguments.length){var n=arguments[0];De.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},zh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Si.prototype.getNodeCapacity=function(){return this._nodeCapacity},Si.prototype.lastNode=function(t){return t.get(t.size()-1)},Si.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var n=0,i=arguments[0].getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof Li?n+=this.size(r):r instanceof yo&&(n+=1)}return n}},Si.prototype.removeItem=function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof yo&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Si.prototype.itemsTree=function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Zt:e}if(1===arguments.length){for(var n=arguments[0],i=new Zt,r=n.getChildBoundables().iterator();r.hasNext();){var o=r.next();if(o instanceof Li){var a=this.itemsTree(o);null!==a&&i.add(a)}else o instanceof yo?i.add(o.getItem()):De.shouldNeverReachHere()}return i.size()<=0?null:i}},Si.prototype.insert=function(t,e){De.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new yo(t,e))},Si.prototype.boundablesAtLevel=function(){if(1===arguments.length){var e=arguments[0],n=new Zt;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(De.isTrue(i>-2),r.getLevel()===i)return o.add(r),null;for(var a=r.getChildBoundables().iterator();a.hasNext();){var l=a.next();l instanceof Li?this.boundablesAtLevel(i,l,o):(De.isTrue(l instanceof yo),-1===i&&o.add(l))}return null}},Si.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Zt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var i=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,r)}else if(3===arguments.length)if(xe(arguments[2],pa)&&arguments[0]instanceof Object&&arguments[1]instanceof Li)for(var o=arguments[0],l=arguments[2],p=arguments[1].getChildBoundables(),f=0;f<p.size();f++){var m=p.get(f);t.getIntersectsOp().intersects(m.getBounds(),o)&&(m instanceof Li?t.query(o,m,l):m instanceof yo?l.visitItem(m.getItem()):De.shouldNeverReachHere())}else if(xe(arguments[2],go)&&arguments[0]instanceof Object&&arguments[1]instanceof Li)for(var _=arguments[0],M=arguments[2],k=arguments[1].getChildBoundables(),S=0;S<k.size();S++){var w=k.get(S);t.getIntersectsOp().intersects(w.getBounds(),_)&&(w instanceof Li?t.query(_,w,M):w instanceof yo?M.add(w.getItem()):De.shouldNeverReachHere())}},Si.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Si.prototype.getRoot=function(){return this.build(),this._root},Si.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=this.removeItem(r,o);if(a)return!0;for(var l=null,p=r.getChildBoundables().iterator();p.hasNext();){var f=p.next();if(this.getIntersectsOp().intersects(f.getBounds(),i)&&f instanceof Li&&(a=this.remove(i,f,o))){l=f;break}}return null!==l&&l.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(l),a}},Si.prototype.createHigherLevels=function(t,e){De.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Si.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var n=0,i=arguments[0].getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Li){var o=this.depth(r);o>n&&(n=o)}}return n+1}},Si.prototype.createParentBoundables=function(t,e){var n=this;De.isTrue(!t.isEmpty());var i=new Zt;i.add(this.createNode(e));var r=new Zt(t);vo.sort(r,this.getComparator());for(var o=r.iterator();o.hasNext();){var a=o.next();n.lastNode(i).getChildBoundables().size()===n.getNodeCapacity()&&i.add(n.createNode(e)),n.lastNode(i).addChildBoundable(a)}return i},Si.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Si.prototype.interfaces_=function(){return[$r]},Si.prototype.getClass=function(){return Si},Si.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},zh.IntersectsOp.get=function(){return J_},zh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},zh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Si,zh);var J_=function(){},tl=function(){};tl.prototype.distance=function(t,e){},tl.prototype.interfaces_=function(){return[]},tl.prototype.getClass=function(){return tl};var Ed=function(t){function e(i){t.call(this,i=i||e.DEFAULT_NODE_CAPACITY)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(i,r){De.isTrue(i.length>0);for(var o=new Zt,a=0;a<i.length;a++)o.addAll(this.createParentBoundablesFromVerticalSlice(i[a],r));return o},e.prototype.createNode=function(i){return new Md(i)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var i=arguments[0],r=arguments[1];if(i.isNull())return null;t.prototype.insert.call(this,i,r)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(i,r){for(var o=Math.trunc(Math.ceil(i.size()/r)),a=new Array(r).fill(null),l=i.iterator(),p=0;p<r;p++){a[p]=new Zt;for(var f=0;l.hasNext()&&f<o;){var m=l.next();a[p].add(m),f++}}return a},e.prototype.query=function(){if(1===arguments.length)return t.prototype.query.call(this,arguments[0]);2===arguments.length?t.prototype.query.call(this,arguments[0],arguments[1]):3===arguments.length&&(xe(arguments[2],pa)&&arguments[0]instanceof Object&&arguments[1]instanceof Li||xe(arguments[2],go)&&arguments[0]instanceof Object&&arguments[1]instanceof Li)&&t.prototype.query.call(this,arguments[0],arguments[1],arguments[2])},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(i,r){return t.prototype.createParentBoundables.call(this,i,r)},e.prototype.remove=function(){return 2===arguments.length?t.prototype.remove.call(this,arguments[0],arguments[1]):t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(i,r){De.isTrue(!i.isEmpty());var o=Math.trunc(Math.ceil(i.size()/this.getNodeCapacity())),a=new Zt(i);vo.sort(a,e.xComparator);var l=this.verticalSlices(a,Math.trunc(Math.ceil(Math.sqrt(o))));return this.createParentBoundablesFromVerticalSlices(l,r)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(xe(arguments[0],tl)){var i=arguments[0],r=new pi(this.getRoot(),this.getRoot(),i);return this.nearestNeighbour(r)}if(arguments[0]instanceof pi)return this.nearestNeighbour(arguments[0],Ce.POSITIVE_INFINITY)}else if(2===arguments.length){if(arguments[0]instanceof e&&xe(arguments[1],tl)){var a=arguments[0],l=arguments[1],p=new pi(this.getRoot(),a.getRoot(),l);return this.nearestNeighbour(p)}if(arguments[0]instanceof pi&&"number"==typeof arguments[1]){var f=arguments[0],_=arguments[1],b=null,M=new Fs;for(M.add(f);!M.isEmpty()&&_>0;){var k=M.poll(),S=k.getDistance();if(S>=_)break;k.isLeaves()?(_=S,b=k):k.expandToQueue(M,_)}return[b.getBoundable(0).getItem(),b.getBoundable(1).getItem()]}}else if(3===arguments.length){var q=arguments[2],P=new yo(arguments[0],arguments[1]),O=new pi(this.getRoot(),P,q);return this.nearestNeighbour(O)[0]}},e.prototype.interfaces_=function(){return[mu,$r]},e.prototype.getClass=function(){return e},e.centreX=function(i){return e.avg(i.getMinX(),i.getMaxX())},e.avg=function(i,r){return(i+r)/2},e.centreY=function(i){return e.avg(i.getMinY(),i.getMaxY())},n.STRtreeNode.get=function(){return Md},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Gu]},compare:function(i,r){return t.compareDoubles(e.centreX(i.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Gu]},compare:function(i,r){return t.compareDoubles(e.centreY(i.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(i,r){return i.intersects(r)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Si),Md=function(t){function e(){t.call(this,arguments[0])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.computeBounds=function(){for(var n=null,i=this.getChildBoundables().iterator();i.hasNext();){var r=i.next();null===n?n=new ae(r.getBounds()):n.expandToInclude(r.getBounds())}return n},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Li),_r=function(){};_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},_r.relativeSign=function(t,e){return t<e?-1:t>e?1:0},_r.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=_r.relativeSign(e.x,n.x),r=_r.relativeSign(e.y,n.y);switch(t){case 0:return _r.compareValue(i,r);case 1:return _r.compareValue(r,i);case 2:return _r.compareValue(r,-i);case 3:return _r.compareValue(-i,r);case 4:return _r.compareValue(-i,-r);case 5:return _r.compareValue(-r,-i);case 6:return _r.compareValue(-r,i);case 7:return _r.compareValue(i,-r)}return De.shouldNeverReachHere("invalid octant value"),0},_r.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var fa=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new ft(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))};fa.prototype.getCoordinate=function(){return this.coord},fa.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},fa.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:_r.compare(this._segmentOctant,this.coord,e.coord)},fa.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},fa.prototype.isInterior=function(){return this._isInterior},fa.prototype.interfaces_=function(){return[Qr]},fa.prototype.getClass=function(){return fa};var nr=function(){this._nodeMap=new Zi,this._edge=null,this._edge=arguments[0]};nr.prototype.getSplitCoordinates=function(){var t=new Rl;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},nr.prototype.addCollapsedNodes=function(){var t=new Zt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},nr.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},nr.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(new To(e+1))}},nr.prototype.addEdgeCoordinates=function(t,e,n){var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new ft(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));r&&n.add(new ft(e.coord))},nr.prototype.iterator=function(){return this._nodeMap.values().iterator()},nr.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},nr.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},nr.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new To(e[0])),i=r}},nr.prototype.getEdge=function(){return this._edge},nr.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},nr.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new ft(t.coord);for(var l=t.segmentIndex+1;l<=e.segmentIndex;l++)o[a++]=this._edge.getCoordinate(l);return r&&(o[a]=new ft(e.coord)),new ai(o,this._edge.getData())},nr.prototype.add=function(t,e){var n=new fa(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(De.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this._nodeMap.put(n,n),n)},nr.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Os("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new Os("bad split edge end point at "+r)},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr};var yu=function(){};yu.prototype.interfaces_=function(){return[]},yu.prototype.getClass=function(){return yu},yu.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new Xn("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return t>=0?e>=0?n>=i?0:1:n>=i?7:6:e>=0?n>=i?3:2:n>=i?4:5}if(arguments[0]instanceof ft&&arguments[1]instanceof ft){var r=arguments[0],o=arguments[1],a=o.x-r.x,l=o.y-r.y;if(0===a&&0===l)throw new Xn("Cannot compute the octant for two identical points "+r);return yu.octant(a,l)}};var cs=function(){};cs.prototype.getCoordinates=function(){},cs.prototype.size=function(){},cs.prototype.getCoordinate=function(t){},cs.prototype.isClosed=function(){},cs.prototype.setData=function(t){},cs.prototype.getData=function(){},cs.prototype.interfaces_=function(){return[]},cs.prototype.getClass=function(){return cs};var ql=function(){};ql.prototype.addIntersection=function(t,e){},ql.prototype.interfaces_=function(){return[cs]},ql.prototype.getClass=function(){return ql};var ai=function(){this._nodeList=new nr(this),this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};ai.prototype.getCoordinates=function(){return this._pts},ai.prototype.size=function(){return this._pts.length},ai.prototype.getCoordinate=function(t){return this._pts[t]},ai.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},ai.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},ai.prototype.setData=function(t){this._data=t},ai.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:yu.octant(t,e)},ai.prototype.getData=function(){return this._data},ai.prototype.addIntersection=function(){if(2===arguments.length)this.addIntersectionNode(arguments[0],arguments[1]);else if(4===arguments.length){var i=arguments[1],o=new ft(arguments[0].getIntersection(arguments[3]));this.addIntersection(o,i)}},ai.prototype.toString=function(){return fo.toLineString(new si(this._pts))},ai.prototype.getNodeList=function(){return this._nodeList},ai.prototype.addIntersectionNode=function(t,e){var n=e,i=n+1;return i<this._pts.length&&t.equals2D(this._pts[i])&&(n=i),this._nodeList.add(t,n)},ai.prototype.addIntersections=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},ai.prototype.interfaces_=function(){return[ql]},ai.prototype.getClass=function(){return ai},ai.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Zt;return ai.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(i)};var ue=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ft,this.p1=new ft;else if(1===arguments.length){var t=arguments[0];this.p0=new ft(t.p0),this.p1=new ft(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var i=arguments[2],r=arguments[3];this.p0=new ft(arguments[0],arguments[1]),this.p1=new ft(i,r)}},kd={serialVersionUID:{configurable:!0}};ue.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},ue.prototype.orientationIndex=function(){if(arguments[0]instanceof ue){var t=arguments[0],e=Jt.orientationIndex(this.p0,this.p1,t.p0),n=Jt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof ft)return Jt.orientationIndex(this.p0,this.p1,arguments[0])},ue.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},ue.prototype.isVertical=function(){return this.p0.x===this.p1.x},ue.prototype.equals=function(t){if(!(t instanceof ue))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},ue.prototype.intersection=function(t){var e=new Aa;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},ue.prototype.project=function(){if(arguments[0]instanceof ft){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ft(t);var e=this.projectionFactor(t),n=new ft;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof ue){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1||r<=0&&o<=0)return null;var a=this.project(i.p0);r<0&&(a=this.p0),r>1&&(a=this.p1);var l=this.project(i.p1);return o<0&&(l=this.p0),o>1&&(l=this.p1),new ue(a,l)}},ue.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},ue.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},ue.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},ue.prototype.distancePerpendicular=function(t){return Jt.distancePointLinePerpendicular(t,this.p0,this.p1)},ue.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},ue.prototype.midPoint=function(){return ue.midPoint(this.p0,this.p1)},ue.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?Ce.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},ue.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=Ce.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var l=t.closestPoint(this.p0);(r=l.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=l);var p=t.closestPoint(this.p1);return(r=p.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=p),n},ue.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},ue.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},ue.prototype.getLength=function(){return this.p0.distance(this.p1)},ue.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},ue.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},ue.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},ue.prototype.lineIntersection=function(t){try{return po.intersection(this.p0,this.p1,t.p0,t.p1)}catch(e){if(!(e instanceof Uu))throw e}return null},ue.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},ue.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(r*r+o*o),l=0,p=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");l=e*r/a,p=e*o/a}return new ft(n-p,i+l)},ue.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},ue.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||Ce.isNaN(e))&&(e=1),e},ue.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},ue.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},ue.prototype.distance=function(){if(arguments[0]instanceof ue){var t=arguments[0];return Jt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ft)return Jt.distancePointLine(arguments[0],this.p0,this.p1)},ue.prototype.pointAlong=function(t){var e=new ft;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},ue.prototype.hashCode=function(){var t=Ce.doubleToLongBits(this.p0.x);t^=31*Ce.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=Ce.doubleToLongBits(this.p1.x);return n^=31*Ce.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},ue.prototype.interfaces_=function(){return[Qr,$r]},ue.prototype.getClass=function(){return ue},ue.midPoint=function(t,e){return new ft((t.x+e.x)/2,(t.y+e.y)/2)},kd.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(ue,kd);var Vl=function(){this.tempEnv1=new ae,this.tempEnv2=new ae,this._overlapSeg1=new ue,this._overlapSeg2=new ue};Vl.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var n=arguments[2],i=arguments[3];arguments[0].getLineSegment(arguments[1],this._overlapSeg1),n.getLineSegment(i,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},Vl.prototype.interfaces_=function(){return[]},Vl.prototype.getClass=function(){return Vl};var Cr=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[1],n=arguments[2],i=arguments[3];this._pts=arguments[0],this._start=e,this._end=n,this._context=i};Cr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Cr.prototype.computeSelect=function(t,e,n,i){if(i.tempEnv1.init(this._pts[e],this._pts[n]),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i)},Cr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Cr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Cr.prototype.setId=function(t){this._id=t},Cr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Cr.prototype.getEnvelope=function(){return null===this._env&&(this._env=new ae(this._pts[this._start],this._pts[this._end])),this._env},Cr.prototype.getEndIndex=function(){return this._end},Cr.prototype.getStartIndex=function(){return this._start},Cr.prototype.getContext=function(){return this._context},Cr.prototype.getId=function(){return this._id},Cr.prototype.computeOverlapsInternal=function(t,e,n,i,r,o){var a=this._pts[t],l=this._pts[e],p=n._pts[i],f=n._pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(a,l),o.tempEnv2.init(p,f),!o.tempEnv1.intersects(o.tempEnv2))return null;var m=Math.trunc((t+e)/2),_=Math.trunc((i+r)/2);t<m&&(i<_&&this.computeOverlapsInternal(t,m,n,i,_,o),_<r&&this.computeOverlapsInternal(t,m,n,_,r,o)),m<e&&(i<_&&this.computeOverlapsInternal(m,e,n,i,_,o),_<r&&this.computeOverlapsInternal(m,e,n,_,r,o))},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var jo=function(){};jo.prototype.interfaces_=function(){return[]},jo.prototype.getClass=function(){return jo},jo.getChainStartIndices=function(t){var e=0,n=new Zt;n.add(new To(e));do{var i=jo.findChainEnd(t,e);n.add(new To(i)),e=i}while(e<t.length-1);return jo.toIntArray(n)},jo.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Nn.quadrant(t[n],t[n+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Nn.quadrant(t[r-1],t[r])===i);)r++;return r-1},jo.getChains=function(){if(1===arguments.length)return jo.getChains(arguments[0],null);if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new Zt,r=jo.getChainStartIndices(e),o=0;o<r.length-1;o++){var a=new Cr(e,r[o],r[o+1],n);i.add(a)}return i}},jo.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Fa=function(){};Fa.prototype.computeNodes=function(t){},Fa.prototype.getNodedSubstrings=function(){},Fa.prototype.interfaces_=function(){return[]},Fa.prototype.getClass=function(){return Fa};var Hl=function(){this._segInt=null,0!==arguments.length&&1===arguments.length&&this.setSegmentIntersector(arguments[0])};Hl.prototype.setSegmentIntersector=function(t){this._segInt=t},Hl.prototype.interfaces_=function(){return[Fa]},Hl.prototype.getClass=function(){return Hl};var $c=function(t){function e(i){i?t.call(this,i):t.call(this),this._monoChains=new Zt,this._index=new Ed,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return ai.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(i){for(var r=this,o=jo.getChains(i.getCoordinates(),i).iterator();o.hasNext();){var a=o.next();a.setId(r._idCounter++),r._index.insert(a.getEnvelope(),a),r._monoChains.add(a)}},e.prototype.computeNodes=function(i){this._nodedSegStrings=i;for(var r=i.iterator();r.hasNext();)this.add(r.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var i=this,r=new Pd(this._segInt),o=this._monoChains.iterator();o.hasNext();)for(var a=o.next(),l=i._index.query(a.getEnvelope()).iterator();l.hasNext();){var p=l.next();if(p.getId()>a.getId()&&(a.computeOverlaps(p,r),i._nOverlaps++),i._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Pd},Object.defineProperties(e,n),e}(Hl),Pd=function(t){function e(){t.call(this),this._si=null,this._si=arguments[0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var i=arguments[1],r=arguments[2],o=arguments[3],a=arguments[0].getContext(),l=r.getContext();this._si.processIntersections(a,i,l,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Vl),Cn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length)this.setQuadrantSegments(arguments[0]);else if(2===arguments.length){var i=arguments[1];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(i)}else if(4===arguments.length){var o=arguments[1],a=arguments[2],l=arguments[3];this.setQuadrantSegments(arguments[0]),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(l)}},Gs={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Cn.prototype.getEndCapStyle=function(){return this._endCapStyle},Cn.prototype.isSingleSided=function(){return this._isSingleSided},Cn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Cn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Cn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Cn.JOIN_ROUND&&(this._quadrantSegments=Cn.DEFAULT_QUADRANT_SEGMENTS)},Cn.prototype.getJoinStyle=function(){return this._joinStyle},Cn.prototype.setJoinStyle=function(t){this._joinStyle=t},Cn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Cn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Cn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Cn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Cn.prototype.getMitreLimit=function(){return this._mitreLimit},Cn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Cn.prototype.setSingleSided=function(t){this._isSingleSided=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Cn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Gs.CAP_ROUND.get=function(){return 1},Gs.CAP_FLAT.get=function(){return 2},Gs.CAP_SQUARE.get=function(){return 3},Gs.JOIN_ROUND.get=function(){return 1},Gs.JOIN_MITRE.get=function(){return 2},Gs.JOIN_BEVEL.get=function(){return 3},Gs.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Gs.DEFAULT_MITRE_LIMIT.get=function(){return 5},Gs.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Cn,Gs);var ni=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Jt.COUNTERCLOCKWISE,this._inputLine=t||null},Zl={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};ni.prototype.isDeletable=function(t,e,n,i){var r=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,o,a)&&!!this.isShallow(r,o,a,i)&&this.isShallowSampled(r,o,t,n,i)},ni.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var o=!1;t.isDeletable(e,n,i,t._distanceTol)&&(t._isDeleted[n]=ni.DELETE,o=!0,r=!0),n=t.findNextNonDeletedIndex(e=o?i:n),i=t.findNextNonDeletedIndex(n)}return r},ni.prototype.isShallowConcavity=function(t,e,n,i){return Jt.computeOrientation(t,e,n)===this._angleOrientation&&Jt.distancePointLine(e,t,n)<i},ni.prototype.isShallowSampled=function(t,e,n,i,r){var o=Math.trunc((i-n)/ni.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<i;a+=o)if(!this.isShallow(t,e,this._inputLine[a],r))return!1;return!0},ni.prototype.isConcave=function(t,e,n){return Jt.computeOrientation(t,e,n)===this._angleOrientation},ni.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Jt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},ni.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===ni.DELETE;)e++;return e},ni.prototype.isShallow=function(t,e,n,i){return Jt.distancePointLine(e,t,n)<i},ni.prototype.collapseLine=function(){for(var t=new Rl,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==ni.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},ni.prototype.interfaces_=function(){return[]},ni.prototype.getClass=function(){return ni},ni.simplify=function(t,e){return new ni(t).simplify(e)},Zl.INIT.get=function(){return 0},Zl.DELETE.get=function(){return 1},Zl.KEEP.get=function(){return 1},Zl.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(ni,Zl);var zr=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Zt},Cd={COORDINATE_ARRAY_TYPE:{configurable:!0}};zr.prototype.getCoordinates=function(){return this._ptList.toArray(zr.COORDINATE_ARRAY_TYPE)},zr.prototype.setPrecisionModel=function(t){this._precisionModel=t},zr.prototype.addPt=function(t){var e=new ft(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},zr.prototype.revere=function(){},zr.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])},zr.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},zr.prototype.toString=function(){return(new Be).createLineString(this.getCoordinates()).toString()},zr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ft(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},zr.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},Cd.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(zr,Cd);var Xe=function(){},vu={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe},Xe.toDegrees=function(t){return 180*t/Math.PI},Xe.normalize=function(t){for(;t>Math.PI;)t-=Xe.PI_TIMES_2;for(;t<=-Math.PI;)t+=Xe.PI_TIMES_2;return t},Xe.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Math.atan2(n.y-e.y,n.x-e.x)}},Xe.isAcute=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)>0},Xe.isObtuse=function(t,e,n){return(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y)<0},Xe.interiorAngle=function(t,e,n){var i=Xe.angle(e,t),r=Xe.angle(e,n);return Math.abs(r-i)},Xe.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Xe.PI_TIMES_2;t>=Xe.PI_TIMES_2&&(t=0)}else{for(;t>=Xe.PI_TIMES_2;)t-=Xe.PI_TIMES_2;t<0&&(t=0)}return t},Xe.angleBetween=function(t,e,n){var i=Xe.angle(e,t),r=Xe.angle(e,n);return Xe.diff(i,r)},Xe.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Xe.toRadians=function(t){return t*Math.PI/180},Xe.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Xe.COUNTERCLOCKWISE:n<0?Xe.CLOCKWISE:Xe.NONE},Xe.angleBetweenOriented=function(t,e,n){var i=Xe.angle(e,t),r=Xe.angle(e,n)-i;return r<=-Math.PI?r+Xe.PI_TIMES_2:r>Math.PI?r-Xe.PI_TIMES_2:r},vu.PI_TIMES_2.get=function(){return 2*Math.PI},vu.PI_OVER_2.get=function(){return Math.PI/2},vu.PI_OVER_4.get=function(){return Math.PI/4},vu.COUNTERCLOCKWISE.get=function(){return Jt.COUNTERCLOCKWISE},vu.CLOCKWISE.get=function(){return Jt.CLOCKWISE},vu.NONE.get=function(){return Jt.COLLINEAR},Object.defineProperties(Xe,vu);var Vn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new ue,this._seg1=new ue,this._offset0=new ue,this._offset1=new ue,this._side=0,this._hasNarrowConcaveAngle=!1;var n=arguments[1],i=arguments[2];this._precisionModel=arguments[0],this._bufParams=n,this._li=new Aa,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Cn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)},Yl={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Vn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Jt.computeOrientation(this._s0,this._s1,this._s2),i=n===Jt.CLOCKWISE&&this._side===qt.LEFT||n===Jt.COUNTERCLOCKWISE&&this._side===qt.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Vn.prototype.addLineEndCap=function(t,e){var n=new ue(t,e),i=new ue;this.computeOffsetSegment(n,qt.LEFT,this._distance,i);var r=new ue;this.computeOffsetSegment(n,qt.RIGHT,this._distance,r);var l=Math.atan2(e.y-t.y,e.x-t.x);switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:this._segList.addPt(i.p1),this.addFilletArc(e,l+Math.PI/2,l-Math.PI/2,Jt.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case Cn.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case Cn.CAP_SQUARE:var p=new ft;p.x=Math.abs(this._distance)*Math.cos(l),p.y=Math.abs(this._distance)*Math.sin(l);var f=new ft(i.p1.x+p.x,i.p1.y+p.y),m=new ft(r.p1.x+p.x,r.p1.y+p.y);this._segList.addPt(f),this._segList.addPt(m)}},Vn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Vn.prototype.addMitreJoin=function(t,e,n,i){var r=!0,o=null;try{o=po.intersection(e.p0,e.p1,n.p0,n.p1),(i<=0?1:o.distance(t)/Math.abs(i))>this._bufParams.getMitreLimit()&&(r=!1)}catch(a){if(!(a instanceof Uu))throw a;o=new ft(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())},Vn.prototype.addFilletCorner=function(t,e,n,i,r){var l=Math.atan2(e.y-t.y,e.x-t.x),m=Math.atan2(n.y-t.y,n.x-t.x);i===Jt.CLOCKWISE?l<=m&&(l+=2*Math.PI):l>=m&&(l-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,l,m,i,r),this._segList.addPt(n)},Vn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Vn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Vn.prototype.createSquare=function(t){this._segList.addPt(new ft(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ft(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ft(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ft(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Vn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Vn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Vn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Vn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Vn.prototype.addLimitedMitreJoin=function(t,e,n,i){var r=this._seg0.p1,o=Xe.angle(r,this._seg0.p0),a=Xe.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,l=Xe.normalize(o+a),p=Xe.normalize(l+Math.PI),f=i*n,m=n-f*Math.abs(Math.sin(a)),_=r.x+f*Math.cos(p),b=r.y+f*Math.sin(p),M=new ft(_,b),k=new ue(r,M),S=k.pointAlongOffset(1,m),w=k.pointAlongOffset(1,-m);this._side===qt.LEFT?(this._segList.addPt(S),this._segList.addPt(w)):(this._segList.addPt(w),this._segList.addPt(S))},Vn.prototype.computeOffsetSegment=function(t,e,n,i){var r=e===qt.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,l=Math.sqrt(o*o+a*a),p=r*n*o/l,f=r*n*a/l;i.p0.x=t.p0.x-f,i.p0.y=t.p0.y+p,i.p1.x=t.p1.x-f,i.p1.y=t.p1.y+p},Vn.prototype.addFilletArc=function(t,e,n,i,r){var o=i===Jt.CLOCKWISE?-1:1,a=Math.abs(e-n),l=Math.trunc(a/this._filletAngleQuantum+.5);if(l<1)return null;for(var p=a/l,f=0,m=new ft;f<a;){var _=e+o*f;m.x=t.x+r*Math.cos(_),m.y=t.y+r*Math.sin(_),this._segList.addPt(m),f+=p}},Vn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Vn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new ft((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var i=new ft((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Vn.prototype.createCircle=function(t){var e=new ft(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Vn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Vn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new zr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Vn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Vn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Cn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Cn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Jt.CLOCKWISE,this._distance))},Vn.prototype.closeRing=function(){this._segList.closeRing()},Vn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Vn.prototype.interfaces_=function(){return[]},Vn.prototype.getClass=function(){return Vn},Yl.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Yl.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Yl.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Yl.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Vn,Yl);var mr=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[1];this._precisionModel=arguments[0],this._bufParams=e};mr.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&Ae.reverse(o),o},mr.prototype.computeSingleSidedBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=ni.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],qt.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var l=ni.simplify(t,i),p=l.length-1;n.initSideSegments(l[0],l[1],qt.LEFT),n.addFirstSegment();for(var f=2;f<=p;f++)n.addNextSegment(l[f],!0)}n.addLastSegment(),n.closeRing()},mr.prototype.computeRingBufferCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);e===qt.RIGHT&&(i=-i);var r=ni.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var a=1;a<=o;a++)n.addNextSegment(r[a],1!==a);n.closeRing()},mr.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),i=ni.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],qt.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=ni.simplify(t,-n),l=a.length-1;e.initSideSegments(a[l],a[l-1],qt.LEFT);for(var p=l-2;p>=0;p--)e.addNextSegment(a[p],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},mr.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Cn.CAP_ROUND:e.createCircle(t);break;case Cn.CAP_SQUARE:e.createSquare(t)}},mr.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?this.computeSingleSidedBufferCurve(t,e<0,i):this.computeLineBufferCurve(t,i),i.getCoordinates()},mr.prototype.getBufferParameters=function(){return this._bufParams},mr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},mr.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return mr.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},mr.prototype.computeOffsetCurve=function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=ni.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],qt.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var l=ni.simplify(t,i),p=l.length-1;n.initSideSegments(l[0],l[1],qt.LEFT),n.addFirstSegment();for(var f=2;f<=p;f++)n.addNextSegment(l[f],!0)}n.addLastSegment()},mr.prototype.getSegGen=function(t){return new Vn(this._precisionModel,this._bufParams,t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new ft(t[n]);return e};var Lu=function(){this._subgraphs=null,this._seg=new ue,this._cga=new Jt,this._subgraphs=arguments[0]},Sd={DepthSegment:{configurable:!0}};Lu.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Zt,i=this._subgraphs.iterator();i.hasNext();){var r=i.next(),o=r.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,r.getDirectedEdges(),n)}return n}if(3===arguments.length)if(xe(arguments[2],go)&&arguments[0]instanceof ft&&arguments[1]instanceof Qc){for(var a=arguments[0],l=arguments[1],p=arguments[2],f=l.getEdge().getCoordinates(),m=0;m<f.length-1;m++)if(t._seg.p0=f[m],t._seg.p1=f[m+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse(),!(Math.max(t._seg.p0.x,t._seg.p1.x)<a.x||t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||Jt.computeOrientation(t._seg.p0,t._seg.p1,a)===Jt.RIGHT)){var b=l.getDepth(qt.LEFT);t._seg.p0.equals(f[m])||(b=l.getDepth(qt.RIGHT));var M=new Ga(t._seg,b);p.add(M)}}else if(xe(arguments[2],go)&&arguments[0]instanceof ft&&xe(arguments[1],go))for(var k=arguments[0],w=arguments[2],R=arguments[1].iterator();R.hasNext();){var q=R.next();q.isForward()&&t.findStabbedSegments(k,q,w)}},Lu.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:vo.min(e)._leftDepth},Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Sd.DepthSegment.get=function(){return Ga},Object.defineProperties(Lu,Sd);var Ga=function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[1];this._upwardSeg=new ue(arguments[0]),this._leftDepth=e};Ga.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Ga.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Ga.prototype.toString=function(){return this._upwardSeg.toString()},Ga.prototype.interfaces_=function(){return[Qr]},Ga.prototype.getClass=function(){return Ga};var Sn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Sn.prototype.area=function(){return Sn.area(this.p0,this.p1,this.p2)},Sn.prototype.signedArea=function(){return Sn.signedArea(this.p0,this.p1,this.p2)},Sn.prototype.interpolateZ=function(t){if(null===t)throw new Xn("Supplied point is null.");return Sn.interpolateZ(t,this.p0,this.p1,this.p2)},Sn.prototype.longestSideLength=function(){return Sn.longestSideLength(this.p0,this.p1,this.p2)},Sn.prototype.isAcute=function(){return Sn.isAcute(this.p0,this.p1,this.p2)},Sn.prototype.circumcentre=function(){return Sn.circumcentre(this.p0,this.p1,this.p2)},Sn.prototype.area3D=function(){return Sn.area3D(this.p0,this.p1,this.p2)},Sn.prototype.centroid=function(){return Sn.centroid(this.p0,this.p1,this.p2)},Sn.prototype.inCentre=function(){return Sn.inCentre(this.p0,this.p1,this.p2)},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Sn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Sn.det=function(t,e,n,i){return t*i-e*n},Sn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,a=n.x-r,l=i.x-r,p=n.y-o,f=i.y-o,m=a*f-l*p,_=t.x-r,b=t.y-o;return e.z+(f*_-l*b)/m*(n.z-e.z)+(-p*_+a*b)/m*(i.z-e.z)},Sn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),a=i;return r>a&&(a=r),o>a&&(a=o),a},Sn.isAcute=function(t,e,n){return!!Xe.isAcute(t,e,n)&&!!Xe.isAcute(e,n,t)&&!!Xe.isAcute(n,t,e)},Sn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,a=t.y-r,l=e.x-i,p=e.y-r,f=2*Sn.det(o,a,l,p),m=Sn.det(a,o*o+a*a,p,l*l+p*p),_=Sn.det(o,o*o+a*a,l,l*l+p*p);return new ft(i-m/f,r+_/f)},Sn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new po(t.x+n/2,t.y+i/2,1),o=new po(t.x-i+n/2,t.y+n+i/2,1);return new po(r,o)},Sn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n));return new ft(t.x+r*(n.x-t.x),t.y+r*(n.y-t.y))},Sn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,a=n.x-t.x,l=n.y-t.y,p=n.z-t.z,f=r*p-o*l,m=o*a-i*p,_=i*l-r*a;return Math.sqrt(f*f+m*m+_*_)/2},Sn.centroid=function(t,e,n){return new ft((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Sn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),a=i+r+o;return new ft((i*t.x+r*e.x+o*n.x)/a,(i*t.y+r*e.y+o*n.y)/a)};var ro=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Zt;var e=arguments[1],n=arguments[2];this._inputGeom=arguments[0],this._distance=e,this._curveBuilder=n};ro.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,kt.EXTERIOR,kt.INTERIOR)},ro.prototype.addPolygon=function(t){var e=this,n=this._distance,i=qt.LEFT;this._distance<0&&(n=-this._distance,i=qt.RIGHT);var r=t.getExteriorRing(),o=Ae.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance)||this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,i,kt.EXTERIOR,kt.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var l=t.getInteriorRingN(a),p=Ae.removeRepeatedPoints(l.getCoordinates());e._distance>0&&e.isErodedCompletely(l,-e._distance)||e.addPolygonRing(p,n,qt.opposite(i),kt.INTERIOR,kt.EXTERIOR)}},ro.prototype.isTriangleErodedCompletely=function(t,e){var n=new Sn(t[0],t[1],t[2]),i=n.inCentre();return Jt.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},ro.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Ae.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,kt.EXTERIOR,kt.INTERIOR)},ro.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var i=new ai(t,new Tn(0,kt.BOUNDARY,e,n));this._curveList.add(i)},ro.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},ro.prototype.addPolygonRing=function(t,e,n,i,r){if(0===e&&t.length<us.MINIMUM_VALID_SIZE)return null;var o=i,a=r;t.length>=us.MINIMUM_VALID_SIZE&&Jt.isCCW(t)&&(o=r,a=i,n=qt.opposite(n));var l=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(l,o,a)},ro.prototype.add=function(t){if(t.isEmpty())return null;t instanceof vi?this.addPolygon(t):t instanceof ei?this.addLineString(t):t instanceof kr?this.addPoint(t):(t instanceof Ju||t instanceof za||t instanceof ls||t instanceof tr)&&this.addCollection(t)},ro.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},ro.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro};var el=function(){};el.prototype.locate=function(t){},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el};var ps=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};ps.prototype.next=function(){if(this._atStart)return this._atStart=!1,ps.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Wu;var t=this._parent.getGeometryN(this._index++);return t instanceof tr?(this._subcollectionIterator=new ps(t),this._subcollectionIterator.next()):t},ps.prototype.remove=function(){throw new Error(this.getClass().getName())},ps.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},ps.prototype.interfaces_=function(){return[Xu]},ps.prototype.getClass=function(){return ps},ps.isAtomic=function(t){return!(t instanceof tr)};var Fr=function(){this._geom=null,this._geom=arguments[0]};Fr.prototype.locate=function(t){return Fr.locate(t,this._geom)},Fr.prototype.interfaces_=function(){return[el]},Fr.prototype.getClass=function(){return Fr},Fr.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Jt.isPointInRing(t,e.getCoordinates())},Fr.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Fr.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(Fr.isPointInRing(t,r))return!1}return!0},Fr.containsPoint=function(t,e){if(e instanceof vi)return Fr.containsPointInPolygon(t,e);if(e instanceof tr)for(var n=new ps(e);n.hasNext();){var i=n.next();if(i!==e&&Fr.containsPoint(t,i))return!0}return!1},Fr.locate=function(t,e){return e.isEmpty()?kt.EXTERIOR:Fr.containsPoint(t,e)?kt.INTERIOR:kt.EXTERIOR};var Xi=function(){this._edgeMap=new Zi,this._edgeList=null,this._ptInAreaLocation=[kt.NONE,kt.NONE]};Xi.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Xi.prototype.propagateSideLabels=function(t){for(var e=kt.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,qt.LEFT)!==kt.NONE&&(e=i.getLocation(t,qt.LEFT))}if(e===kt.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var a=o.next(),l=a.getLabel();if(l.getLocation(t,qt.ON)===kt.NONE&&l.setLocation(t,qt.ON,r),l.isArea(t)){var p=l.getLocation(t,qt.LEFT),f=l.getLocation(t,qt.RIGHT);if(f!==kt.NONE){if(f!==r)throw new zs("side location conflict",a.getCoordinate());p===kt.NONE&&De.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),r=p}else De.isTrue(l.getLocation(t,qt.LEFT)===kt.NONE,"found single null side"),l.setLocation(t,qt.RIGHT,r),l.setLocation(t,qt.LEFT,r)}}},Xi.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Xi.prototype.print=function(t){Bi.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Xi.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Xi.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,qt.LEFT);De.isTrue(i!==kt.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var a=o.next().getLabel();De.isTrue(a.isArea(t),"Found non-area edge");var l=a.getLocation(t,qt.LEFT),p=a.getLocation(t,qt.RIGHT);if(l===p||p!==r)return!1;r=l}return!0},Xi.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Xi.prototype.iterator=function(){return this.getEdges().iterator()},Xi.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Zt(this._edgeMap.values())),this._edgeList},Xi.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===kt.NONE&&(this._ptInAreaLocation[t]=Fr.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Xi.prototype.toString=function(){var t=new Io;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Xi.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Xi.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===kt.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),l=a.getLabel(),p=0;p<2;p++)if(l.isAnyNull(p)){var f=kt.NONE;if(e[p])f=kt.EXTERIOR;else{var m=a.getCoordinate();f=this.getLocation(p,m,t)}l.setAllLocationsIfNull(p,f)}},Xi.prototype.getDegree=function(){return this._edgeMap.size()},Xi.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Q_=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.linkResultDirectedEdges=function(){var n=this;this.getResultAreaEdges();for(var i=null,r=null,o=this._SCANNING_FOR_INCOMING,a=0;a<this._resultAreaEdgeList.size();a++){var l=n._resultAreaEdgeList.get(a),p=l.getSym();if(l.getLabel().isArea())switch(null===i&&l.isInResult()&&(i=l),o){case n._SCANNING_FOR_INCOMING:if(!p.isInResult())continue;r=p,o=n._LINKING_TO_OUTGOING;break;case n._LINKING_TO_OUTGOING:if(!l.isInResult())continue;r.setNext(l),o=n._SCANNING_FOR_INCOMING}}if(o===this._LINKING_TO_OUTGOING){if(null===i)throw new zs("no outgoing dirEdge found",this.getCoordinate());De.isTrue(i.isInResult(),"unable to link last incoming dirEdge"),r.setNext(i)}},e.prototype.insert=function(n){this.insertEdgeEnd(n,n)},e.prototype.getRightmostEdge=function(){var n=this.getEdges(),i=n.size();if(i<1)return null;var r=n.get(0);if(1===i)return r;var o=n.get(i-1),a=r.getQuadrant(),l=o.getQuadrant();return Nn.isNorthern(a)&&Nn.isNorthern(l)?r:Nn.isNorthern(a)||Nn.isNorthern(l)?0!==r.getDy()?r:0!==o.getDy()?o:(De.shouldNeverReachHere("found two horizontal edges incident on node"),null):o},e.prototype.print=function(n){Bi.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var i=this.iterator();i.hasNext();){var r=i.next();n.print("out "),r.print(n),n.println(),n.print("in "),r.getSym().print(n),n.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Zt;for(var n=this.iterator();n.hasNext();){var i=n.next();(i.isInResult()||i.getSym().isInResult())&&this._resultAreaEdgeList.add(i)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(n){for(var i=this.iterator();i.hasNext();){var r=i.next().getLabel();r.setAllLocationsIfNull(0,n.getLocation(0)),r.setAllLocationsIfNull(1,n.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var n=null,i=null,r=this._edgeList.size()-1;r>=0;r--){var o=this._edgeList.get(r),a=o.getSym();null===i&&(i=a),null!==n&&a.setNext(n),n=o}i.setNext(n)},e.prototype.computeDepths=function(){if(1===arguments.length){var i=arguments[0],r=this.findIndex(i),o=i.getDepth(qt.LEFT),a=i.getDepth(qt.RIGHT),l=this.computeDepths(r+1,this._edgeList.size(),o);if(this.computeDepths(0,r,l)!==a)throw new zs("depth mismatch at "+i.getCoordinate())}else if(3===arguments.length){for(var m=arguments[1],b=arguments[2],M=arguments[0];M<m;M++){var k=this._edgeList.get(M);k.setEdgeDepths(qt.RIGHT,b),b=k.getDepth(qt.LEFT)}return b}},e.prototype.mergeSymLabels=function(){for(var n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().merge(i.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(n){for(var i=this,r=null,o=null,a=this._SCANNING_FOR_INCOMING,l=this._resultAreaEdgeList.size()-1;l>=0;l--){var p=i._resultAreaEdgeList.get(l),f=p.getSym();switch(null===r&&p.getEdgeRing()===n&&(r=p),a){case i._SCANNING_FOR_INCOMING:if(f.getEdgeRing()!==n)continue;o=f,a=i._LINKING_TO_OUTGOING;break;case i._LINKING_TO_OUTGOING:if(p.getEdgeRing()!==n)continue;o.setNextMin(p),a=i._SCANNING_FOR_INCOMING}}a===this._LINKING_TO_OUTGOING&&(De.isTrue(null!==r,"found null for first outgoing dirEdge"),De.isTrue(r.getEdgeRing()===n,"unable to link last incoming dirEdge"),o.setNextMin(r))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var n=0,i=this.iterator();i.hasNext();)i.next().isInResult()&&n++;return n}if(1===arguments.length){for(var o=arguments[0],a=0,l=this.iterator();l.hasNext();)l.next().getEdgeRing()===o&&a++;return a}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var n=kt.NONE,i=this.iterator();i.hasNext();){var r=i.next(),o=r.getSym();if(!r.isLineEdge()){if(r.isInResult()){n=kt.INTERIOR;break}if(o.isInResult()){n=kt.EXTERIOR;break}}}if(n===kt.NONE)return null;for(var a=n,l=this.iterator();l.hasNext();){var p=l.next(),f=p.getSym();p.isLineEdge()?p.getEdge().setCovered(a===kt.INTERIOR):(p.isInResult()&&(a=kt.EXTERIOR),f.isInResult()&&(a=kt.INTERIOR))}},e.prototype.computeLabelling=function(n){t.prototype.computeLabelling.call(this,n),this._label=new Tn(kt.NONE);for(var i=this.iterator();i.hasNext();)for(var r=i.next().getEdge().getLabel(),o=0;o<2;o++){var a=r.getLocation(o);a!==kt.INTERIOR&&a!==kt.BOUNDARY||this._label.setLocation(o,kt.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xi),Id=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createNode=function(n){return new Bh(n,new Q_)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Qu),da=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};da.prototype.compareTo=function(t){return da.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},da.prototype.interfaces_=function(){return[Qr]},da.prototype.getClass=function(){return da},da.orientation=function(t){return 1===Ae.increasingDirection(t)},da.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,a=e?t.length:-1,l=i?n.length:-1,p=e?0:t.length-1,f=i?0:n.length-1;;){var m=t[p].compareTo(n[f]);if(0!==m)return m;var _=(p+=r)===a,b=(f+=o)===l;if(_&&!b)return-1;if(!_&&b)return 1;if(_&&b)return 0}};var Lo=function(){this._edges=new Zt,this._ocaMap=new Zi};Lo.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},Lo.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Lo.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Lo.prototype.iterator=function(){return this._edges.iterator()},Lo.prototype.getEdges=function(){return this._edges},Lo.prototype.get=function(t){return this._edges.get(t)},Lo.prototype.findEqualEdge=function(t){var e=new da(t.getCoordinates());return this._ocaMap.get(e)},Lo.prototype.add=function(t){this._edges.add(t);var e=new da(t.getCoordinates());this._ocaMap.put(e,t)},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo};var ja=function(){};ja.prototype.processIntersections=function(t,e,n,i){},ja.prototype.isDone=function(){},ja.prototype.interfaces_=function(){return[]},ja.prototype.getClass=function(){return ja};var Gr=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=arguments[0]};Gr.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(Gr.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},Gr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Gr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Gr.prototype.getLineIntersector=function(){return this._li},Gr.prototype.hasProperIntersection=function(){return this._hasProper},Gr.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],l=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Gr.prototype.hasIntersection=function(){return this._hasIntersection},Gr.prototype.isDone=function(){return!1},Gr.prototype.hasInteriorIntersection=function(){return this._hasInterior},Gr.prototype.interfaces_=function(){return[ja]},Gr.prototype.getClass=function(){return Gr},Gr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Uo=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[1],n=arguments[2];this.coord=new ft(arguments[0]),this.segmentIndex=e,this.dist=n};Uo.prototype.getSegmentIndex=function(){return this.segmentIndex},Uo.prototype.getCoordinate=function(){return this.coord},Uo.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Uo.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Uo.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Uo.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Uo.prototype.getDistance=function(){return this.dist},Uo.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Uo.prototype.interfaces_=function(){return[Qr]},Uo.prototype.getClass=function(){return Uo};var fs=function(){this._nodeMap=new Zi,this.edge=null,this.edge=arguments[0]};fs.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},fs.prototype.iterator=function(){return this._nodeMap.values().iterator()},fs.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},fs.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},fs.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=e.dist>0||!e.coord.equals2D(this.edge.pts[e.segmentIndex]);r||n--;var o=new Array(n).fill(null),a=0;o[a++]=new ft(t.coord);for(var l=t.segmentIndex+1;l<=e.segmentIndex;l++)o[a++]=this.edge.pts[l];return r&&(o[a]=e.coord),new Fh(o,new Tn(this.edge._label))},fs.prototype.add=function(t,e,n){var i=new Uo(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)},fs.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},fs.prototype.interfaces_=function(){return[]},fs.prototype.getClass=function(){return fs};var Ua=function(){};Ua.prototype.getChainStartIndices=function(t){var e=0,n=new Zt;n.add(new To(e));do{var i=this.findChainEnd(t,e);n.add(new To(i)),e=i}while(e<t.length-1);return Ua.toIntArray(n)},Ua.prototype.findChainEnd=function(t,e){for(var n=Nn.quadrant(t[e],t[e+1]),i=e+1;i<t.length&&Nn.quadrant(t[i-1],t[i])===n;)i++;return i-1},Ua.prototype.interfaces_=function(){return[]},Ua.prototype.getClass=function(){return Ua},Ua.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var js=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new ae,this.env2=new ae;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ua;this.startIndex=e.getChainStartIndices(this.pts)};js.prototype.getCoordinates=function(){return this.pts},js.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},js.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},js.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],arguments[3])}else if(6===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2],l=arguments[3],p=arguments[4],f=arguments[5],m=this.pts[r],_=this.pts[o],b=a.pts[l],M=a.pts[p];if(o-r==1&&p-l==1)return f.addIntersections(this.e,r,a.e,l),null;if(this.env1.init(m,_),this.env2.init(b,M),!this.env1.intersects(this.env2))return null;var k=Math.trunc((r+o)/2),S=Math.trunc((l+p)/2);r<k&&(l<S&&this.computeIntersectsForChain(r,k,a,l,S,f),S<p&&this.computeIntersectsForChain(r,k,a,S,p,f)),k<o&&(l<S&&this.computeIntersectsForChain(k,o,a,l,S,f),S<p&&this.computeIntersectsForChain(k,o,a,S,p,f))}},js.prototype.getStartIndexes=function(){return this.startIndex},js.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},js.prototype.interfaces_=function(){return[]},js.prototype.getClass=function(){return js};var zi=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Td={NULL_VALUE:{configurable:!0}};zi.prototype.getDepth=function(t,e){return this._depth[t][e]},zi.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},zi.prototype.isNull=function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==zi.NULL_VALUE)return!1;return!0}return 1===arguments.length?this._depth[arguments[0]][1]===zi.NULL_VALUE:2===arguments.length?this._depth[arguments[0]][arguments[1]]===zi.NULL_VALUE:void 0},zi.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var i=1;i<3;i++){var r=0;t._depth[e][i]>n&&(r=1),t._depth[e][i]=r}}},zi.prototype.getDelta=function(t){return this._depth[t][qt.RIGHT]-this._depth[t][qt.LEFT]},zi.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?kt.EXTERIOR:kt.INTERIOR},zi.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},zi.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==kt.EXTERIOR&&r!==kt.INTERIOR||(t.isNull(n,i)?t._depth[n][i]=zi.depthAtLocation(r):t._depth[n][i]+=zi.depthAtLocation(r))}else 3===arguments.length&&arguments[2]===kt.INTERIOR&&this._depth[arguments[0]][arguments[1]]++},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.depthAtLocation=function(t){return t===kt.EXTERIOR?0:t===kt.INTERIOR?1:zi.NULL_VALUE},Td.NULL_VALUE.get=function(){return-1},Object.defineProperties(zi,Td);var Fh=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new fs(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new zi,this._depthDelta=0,1===arguments.length)e.call(this,arguments[0],null);else if(2===arguments.length){var r=arguments[1];this.pts=arguments[0],this._label=r}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var n=new Array(2).fill(null);return n[0]=this.pts[0],n[1]=this.pts[1],new e(n,Tn.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(n){this._isIsolated=n},e.prototype.setName=function(n){this._name=n},e.prototype.equals=function(n){if(!(n instanceof e))return!1;var i=n;if(this.pts.length!==i.pts.length)return!1;for(var r=!0,o=!0,a=this.pts.length,l=0;l<this.pts.length;l++)if(this.pts[l].equals2D(i.pts[l])||(r=!1),this.pts[l].equals2D(i.pts[--a])||(o=!1),!r&&!o)return!1;return!0},e.prototype.getCoordinate=function(){return 0===arguments.length?this.pts.length>0?this.pts[0]:null:1===arguments.length?this.pts[arguments[0]]:void 0},e.prototype.print=function(n){n.print("edge "+this._name+": "),n.print("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.print(","),n.print(this.pts[i].x+" "+this.pts[i].y);n.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(n){e.updateIM(this._label,n)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(n){n.print("edge "+this._name+": ");for(var i=this.pts.length-1;i>=0;i--)n.print(this.pts[i]+" ");n.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new js(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new ae;for(var n=0;n<this.pts.length;n++)this._env.expandToInclude(this.pts[n])}return this._env},e.prototype.addIntersection=function(n,i,r,o){var a=new ft(n.getIntersection(o)),l=i,p=n.getEdgeDistance(r,o),f=l+1;f<this.pts.length&&a.equals2D(this.pts[f])&&(l=f,p=0),this.eiList.add(a,l,p)},e.prototype.toString=function(){var n=new Io;n.append("edge "+this._name+": "),n.append("LINESTRING (");for(var i=0;i<this.pts.length;i++)i>0&&n.append(","),n.append(this.pts[i].x+" "+this.pts[i].y);return n.append(")  "+this._label+" "+this._depthDelta),n.toString()},e.prototype.isPointwiseEqual=function(n){if(this.pts.length!==n.pts.length)return!1;for(var i=0;i<this.pts.length;i++)if(!this.pts[i].equals2D(n.pts[i]))return!1;return!0},e.prototype.setDepthDelta=function(n){this._depthDelta=n},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(n,i,r){for(var o=0;o<n.getIntersectionNum();o++)this.addIntersection(n,i,r,o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var n=arguments[0],i=arguments[1];i.setAtLeastIfValid(n.getLocation(0,qt.ON),n.getLocation(1,qt.ON),1),n.isArea()&&(i.setAtLeastIfValid(n.getLocation(0,qt.LEFT),n.getLocation(1,qt.LEFT),2),i.setAtLeastIfValid(n.getLocation(0,qt.RIGHT),n.getLocation(1,qt.RIGHT),2))},e}(Br),ir=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Lo,this._bufParams=t||null};ir.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},ir.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new Tn(t.getLabel())).flip(),n.merge(i);var r=ir.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(ir.depthDelta(t.getLabel()))},ir.prototype.buildSubgraphs=function(t,e){for(var n=new Zt,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),a=new Lu(n).getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},ir.prototype.createSubgraphs=function(t){for(var e=new Zt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new er;r.create(i),e.add(r)}}return vo.sort(e,vo.reverseOrder()),e},ir.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},ir.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new $c,n=new Aa;return n.setPrecisionModel(t),e.setSegmentIntersector(new Gr(n)),e},ir.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new mr(n,this._bufParams),r=new ro(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Kn(new Id),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Pr(this._geomFact);this.buildSubgraphs(o,a);var l=a.getPolygons();return l.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(l)},ir.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=r.getData(),l=new Fh(r.getCoordinates(),new Tn(a));this.insertUniqueEdge(l)}}},ir.prototype.setNoder=function(t){this._workingNoder=t},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.depthDelta=function(t){var e=t.getLocation(0,qt.LEFT),n=t.getLocation(0,qt.RIGHT);return e===kt.INTERIOR&&n===kt.EXTERIOR?1:e===kt.EXTERIOR&&n===kt.INTERIOR?-1:0},ir.convertSegStrings=function(t){for(var e=new Be,n=new Zt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)};var ga=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[1];this._noder=arguments[0],this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[1],r=arguments[2],o=arguments[3];this._noder=arguments[0],this._scaleFactor=i,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ga.prototype.rescale=function(){var t=this;if(xe(arguments[0],yi))for(var n=arguments[0].iterator();n.hasNext();){var i=n.next();t.rescale(i.getCoordinates())}else if(arguments[0]instanceof Array){for(var r=arguments[0],o=0;o<r.length;o++)r[o].x=r[o].x/t._scaleFactor+t._offsetX,r[o].y=r[o].y/t._scaleFactor+t._offsetY;2===r.length&&r[0].equals2D(r[1])&&Bi.out.println(r)}},ga.prototype.scale=function(){var t=this;if(xe(arguments[0],yi)){for(var e=arguments[0],n=new Zt,i=e.iterator();i.hasNext();){var r=i.next();n.add(new ai(t.scale(r.getCoordinates()),r.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),l=0;l<o.length;l++)a[l]=new ft(Math.round((o[l].x-t._offsetX)*t._scaleFactor),Math.round((o[l].y-t._offsetY)*t._scaleFactor),o[l].z);return Ae.removeRepeatedPoints(a)}},ga.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ga.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ga.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ga.prototype.interfaces_=function(){return[Fa]},ga.prototype.getClass=function(){return ga};var qo=function(){this._li=new Aa,this._segStrings=null,this._segStrings=arguments[0]},Dd={fact:{configurable:!0}};qo.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var i=e.next().getCoordinates();t.checkEndPtVertexIntersections(i[0],t._segStrings),t.checkEndPtVertexIntersections(i[i.length-1],t._segStrings)}else if(2===arguments.length)for(var r=arguments[0],a=arguments[1].iterator();a.hasNext();)for(var p=a.next().getCoordinates(),f=1;f<p.length-1;f++)if(p[f].equals(r))throw new Os("found endpt/interior pt intersection at index "+f+" :pt "+r)},qo.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),i=this._segStrings.iterator();i.hasNext();){var r=i.next();this.checkInteriorIntersections(n,r)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],l=o.getCoordinates(),p=a.getCoordinates(),f=0;f<l.length-1;f++)for(var m=0;m<p.length-1;m++)this.checkInteriorIntersections(o,f,a,m);else if(4===arguments.length){var _=arguments[0],b=arguments[1],M=arguments[2],k=arguments[3];if(_===M&&b===k)return null;var S=_.getCoordinates()[b],w=_.getCoordinates()[b+1],R=M.getCoordinates()[k],q=M.getCoordinates()[k+1];if(this._li.computeIntersection(S,w,R,q),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,S,w)||this.hasInteriorIntersection(this._li,R,q)))throw new Os("found non-noded intersection at "+S+"-"+w+" and "+R+"-"+q)}},qo.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},qo.prototype.checkCollapses=function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();this.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0].getCoordinates(),o=0;o<r.length-2;o++)this.checkCollapse(r[o],r[o+1],r[o+2])},qo.prototype.hasInteriorIntersection=function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},qo.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Os("found non-noded collapse at "+qo.fact.createLineString([t,e,n]))},qo.prototype.interfaces_=function(){return[]},qo.prototype.getClass=function(){return qo},Dd.fact.get=function(){return new Be},Object.defineProperties(qo,Dd);var yr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new Xn("Scale factor must be non-zero");1!==e&&(this._pt=new ft(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ft,this._p1Scaled=new ft),this.initCorners(this._pt)},Od={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};yr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>o;if(a)return!1;var l=this.intersectsToleranceSquare(t,e);return De.isTrue(!(a&&l),"Found bad envelope test"),l},yr.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ft(this._maxx,this._maxy),this._corner[1]=new ft(this._minx,this._maxy),this._corner[2]=new ft(this._minx,this._miny),this._corner[3]=new ft(this._maxx,this._miny)},yr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},yr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},yr.prototype.getCoordinate=function(){return this._originalPt},yr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},yr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=yr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new ae(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},yr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},yr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&i||t.equals(this._pt)||e.equals(this._pt)))))},yr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr},Od.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(yr,Od);var Xl=function(){this.tempEnv1=new ae,this.selectedSegment=new ue};Xl.prototype.select=function(){1!==arguments.length&&2===arguments.length&&(arguments[0].getLineSegment(arguments[1],this.selectedSegment),this.select(this.selectedSegment))},Xl.prototype.interfaces_=function(){return[]},Xl.prototype.getClass=function(){return Xl};var nl=function(){this._index=null,this._index=arguments[0]},Rd={HotPixelSnapAction:{configurable:!0}};nl.prototype.snap=function(){if(1===arguments.length)return this.snap(arguments[0],null,-1);if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Nd(e,n,i);return this._index.query(r,{interfaces_:function(){return[pa]},visitItem:function(a){a.select(r,o)}}),o.isNodeAdded()}},nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl},Rd.HotPixelSnapAction.get=function(){return Nd},Object.defineProperties(nl,Rd);var Nd=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var i=arguments[1],r=arguments[2];this._hotPixel=arguments[0],this._parentEdge=i,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var i=arguments[1],r=arguments[0].getContext();if(null!==this._parentEdge&&r===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xl),bu=function(){this._li=null,this._interiorIntersections=null,this._li=arguments[0],this._interiorIntersections=new Zt};bu.prototype.processIntersections=function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],l=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var p=0;p<this._li.getIntersectionNum();p++)this._interiorIntersections.add(this._li.getIntersection(p));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}},bu.prototype.isDone=function(){return!1},bu.prototype.getInteriorIntersections=function(){return this._interiorIntersections},bu.prototype.interfaces_=function(){return[ja]},bu.prototype.getClass=function(){return bu};var ds=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Aa,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};ds.prototype.checkCorrectness=function(t){var e=ai.getNodedSubstrings(t),n=new qo(e);try{n.checkValid()}catch(i){if(!(i instanceof dd))throw i;i.printStackTrace()}},ds.prototype.getNodedSubstrings=function(){return ai.getNodedSubstrings(this._nodedSegStrings)},ds.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},ds.prototype.findInteriorIntersections=function(t,e){var n=new bu(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},ds.prototype.computeVertexSnaps=function(){var t=this;if(xe(arguments[0],yi))for(var n=arguments[0].iterator();n.hasNext();){var i=n.next();t.computeVertexSnaps(i)}else if(arguments[0]instanceof ai)for(var r=arguments[0],o=r.getCoordinates(),a=0;a<o.length;a++){var l=new yr(o[a],t._scaleFactor,t._li);t._pointSnapper.snap(l,r,a)&&r.addIntersection(o[a],a)}},ds.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new $c,this._pointSnapper=new nl(this._noder.getIndex()),this.snapRound(t,this._li)},ds.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var i=n.next(),r=new yr(i,e._scaleFactor,e._li);e._pointSnapper.snap(r)}},ds.prototype.interfaces_=function(){return[Fa]},ds.prototype.getClass=function(){return ds};var Fi=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Cn,this._resultGeometry=null,this._saveException=null,1===arguments.length)this._argGeom=arguments[0];else if(2===arguments.length){var n=arguments[1];this._argGeom=arguments[0],this._bufParams=n}},il={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Fi.prototype.bufferFixedPrecision=function(t){var e=new ga(new ds(new Pn(1)),t.getScale()),n=new ir(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Fi.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Fi.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(o){if(!(o instanceof zs))throw o;t._saveException=o}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=Fi.precisionScaleFactor(this._argGeom,this._distance,arguments[0]),r=new Pn(i);this.bufferFixedPrecision(r)}},Fi.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Pn.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Fi.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Fi.prototype.bufferOriginalPrecision=function(){try{var t=new ir(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof Os))throw e;this._saveException=e}},Fi.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Fi.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi},Fi.bufferOp=function(){if(2===arguments.length){var e=arguments[1];return new Fi(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Le&&"number"==typeof arguments[1]){var o=arguments[1],a=arguments[2],l=new Fi(arguments[0]);return l.setQuadrantSegments(a),l.getResultGeometry(o)}if(arguments[2]instanceof Cn&&arguments[0]instanceof Le&&"number"==typeof arguments[1]){var m=arguments[1];return new Fi(arguments[0],arguments[2]).getResultGeometry(m)}}else if(4===arguments.length){var S=arguments[1],w=arguments[2],R=arguments[3],q=new Fi(arguments[0]);return q.setQuadrantSegments(w),q.setEndCapStyle(R),q.getResultGeometry(S)}},Fi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=Ar.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},il.CAP_ROUND.get=function(){return Cn.CAP_ROUND},il.CAP_BUTT.get=function(){return Cn.CAP_FLAT},il.CAP_FLAT.get=function(){return Cn.CAP_FLAT},il.CAP_SQUARE.get=function(){return Cn.CAP_SQUARE},il.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Fi,il);var rr=function(){this._pt=[new ft,new ft],this._distance=Ce.NaN,this._isNull=!0};rr.prototype.getCoordinates=function(){return this._pt},rr.prototype.getCoordinate=function(t){return this._pt[t]},rr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},rr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},rr.prototype.getDistance=function(){return this._distance},rr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr};var gs=function(){};gs.prototype.interfaces_=function(){return[]},gs.prototype.getClass=function(){return gs},gs.computeDistance=function(){if(arguments[2]instanceof rr&&arguments[0]instanceof ei&&arguments[1]instanceof ft)for(var e=arguments[1],n=arguments[2],i=arguments[0].getCoordinates(),r=new ue,o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof rr&&arguments[0]instanceof vi&&arguments[1]instanceof ft){var l=arguments[0],p=arguments[1],f=arguments[2];gs.computeDistance(l.getExteriorRing(),p,f);for(var m=0;m<l.getNumInteriorRing();m++)gs.computeDistance(l.getInteriorRingN(m),p,f)}else if(arguments[2]instanceof rr&&arguments[0]instanceof Le&&arguments[1]instanceof ft){var _=arguments[0],b=arguments[1],M=arguments[2];if(_ instanceof ei)gs.computeDistance(_,b,M);else if(_ instanceof vi)gs.computeDistance(_,b,M);else if(_ instanceof tr)for(var k=_,S=0;S<k.getNumGeometries();S++){var w=k.getGeometryN(S);gs.computeDistance(w,b,M)}else M.setMinimum(_.getCoordinate(),b)}else if(arguments[2]instanceof rr&&arguments[0]instanceof ue&&arguments[1]instanceof ft){var q=arguments[1],P=arguments[2],O=arguments[0].closestPoint(q);P.setMinimum(O,q)}};var qa=function(t){this._maxPtDist=new rr,this._inputGeom=t||null},tp={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};qa.prototype.computeMaxMidpointDistance=function(t){var e=new _a(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},qa.prototype.computeMaxVertexDistance=function(t){var e=new xu(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},qa.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},qa.prototype.getDistancePoints=function(){return this._maxPtDist},qa.prototype.interfaces_=function(){return[]},qa.prototype.getClass=function(){return qa},tp.MaxPointDistanceFilter.get=function(){return xu},tp.MaxMidpointDistanceFilter.get=function(){return _a},Object.defineProperties(qa,tp);var xu=function(t){this._maxPtDist=new rr,this._minPtDist=new rr,this._geom=t||null};xu.prototype.filter=function(t){this._minPtDist.initialize(),gs.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xu.prototype.getMaxPointDistance=function(){return this._maxPtDist},xu.prototype.interfaces_=function(){return[as]},xu.prototype.getClass=function(){return xu};var _a=function(t){this._maxPtDist=new rr,this._minPtDist=new rr,this._geom=t||null};_a.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),i=t.getCoordinate(e),r=new ft((n.x+i.x)/2,(n.y+i.y)/2);this._minPtDist.initialize(),gs.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},_a.prototype.isDone=function(){return!1},_a.prototype.isGeometryChanged=function(){return!1},_a.prototype.getMaxPointDistance=function(){return this._maxPtDist},_a.prototype.interfaces_=function(){return[mo]},_a.prototype.getClass=function(){return _a};var Us=function(t){this._comps=t||null};Us.prototype.filter=function(t){t instanceof vi&&this._comps.add(t)},Us.prototype.interfaces_=function(){return[No]},Us.prototype.getClass=function(){return Us},Us.getPolygons=function(){if(1===arguments.length)return Us.getPolygons(arguments[0],new Zt);if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof vi?n.add(e):e instanceof tr&&e.apply(new Us(n)),n}};var Gi=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length)this._lines=arguments[0];else if(2===arguments.length){var n=arguments[1];this._lines=arguments[0],this._isForcedToLineString=n}};Gi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof us){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof ei&&this._lines.add(t)},Gi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Gi.prototype.interfaces_=function(){return[Rs]},Gi.prototype.getClass=function(){return Gi},Gi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Gi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Gi.getLines(e,n))}},Gi.getLines=function(){if(1===arguments.length)return Gi.getLines(arguments[0],!1);if(2===arguments.length){if(xe(arguments[0],yi)&&xe(arguments[1],yi)){for(var n=arguments[1],i=arguments[0].iterator();i.hasNext();){var r=i.next();Gi.getLines(r,n)}return n}if(arguments[0]instanceof Le&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],l=new Zt;return o.apply(new Gi(l,a)),l}if(arguments[0]instanceof Le&&xe(arguments[1],yi)){var p=arguments[0],f=arguments[1];return p instanceof ei?f.add(p):p.apply(new Gi(f)),f}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&xe(arguments[0],yi)&&xe(arguments[1],yi)){for(var _=arguments[1],b=arguments[2],M=arguments[0].iterator();M.hasNext();){var k=M.next();Gi.getLines(k,_,b)}return _}if("boolean"==typeof arguments[2]&&arguments[0]instanceof Le&&xe(arguments[1],yi)){var w=arguments[1];return arguments[0].apply(new Gi(w,arguments[2])),w}}};var bo=function(){if(this._boundaryRule=to.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new Xn("Rule must be non-null");this._boundaryRule=t}};bo.prototype.locateInternal=function(){if(arguments[0]instanceof ft&&arguments[1]instanceof vi){var e=arguments[0],n=arguments[1];if(n.isEmpty())return kt.EXTERIOR;var i=n.getExteriorRing(),r=this.locateInPolygonRing(e,i);if(r===kt.EXTERIOR)return kt.EXTERIOR;if(r===kt.BOUNDARY)return kt.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),l=this.locateInPolygonRing(e,a);if(l===kt.INTERIOR)return kt.EXTERIOR;if(l===kt.BOUNDARY)return kt.BOUNDARY}return kt.INTERIOR}if(arguments[0]instanceof ft&&arguments[1]instanceof ei){var p=arguments[0],f=arguments[1];if(!f.getEnvelopeInternal().intersects(p))return kt.EXTERIOR;var m=f.getCoordinates();return f.isClosed()||!p.equals(m[0])&&!p.equals(m[m.length-1])?Jt.isOnLine(p,m)?kt.INTERIOR:kt.EXTERIOR:kt.BOUNDARY}if(arguments[0]instanceof ft&&arguments[1]instanceof kr){var _=arguments[0];return arguments[1].getCoordinate().equals2D(_)?kt.INTERIOR:kt.EXTERIOR}},bo.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Jt.locatePointInRing(t,e.getCoordinates()):kt.EXTERIOR},bo.prototype.intersects=function(t,e){return this.locate(t,e)!==kt.EXTERIOR},bo.prototype.updateLocationInfo=function(t){t===kt.INTERIOR&&(this._isIn=!0),t===kt.BOUNDARY&&this._numBoundaries++},bo.prototype.computeLocation=function(t,e){var n=this;if(e instanceof kr&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof ei)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof vi)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof za)for(var i=e,r=0;r<i.getNumGeometries();r++){var o=i.getGeometryN(r);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof ls)for(var a=e,l=0;l<a.getNumGeometries();l++){var p=a.getGeometryN(l);n.updateLocationInfo(n.locateInternal(t,p))}else if(e instanceof tr)for(var f=new ps(e);f.hasNext();){var m=f.next();m!==e&&n.computeLocation(t,m)}},bo.prototype.locate=function(t,e){return e.isEmpty()?kt.EXTERIOR:e instanceof ei||e instanceof vi?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?kt.BOUNDARY:this._numBoundaries>0||this._isIn?kt.INTERIOR:kt.EXTERIOR)},bo.prototype.interfaces_=function(){return[]},bo.prototype.getClass=function(){return bo};var or=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var r=arguments[1],o=arguments[2];this._component=arguments[0],this._segIndex=r,this._pt=o}},Ad={INSIDE_AREA:{configurable:!0}};or.prototype.isInsideArea=function(){return this._segIndex===or.INSIDE_AREA},or.prototype.getCoordinate=function(){return this._pt},or.prototype.getGeometryComponent=function(){return this._component},or.prototype.getSegmentIndex=function(){return this._segIndex},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},Ad.INSIDE_AREA.get=function(){return-1},Object.defineProperties(or,Ad);var ma=function(t){this._pts=t||null};ma.prototype.filter=function(t){t instanceof kr&&this._pts.add(t)},ma.prototype.interfaces_=function(){return[No]},ma.prototype.getClass=function(){return ma},ma.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof kr?vo.singletonList(t):ma.getPoints(t,new Zt)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof kr?n.add(e):e instanceof tr&&e.apply(new ma(n)),n}};var wu=function(){this._locations=null,this._locations=arguments[0]};wu.prototype.filter=function(t){(t instanceof kr||t instanceof ei||t instanceof vi)&&this._locations.add(new or(t,0,t.getCoordinate()))},wu.prototype.interfaces_=function(){return[No]},wu.prototype.getClass=function(){return wu},wu.getLocations=function(t){var e=new Zt;return t.apply(new wu(e)),e};var ji=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new bo,this._minDistanceLocation=null,this._minDistance=Ce.MAX_VALUE,2===arguments.length)this._geom=[arguments[0],arguments[1]],this._terminateDistance=0;else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=i,this._terminateDistance=r}};ji.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=1-n,o=Us.getPolygons(this._geom[n]);if(o.size()>0){var a=wu.getLocations(this._geom[r]);if(this.computeContainmentDistance(a,o,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=i[0],this._minDistanceLocation[n]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&xe(arguments[0],go)&&xe(arguments[1],go)){for(var l=arguments[0],p=arguments[1],f=arguments[2],m=0;m<l.size();m++)for(var _=l.get(m),b=0;b<p.size();b++)if(t.computeContainmentDistance(_,p.get(b),f),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof or&&arguments[1]instanceof vi){var M=arguments[0],k=arguments[1],S=arguments[2],w=M.getCoordinate();if(kt.EXTERIOR!==this._ptLocator.locate(w,k))return this._minDistance=0,S[0]=M,S[1]=new or(k,w),null}},ji.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),a=0;a<e.size();a++){var l=e.get(a);if(i.computeMinDistance(o,l,n),i._minDistance<=i._terminateDistance)return null}},ji.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Gi.getLines(this._geom[0]),n=Gi.getLines(this._geom[1]),i=ma.getPoints(this._geom[0]),r=ma.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},ji.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},ji.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},ji.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},ji.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof ei&&arguments[1]instanceof kr){var e=arguments[0],n=arguments[1],i=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var r=e.getCoordinates(),o=n.getCoordinate(),a=0;a<r.length-1;a++){var l=Jt.distancePointLine(o,r[a],r[a+1]);if(l<t._minDistance){t._minDistance=l;var f=new ue(r[a],r[a+1]).closestPoint(o);i[0]=new or(e,a,f),i[1]=new or(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof ei&&arguments[1]instanceof ei){var m=arguments[0],_=arguments[1],b=arguments[2];if(m.getEnvelopeInternal().distance(_.getEnvelopeInternal())>this._minDistance)return null;for(var M=m.getCoordinates(),k=_.getCoordinates(),S=0;S<M.length-1;S++)for(var w=0;w<k.length-1;w++){var R=Jt.distanceLineLine(M[S],M[S+1],k[w],k[w+1]);if(R<t._minDistance){t._minDistance=R;var q=new ue(M[S],M[S+1]),P=new ue(k[w],k[w+1]),O=q.closestPoints(P);b[0]=new or(m,S,O[0]),b[1]=new or(_,w,O[1])}if(t._minDistance<=t._terminateDistance)return null}}},ji.prototype.computeMinDistancePoints=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),a=0;a<e.size();a++){var l=e.get(a),p=o.getCoordinate().distance(l.getCoordinate());if(p<i._minDistance&&(i._minDistance=p,n[0]=new or(o,0,o.getCoordinate()),n[1]=new or(l,0,l.getCoordinate())),i._minDistance<=i._terminateDistance)return null}},ji.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new Xn("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},ji.prototype.computeMinDistanceLines=function(t,e,n){for(var i=this,r=0;r<t.size();r++)for(var o=t.get(r),a=0;a<e.size();a++){var l=e.get(a);if(i.computeMinDistance(o,l,n),i._minDistance<=i._terminateDistance)return null}},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.distance=function(t,e){return new ji(t,e).distance()},ji.isWithinDistance=function(t,e,n){return new ji(t,e,n).distance()<=n},ji.nearestPoints=function(t,e){return new ji(t,e).nearestPoints()};var Wi=function(){this._pt=[new ft,new ft],this._distance=Ce.NaN,this._isNull=!0};Wi.prototype.getCoordinates=function(){return this._pt},Wi.prototype.getCoordinate=function(t){return this._pt[t]},Wi.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i<this._distance&&this.initialize(e,n,i)}},Wi.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[1],r=arguments[2];this._pt[0].setCoordinate(arguments[0]),this._pt[1].setCoordinate(i),this._distance=r,this._isNull=!1}},Wi.prototype.toString=function(){return fo.toLineString(this._pt[0],this._pt[1])},Wi.prototype.getDistance=function(){return this._distance},Wi.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var i=e.distance(n);i>this._distance&&this.initialize(e,n,i)}},Wi.prototype.interfaces_=function(){return[]},Wi.prototype.getClass=function(){return Wi};var Vo=function(){};Vo.prototype.interfaces_=function(){return[]},Vo.prototype.getClass=function(){return Vo},Vo.computeDistance=function(){if(arguments[2]instanceof Wi&&arguments[0]instanceof ei&&arguments[1]instanceof ft)for(var t=arguments[0],e=arguments[1],n=arguments[2],i=new ue,r=t.getCoordinates(),o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Wi&&arguments[0]instanceof vi&&arguments[1]instanceof ft){var l=arguments[0],p=arguments[1],f=arguments[2];Vo.computeDistance(l.getExteriorRing(),p,f);for(var m=0;m<l.getNumInteriorRing();m++)Vo.computeDistance(l.getInteriorRingN(m),p,f)}else if(arguments[2]instanceof Wi&&arguments[0]instanceof Le&&arguments[1]instanceof ft){var _=arguments[0],b=arguments[1],M=arguments[2];if(_ instanceof ei)Vo.computeDistance(_,b,M);else if(_ instanceof vi)Vo.computeDistance(_,b,M);else if(_ instanceof tr)for(var k=_,S=0;S<k.getNumGeometries();S++){var w=k.getGeometryN(S);Vo.computeDistance(w,b,M)}else M.setMinimum(_.getCoordinate(),b)}else if(arguments[2]instanceof Wi&&arguments[0]instanceof ue&&arguments[1]instanceof ft){var q=arguments[1],P=arguments[2],O=arguments[0].closestPoint(q);P.setMinimum(O,q)}};var oo=function(){this._g0=null,this._g1=null,this._ptDist=new Wi,this._densifyFrac=0;var e=arguments[1];this._g0=arguments[0],this._g1=e},ep={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};oo.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},oo.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new Xn("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},oo.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},oo.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},oo.prototype.computeOrientedDistance=function(t,e,n){var i=new Eu(e);if(t.apply(i),n.setMaximum(i.getMaxPointDistance()),this._densifyFrac>0){var r=new ya(e,this._densifyFrac);t.apply(r),n.setMaximum(r.getMaxPointDistance())}},oo.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo},oo.distance=function(){if(2===arguments.length)return new oo(arguments[0],arguments[1]).distance();if(3===arguments.length){var o=arguments[2],a=new oo(arguments[0],arguments[1]);return a.setDensifyFraction(o),a.distance()}},ep.MaxPointDistanceFilter.get=function(){return Eu},ep.MaxDensifiedByFractionDistanceFilter.get=function(){return ya},Object.defineProperties(oo,ep);var Eu=function(){this._maxPtDist=new Wi,this._minPtDist=new Wi,this._euclideanDist=new Vo,this._geom=null,this._geom=arguments[0]};Eu.prototype.filter=function(t){this._minPtDist.initialize(),Vo.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Eu.prototype.getMaxPointDistance=function(){return this._maxPtDist},Eu.prototype.interfaces_=function(){return[as]},Eu.prototype.getClass=function(){return Eu};var ya=function(){this._maxPtDist=new Wi,this._minPtDist=new Wi,this._geom=null,this._numSubSegs=0;var e=arguments[1];this._geom=arguments[0],this._numSubSegs=Math.trunc(Math.round(1/e))};ya.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var i=t.getCoordinate(e-1),r=t.getCoordinate(e),o=(r.x-i.x)/this._numSubSegs,a=(r.y-i.y)/this._numSubSegs,l=0;l<this._numSubSegs;l++){var m=new ft(i.x+l*o,i.y+l*a);n._minPtDist.initialize(),Vo.computeDistance(n._geom,m,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},ya.prototype.isDone=function(){return!1},ya.prototype.isGeometryChanged=function(){return!1},ya.prototype.getMaxPointDistance=function(){return this._maxPtDist},ya.prototype.interfaces_=function(){return[mo]},ya.prototype.getClass=function(){return ya};var Sr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},np={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Sr.prototype.checkMaximumDistance=function(t,e,n){var i=new oo(e,t);if(i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var r=i.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+fo.toLineString(r[0],r[1])+")"}},Sr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Sr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Sr.VERBOSE&&Bi.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Sr.prototype.checkNegativeValid=function(){if(!(this._input instanceof vi||this._input instanceof ls||this._input instanceof tr))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Sr.prototype.getErrorIndicator=function(){return this._errorIndicator},Sr.prototype.checkMinimumDistance=function(t,e,n){var i=new ji(t,e,n);if(this._minDistanceFound=i.distance(),this._minDistanceFound<n){this._isValid=!1;var r=i.nearestPoints();this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+fo.toLineString(r[0],r[1])+" )"}},Sr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Sr.prototype.getErrorLocation=function(){return this._errorLocation},Sr.prototype.getPolygonLines=function(t){for(var e=new Zt,n=new Gi(e),i=Us.getPolygons(t).iterator();i.hasNext();)i.next().apply(n);return t.getFactory().buildGeometry(e)},Sr.prototype.getErrorMessage=function(){return this._errMsg},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},np.VERBOSE.get=function(){return!1},np.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Sr,np);var Ui=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},ip={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Ui.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Ui.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Ui.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new ae(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new ae(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Ui.prototype.checkDistance=function(){var t=new Sr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Ui.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Ui.prototype.checkPolygonal=function(){this._result instanceof vi||this._result instanceof ls||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Ui.prototype.getErrorIndicator=function(){return this._errorIndicator},Ui.prototype.getErrorLocation=function(){return this._errorLocation},Ui.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Ui.prototype.report=function(t){if(!Ui.VERBOSE)return null;Bi.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Ui.prototype.getErrorMessage=function(){return this._errorMsg},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.isValidMsg=function(t,e,n){var i=new Ui(t,e,n);return i.isValid()?null:i.getErrorMessage()},Ui.isValid=function(t,e,n){return!!new Ui(t,e,n).isValid()},ip.VERBOSE.get=function(){return!1},ip.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ui,ip);var Ho=function(){this._pts=null,this._data=null;var e=arguments[1];this._pts=arguments[0],this._data=e};Ho.prototype.getCoordinates=function(){return this._pts},Ho.prototype.size=function(){return this._pts.length},Ho.prototype.getCoordinate=function(t){return this._pts[t]},Ho.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ho.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:yu.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ho.prototype.setData=function(t){this._data=t},Ho.prototype.getData=function(){return this._data},Ho.prototype.toString=function(){return fo.toLineString(new si(this._pts))},Ho.prototype.interfaces_=function(){return[cs]},Ho.prototype.getClass=function(){return Ho};var Ii=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Zt,this._intersectionCount=0,this._keepIntersections=!0,this._li=arguments[0],this._interiorIntersection=null};Ii.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Ii.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Ii.prototype.getIntersectionSegments=function(){return this._intSegments},Ii.prototype.count=function(){return this._intersectionCount},Ii.prototype.getIntersections=function(){return this._intersections},Ii.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ii.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Ii.prototype.processIntersections=function(t,e,n,i){if(!this._findAllIntersections&&this.hasIntersection()||t===n&&e===i||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,i))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],l=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=l,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Ii.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Ii.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Ii.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Ii.prototype.interfaces_=function(){return[ja]},Ii.prototype.getClass=function(){return Ii},Ii.createAllIntersectionsFinder=function(t){var e=new Ii(t);return e.setFindAllIntersections(!0),e},Ii.createAnyIntersectionFinder=function(t){return new Ii(t)},Ii.createIntersectionCounter=function(t){var e=new Ii(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var xo=function(){this._li=new Aa,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=arguments[0]};xo.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},xo.prototype.getIntersections=function(){return this._segInt.getIntersections()},xo.prototype.isValid=function(){return this.execute(),this._isValid},xo.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},xo.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Ii(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new $c;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},xo.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new zs(this.getErrorMessage(),this._segInt.getInteriorIntersection())},xo.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+fo.toLineString(t[0],t[1])+" and "+fo.toLineString(t[2],t[3])},xo.prototype.interfaces_=function(){return[]},xo.prototype.getClass=function(){return xo},xo.computeIntersections=function(t){var e=new xo(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Va=function t(){this._nv=null,this._nv=new xo(t.toSegmentStrings(arguments[0]))};Va.prototype.checkValid=function(){this._nv.checkValid()},Va.prototype.interfaces_=function(){return[]},Va.prototype.getClass=function(){return Va},Va.toSegmentStrings=function(t){for(var e=new Zt,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Ho(i.getCoordinates(),i))}return e},Va.checkValid=function(t){new Va(t).checkValid()};var Mu=function(t){this._mapOp=t};Mu.prototype.map=function(t){for(var e=new Zt,n=0;n<t.getNumGeometries();n++){var i=this._mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(Be.toGeometryArray(e))},Mu.prototype.interfaces_=function(){return[]},Mu.prototype.getClass=function(){return Mu},Mu.map=function(t,e){return new Mu(e).map(t)};var Zo=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Zt,this._resultLineList=new Zt;var e=arguments[1],n=arguments[2];this._op=arguments[0],this._geometryFactory=e,this._ptLocator=n};Zo.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next();e.collectLineEdge(i,t,e._lineEdgesList),e.collectBoundaryTouchEdge(i,t,e._lineEdgesList)}},Zo.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Zo.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Zo.prototype.collectLineEdge=function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ie.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},Zo.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this._op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},Zo.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Zo.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(i),n.setInResult(!0)}},Zo.prototype.collectBoundaryTouchEdge=function(t,e,n){var i=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(De.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ie.isResultOfOp(i,e)&&e===Ie.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Zo.prototype.interfaces_=function(){return[]},Zo.prototype.getClass=function(){return Zo};var ku=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Zt;var e=arguments[1];this._op=arguments[0],this._geometryFactory=e};ku.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},ku.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ie.INTERSECTION)){var i=n.getLabel();Ie.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},ku.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},ku.prototype.interfaces_=function(){return[]},ku.prototype.getClass=function(){return ku};var vr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};vr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},vr.prototype.transformPolygon=function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof us&&!i.isEmpty()||(n=!1);for(var r=new Zt,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof us||(n=!1),r.add(a))}if(n)return this._factory.createPolygon(i,r.toArray([]));var l=new Zt;return null!==i&&l.add(i),l.addAll(r),this._factory.buildGeometry(l)},vr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},vr.prototype.getInputGeometry=function(){return this._inputGeom},vr.prototype.transformMultiLineString=function(t,e){for(var n=new Zt,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},vr.prototype.transformCoordinates=function(t,e){return this.copy(t)},vr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},vr.prototype.transformMultiPoint=function(t,e){for(var n=new Zt,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},vr.prototype.transformMultiPolygon=function(t,e){for(var n=new Zt,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this._factory.buildGeometry(n)},vr.prototype.copy=function(t){return t.copy()},vr.prototype.transformGeometryCollection=function(t,e){for(var n=new Zt,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Be.toGeometryArray(n)):this._factory.buildGeometry(n)},vr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof kr)return this.transformPoint(t,null);if(t instanceof Ju)return this.transformMultiPoint(t,null);if(t instanceof us)return this.transformLinearRing(t,null);if(t instanceof ei)return this.transformLineString(t,null);if(t instanceof za)return this.transformMultiLineString(t,null);if(t instanceof vi)return this.transformPolygon(t,null);if(t instanceof ls)return this.transformMultiPolygon(t,null);if(t instanceof tr)return this.transformGeometryCollection(t,null);throw new Xn("Unknown Geometry subtype: "+t.getClass().getName())},vr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var i=n.size();return i>0&&i<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr};var _s=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new ue,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof ei&&"number"==typeof arguments[1]){var n=arguments[1];t.call(this,arguments[0].getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var i=arguments[0],r=arguments[1];this._srcPts=i,this._isClosed=t.isClosed(i),this._snapTolerance=r}};_s.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new ft(o)),0===i&&this._isClosed&&t.set(t.size()-1,new ft(o)))}},_s.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},_s.prototype.snapTo=function(t){var e=new Rl(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},_s.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new ft(r),!1)}},_s.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,i=Ce.MAX_VALUE,r=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<i&&(i=a,r=o)}return r},_s.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},_s.prototype.interfaces_=function(){return[]},_s.prototype.getClass=function(){return _s},_s.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var ui=function(t){this._srcGeom=t||null},Bd={SNAP_PRECISION_FACTOR:{configurable:!0}};ui.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new zd(e,n).transform(this._srcGeom)},ui.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),i=new zd(t,n,!0).transform(this._srcGeom),r=i;return e&&xe(r,ca)&&(r=i.buffer(0)),r},ui.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},ui.prototype.extractTargetCoordinates=function(t){for(var e=new Ro,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},ui.prototype.computeMinimumSegmentLength=function(t){for(var e=Ce.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui},ui.snap=function(t,e,n){var i=new Array(2).fill(null),r=new ui(t);i[0]=r.snapTo(e,n);var o=new ui(e);return i[1]=o.snapTo(i[0],n),i},ui.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ui.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Pn.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var o=arguments[1];return Math.min(ui.computeOverlaySnapTolerance(arguments[0]),ui.computeOverlaySnapTolerance(o))}},ui.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*ui.SNAP_PRECISION_FACTOR},ui.snapToSelf=function(t,e,n){return new ui(t).snapToSelf(e,n)},Bd.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(ui,Bd);var zd=function(t){function e(n,i,r){t.call(this),this._snapTolerance=n||null,this._snapPts=i||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.snapLine=function(n,i){var r=new _s(n,this._snapTolerance);return r.setAllowSnappingToSourceVertices(this._isSelfSnap),r.snapTo(i)},e.prototype.transformCoordinates=function(n,i){var r=n.toCoordinateArray(),o=this.snapLine(r,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(o)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vr),sr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};sr.prototype.getCommon=function(){return Ce.longBitsToDouble(this._commonBits)},sr.prototype.add=function(t){var e=Ce.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=sr.signExpBits(this._commonBits),this._isFirst=!1,null):sr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=sr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=sr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},sr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=Ce.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+Ce.toBinaryString(t),r=i.substring(i.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},sr.getBit=function(t,e){return t&1<<e?1:0},sr.signExpBits=function(t){return t>>52},sr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},sr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(sr.getBit(t,i)!==sr.getBit(e,i))return n;n++}return 52};var va=function(){this._commonCoord=null,this._ccFilter=new Pu},rp={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};va.prototype.addCommonBits=function(t){var e=new La(this._commonCoord);t.apply(e),t.geometryChanged()},va.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ft(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new La(e);return t.apply(n),t.geometryChanged(),t},va.prototype.getCommonCoordinate=function(){return this._commonCoord},va.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},va.prototype.interfaces_=function(){return[]},va.prototype.getClass=function(){return va},rp.CommonCoordinateFilter.get=function(){return Pu},rp.Translater.get=function(){return La},Object.defineProperties(va,rp);var Pu=function(){this._commonBitsX=new sr,this._commonBitsY=new sr};Pu.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Pu.prototype.getCommonCoordinate=function(){return new ft(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Pu.prototype.interfaces_=function(){return[as]},Pu.prototype.getClass=function(){return Pu};var La=function(){this.trans=null,this.trans=arguments[0]};La.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},La.prototype.isDone=function(){return!1},La.prototype.isGeometryChanged=function(){return!0},La.prototype.interfaces_=function(){return[mo]},La.prototype.getClass=function(){return La};var Ti=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Ti.prototype.selfSnap=function(t){return new ui(t).snapTo(t,this._snapTolerance)},Ti.prototype.removeCommonBits=function(t){this._cbr=new va,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Ti.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Ti.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ie.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Ti.prototype.checkValid=function(t){t.isValid()||Bi.out.println("Snapped geometry is invalid")},Ti.prototype.computeSnapTolerance=function(){this._snapTolerance=ui.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Ti.prototype.snap=function(t){var e=this.removeCommonBits(t);return ui.snap(e[0],e[1],this._snapTolerance)},Ti.prototype.interfaces_=function(){return[]},Ti.prototype.getClass=function(){return Ti},Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n)},Ti.union=function(t,e){return Ti.overlayOp(t,e,Ie.UNION)},Ti.intersection=function(t,e){return Ti.overlayOp(t,e,Ie.INTERSECTION)},Ti.symDifference=function(t,e){return Ti.overlayOp(t,e,Ie.SYMDIFFERENCE)},Ti.difference=function(t,e){return Ti.overlayOp(t,e,Ie.DIFFERENCE)};var ar=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};ar.prototype.getResultGeometry=function(t){var e=null,n=!1,i=null;try{e=Ie.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(r){if(!(r instanceof Os))throw r;i=r}if(!n)try{e=Ti.overlayOp(this._geom[0],this._geom[1],t)}catch(r){throw r instanceof Os?i:r}return e},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar},ar.overlayOp=function(t,e,n){return new ar(t,e).getResultGeometry(n)},ar.union=function(t,e){return ar.overlayOp(t,e,Ie.UNION)},ar.intersection=function(t,e){return ar.overlayOp(t,e,Ie.INTERSECTION)},ar.symDifference=function(t,e){return ar.overlayOp(t,e,Ie.SYMDIFFERENCE)},ar.difference=function(t,e){return ar.overlayOp(t,e,Ie.DIFFERENCE)};var Wl=function(){this.mce=null,this.chainIndex=null;var e=arguments[1];this.mce=arguments[0],this.chainIndex=e};Wl.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl};var Ir=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=i,this._xValue=r,this._obj=o}},op={INSERT:{configurable:!0},DELETE:{configurable:!0}};Ir.prototype.isDelete=function(){return this._eventType===Ir.DELETE},Ir.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Ir.prototype.getObject=function(){return this._obj},Ir.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},Ir.prototype.getInsertEvent=function(){return this._insertEvent},Ir.prototype.isInsert=function(){return this._eventType===Ir.INSERT},Ir.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Ir.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Ir.prototype.interfaces_=function(){return[Qr]},Ir.prototype.getClass=function(){return Ir},op.INSERT.get=function(){return 1},op.DELETE.get=function(){return 2},Object.defineProperties(Ir,op);var Gh=function(){};Gh.prototype.interfaces_=function(){return[]},Gh.prototype.getClass=function(){return Gh};var qi=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var e=arguments[1],n=arguments[2];this._li=arguments[0],this._includeProper=e,this._recordIsolated=n};qi.prototype.isTrivialIntersection=function(t,e,n,i){if(t===n&&1===this._li.getIntersectionNum()){if(qi.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},qi.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},qi.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},qi.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},qi.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},qi.prototype.hasProperIntersection=function(){return this._hasProper},qi.prototype.hasIntersection=function(){return this._hasIntersection},qi.prototype.isDone=function(){return this._isDone},qi.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},qi.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},qi.prototype.addIntersections=function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[i],l=n.getCoordinates()[i+1];this._li.computeIntersection(r,o,a,l),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},qi.prototype.interfaces_=function(){return[]},qi.prototype.getClass=function(){return qi},qi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $_=function(t){function e(){t.call(this),this.events=new Zt,this.nOverlaps=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.prepareEvents=function(){vo.sort(this.events);for(var n=0;n<this.events.size();n++){var i=this.events.get(n);i.isDelete()&&i.getInsertEvent().setDeleteEventIndex(n)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var i=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var r=0;r<this.events.size();r++){var o=this.events.get(r);if(o.isInsert()&&this.processOverlaps(r,o.getDeleteEventIndex(),o,i),i.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof qi&&xe(arguments[0],go)&&xe(arguments[1],go)){var a=arguments[0],l=arguments[1],p=arguments[2];this.addEdges(a,a),this.addEdges(l,l),this.computeIntersections(p)}else if("boolean"==typeof arguments[2]&&xe(arguments[0],go)&&arguments[1]instanceof qi){var f=arguments[0],m=arguments[1];arguments[2]?this.addEdges(f,null):this.addEdges(f),this.computeIntersections(m)}},e.prototype.addEdge=function(n,i){for(var r=n.getMonotoneChainEdge(),o=r.getStartIndexes(),a=0;a<o.length-1;a++){var l=new Wl(r,a),p=new Ir(i,r.getMinX(a),l);this.events.add(p),this.events.add(new Ir(r.getMaxX(a),p))}},e.prototype.processOverlaps=function(n,i,r,o){for(var a=r.getObject(),l=n;l<i;l++){var p=this.events.get(l);if(p.isInsert()){var f=p.getObject();r.isSameLabel(p)||(a.computeIntersections(f,o),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var r=arguments[0].iterator();r.hasNext();){var o=r.next();this.addEdge(o,o)}else if(2===arguments.length)for(var l=arguments[1],p=arguments[0].iterator();p.hasNext();){var f=p.next();this.addEdge(f,l)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Gh),ms=function(){this._min=Ce.POSITIVE_INFINITY,this._max=Ce.NEGATIVE_INFINITY},Fd={NodeComparator:{configurable:!0}};ms.prototype.getMin=function(){return this._min},ms.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},ms.prototype.getMax=function(){return this._max},ms.prototype.toString=function(){return fo.toLineString(new ft(this._min,0),new ft(this._max,0))},ms.prototype.interfaces_=function(){return[]},ms.prototype.getClass=function(){return ms},Fd.NodeComparator.get=function(){return Kl},Object.defineProperties(ms,Fd);var Kl=function(){};Kl.prototype.compare=function(t,e){var r=(t._min+t._max)/2,o=(e._min+e._max)/2;return r<o?-1:r>o?1:0},Kl.prototype.interfaces_=function(){return[Gu]},Kl.prototype.getClass=function(){return Kl};var tm=function(t){function e(){t.call(this),this._item=null;var i=arguments[1],r=arguments[2];this._min=arguments[0],this._max=i,this._item=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.query=function(n,i,r){if(!this.intersects(n,i))return null;r.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ms),em=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var i=arguments[1];this._node1=arguments[0],this._node2=i,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.buildExtent=function(n,i){this._min=Math.min(n._min,i._min),this._max=Math.max(n._max,i._max)},e.prototype.query=function(n,i,r){if(!this.intersects(n,i))return null;null!==this._node1&&this._node1.query(n,i,r),null!==this._node2&&this._node2.query(n,i,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ms),ys=function(){this._leaves=new Zt,this._root=null,this._level=0};ys.prototype.buildTree=function(){vo.sort(this._leaves,new ms.NodeComparator);for(var t=this._leaves,e=null,n=new Zt;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},ys.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new tm(t,e,n))},ys.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},ys.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},ys.prototype.printNode=function(t){Bi.out.println(fo.toLineString(new ft(t._min,this._level),new ft(t._max,this._level)))},ys.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},ys.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new em(t.get(n),t.get(n+1));e.add(r)}}},ys.prototype.interfaces_=function(){return[]},ys.prototype.getClass=function(){return ys};var rl=function(){this._items=new Zt};rl.prototype.visitItem=function(t){this._items.add(t)},rl.prototype.getItems=function(){return this._items},rl.prototype.interfaces_=function(){return[pa]},rl.prototype.getClass=function(){return rl};var ol=function(){this._index=null;var t=arguments[0];if(!xe(t,ca))throw new Xn("Argument must be Polygonal");this._index=new Ha(t)},sp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};ol.prototype.locate=function(t){var e=new Oo(t),n=new sl(e);return this._index.query(t.y,t.y,n),e.getLocation()},ol.prototype.interfaces_=function(){return[el]},ol.prototype.getClass=function(){return ol},sp.SegmentVisitor.get=function(){return sl},sp.IntervalIndexedGeometry.get=function(){return Ha},Object.defineProperties(ol,sp);var sl=function(){this._counter=null,this._counter=arguments[0]};sl.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},sl.prototype.interfaces_=function(){return[pa]},sl.prototype.getClass=function(){return sl};var Ha=function(){this._index=new ys,this.init(arguments[0])};Ha.prototype.init=function(t){for(var e=Gi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Ha.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new ue(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this._index.insert(i,r,n)}},Ha.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new rl;return this._index.query(t,e,n),n.getItems()}3===arguments.length&&this._index.query(arguments[0],arguments[1],arguments[2])},Ha.prototype.interfaces_=function(){return[]},Ha.prototype.getClass=function(){return Ha};var Jl=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new Ld,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new bo,2===arguments.length){var i=arguments[1],r=to.OGC_SFS_BOUNDARY_RULE;this._argIndex=arguments[0],this._parentGeom=i,this._boundaryNodeRule=r,null!==i&&this.add(i)}else if(3===arguments.length){var a=arguments[1],l=arguments[2];this._argIndex=arguments[0],this._parentGeom=a,this._boundaryNodeRule=l,null!==a&&this.add(a)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertBoundaryPoint=function(n,i){var r=this._nodes.addNode(i).getLabel(),o=1;r.getLocation(n,qt.ON)===kt.BOUNDARY&&o++;var a=e.determineBoundary(this._boundaryNodeRule,o);r.setLocation(n,a)},e.prototype.computeSelfNodes=function(){if(2===arguments.length)return this.computeSelfNodes(arguments[0],arguments[1],!1);if(3===arguments.length){var o=arguments[1],a=arguments[2],l=new qi(arguments[0],!0,!1);return l.setIsDoneIfProperInt(a),this.createEdgeSetIntersector().computeIntersections(this._edges,l,o||!(this._parentGeom instanceof us||this._parentGeom instanceof vi||this._parentGeom instanceof ls)),this.addSelfIntersectionNodes(this._argIndex),l}},e.prototype.computeSplitEdges=function(n){for(var i=this._edges.iterator();i.hasNext();)i.next().eiList.addSplitEdges(n)},e.prototype.computeEdgeIntersections=function(n,i,r){var o=new qi(i,r,!0);return o.setBoundaryNodes(this.getBoundaryNodes(),n.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,n._edges,o),o},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof kr){var i=arguments[0].getCoordinate();this.insertPoint(this._argIndex,i,kt.INTERIOR)}else arguments[0]instanceof ft&&this.insertPoint(this._argIndex,arguments[0],kt.INTERIOR)},e.prototype.addPolygon=function(n){this.addPolygonRing(n.getExteriorRing(),kt.EXTERIOR,kt.INTERIOR);for(var i=0;i<n.getNumInteriorRing();i++){var r=n.getInteriorRingN(i);this.addPolygonRing(r,kt.INTERIOR,kt.EXTERIOR)}},e.prototype.addEdge=function(n){this.insertEdge(n);var i=n.getCoordinates();this.insertPoint(this._argIndex,i[0],kt.BOUNDARY),this.insertPoint(this._argIndex,i[i.length-1],kt.BOUNDARY)},e.prototype.addLineString=function(n){var i=Ae.removeRepeatedPoints(n.getCoordinates());if(i.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=i[0],null;var r=new Fh(i,new Tn(this._argIndex,kt.INTERIOR));this._lineEdgeMap.put(n,r),this.insertEdge(r),De.isTrue(i.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,i[0]),this.insertBoundaryPoint(this._argIndex,i[i.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var n=this.getBoundaryNodes(),i=new Array(n.size()).fill(null),r=0,o=n.iterator();o.hasNext();){var a=o.next();i[r++]=a.getCoordinate().copy()}return i},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(n,i,r){if(this.isBoundaryNode(n,i))return null;r===kt.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(n,i):this.insertPoint(n,i,r)},e.prototype.addPolygonRing=function(n,i,r){if(n.isEmpty())return null;var o=Ae.removeRepeatedPoints(n.getCoordinates());if(o.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=o[0],null;var a=i,l=r;Jt.isCCW(o)&&(a=r,l=i);var p=new Fh(o,new Tn(this._argIndex,kt.BOUNDARY,a,l));this._lineEdgeMap.put(n,p),this.insertEdge(p),this.insertPoint(this._argIndex,o[0],kt.BOUNDARY)},e.prototype.insertPoint=function(n,i,r){var o=this._nodes.addNode(i),a=o.getLabel();null===a?o._label=new Tn(n,r):a.setLocation(n,r)},e.prototype.createEdgeSetIntersector=function(){return new $_},e.prototype.addSelfIntersectionNodes=function(n){for(var i=this._edges.iterator();i.hasNext();)for(var r=i.next(),o=r.getLabel().getLocation(n),a=r.eiList.iterator();a.hasNext();){var l=a.next();this.addSelfIntersectionNode(n,l.coord,o)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var n=arguments[0];if(n.isEmpty())return null;if(n instanceof ls&&(this._useBoundaryDeterminationRule=!1),n instanceof vi)this.addPolygon(n);else if(n instanceof ei)this.addLineString(n);else if(n instanceof kr)this.addPoint(n);else if(n instanceof Ju)this.addCollection(n);else if(n instanceof za)this.addCollection(n);else if(n instanceof ls)this.addCollection(n);else{if(!(n instanceof tr))throw new Error(n.getClass().getName());this.addCollection(n)}},e.prototype.addCollection=function(n){for(var i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.add(r)}},e.prototype.locate=function(n){return xe(this._parentGeom,ca)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new ol(this._parentGeom)),this._areaPtLocator.locate(n)):this._ptLocator.locate(n,this._parentGeom)},e.prototype.findEdge=function(){return 1===arguments.length?this._lineEdgeMap.get(arguments[0]):t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(n,i){return n.isInBoundary(i)?kt.BOUNDARY:kt.INTERIOR},e}(Kn),al=function(){if(this._li=new Aa,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Jl(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=to.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Jl(0,e,i),this._arg[1]=new Jl(1,n,i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Jl(0,r,a),this._arg[1]=new Jl(1,o,a)}};al.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},al.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al};var Za=function(){};Za.prototype.interfaces_=function(){return[]},Za.prototype.getClass=function(){return Za},Za.map=function(){if(arguments[0]instanceof Le&&xe(arguments[1],Za.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Zt,i=0;i<t.getNumGeometries();i++){var r=e.map(t.getGeometryN(i));null!==r&&n.add(r)}return t.getFactory().buildGeometry(n)}if(xe(arguments[0],yi)&&xe(arguments[1],Za.MapOp)){for(var o=arguments[0],a=arguments[1],l=new Zt,p=o.iterator();p.hasNext();){var f=p.next(),m=a.map(f);null!==m&&l.add(m)}return l}},Za.MapOp=function(){};var Ie=function(t){function e(){var n=arguments[0];t.call(this,n,arguments[1]),this._ptLocator=new bo,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Lo,this._resultPolyList=new Zt,this._resultLineList=new Zt,this._resultPointList=new Zt,this._graph=new Kn(new Id),this._geomFact=n.getFactory()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.insertUniqueEdge=function(n){var i=this._edgeList.findEqualEdge(n);if(null!==i){var r=i.getLabel(),o=n.getLabel();i.isPointwiseEqual(n)||(o=new Tn(n.getLabel())).flip();var a=i.getDepth();a.isNull()&&a.add(r),a.add(o),r.merge(o)}else this._edgeList.add(n)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getSym();i.isInResult()&&r.isInResult()&&(i.setInResult(!1),r.setInResult(!1))}},e.prototype.isCoveredByLA=function(n){return!!this.isCovered(n,this._resultLineList)||!!this.isCovered(n,this._resultPolyList)},e.prototype.computeGeometry=function(n,i,r,o){var a=new Zt;return a.addAll(n),a.addAll(i),a.addAll(r),a.isEmpty()?e.createEmptyResult(o,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(a)},e.prototype.mergeSymLabels=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(n,i){for(var r=i.iterator();r.hasNext();){var o=r.next();if(this._ptLocator.locate(n,o)!==kt.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var n=new Zt,i=this._edgeList.iterator();i.hasNext();){var r=i.next();r.isCollapsed()&&(i.remove(),n.add(r.getCollapsedEdge()))}this._edgeList.addAll(n)},e.prototype.updateNodeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),r=i.getEdges().getLabel();i.getLabel().merge(r)}},e.prototype.getResultGeometry=function(n){return this.computeOverlay(n),this._resultGeom},e.prototype.insertUniqueEdges=function(n){for(var i=n.iterator();i.hasNext();){var r=i.next();this.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(n){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var i=new Zt;this._arg[0].computeSplitEdges(i),this._arg[1].computeSplitEdges(i),this.insertUniqueEdges(i),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Va.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(n),this.cancelDuplicateResultEdges();var r=new Pr(this._geomFact);r.add(this._graph),this._resultPolyList=r.getPolygons();var o=new Zo(this,this._geomFact,this._ptLocator);this._resultLineList=o.build(n);var a=new ku(this,this._geomFact,this._ptLocator);this._resultPointList=a.build(n),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,n)},e.prototype.labelIncompleteNode=function(n,i){var r=this._ptLocator.locate(n.getCoordinate(),this._arg[i].getGeometry());n.getLabel().setLocation(i,r)},e.prototype.copyPoints=function(n){for(var i=this._arg[n].getNodeIterator();i.hasNext();){var r=i.next();this._graph.addNode(r.getCoordinate()).setLabel(n,r.getLabel().getLocation(n))}},e.prototype.findResultAreaEdges=function(n){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var r=i.next(),o=r.getLabel();o.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(o.getLocation(0,qt.RIGHT),o.getLocation(1,qt.RIGHT),n)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var n=this._edgeList.iterator();n.hasNext();){var i=n.next(),r=i.getLabel(),o=i.getDepth();if(!o.isNull()){o.normalize();for(var a=0;a<2;a++)r.isNull(a)||!r.isArea()||o.isNull(a)||(0===o.getDelta(a)?r.toLine(a):(De.isTrue(!o.isNull(a,qt.LEFT),"depth of LEFT side has not been initialized"),r.setLocation(a,qt.LEFT,o.getLocation(a,qt.LEFT)),De.isTrue(!o.isNull(a,qt.RIGHT),"depth of RIGHT side has not been initialized"),r.setLocation(a,qt.RIGHT,o.getLocation(a,qt.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();)n.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var n=this._graph.getNodes().iterator();n.hasNext();){var i=n.next(),r=i.getLabel();i.isIsolated()&&(r.isNull(0)?this.labelIncompleteNode(i,0):this.labelIncompleteNode(i,1)),i.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(n){return!!this.isCovered(n,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(al);Ie.overlayOp=function(t,e,n){return new Ie(t,e).getResultGeometry(n)},Ie.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ie.createEmptyResult(Ie.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Mu.map(t,{interfaces_:function(){return[Za.MapOp]},map:function(i){return i.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Ie.INTERSECTION)},Ie.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ie.createEmptyResult(Ie.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Ie.SYMDIFFERENCE)},Ie.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Ie.INTERSECTION:o=Math.min(i,r);break;case Ie.UNION:o=Math.max(i,r);break;case Ie.DIFFERENCE:o=i;break;case Ie.SYMDIFFERENCE:o=Math.max(i,r)}return o},Ie.createEmptyResult=function(t,e,n,i){var r=null;switch(Ie.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Ie.difference=function(t,e){return t.isEmpty()?Ie.createEmptyResult(Ie.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Ie.DIFFERENCE))},Ie.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Ie.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1];switch(r===kt.BOUNDARY&&(r=kt.INTERIOR),o===kt.BOUNDARY&&(o=kt.INTERIOR),arguments[2]){case Ie.INTERSECTION:return r===kt.INTERIOR&&o===kt.INTERIOR;case Ie.UNION:return r===kt.INTERIOR||o===kt.INTERIOR;case Ie.DIFFERENCE:return r===kt.INTERIOR&&o!==kt.INTERIOR;case Ie.SYMDIFFERENCE:return r===kt.INTERIOR&&o!==kt.INTERIOR||r!==kt.INTERIOR&&o===kt.INTERIOR}return!1}},Ie.INTERSECTION=1,Ie.UNION=2,Ie.DIFFERENCE=3,Ie.SYMDIFFERENCE=4;var ba=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new bo,this._seg=new ue;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};ba.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var i=e._linework.getGeometryN(n).getCoordinateSequence(),r=0;r<i.size()-1;r++)if(i.getCoordinate(r,e._seg.p0),i.getCoordinate(r+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},ba.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?kt.BOUNDARY:this._ptLocator.locate(t,this._g)},ba.prototype.extractLinework=function(t){var e=new ul;t.apply(e);var n=e.getLinework(),i=Be.toLineStringArray(n);return t.getFactory().createMultiLineString(i)},ba.prototype.interfaces_=function(){return[]},ba.prototype.getClass=function(){return ba};var ul=function(){this._linework=null,this._linework=new Zt};ul.prototype.getLinework=function(){return this._linework},ul.prototype.filter=function(t){if(t instanceof vi){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},ul.prototype.interfaces_=function(){return[No]},ul.prototype.getClass=function(){return ul};var Ya=function(){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=arguments[0]};Ya.prototype.extractPoints=function(t,e,n){for(var i=t.getCoordinates(),r=0;r<i.length-1;r++)this.computeOffsetPoints(i[r],i[r+1],e,n)},Ya.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ya.prototype.getPoints=function(t){for(var e=new Zt,n=Gi.getLines(this._g).iterator();n.hasNext();){var i=n.next();this.extractPoints(i,t,e)}return e},Ya.prototype.computeOffsetPoints=function(t,e,n,i){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o),l=n*r/a,p=n*o/a,f=(e.x+t.x)/2,m=(e.y+t.y)/2;if(this._doLeft){var _=new ft(f-p,m+l);i.add(_)}if(this._doRight){var b=new ft(f+p,m-l);i.add(b)}},Ya.prototype.interfaces_=function(){return[]},Ya.prototype.getClass=function(){return Ya};var jr=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Zt;var e=arguments[0],n=arguments[1],i=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,i],this._locFinder=[new ba(this._geom[0],this._boundaryDistanceTolerance),new ba(this._geom[1],this._boundaryDistanceTolerance),new ba(this._geom[2],this._boundaryDistanceTolerance)]},Gd={TOLERANCE:{configurable:!0}};jr.prototype.reportResult=function(t,e,n){Bi.out.println("Overlay result invalid - A:"+kt.toLocationSymbol(e[0])+" B:"+kt.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+kt.toLocationSymbol(e[2]))},jr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},jr.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var i=t._testCoords.get(n);if(!t.checkValid(e,i))return t._invalidLocation=i,!1}return!0}if(2===arguments.length){var r=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!jr.hasLocation(this._location,kt.BOUNDARY)||this.isValidResult(r,this._location)}},jr.prototype.addTestPts=function(t){var e=new Ya(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},jr.prototype.isValidResult=function(t,e){var n=Ie.isResultOfOp(e[0],e[1],t),i=!(n^e[2]===kt.INTERIOR);return i||this.reportResult(t,e,n),i},jr.prototype.getInvalidLocation=function(){return this._invalidLocation},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr},jr.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},jr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(ui.computeSizeBasedSnapTolerance(t),ui.computeSizeBasedSnapTolerance(e))},jr.isValid=function(t,e,n,i){return new jr(t,e,i).isValid(n)},Gd.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(jr,Gd);var Ur=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ur.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this._skipEmpty&&i.isEmpty()||e.add(i)}},Ur.prototype.combine=function(){for(var t=new Zt,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.combine=function(){return 1===arguments.length?new Ur(arguments[0]).combine():2===arguments.length?new Ur(Ur.createList(arguments[0],arguments[1])).combine():3===arguments.length?new Ur(Ur.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},Ur.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ur.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Zt;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],a=new Zt;return a.add(i),a.add(r),a.add(o),a}};var fi=function(){this._inputPolys=null,this._geomFactory=null,this._inputPolys=arguments[0],null===this._inputPolys&&(this._inputPolys=new Zt)},jd={STRTREE_NODE_CAPACITY:{configurable:!0}};fi.prototype.reduceToGeometries=function(t){for(var e=new Zt,n=t.iterator();n.hasNext();){var i=n.next(),r=null;xe(i,go)?r=this.unionTree(i):i instanceof Le&&(r=i),e.add(r)}return e},fi.prototype.extractByEnvelope=function(t,e,n){for(var i=new Zt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this._geomFactory.buildGeometry(i)},fi.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Ur.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},fi.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ed(fi.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},fi.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=fi.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(fi.getGeometry(e,n),fi.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),a=this.binaryUnion(e,n,o),l=this.binaryUnion(e,o,i);return this.unionSafe(a,l)}},fi.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},fi.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},fi.prototype.unionActual=function(t,e){return fi.restrictToPolygons(t.union(e))},fi.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},fi.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var i=new Zt,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),a=this.unionActual(r,o);return i.add(a),Ur.combine(i)},fi.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var r=arguments[0],o=arguments[1];return r.getFactory().createGeometryCollection([r,o]).buffer(0)}},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},fi.restrictToPolygons=function(t){if(xe(t,ca))return t;var e=Us.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Be.toPolygonArray(e))},fi.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},fi.union=function(t){return new fi(t).union()},jd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(fi,jd);var jh=function(){};function Xa(){return new Uh}function Uh(){this.reset()}jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ie.createEmptyResult(Ie.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),ar.overlayOp(t,e,Ie.UNION)},Uh.prototype={constructor:Uh,reset:function(){this.s=this.t=0},add:function(t){Ud(qh,t,this.t),Ud(this,qh.s,this.s),this.s?this.t+=qh.t:this.s=qh.t},valueOf:function(){return this.s}};var qh=new Uh;function Ud(t,e,n){var i=t.s=e+n,r=i-e;t.t=e-(i-r)+(n-r)}var di=1e-6,zn=Math.PI,qs=zn/2,qd=zn/4,Vs=2*zn,Wa=180/zn,Yo=zn/180,ur=Math.abs,nm=Math.atan,ll=Math.atan2,bi=Math.cos,xi=Math.sin,Ql=Math.sqrt;function Vd(t){return t>1?0:t<-1?zn:Math.acos(t)}function hl(t){return t>1?qs:t<-1?-qs:Math.asin(t)}function $l(){}function Vh(t,e){t&&Zd.hasOwnProperty(t.type)&&Zd[t.type](t,e)}var pp,ig,Hd={Feature:function(t,e){Vh(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Vh(n[i].geometry,e)}},Zd={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){ap(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ap(n[i],e,0)},Polygon:function(t,e){Yd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Yd(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Vh(n[i],e)}};function ap(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)e.point((i=t[r])[0],i[1],i[2]);e.lineEnd()}function Yd(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ap(t[n],e,1);e.polygonEnd()}function up(t){return[ll(t[1],t[0]),hl(t[2])]}function cl(t){var e=t[0],n=t[1],i=bi(n);return[i*bi(e),i*xi(e),xi(n)]}function Hh(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zh(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lp(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yh(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function hp(t){var e=Ql(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Xd(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return(i=e.invert(i,r))&&t.invert(i[0],i[1])}),n}function cp(t,e){return[t>zn?t-Vs:t<-zn?t+Vs:t,e]}function Wd(t){return function(e,n){return[(e+=t)>zn?e-Vs:e<-zn?e+Vs:e,n]}}function Kd(t){var e=Wd(t);return e.invert=Wd(-t),e}function Jd(t,e){var n=bi(t),i=xi(t),r=bi(e),o=xi(e);function a(l,p){var f=bi(p),m=bi(l)*f,_=xi(l)*f,b=xi(p),M=b*n+m*i;return[ll(_*r-M*o,m*n-b*i),hl(M*r+_*o)]}return a.invert=function(l,p){var f=bi(p),m=bi(l)*f,_=xi(l)*f,b=xi(p),M=b*r-_*o;return[ll(_*r+b*o,m*n+M*i),hl(M*n-m*i)]},a}function Qd(t,e){(e=cl(e))[0]-=t,hp(e);var n=Vd(-e[1]);return((-e[2]<0?-n:n)+Vs-di)%Vs}function $d(){var t,e=[];return{point:function(n,i){t.push([n,i])},lineStart:function(){e.push(t=[])},lineEnd:$l,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Xh(t,e){return ur(t[0]-e[0])<di&&ur(t[1]-e[1])<di}function Wh(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function tg(t,e,n,i,r){var o,a,l=[],p=[];if(t.forEach(function(k){if(!((S=k.length-1)<=0)){var S,w,R=k[0],q=k[S];if(Xh(R,q)){for(r.lineStart(),o=0;o<S;++o)r.point((R=k[o])[0],R[1]);r.lineEnd()}else l.push(w=new Wh(R,k,null,!0)),p.push(w.o=new Wh(R,null,w,!1)),l.push(w=new Wh(q,k,null,!1)),p.push(w.o=new Wh(q,null,w,!0))}}),l.length){for(p.sort(e),eg(l),eg(p),o=0,a=p.length;o<a;++o)p[o].e=n=!n;for(var f,m,_=l[0];;){for(var b=_,M=!0;b.v;)if((b=b.n)===_)return;f=b.z,r.lineStart();do{if(b.v=b.o.v=!0,b.e){if(M)for(o=0,a=f.length;o<a;++o)r.point((m=f[o])[0],m[1]);else i(b.x,b.n.x,1,r);b=b.n}else{if(M)for(o=(f=b.p.z).length-1;o>=0;--o)r.point((m=f[o])[0],m[1]);else i(b.x,b.p.x,-1,r);b=b.p}f=(b=b.o).z,M=!M}while(!b.v);r.lineEnd()}}}function eg(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function ng(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rg(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);--r>=0;)for(e=(i=t[r]).length;--e>=0;)n[--a]=i[e];return n}Xa(),Xa(),Xa(),cp.invert=cp,1===(pp=ng).length&&(ig=pp,pp=function(t,e){return ng(ig(t),e)});var th=1e9,Kh=-th,fp=Xa();function og(t){return t}Xa(),Xa(),Xa();var pl=1/0,Jh=pl,eh=-pl,Qh=eh,sg={point:function(t,e){t<pl&&(pl=t),t>eh&&(eh=t),e<Jh&&(Jh=e),e>Qh&&(Qh=e)},lineStart:$l,lineEnd:$l,polygonStart:$l,polygonEnd:$l,result:function(){var t=[[pl,Jh],[eh,Qh]];return eh=Qh=-(Jh=pl=1/0),t}};function ag(t,e,n,i){return function(r,o){var a,l,p,f=e(o),m=r.invert(i[0],i[1]),_=$d(),b=e(_),M=!1,k={point:S,lineStart:R,lineEnd:q,polygonStart:function(){k.point=P,k.lineStart=O,k.lineEnd=B,l=[],a=[]},polygonEnd:function(){k.point=S,k.lineStart=R,k.lineEnd=q,l=rg(l);var F=function(z,Mt){var lt=Mt[0],Pt=Mt[1],ct=[xi(lt),-bi(lt),0],Dt=0,yt=0;fp.reset();for(var gt=0,pt=z.length;gt<pt;++gt)if(Lt=(It=z[gt]).length)for(var It,Lt,Ot=It[Lt-1],$=Ot[0],oe=Ot[1]/2+qd,Ht=xi(oe),Oe=bi(oe),ee=0;ee<Lt;++ee,$=Ve,Ht=Vi,Oe=tc,Ot=be){var be=It[ee],Ve=be[0],An=be[1]/2+qd,Vi=xi(An),tc=bi(An),Ka=Ve-$,ih=Ka>=0?1:-1,rh=ih*Ka,fl=rh>zn,ec=Ht*Vi;if(fp.add(ll(ec*ih*xi(rh),Oe*tc+ec*bi(rh))),Dt+=fl?Ka+ih*Vs:Ka,fl^$>=lt^Ve>=lt){var dl=Zh(cl(Ot),cl(be));hp(dl);var Lg=Zh(ct,dl);hp(Lg);var bg=(fl^Ka>=0?-1:1)*hl(Lg[2]);(Pt>bg||Pt===bg&&(dl[0]||dl[1]))&&(yt+=fl^Ka>=0?1:-1)}}return(Dt<-1e-6||Dt<di&&fp<-1e-6)^1&yt}(a,m);l.length?(M||(o.polygonStart(),M=!0),tg(l,om,F,n,o)):F&&(M||(o.polygonStart(),M=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),M&&(o.polygonEnd(),M=!1),l=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function S(F,z){var Mt=r(F,z);t(F=Mt[0],z=Mt[1])&&o.point(F,z)}function w(F,z){var Mt=r(F,z);f.point(Mt[0],Mt[1])}function R(){k.point=w,f.lineStart()}function q(){k.point=S,f.lineEnd()}function P(F,z){p.push([F,z]);var Mt=r(F,z);b.point(Mt[0],Mt[1])}function O(){b.lineStart(),p=[]}function B(){P(p[0][0],p[0][1]),b.lineEnd();var F,z,Mt,lt,Pt=b.clean(),ct=_.result(),Dt=ct.length;if(p.pop(),a.push(p),p=null,Dt)if(1&Pt){if((z=(Mt=ct[0]).length-1)>0){for(M||(o.polygonStart(),M=!0),o.lineStart(),F=0;F<z;++F)o.point((lt=Mt[F])[0],lt[1]);o.lineEnd()}}else Dt>1&&2&Pt&&ct.push(ct.pop().concat(ct.shift())),l.push(ct.filter(rm))}return k}}function rm(t){return t.length>1}function om(t,e){return((t=t.x)[0]<0?t[1]-qs-di:qs-t[1])-((e=e.x)[0]<0?e[1]-qs-di:qs-e[1])}Xa();var ug=ag(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var f,m,_,b,M,k,S,l=o>0?zn:-zn,p=ur(o-n);ur(p-zn)<di?(t.point(n,i=(i+a)/2>0?qs:-qs),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),t.point(o,i),e=0):r!==l&&p>=zn&&(ur(n-r)<di&&(n-=r*di),ur(o-l)<di&&(o-=l*di),m=i,b=a,S=xi((f=n)-(_=o)),i=ur(S)>di?nm((xi(m)*(k=bi(b))*xi(_)-xi(b)*(M=bi(m))*xi(f))/(M*k*S)):(m+b)/2,t.point(r,i),t.lineEnd(),t.lineStart(),t.point(l,i),e=0),t.point(n=o,i=a),r=l},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)i.point(-zn,r=n*qs),i.point(0,r),i.point(zn,r),i.point(zn,0),i.point(zn,-r),i.point(0,-r),i.point(-zn,-r),i.point(-zn,0),i.point(-zn,r);else if(ur(t[0]-e[0])>di){var o=t[0]<e[0]?zn:-zn;i.point(-o,r=n*o/2),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-zn,-qs]);function lg(t){return function(e){var n=new dp;for(var i in t)n[i]=t[i];return n.stream=e,n}}function dp(){}function hg(t,e,n){var m,_,i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),m=n,_=t.stream(sg),m&&Hd.hasOwnProperty(m.type)?Hd[m.type](m,_):Vh(m,_);var a=sg.result(),l=Math.min(i/(a[1][0]-a[0][0]),r/(a[1][1]-a[0][1])),p=+e[0][0]+(i-l*(a[1][0]+a[0][0]))/2,f=+e[0][1]+(r-l*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*l).translate([p,f])}dp.prototype={constructor:dp,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var am=bi(30*Yo);function cg(t,e){return+e?function(n,i){function r(o,a,l,p,f,m,_,b,M,k,S,w,R,q){var P=_-o,O=b-a,B=P*P+O*O;if(B>4*i&&R--){var F=p+k,z=f+S,Mt=m+w,lt=Ql(F*F+z*z+Mt*Mt),Pt=hl(Mt/=lt),ct=ur(ur(Mt)-1)<di||ur(l-M)<di?(l+M)/2:ll(z,F),Dt=n(ct,Pt),yt=Dt[0],gt=Dt[1],pt=yt-o,It=gt-a,Lt=O*pt-P*It;(Lt*Lt/B>i||ur((P*pt+O*It)/B-.5)>.3||p*k+f*S+m*w<am)&&(r(o,a,l,p,f,m,yt,gt,ct,F/=lt,z/=lt,Mt,R,q),q.point(yt,gt),r(yt,gt,ct,F,z,Mt,_,b,M,k,S,w,R,q))}}return function(o){var a,l,p,f,m,_,b,M,k,S,w,R,q={point:P,lineStart:O,lineEnd:F,polygonStart:function(){o.polygonStart(),q.lineStart=z},polygonEnd:function(){o.polygonEnd(),q.lineStart=O}};function P(Pt,ct){Pt=n(Pt,ct),o.point(Pt[0],Pt[1])}function O(){M=NaN,q.point=B,o.lineStart()}function B(Pt,ct){var Dt=cl([Pt,ct]),yt=n(Pt,ct);r(M,k,b,S,w,R,M=yt[0],k=yt[1],b=Pt,S=Dt[0],w=Dt[1],R=Dt[2],16,o),o.point(M,k)}function F(){q.point=P,o.lineEnd()}function z(){O(),q.point=Mt,q.lineEnd=lt}function Mt(Pt,ct){B(a=Pt,ct),l=M,p=k,f=S,m=w,_=R,q.point=B}function lt(){r(M,k,b,S,w,R,l,p,a,f,m,_,16,o),q.lineEnd=F,F()}return q}}(t,e):(n=t,lg({point:function(i,r){i=n(i,r),this.stream.point(i[0],i[1])}}));var n}var um=lg({point:function(t,e){this.stream.point(t*Yo,e*Yo)}});function lm(t){return function(e){var n,i,r,o,a,l,p,f,m,_,b=150,M=480,k=250,S=0,w=0,R=0,q=0,P=0,O=null,B=ug,F=null,z=og,Mt=.5,lt=cg(Dt,Mt);function Pt(pt){return[(pt=a(pt[0]*Yo,pt[1]*Yo))[0]*b+i,r-pt[1]*b]}function ct(pt){return(pt=a.invert((pt[0]-i)/b,(r-pt[1])/b))&&[pt[0]*Wa,pt[1]*Wa]}function Dt(pt,It){return[(pt=n(pt,It))[0]*b+i,r-pt[1]*b]}function yt(){var It,Lt,Ot;a=Xd((It=R,Lt=q,Ot=P,o=(It%=Vs)?Lt||Ot?Xd(Kd(It),Jd(Lt,Ot)):Kd(It):Lt||Ot?Jd(Lt,Ot):cp),n);var pt=n(S,w);return i=M-pt[0]*b,r=k+pt[1]*b,gt()}function gt(){return m=_=null,Pt}return Pt.stream=function(pt){return m&&_===pt?m:m=um(B(o,lt(z(_=pt))))},Pt.clipAngle=function(pt){return arguments.length?(B=+pt?function sm(t,e){var n=bi(t),i=n>0,r=ur(n)>di;function o(p,f){return bi(p)*bi(f)>n}function a(p,f,m){var _=[1,0,0],b=Zh(cl(p),cl(f)),M=Hh(b,b),k=b[0],S=M-k*k;if(!S)return!m&&p;var w=n*M/S,R=-n*k/S,q=Zh(_,b),P=Yh(_,w);lp(P,Yh(b,R));var O=q,B=Hh(P,O),F=Hh(O,O),z=B*B-F*(Hh(P,P)-1);if(!(z<0)){var Mt=Ql(z),lt=Yh(O,(-B-Mt)/F);if(lp(lt,P),lt=up(lt),!m)return lt;var Pt,ct=p[0],Dt=f[0],yt=p[1],gt=f[1];Dt<ct&&(Pt=ct,ct=Dt,Dt=Pt);var pt=Dt-ct,It=ur(pt-zn)<di;if(!It&&gt<yt&&(Pt=yt,yt=gt,gt=Pt),It||pt<di?It?yt+gt>0^lt[1]<(ur(lt[0]-ct)<di?yt:gt):yt<=lt[1]&&lt[1]<=gt:pt>zn^(ct<=lt[0]&&lt[0]<=Dt)){var Lt=Yh(O,(-B+Mt)/F);return lp(Lt,P),[lt,up(Lt)]}}}function l(p,f){var m=i?t:zn-t,_=0;return p<-m?_|=1:p>m&&(_|=2),f<-m?_|=4:f>m&&(_|=8),_}return ag(o,function(p){var f,m,_,b,M;return{lineStart:function(){b=_=!1,M=1},point:function(k,S){var w,R=[k,S],q=o(k,S),P=i?q?0:l(k,S):q?l(k+(k<0?zn:-zn),S):0;if(!f&&(b=_=q)&&p.lineStart(),q!==_&&(!(w=a(f,R))||Xh(f,w)||Xh(R,w))&&(R[0]+=di,R[1]+=di,q=o(R[0],R[1])),q!==_)M=0,q?(p.lineStart(),w=a(R,f),p.point(w[0],w[1])):(w=a(f,R),p.point(w[0],w[1]),p.lineEnd()),f=w;else if(r&&f&&i^q){var O;P&m||!(O=a(R,f,!0))||(M=0,i?(p.lineStart(),p.point(O[0][0],O[0][1]),p.point(O[1][0],O[1][1]),p.lineEnd()):(p.point(O[1][0],O[1][1]),p.lineEnd(),p.lineStart(),p.point(O[0][0],O[0][1])))}!q||f&&Xh(f,R)||p.point(R[0],R[1]),f=R,_=q,m=P},lineEnd:function(){_&&p.lineEnd(),f=null},clean:function(){return M|(b&&_)<<1}}},function(p,f,m,_){!function(b,M,k,S,w,R){if(k){var q=bi(M),P=xi(M),O=S*k;null==w?(w=M+S*Vs,R=M-O/2):(w=Qd(q,w),R=Qd(q,R),(S>0?w<R:w>R)&&(w+=S*Vs));for(var B,F=w;S>0?F>R:F<R;F-=O)B=up([q,-P*bi(F),-P*xi(F)]),b.point(B[0],B[1])}}(_,t,e,m,p,f)},i?[0,-t]:[-zn,t-zn])}(O=pt*Yo,6*Yo):(O=null,ug),gt()):O*Wa},Pt.clipExtent=function(pt){return arguments.length?(z=null==pt?(F=l=p=f=null,og):function im(t,e,n,i){function r(f,m){return t<=f&&f<=n&&e<=m&&m<=i}function o(f,m,_,b){var M=0,k=0;if(null==f||(M=a(f,_))!==(k=a(m,_))||p(f,m)<0^_>0)do{b.point(0===M||3===M?t:n,M>1?i:e)}while((M=(M+_+4)%4)!==k);else b.point(m[0],m[1])}function a(f,m){return ur(f[0]-t)<di?m>0?0:3:ur(f[0]-n)<di?m>0?2:1:ur(f[1]-e)<di?m>0?1:0:m>0?3:2}function l(f,m){return p(f.x,m.x)}function p(f,m){var _=a(f,1),b=a(m,1);return _!==b?_-b:0===_?m[1]-f[1]:1===_?f[0]-m[0]:2===_?f[1]-m[1]:m[0]-f[0]}return function(f){var m,_,b,M,k,S,w,R,q,P,O,B=f,F=$d(),z={point:Mt,lineStart:function(){z.point=lt,_&&_.push(b=[]),P=!0,q=!1,w=R=NaN},lineEnd:function(){m&&(lt(M,k),S&&q&&F.rejoin(),m.push(F.result())),z.point=Mt,q&&B.lineEnd()},polygonStart:function(){B=F,m=[],_=[],O=!0},polygonEnd:function(){var Pt=function(){for(var yt=0,gt=0,pt=_.length;gt<pt;++gt)for(var It,Lt,Ot=_[gt],$=1,oe=Ot.length,Ht=Ot[0],Oe=Ht[0],ee=Ht[1];$<oe;++$)It=Oe,Lt=ee,Oe=(Ht=Ot[$])[0],ee=Ht[1],Lt<=i?ee>i&&(Oe-It)*(i-Lt)>(ee-Lt)*(t-It)&&++yt:ee<=i&&(Oe-It)*(i-Lt)<(ee-Lt)*(t-It)&&--yt;return yt}(),ct=O&&Pt,Dt=(m=rg(m)).length;(ct||Dt)&&(f.polygonStart(),ct&&(f.lineStart(),o(null,null,1,f),f.lineEnd()),Dt&&tg(m,l,Pt,o,f),f.polygonEnd()),B=f,m=_=b=null}};function Mt(Pt,ct){r(Pt,ct)&&B.point(Pt,ct)}function lt(Pt,ct){var Dt=r(Pt,ct);if(_&&b.push([Pt,ct]),P)M=Pt,k=ct,S=Dt,P=!1,Dt&&(B.lineStart(),B.point(Pt,ct));else if(Dt&&q)B.point(Pt,ct);else{var yt=[w=Math.max(Kh,Math.min(th,w)),R=Math.max(Kh,Math.min(th,R))],gt=[Pt=Math.max(Kh,Math.min(th,Pt)),ct=Math.max(Kh,Math.min(th,ct))];!function(pt,It,Lt,Ot,$,oe){var Ht,Oe=pt[0],ee=pt[1],be=0,Ve=1,An=It[0]-Oe,Vi=It[1]-ee;if(Ht=Lt-Oe,An||!(Ht>0)){if(Ht/=An,An<0){if(Ht<be)return;Ht<Ve&&(Ve=Ht)}else if(An>0){if(Ht>Ve)return;Ht>be&&(be=Ht)}if(Ht=$-Oe,An||!(Ht<0)){if(Ht/=An,An<0){if(Ht>Ve)return;Ht>be&&(be=Ht)}else if(An>0){if(Ht<be)return;Ht<Ve&&(Ve=Ht)}if(Ht=Ot-ee,Vi||!(Ht>0)){if(Ht/=Vi,Vi<0){if(Ht<be)return;Ht<Ve&&(Ve=Ht)}else if(Vi>0){if(Ht>Ve)return;Ht>be&&(be=Ht)}if(Ht=oe-ee,Vi||!(Ht<0)){if(Ht/=Vi,Vi<0){if(Ht>Ve)return;Ht>be&&(be=Ht)}else if(Vi>0){if(Ht<be)return;Ht<Ve&&(Ve=Ht)}return be>0&&(pt[0]=Oe+be*An,pt[1]=ee+be*Vi),Ve<1&&(It[0]=Oe+Ve*An,It[1]=ee+Ve*Vi),!0}}}}}(yt,gt,t,e,n,i)?Dt&&(B.lineStart(),B.point(Pt,ct),O=!1):(q||(B.lineStart(),B.point(yt[0],yt[1])),B.point(gt[0],gt[1]),Dt||B.lineEnd(),O=!1)}w=Pt,R=ct,q=Dt}return z}}(F=+pt[0][0],l=+pt[0][1],p=+pt[1][0],f=+pt[1][1]),gt()):null==F?null:[[F,l],[p,f]]},Pt.scale=function(pt){return arguments.length?(b=+pt,yt()):b},Pt.translate=function(pt){return arguments.length?(M=+pt[0],k=+pt[1],yt()):[M,k]},Pt.center=function(pt){return arguments.length?(S=pt[0]%360*Yo,w=pt[1]%360*Yo,yt()):[S*Wa,w*Wa]},Pt.rotate=function(pt){return arguments.length?(R=pt[0]%360*Yo,q=pt[1]%360*Yo,P=pt.length>2?pt[2]%360*Yo:0,yt()):[R*Wa,q*Wa,P*Wa]},Pt.precision=function(pt){return arguments.length?(lt=cg(Dt,Mt=pt*pt),gt()):Ql(Mt)},Pt.fitExtent=function(pt,It){return hg(Pt,pt,It)},Pt.fitSize=function(pt,It){return hg(Pt,[[0,0],pt],It)},function(){return n=e.apply(this,arguments),Pt.invert=n.invert&&ct,yt()}}(function(){return t})()}var pg=function(e,n){var t,i=bi(e),r=bi(n),o=(t=Vd(t=i*r))&&t/xi(t);return[o*r*xi(e),o*xi(n)]};function $h(t,e,n,i){var r=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return we(t,function(b){var M=$h(b,e,n,i);M&&a.push(M)}),Et(a)}var M,k,l=(k=[-(M=ra(o).geometry.coordinates)[0],-M[1]],function hm(){return lm(pg).scale(79.4188).clipAngle(179.999)}().rotate(k).scale(he)),p={type:o.type,coordinates:dg(o.coordinates,l)},f=(new Jc).read(p),m=xt(K(e,n),"meters"),_=Fi.bufferOp(f,m,i);if(!fg((_=(new xd).write(_)).coordinates))return d({type:_.type,coordinates:gg(_.coordinates,l)},r)}function fg(t){return Array.isArray(t[0])?fg(t[0]):isNaN(t[0])}function dg(t,e){return"object"!=typeof t[0]?e(t):t.map(function(n){return dg(n,e)})}function gg(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(n){return gg(n,e)})}function nh(t,e,n){void 0===n&&(n={});var i=G(t),r=G(e),o=la.intersection(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?N(o[0],n.properties):St(o,n.properties)}function _g(t,e,n){void 0===n&&(n={});var i=JSON.stringify(n.properties||{}),r=t[0],o=t[1],a=t[2],l=t[3],p=(o+l)/2,f=(r+a)/2,m=2*e/Ke([r,p],[a,p],n)*(a-r),_=2*e/Ke([f,o],[f,l],n)*(l-o),b=m/2,M=2*b,k=Math.sqrt(3)/2*_,S=a-r,w=l-o,R=3/4*M,q=k,O=Math.floor((S-M)/(M-b/2)),B=(O*R-b/2-S)/2-b/2+R/2,F=Math.floor((w-k)/k),z=(w-F*k)/2,Mt=F*k-w>k/2;Mt&&(z-=k/4);for(var lt=[],Pt=[],ct=0;ct<6;ct++){var Dt=2*Math.PI/6*ct;lt.push(Math.cos(Dt)),Pt.push(Math.sin(Dt))}for(var yt=[],gt=0;gt<=O;gt++)for(var pt=0;pt<=F;pt++){var It=gt%2==1;if(!(0===pt&&It||0===pt&&Mt)){var Lt=gt*R+r-B,Ot=pt*q+o+z;if(It&&(Ot-=k/2),!0===n.triangles)pm([Lt,Ot],m/2,_/2,JSON.parse(i),lt,Pt).forEach(function(oe){n.mask?nh(n.mask,oe)&&yt.push(oe):yt.push(oe)});else{var $=cm([Lt,Ot],m/2,_/2,JSON.parse(i),lt,Pt);n.mask?nh(n.mask,$)&&yt.push($):yt.push($)}}}return Et(yt)}function cm(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++)a.push([t[0]+e*r[l],t[1]+n*o[l]]);return a.push(a[0].slice()),N([a],i)}function pm(t,e,n,i,r,o){for(var a=[],l=0;l<6;l++){var p=[];p.push(t),p.push([t[0]+e*r[l],t[1]+n*o[l]]),p.push([t[0]+e*r[(l+1)%6],t[1]+n*o[(l+1)%6]]),p.push(t),a.push(N([p],i))}return a}function yg(t,e,n){return void 0===n&&(n={}),function(i,r,o,a){void 0===a&&(a={});for(var l=[],p=i[0],f=i[1],m=i[2],_=i[3],b=r/Ke([p,f],[m,f],a)*(m-p),M=o/Ke([p,f],[p,_],a)*(_-f),k=m-p,S=_-f,w=Math.floor(k/b),R=Math.floor(S/M),q=(S-R*M)/2,P=p+(k-w*b)/2,O=0;O<w;O++){for(var B=f+q,F=0;F<R;F++){var z=N([[[P,B],[P,B+M],[P+b,B+M],[P+b,B],[P,B]]],a.properties);a.mask?bf(a.mask,z)&&l.push(z):l.push(z),B+=M}P+=b}return Et(l)}(t,e,e,n)}function vg(t,e,n){void 0===n&&(n={});for(var i=[],r=e/Ke([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/Ke([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),a=0,l=t[0];l<=t[2];){for(var p=0,f=t[1];f<=t[3];){var m=null,_=null;a%2==0&&p%2==0?(m=N([[[l,f],[l,f+o],[l+r,f],[l,f]]],n.properties),_=N([[[l,f+o],[l+r,f+o],[l+r,f],[l,f+o]]],n.properties)):a%2==0&&p%2==1?(m=N([[[l,f],[l+r,f+o],[l+r,f],[l,f]]],n.properties),_=N([[[l,f],[l,f+o],[l+r,f+o],[l,f]]],n.properties)):p%2==0&&a%2==1?(m=N([[[l,f],[l,f+o],[l+r,f+o],[l,f]]],n.properties),_=N([[[l,f],[l+r,f+o],[l+r,f],[l,f]]],n.properties)):p%2==1&&a%2==1&&(m=N([[[l,f],[l,f+o],[l+r,f],[l,f]]],n.properties),_=N([[[l,f+o],[l+r,f+o],[l+r,f],[l,f+o]]],n.properties)),n.mask?(nh(n.mask,m)&&i.push(m),nh(n.mask,_)&&i.push(_)):(i.push(m),i.push(_)),f+=o,p++}a++,l+=r}return Et(i)}pg.invert=function(e,n){var i=Ql(e*e+n*n),r=i,o=xi(r),a=bi(r);return[ll(e*o,i*a),hl(i&&n*o/i)]},X.along=function(t,e,n){void 0===n&&(n={});for(var i=G(t).coordinates,r=0,o=0;o<i.length&&!(e>=r&&o===i.length-1);o++){if(r>=e){var a=e-r;if(a){var l=Er(i[o],i[o-1])-180;return wr(i[o],a,l,n)}return I(i[o])}r+=Ke(i[o],i[o+1],n)}return I(i[i.length-1])},X.angle=function(t,e,n,i){if(void 0===i&&(i={}),!Ft(i))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var r=t,o=e,a=n,l=mt(!0!==i.mercator?Er(r,o):lu(r,o)),p=mt(!0!==i.mercator?Er(a,o):lu(a,o)),f=Math.abs(l-p);return!0===i.explementary?360-f:f},X.applyFilter=xh,X.area=ac,X.areaFactors=h,X.bbox=ze,X.bboxClip=function(t,e){var n=G(t),i=n.type,r="Feature"===t.type?t.properties:{},o=n.coordinates;switch(i){case"LineString":case"MultiLineString":var a=[];return"LineString"===i&&(o=[o]),o.forEach(function(l){!function(p,f,m){var _,b,M,k,S,w=p.length,R=Ou(p[0],f),q=[];for(m||(m=[]),_=1;_<w;_++){for(k=p[_-1],b=M=Ou(S=p[_],f);;){if(!(R|b)){q.push(k),b!==M?(q.push(S),_<w-1&&(m.push(q),q=[])):_===w-1&&q.push(S);break}if(R&b)break;R?R=Ou(k=gc(k,S,R,f),f):b=Ou(S=gc(k,S,b,f),f)}R=M}q.length&&m.push(q)}(l,e,a)}),1===a.length?tt(a[0],r):Ct(a,r);case"Polygon":return N(Hp(o,e),r);case"MultiPolygon":return St(o.map(function(l){return Hp(l,e)}),r);default:throw new Error("geometry "+i+" not supported")}},X.bboxPolygon=ka,X.bearing=Er,X.bearingToAngle=mt,X.bearingToAzimuth=mt,X.bezier=Ms,X.bezierSpline=Ms,X.booleanClockwise=dh,X.booleanContains=function(t,e){var n=G(t),i=G(e),r=n.type,o=i.type,a=n.coordinates,l=i.coordinates;switch(r){case"Point":if("Point"===o)return Pc(a,l);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(p,f){var m,_=!1;for(m=0;m<p.coordinates.length;m++)if(Pc(p.coordinates[m],f.coordinates)){_=!0;break}return _}(n,i);case"MultiPoint":return function(p,f){for(var m=0,_=f.coordinates;m<_.length;m++){for(var b=_[m],M=!1,k=0,S=p.coordinates;k<S.length;k++)if(Pc(b,S[k])){M=!0;break}if(!M)return!1}return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Jr(i,n,{ignoreEndVertices:!0});case"LineString":return function(p,f){for(var m=!1,_=0,b=f.coordinates;_<b.length;_++){var M=b[_];if(Jr({type:"Point",coordinates:M},p,{ignoreEndVertices:!0})&&(m=!0),!Jr({type:"Point",coordinates:M},p,{ignoreEndVertices:!1}))return!1}return m}(n,i);case"MultiPoint":return function(p,f){for(var m=!1,_=0,b=f.coordinates;_<b.length;_++){var M=b[_];if(Jr(M,p,{ignoreEndVertices:!0})&&(m=!0),!Jr(M,p))return!1}return!!m}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return On(i,n,{ignoreBoundary:!0});case"LineString":return function(p,f){var m=!1,_=0;if(!ff(ze(p),ze(f)))return!1;for(;_<f.coordinates.length-1;_++)if(On({type:"Point",coordinates:Xg(f.coordinates[_],f.coordinates[_+1])},p,{ignoreBoundary:!0})){m=!0;break}return m}(n,i);case"Polygon":return function(p,f){if("Feature"===p.type&&null===p.geometry||"Feature"===f.type&&null===f.geometry)return!1;if(!ff(ze(p),ze(f)))return!1;for(var M=0,k=G(f).coordinates;M<k.length;M++)for(var S=0,w=k[M];S<w.length;S++)if(!On(w[S],p))return!1;return!0}(n,i);case"MultiPoint":return function(p,f){for(var m=0,_=f.coordinates;m<_.length;m++)if(!On(_[m],p,{ignoreBoundary:!0}))return!1;return!0}(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},X.booleanCrosses=function(t,e){var n=G(t),i=G(e),r=n.type,o=i.type;switch(r){case"MultiPoint":switch(o){case"LineString":return df(n,i);case"Polygon":return _f(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return df(i,n);case"LineString":return function(a,l){if(aa(a,l).features.length>0)for(var p=0;p<a.coordinates.length-1;p++)for(var f=0;f<l.coordinates.length-1;f++){var m=!0;if(0!==f&&f!==l.coordinates.length-2||(m=!1),mf(a.coordinates[p],a.coordinates[p+1],l.coordinates[f],m))return!0}return!1}(n,i);case"Polygon":return gf(n,i);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return _f(i,n);case"LineString":return gf(i,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+r+" geometry not supported")}},X.booleanDisjoint=hf,X.booleanEqual=function(t,e){return G(t).type===G(e).type&&new Lf({precision:6}).compare(_e(t),_e(e))},X.booleanIntersects=bf,X.booleanOverlap=function(t,e){var n=G(t),i=G(e),r=n.type,o=i.type;if("MultiPoint"===r&&"MultiPoint"!==o||("LineString"===r||"MultiLineString"===r)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===r||"MultiPolygon"===r)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===r)throw new Error("Point geometry not supported");if(new Lf({precision:6}).compare(t,e))return!1;var a=0;switch(r){case"MultiPoint":for(var l=0;l<n.coordinates.length;l++)for(var p=0;p<i.coordinates.length;p++){var f=n.coordinates[l],m=i.coordinates[p];if(f[0]===m[0]&&f[1]===m[1])return!0}return!1;case"LineString":case"MultiLineString":Ki(t,function(_){Ki(e,function(b){Xp(_,b).features.length&&a++})});break;case"Polygon":case"MultiPolygon":Ki(t,function(_){Ki(e,function(b){aa(_,b).features.length&&a++})})}return a>0},X.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==Mf(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==Mf(e,"line2"))throw new Error("line2 must be a LineString");for(var n=sa(_e(t)).features,i=sa(_e(e)).features,r=0;r<n.length;r++){var o=n[r].geometry.coordinates;if(!i[r])break;if(!s_(o,i[r].geometry.coordinates))return!1}return!0},X.booleanPointInPolygon=On,X.booleanPointOnLine=Jr,X.booleanWithin=kp,X.buffer=function(t,e,n){var i=(n=n||{}).units||"kilometers",r=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return we(t,function(a){var l=$h(a,e,i,r);l&&o.push(l)}),Et(o);case"FeatureCollection":return se(t,function(a){var l=$h(a,e,i,r);l&&se(l,function(p){p&&o.push(p)})}),Et(o)}return $h(t,e,i,r)},X.center=ra,X.centerMean=Tc,X.centerMedian=function(t,e){if(void 0===e&&(e={}),!Ft(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!Qt(n))throw new Error("counter must be a number");var i=e.weight,r=Tc(t,{weight:e.weight}),o=Et([]);return se(t,function(l){var p;o.features.push(ns(l,{properties:{weight:null===(p=l.properties)||void 0===p?void 0:p[i]}}))}),Bf(r.geometry.coordinates,[0,0],o,{tolerance:e.tolerance,medianCandidates:[]},n)},X.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),W(e)){case"Point":return I(Ze(e),n.properties);case"Polygon":var i=[];ce(e,function(O){i.push(O)});var r,o,a,l,p,f,m,_,b=ns(e,{properties:n.properties}),M=b.geometry.coordinates,k=0,S=0,w=0,R=i.map(function(O){return[O[0]-M[0],O[1]-M[1]]});for(r=0;r<i.length-1;r++)l=(o=R[r])[0],p=(a=R[r+1])[0],w+=_=l*(m=a[1])-p*(f=o[1]),k+=(l+p)*_,S+=(f+m)*_;if(0===w)return b;var q=1/(.5*w*6);return I([M[0]+q*k,M[1]+q*S],n.properties);default:var P=tu(e);return P?t(P,{properties:n.properties}):ns(e,{properties:n.properties})}},X.centroid=ns,X.circle=Pa,X.cleanCoords=_e,X.clone=Qn,X.clusterEach=Dc,X.clusterReduce=Qf,X.clusters=C_,X.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=Qn(t)),n.minPoints=n.minPoints||3;var i=new $g.DBSCAN,r=i.run(de(t),Gt(e,n.units),n.minPoints,Ke),o=-1;return r.forEach(function(a){o++,a.forEach(function(l){var p=t.features[l];p.properties||(p.properties={}),p.properties.cluster=o,p.properties.dbscan="core"})}),i.noise.forEach(function(a){var l=t.features[a];l.properties||(l.properties={}),l.properties.dbscan=l.properties.cluster?"edge":"noise"}),t},X.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=Qn(t));var i=de(t),r=i.slice(0,e.numberOfClusters),o=function(t,e,n,i){var r=[],o=[],a=[],l=[],p=!1,f=i||1e4,m=t.length,_=t[0].length,b=_>0,M=[];if(n)r="kmrand"==n?function(t,e){for(var n={},i=[],r=e<<2,o=t.length,a=t[0].length>0;i.length<e&&r-- >0;){var l=t[Math.floor(Math.random()*o)],p=a?l.join("_"):""+l;n[p]||(n[p]=!0,i.push(l))}if(i.length<e)throw new Error("Error initializating clusters");return i}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?t_:e_,i=[],r=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*r)];for(o&&a.join("_"),i.push(a);i.length<e;){for(var l=[],p=i.length,f=0,m=[],_=0;_<r;_++){for(var b=1/0,M=0;M<p;M++){var k=n(t[_],i[M]);k<=b&&(b=k)}l[_]=b}for(var S=0;S<r;S++)f+=l[S];for(var w=0;w<r;w++)m[w]={i:w,v:t[w],pr:l[w]/f,cs:0};m.sort(function(O,B){return O.pr-B.pr}),m[0].cs=m[0].pr;for(var R=1;R<r;R++)m[R].cs=m[R-1].cs+m[R].pr;for(var q=Math.random(),P=0;P<r-1&&m[P++].cs<q;);i.push(m[P-1].v)}return i}(t,e):n;else for(var k={};r.length<e;){var S=Math.floor(Math.random()*m);k[S]||(k[S]=!0,r.push(t[S]))}do{Ef(e,0,M);for(var w=0;w<m;w++){for(var R=1/0,q=0,P=0;P<e;P++)(l=b?n_(t[w],r[P]):Math.abs(t[w]-r[P]))<=R&&(R=l,q=P);a[w]=q,M[q]++}for(var O=[],B=(o=[],0);B<e;B++)O[B]=b?Ef(_,0,O[B]):0,o[B]=r[B];if(b){for(var F=0;F<e;F++)r[F]=[];for(var z=0;z<m;z++)for(var Mt=O[a[z]],lt=t[z],Pt=0;Pt<_;Pt++)Mt[Pt]+=lt[Pt];p=!0;for(var ct=0;ct<e;ct++){for(var Dt=r[ct],yt=O[ct],gt=o[ct],pt=M[ct],It=0;It<_;It++)Dt[It]=yt[It]/pt||0;if(p)for(var Lt=0;Lt<_;Lt++)if(gt[Lt]!=Dt[Lt]){p=!1;break}}}else{for(var Ot=0;Ot<m;Ot++)O[a[Ot]]+=t[Ot];for(var $=0;$<e;$++)r[$]=O[$]/M[$]||0;p=!0;for(var oe=0;oe<e;oe++)if(o[oe]!=r[oe]){p=!1;break}}p=p||--f<=0}while(!p);return{it:1e4-f,k:e,idxs:a,centroids:r}}(i,e.numberOfClusters,r),a={};return o.centroids.forEach(function(l,p){a[p]=l}),se(t,function(l,p){var f=o.idxs[p];l.properties.cluster=f,l.properties.centroid=a[f]}),t},X.collect=function(t,e,n,i){var r=In(6),o=e.features.map(function(a){var l;return{minX:a.geometry.coordinates[0],minY:a.geometry.coordinates[1],maxX:a.geometry.coordinates[0],maxY:a.geometry.coordinates[1],property:null===(l=a.properties)||void 0===l?void 0:l[n]}});return r.load(o),t.features.forEach(function(a){a.properties||(a.properties={});var l=ze(a),p=r.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]}),f=[];p.forEach(function(m){On([m.minX,m.minY],a)&&f.push(m.property)}),a.properties[i]=f}),t},X.collectionOf=A,X.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return se(t,function(n){var i,r,o,a;switch(null===(a=n.geometry)||void 0===a?void 0:a.type){case"Point":e.MultiPoint.coordinates.push(n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"MultiPoint":(i=e.MultiPoint.coordinates).push.apply(i,n.geometry.coordinates),e.MultiPoint.properties.push(n.properties);break;case"LineString":e.MultiLineString.coordinates.push(n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,n.geometry.coordinates),e.MultiLineString.properties.push(n.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties);break;case"MultiPolygon":(o=e.MultiPolygon.coordinates).push.apply(o,n.geometry.coordinates),e.MultiPolygon.properties.push(n.properties)}}),Et(Object.keys(e).filter(function(n){return e[n].coordinates.length}).sort().map(function(n){return d({type:n,coordinates:e[n].coordinates},{collectedProperties:e[n].properties})}))},X.concave=function(t,e){void 0===e&&(e={});var a,l,n=e.maxEdge||1/0,i=$s((a=[],l={},se(t,function(p){if(p.geometry){var f=p.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(l,f)||(a.push(p),l[f]=!0)}}),Et(a)));if(i.features=i.features.filter(function(o){var a=o.geometry.coordinates[0][0],l=o.geometry.coordinates[0][1],p=o.geometry.coordinates[0][2],f=Ke(a,l,e),m=Ke(l,p,e),_=Ke(a,p,e);return f<=n&&m<=n&&_<=n}),i.features.length<1)return null;var r=function Xt(t,e){if(void 0===e&&(e={}),!Ft(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==W(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Qn(t));var i=function(o){var a={};Dn(o,function(p){a[p.geometry.type]=!0});var l=Object.keys(a);return 1===l.length?l[0]:null}(t);if(!i)throw new Error("geojson must be homogenous");var r=t;switch(i){case"LineString":return function ts(t,e){if(void 0===e&&(e={}),!Ft(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==W(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=Qn(t));var i=[],r=qr(t,function(o,a){return function(p,f){var m,_=p.geometry.coordinates,b=f.geometry.coordinates,M=ta(_[0]),k=ta(_[_.length-1]),S=ta(b[0]),w=ta(b[b.length-1]);if(M===w)m=b.concat(_.slice(1));else if(S===k)m=_.concat(b.slice(1));else if(M===S)m=_.slice(1).reverse().concat(b);else{if(k!==w)return null;m=_.concat(b.reverse().slice(1))}return tt(m)}(o,a)||(i.push(o),a)});return r&&i.push(r),i.length?1===i.length?i[0]:Ct(i.map(function(o){return o.coordinates})):null}(r,e);case"Polygon":return Vt(r,e);default:throw new Error(i+" is not supported")}}(i);return 1===r.coordinates.length&&(r.coordinates=r.coordinates[0],r.type="Polygon"),d(r)},X.containsNumber=Zs,X.convertArea=Yt,X.convertDistance=Gt,X.convertLength=Gt,X.convex=tu,X.coordAll=de,X.coordEach=ce,X.coordReduce=ie,X.createBins=Oc,X.degrees2radians=Ut,X.degreesToRadians=Ut,X.destination=wr,X.difference=function(t,e){var n=G(t),i=G(e),r=t.properties||{},o=la.difference(n.coordinates,i.coordinates);return 0===o.length?null:1===o.length?N(o[0],r):St(o,r)},X.dissolve=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;A(t,"Polygon","dissolve");var i=[];if(!e.propertyName)return hc(St(la.union.apply(null,t.features.map(function(p){return p.geometry.coordinates}))));var r={};se(t,function(p){Object.prototype.hasOwnProperty.call(r,p.properties[n])||(r[p.properties[n]]=[]),r[p.properties[n]].push(p)});for(var o=Object.keys(r),a=0;a<o.length;a++){var l=St(la.union.apply(null,r[o[a]].map(function(p){return p.geometry.coordinates})));l.properties[n]=o[a],i.push(l)}return hc(Et(i))},X.distance=Ke,X.distanceToDegrees=st,X.distanceToRadians=K,X.distanceWeight=Ff,X.earthRadius=he,X.ellipse=Nf,X.envelope=ks,X.explode=oa,X.factors=wi,X.feature=d,X.featureCollection=Et,X.featureEach=se,X.featureOf=nt,X.featureReduce=fe,X.filterProperties=$f,X.findPoint=vs,X.findSegment=Hs,X.flatten=hc,X.flattenEach=Dn,X.flattenReduce=li,X.flip=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=Qn(t)),ce(t,function(i){var r=i[0];i[0]=i[1],i[1]=r}),t},X.geojsonType=Ys,X.geomEach=we,X.geomReduce=Di,X.geometry=x,X.geometryCollection=ht,X.getCluster=Jf,X.getCoord=Ze,X.getCoords=ge,X.getGeom=G,X.getType=W,X.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.properties,r=n.npoints,o=n.offset;return t=Ze(t),e=Ze(e),r=r||100,o=o||10,new pc({x:t[0],y:t[1]},{x:e[0],y:e[1]},i=i||{}).Arc(r,{offset:o}).json()},X.helpers=jt,X.hexGrid=_g,X.inside=On,X.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var i=n.gridType,r=n.property,o=n.weight;if(!t)throw new Error("points is required");if(A(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");r=r||"elevation",i=i||"square",o=o||1;var a,l=ze(t);switch(i){case"point":case"points":a=Sp(l,e,n);break;case"square":case"squares":a=yg(l,e,n);break;case"hex":case"hexes":a=_g(l,e,n);break;case"triangle":case"triangles":a=vg(l,e,n);break;default:throw new Error("invalid gridType")}var p=[];return se(a,function(f){var m=0,_=0;se(t,function(M){var k,S=Ke("point"===i?f:ns(f),M,n);if(void 0!==r&&(k=M.properties[r]),void 0===k&&(k=M.geometry.coordinates[2]),void 0===k)throw new Error("zValue is missing");0===S&&(m=k);var w=1/Math.pow(S,o);_+=w,m+=w*k});var b=Qn(f);b.properties[r]=m/_,p.push(b)}),Et(p)},X.intersect=nh,X.invariant=it,X.isNumber=Qt,X.isObject=Ft,X.isobands=function(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(A(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!Ft(r))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var p,f,m,_,k,S,q,P,O,a=function Ng(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;A(t,"Point","input must contain Points");for(var o=function(b,M){var k={};return se(b,function(S){var w=ge(S)[1];k[w]||(k[w]=[]),k[w].push(S)}),Object.keys(k).map(function(S){return k[S].sort(function(w,R){return ge(w)[0]-ge(R)[0]})}).sort(function(S,w){return M?ge(S[0])[1]-ge(w[0])[1]:ge(w[0])[1]-ge(S[0])[1]})}(t,i),a=[],l=0;l<o.length;l++){for(var p=o[l],f=[],m=0;m<p.length;m++){var _=p[m];f.push(_.properties[n]?_.properties[n]:0),!0===r&&(_.properties.matrixPosition=[l,m])}a.push(f)}return a}(t,{zProperty:i,flip:!0}),l=function(p,f,m){for(var _=[],b=1;b<f.length;b++){var M=+f[b-1],k=+f[b],S=jg(Gg(Ag(p,M,k-M))),w={};w.groupedRings=S,w[m]=M+"-"+k,_.push(w)}return _}(a,e,i);return Et((p=l,f=a,m=t,_=ze(m),k=_[0],S=_[1],q=(_[2]-_[0])/(f[0].length-1),P=(_[3]-_[1])/(f.length-1),O=function(B){B[0]=B[0]*q+k,B[1]=B[1]*P+S},p.forEach(function(B){B.groupedRings.forEach(function(F){F.forEach(function(z){z.forEach(O)})})}),l=p).map(function(p,f){if(o[f]&&!Ft(o[f]))throw new Error("Each mappedProperty is required to be an Object");var m=Ee({},r,o[f]);return m[i]=p[i],St(p.groupedRings,m)}))},X.isolines=function(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.zProperty||"elevation",r=n.commonProperties||{},o=n.breaksProperties||[];if(A(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!Ft(r))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var l,p,m,M,k,R,q,P,a=function Pi(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",i=e.flip,r=e.flags;A(t,"Point","input must contain Points");for(var o=function(b,M){var k={};return se(b,function(S){var w=ge(S)[1];k[w]||(k[w]=[]),k[w].push(S)}),Object.keys(k).map(function(S){return k[S].sort(function(w,R){return ge(w)[0]-ge(R)[0]})}).sort(function(S,w){return M?ge(S[0])[1]-ge(w[0])[1]:ge(w[0])[1]-ge(S[0])[1]})}(t,i),a=[],l=0;l<o.length;l++){for(var p=o[l],f=[],m=0;m<p.length;m++){var _=p[m];f.push(_.properties[n]?_.properties[n]:0),!0===r&&(_.properties.matrixPosition=[l,m])}a.push(f)}return a}(t,{zProperty:i,flip:!0});return Et((l=function(l,p,f,m,_){for(var b=[],M=1;M<p.length;M++){var k=+p[M],S=Ee({},m,_[M]);S[f]=k;var w=Ct(qe(l,k),S);b.push(w)}return b}(a,e,i,r,o),p=a,m=ze(t),M=m[0],k=m[1],R=(m[2]-m[0])/(p[0].length-1),q=(m[3]-m[1])/(p.length-1),P=function(O){O[0]=O[0]*R+M,O[1]=O[1]*q+k},l.forEach(function(O){ce(O,P)}),l))},X.kinks=function(t){var e,n,i={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(r){e.forEach(function(o){for(var a=0;a<r.length-1;a++)for(var l=a;l<o.length-1;l++)if(r!==o||1!==Math.abs(a-l)&&(0!==a||l!==r.length-2||r[a][0]!==r[r.length-1][0]||r[a][1]!==r[r.length-1][1])){var p=Pg(r[a][0],r[a][1],r[a+1][0],r[a+1][1],o[l][0],o[l][1],o[l+1][0],o[l+1][1]);p&&i.features.push(I([p[0],p[1]]))}})}),i},X.length=lc,X.lengthToDegrees=st,X.lengthToRadians=K,X.lineArc=zp,X.lineChunk=function(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.units,r=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return Dn(t,function(a){r&&(a.geometry.coordinates=a.geometry.coordinates.reverse()),function(l,p,f,m){var _=lc(l,{units:f});if(_<=p)return m(l);var b=_/p;Number.isInteger(b)||(b=Math.floor(b)+1);for(var M=0;M<b;M++)m(Mp(l,p*M,p*(M+1),{units:f}))}(a,e,i,function(l){o.push(l)})}),Et(o)},X.lineDistance=lc,X.lineEach=Tr,X.lineIntersect=aa,X.lineOffset=function(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var r=W(t),o=t.properties;switch(r){case"LineString":return sf(t,e,i);case"MultiLineString":var a=[];return Dn(t,function(l){a.push(sf(l,e,i).geometry.coordinates)}),Ct(a,o);default:throw new Error("geometry "+r+" is not supported")}},X.lineOverlap=Xp,X.lineReduce=qr,X.lineSegment=sa,X.lineSlice=function(t,e,n){var i=ge(n);if("LineString"!==W(n))throw new Error("line must be a LineString");for(var r,o=ua(n,t),a=ua(n,e),l=[(r=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],p=r[0].properties.index+1;p<r[1].properties.index+1;p++)l.push(i[p]);return l.push(r[1].geometry.coordinates),tt(l,n.properties)},X.lineSliceAlong=Mp,X.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=W(t),i=W(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===i)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===i)throw new Error("splitter cannot be a GeometryCollection");var r=Ip(e,{precision:7});switch(i){case"Point":return fc(t,r);case"MultiPoint":return Ap(t,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Ap(t,aa(t,r))}},X.lineString=tt,X.lineStringToPolygon=Up,X.lineStrings=bt,X.lineToPolygon=Up,X.mask=function(t,e){var n,i=function fm(t){return N(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return function mg(t){return St(t)}("FeatureCollection"===t.type?2===(n=t).features.length?la.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):la.union.apply(la,n.features.map(function(o){return o.geometry.coordinates})):la.union(t.geometry.coordinates)).geometry.coordinates.forEach(function(o){i.geometry.coordinates.push(o[0])}),i},X.meta=so,X.midpoint=function(t,e){return wr(t,Ke(t,e)/2,Er(t,e))},X.moranIndex=function(t,e){var n=e.inputField,a=Ff(t,{alpha:e.alpha||-1,binary:e.binary||!1,p:e.p||2,standardization:e.standardization||!0,threshold:e.threshold||1e5}),l=[];se(t,function(F){l.push((F.properties||{})[n])});for(var p=Gf(l),f=function(F){for(var z=Gf(F),Mt=0,lt=0,Pt=F;lt<Pt.length;lt++)Mt+=Math.pow(Pt[lt]-z,2);return Mt/F.length}(l),m=0,_=0,b=0,M=0,k=a.length,S=0;S<k;S++){for(var w=0,R=0;R<k;R++)m+=a[S][R]*(l[S]-p)*(l[R]-p),_+=a[S][R],b+=Math.pow(a[S][R]+a[R][S],2),w+=a[S][R]+a[R][S];M+=Math.pow(w,2)}var q=m/_/f,P=-1/(k-1),O=(k*k*(b*=.5)-k*M+_*_*3)/((k-1)*(k+1)*(_*_))-P*P,B=Math.sqrt(O);return{expectedMoranIndex:P,moranIndex:q,stdNorm:B,zNorm:(q-P)/B}},X.multiLineString=Ct,X.multiPoint=dt,X.multiPolygon=St,X.nearest=Ss,X.nearestPoint=Ss,X.nearestPointOnLine=ua,X.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var i=n.units,r=n.properties||{},o=function(p){var f=[];switch(p.geometry?p.geometry.type:p.type){case"GeometryCollection":return we(p,function(m){"Point"===m.type&&f.push({type:"Feature",properties:{},geometry:m})}),{type:"FeatureCollection",features:f};case"FeatureCollection":return p.features=p.features.filter(function(m){return"Point"===m.geometry.type}),p;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==W(e))throw new Error("line must be a LineString");var a=1/0,l=null;return se(o,function(p){var f=yp(p,e,{units:i});f<a&&(a=f,l=p)}),l&&(l.properties=Ee({dist:a},l.properties,r)),l},X.planepoint=function(t,e){var n=Ze(t),i=G(e).coordinates[0];if(i.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var r=e.properties||{},o=r.a,a=r.b,l=r.c,p=n[0],f=n[1],m=i[0][0],_=i[0][1],b=void 0!==o?o:i[0][2],M=i[1][0],k=i[1][1],S=void 0!==a?a:i[1][2],w=i[2][0],R=i[2][1],q=void 0!==l?l:i[2][2];return(q*(p-m)*(f-k)+b*(p-M)*(f-R)+S*(p-w)*(f-_)-S*(p-m)*(f-R)-q*(p-M)*(f-_)-b*(p-w)*(f-k))/((p-m)*(f-k)+(p-M)*(f-R)+(p-w)*(f-_)-(p-m)*(f-R)-(p-M)*(f-_)-(p-w)*(f-k))},X.point=I,X.pointGrid=Sp,X.pointOnFeature=Lp,X.pointOnLine=ua,X.pointOnSurface=Lp,X.pointToLineDistance=yp,X.points=U,X.pointsWithinPolygon=xs,X.polygon=N,X.polygonSmooth=function(t,e){var n=[],i=e.iterations||1;if(!t)throw new Error("inputPolys is required");return we(t,function(r,o,a){var l,p,f;switch(r.type){case"Polygon":l=[[]];for(var m=0;m<i;m++)f=[[]],p=r,m>0&&(p=N(l).geometry),x_(p,f),l=f.slice(0);n.push(N(l,a));break;case"MultiPolygon":l=[[[]]];for(var _=0;_<i;_++)f=[[[]]],p=r,_>0&&(p=St(l).geometry),w_(p,f),l=f.slice(0);n.push(St(l,a));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}}),Et(n)},X.polygonTangents=function(t,e){var n,i,r,o,a=ge(t),l=ge(e),p=ze(e),f=0,m=null;switch(a[0]>p[0]&&a[0]<p[2]&&a[1]>p[1]&&a[1]<p[3]&&(f=(m=Ss(t,oa(e))).properties.featureIndex),W(e)){case"Polygon":n=l[0][f],i=l[0][0],null!==m&&m.geometry.coordinates[1]<a[1]&&(i=l[0][f]),o=bl(l[0][0],l[0][l[0].length-1],a);var _=Qp(l[0],a,o,r,n,i);n=_[0],i=_[1];break;case"MultiPolygon":for(var b=0,M=0,k=0,S=0;S<l[0].length;S++){b=S;for(var w=!1,R=0;R<l[0][S].length;R++){if(M=R,k===f){w=!0;break}k++}if(w)break}n=l[0][b][M],i=l[0][b][M],o=bl(l[0][0][0],l[0][0][l[0][0].length-1],a),l.forEach(function(q){var P=Qp(q[0],a,o,r,n,i);n=P[0],i=P[1]})}return Et([I(n),I(i)])},X.polygonToLine=Ll,X.polygonToLineString=Ll,X.polygonize=function(t){var e=Zg.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],i=[];return e.getEdgeRings().filter(function(r){return r.isValid()}).forEach(function(r){r.isHole()?n.push(r):i.push(r)}),n.forEach(function(r){lf.findEdgeRingContaining(r,i)&&i.push(r)}),Et(i.map(function(r){return r.toPolygon()}))},X.polygons=H,X.projection=M_,X.propEach=me,X.propReduce=He,X.propertiesContainsFilter=Rc,X.radians2degrees=zt,X.radiansToDegrees=zt,X.radiansToDistance=xt,X.radiansToLength=xt,X.random=P_,X.randomLineString=Xf,X.randomPoint=Zf,X.randomPolygon=Yf,X.randomPosition=Pl,X.rewind=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,i=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");!1===i&&(t=Qn(t));var r=[];switch(t.type){case"GeometryCollection":return we(t,function(o){gh(o,n)}),t;case"FeatureCollection":return se(t,function(o){se(gh(o,n),function(a){r.push(a)})}),Et(r)}return gh(t,n)},X.rhumbBearing=lu,X.rhumbDestination=Nu,X.rhumbDistance=ph,X.round=_t,X.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return Et(function(n,i){for(var r,o,a=n.slice(0),l=n.length,p=l-i;l-- >p;)r=a[o=Math.floor((l+1)*Math.random())],a[o]=a[l],a[l]=r;return a.slice(p)}(t.features,e))},X.sector=function(t,e,n,i,r){if(!Ft(r=r||{}))throw new Error("options is invalid");var o=r.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(Kp(n)===Kp(i))return Pa(t,e,r);var a=ge(t),l=zp(t,e,n,i,r),p=[[a]];return ce(l,function(f){p[0].push(f)}),p[0].push(a),N(p,o)},X.segmentEach=Ki,X.segmentReduce=Oi,X.shortestPath=function(t,e,n){if(!Ft(n=n||{}))throw new Error("options is invalid");var i=n.resolution,r=n.minDistance,o=n.obstacles||Et([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&!Qt(i)||i<=0)throw new Error("options.resolution must be a number, greater than 0");if(r)throw new Error("options.minDistance is not yet implemented");var a=Ze(t),l=Ze(e);switch(t=I(a),e=I(l),W(o)){case"FeatureCollection":if(0===o.features.length)return tt([a,l]);break;case"Polygon":o=Et([d(G(o))]);break;default:throw new Error("invalid obstacles")}var p=o;p.features.push(t),p.features.push(e);var f=ze(rf(ka(ze(p)),1.15));i||(i=Ke([f[0],f[1]],[f[2],f[1]],n)/100),p.features.pop(),p.features.pop();for(var m=f[0],_=f[1],b=f[2],M=f[3],k=i/Ke([m,_],[b,_],n)*(b-m),S=i/Ke([m,_],[m,M],n)*(M-_),w=b-m,R=M-_,q=Math.floor(w/k),P=Math.floor(R/S),O=(w-q*k)/2,B=[],F=[],z=[],Mt=[],lt=1/0,Pt=1/0,ct=M-(R-P*S)/2,Dt=0;ct>=_;){for(var yt=[],gt=[],pt=m+O,It=0;pt<=b;){var Lt=I([pt,ct]),Ot=a_(Lt,o);yt.push(Ot?0:1),gt.push(pt+"|"+ct);var $=Ke(Lt,t);!Ot&&$<lt&&(lt=$,z={x:It,y:Dt});var oe=Ke(Lt,e);!Ot&&oe<Pt&&(Pt=oe,Mt={x:It,y:Dt}),pt+=k,It++}F.push(yt),B.push(gt),ct-=S,Dt++}var Ht=new Au(F,{diagonal:!0}),be=mh.search(Ht,Ht.grid[z.y][z.x],Ht.grid[Mt.y][Mt.x]),Ve=[a];return be.forEach(function(An){var Vi=B[An.x][An.y].split("|");Ve.push([+Vi[0],+Vi[1]])}),Ve.push(l),_e(tt(Ve))},X.simplify=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,i=e.highQuality||!1,r=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==r&&(t=Qn(t)),we(t,function(o){!function(a,l,p){var f=a.type;if("Point"===f||"MultiPoint"===f)return a;_e(a,!0);var m=a.coordinates;switch(f){case"LineString":a.coordinates=na(m,l,p);break;case"MultiLineString":a.coordinates=m.map(function(_){return na(_,l,p)});break;case"Polygon":a.coordinates=br(m,l,p);break;case"MultiPolygon":a.coordinates=m.map(function(_){return br(_,l,p)})}}(o,n,i)}),t},X.square=ia,X.squareGrid=yg,X.standardDeviationalEllipse=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,i=e.weight,r=e.properties||{};if(!Qt(n))throw new Error("steps must be a number");if(!Ft(r))throw new Error("properties must be a number");var o=de(t).length,a=Tc(t,{weight:i}),l=0,p=0,f=0;se(t,function(z){var Mt=z.properties[i]||1,lt=zf(ge(z),ge(a));l+=Math.pow(lt.x,2)*Mt,p+=Math.pow(lt.y,2)*Mt,f+=lt.x*lt.y*Mt});var m=l-p,_=Math.sqrt(Math.pow(m,2)+4*Math.pow(f,2)),M=Math.atan((m+_)/(2*f)),k=180*M/Math.PI,S=0,w=0,R=0;se(t,function(z){var Mt=z.properties[i]||1,lt=zf(ge(z),ge(a));S+=Math.pow(lt.x*Math.cos(M)-lt.y*Math.sin(M),2)*Mt,w+=Math.pow(lt.x*Math.sin(M)+lt.y*Math.cos(M),2)*Mt,R+=Mt});var q=Math.sqrt(2*S/R),P=Math.sqrt(2*w/R),O=Nf(a,q,P,{units:"degrees",angle:k,steps:n,properties:r}),B=xs(t,Et([O])),F={meanCenterCoordinates:ge(a),semiMajorAxis:q,semiMinorAxis:P,numberOfFeatures:o,angle:k,percentageWithinEllipse:100*de(B).length/o};return O.properties.standardDeviationalEllipse=F,O},X.tag=function(t,e,n,i){return t=Qn(t),e=Qn(e),se(t,function(r){r.properties||(r.properties={}),se(e,function(o){void 0===r.properties[i]&&On(r,o)&&(r.properties[i]=o.properties[n])})}),t},X.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Da(t.geometry.coordinates):t.geometry.coordinates.forEach(function(n){e.features=e.features.concat(Da(n))}),e},X.tin=$s,X.toMercator=jf,X.toWgs84=Uf,X.transformRotate=nf,X.transformScale=rf,X.transformTranslate=function(t,e,n,i){if(!Ft(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.zTranslation,a=i.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==a&&void 0!==a||(t=Qn(t)),ce(t,function(l){var p=ge(Nu(l,e,n,{units:r}));l[0]=p[0],l[1]=p[1],o&&3===l.length&&(l[2]+=o)}),t},X.triangleGrid=vg,X.truncate=Ip,X.union=function(t,e,n){void 0===n&&(n={});var i=G(t),r=G(e),o=la.union(i.coordinates,r.coordinates);return 0===o.length?null:1===o.length?N(o[0],n.properties):St(o,n.properties)},X.unitsFactors=Y,X.unkinkPolygon=function(t){var e=[];return Dn(t,function(n){"Polygon"===n.geometry.type&&se(function Tg(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],i=0;i<e;i++){var r=t.geometry.coordinates[i];yl(r[0],r[r.length-1])||r.push(r[0]),n.push.apply(n,r.slice(0,r.length-1))}if(!function(ee){for(var be={},Ve=1,An=0,Vi=ee.length;An<Vi;++An){if(Object.prototype.hasOwnProperty.call(be,ee[An])){Ve=0;break}be[ee[An]]=1}return Ve}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,a=function Ig(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var i=t.geometry.coordinates,r=[],o={};if(n){for(var a=[],l=0;l<i.length;l++)for(var p=0;p<i[l].length-1;p++)a.push(S(l,p));var f=In();f.load(a)}for(var m=0;m<i.length;m++)for(var _=0;_<i[m].length-1;_++)if(n)f.search(S(m,_)).forEach(function(w){k(m,_,w.ring,w.edge)});else for(var b=0;b<i.length;b++)for(var M=0;M<i[b].length-1;M++)k(m,_,b,M);return e||(r={type:"Feature",geometry:{type:"MultiPoint",coordinates:r}}),r;function k(w,R,q,P){var O,B,F=i[w][R],z=i[w][R+1],Mt=i[q][P],lt=i[q][P+1],Pt=function(yt,gt,pt,It){if(ml(yt,pt)||ml(yt,It)||ml(gt,pt)||ml(It,pt))return null;var Lt=yt[0],Ot=yt[1],$=gt[0],oe=gt[1],Ht=pt[0],Oe=pt[1],ee=It[0],be=It[1],Ve=(Lt-$)*(Oe-be)-(Ot-oe)*(Ht-ee);return 0===Ve?null:[((Lt*oe-Ot*$)*(Ht-ee)-(Lt-$)*(Ht*be-Oe*ee))/Ve,((Lt*oe-Ot*$)*(Oe-be)-(Ot-oe)*(Ht*be-Oe*ee))/Ve]}(F,z,Mt,lt);if(null!==Pt&&(B=lt[0]!==Mt[0]?(Pt[0]-Mt[0])/(lt[0]-Mt[0]):(Pt[1]-Mt[1])/(lt[1]-Mt[1]),!((O=z[0]!==F[0]?(Pt[0]-F[0])/(z[0]-F[0]):(Pt[1]-F[1])/(z[1]-F[1]))>=1||O<=0||B>=1||B<=0))){var Dt=!o[Pt];Dt&&(o[Pt]=!0),r.push(e?e(Pt,w,R,F,z,O,q,P,Mt,lt,B,Dt):Pt)}}function S(w,R){var q,P,O,B,F=i[w][R],z=i[w][R+1];return F[0]<z[0]?(q=F[0],P=z[0]):(q=z[0],P=F[0]),F[1]<z[1]?(O=F[1],B=z[1]):(O=z[1],B=F[1]),{minX:q,minY:O,maxX:P,maxY:B,ring:w,edge:R}}}(t,function(ee,be,Ve,An,Vi,tc,Ka,ih,rh,fl,ec,dl){return[ee,be,Ve,An,Vi,tc,Ka,ih,rh,fl,ec,dl]}),l=a.length;if(0==l){var p=[];for(i=0;i<e;i++)p.push(N([t.geometry.coordinates[i]],{parent:-1,winding:Dg(t.geometry.coordinates[i])}));var f=Et(p);return oe(),Ht(),f}var m=[],_=[];for(i=0;i<e;i++){m.push([]);for(var b=0;b<t.geometry.coordinates[i].length-1;b++)m[i].push([new Tp(t.geometry.coordinates[i][Du(b+1,t.geometry.coordinates[i].length-1)],1,[i,b],[i,Du(b+1,t.geometry.coordinates[i].length-1)],void 0)]),_.push(new Dp(t.geometry.coordinates[i][b],[i,Du(b-1,t.geometry.coordinates[i].length-1)],[i,b],void 0,void 0,!1,!0))}for(i=0;i<l;i++)m[a[i][1]][a[i][2]].push(new Tp(a[i][0],a[i][5],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0)),a[i][11]&&_.push(new Dp(a[i][0],[a[i][1],a[i][2]],[a[i][6],a[i][7]],void 0,void 0,!0,!0));var M=_.length;for(i=0;i<m.length;i++)for(b=0;b<m[i].length;b++)m[i][b].sort(function(ee,be){return ee.param<be.param?-1:1});var k=[];for(i=0;i<M;i++)k.push({minX:_[i].coord[0],minY:_[i].coord[1],maxX:_[i].coord[0],maxY:_[i].coord[1],index:i});var S=In();for(S.load(k),i=0;i<m.length;i++)for(b=0;b<m[i].length;b++)for(var w=0;w<m[i][b].length;w++){q=w==m[i][b].length-1?m[i][Du(b+1,t.geometry.coordinates[i].length-1)][0].coord:m[i][b][w+1].coord;var R=S.search({minX:q[0],minY:q[1],maxX:q[0],maxY:q[1]})[0];m[i][b][w].nxtIsectAlongEdgeIn=R.index}for(i=0;i<m.length;i++)for(b=0;b<m[i].length;b++)for(w=0;w<m[i][b].length;w++){var q=m[i][b][w].coord,P=(R=S.search({minX:q[0],minY:q[1],maxX:q[0],maxY:q[1]})[0]).index;P<o?_[P].nxtIsectAlongRingAndEdge2=m[i][b][w].nxtIsectAlongEdgeIn:yl(_[P].ringAndEdge1,m[i][b][w].ringAndEdgeIn)?_[P].nxtIsectAlongRingAndEdge1=m[i][b][w].nxtIsectAlongEdgeIn:_[P].nxtIsectAlongRingAndEdge2=m[i][b][w].nxtIsectAlongEdgeIn}var O=[];for(i=0,b=0;b<e;b++){var B=i;for(w=0;w<t.geometry.coordinates[b].length-1;w++)_[i].coord[0]<_[B].coord[0]&&(B=i),i++;var F=_[B].nxtIsectAlongRingAndEdge2;for(w=0;w<_.length;w++)if(_[w].nxtIsectAlongRingAndEdge1==B||_[w].nxtIsectAlongRingAndEdge2==B){var z=w;break}var Mt=fh([_[z].coord,_[B].coord,_[F].coord],!0)?1:-1;O.push({isect:B,parent:-1,winding:Mt})}for(O.sort(function(ee,be){return _[ee.isect].coord>_[be.isect].coord?-1:1}),p=[];O.length>0;){var lt=O.pop(),Pt=lt.isect,ct=lt.parent,Dt=lt.winding,yt=p.length,gt=[_[Pt].coord],pt=Pt;if(_[Pt].ringAndEdge1Walkable)var It=_[Pt].ringAndEdge1,Lt=_[Pt].nxtIsectAlongRingAndEdge1;else It=_[Pt].ringAndEdge2,Lt=_[Pt].nxtIsectAlongRingAndEdge2;for(;!yl(_[Pt].coord,_[Lt].coord);){gt.push(_[Lt].coord);var Ot=void 0;for(i=0;i<O.length;i++)if(O[i].isect==Lt){Ot=i;break}if(null!=Ot&&O.splice(Ot,1),yl(It,_[Lt].ringAndEdge1)){if(It=_[Lt].ringAndEdge2,_[Lt].ringAndEdge2Walkable=!1,_[Lt].ringAndEdge1Walkable){var $={isect:Lt};fh([_[pt].coord,_[Lt].coord,_[_[Lt].nxtIsectAlongRingAndEdge2].coord],1==Dt)?($.parent=ct,$.winding=-Dt):($.parent=yt,$.winding=Dt),O.push($)}pt=Lt,Lt=_[Lt].nxtIsectAlongRingAndEdge2}else It=_[Lt].ringAndEdge1,_[Lt].ringAndEdge1Walkable=!1,_[Lt].ringAndEdge2Walkable&&($={isect:Lt},fh([_[pt].coord,_[Lt].coord,_[_[Lt].nxtIsectAlongRingAndEdge1].coord],1==Dt)?($.parent=ct,$.winding=-Dt):($.parent=yt,$.winding=Dt),O.push($)),pt=Lt,Lt=_[Lt].nxtIsectAlongRingAndEdge1}gt.push(_[Lt].coord),p.push(N([gt],{index:yt,parent:ct,winding:Dt,netWinding:void 0}))}function oe(){for(var ee=[],be=0;be<f.features.length;be++)-1==f.features[be].properties.parent&&ee.push(be);if(ee.length>1)for(be=0;be<ee.length;be++){for(var Ve=-1,An=0;An<f.features.length;An++)ee[be]!=An&&On(f.features[ee[be]].geometry.coordinates[0][0],f.features[An],{ignoreBoundary:!0})&&ac(f.features[An])<1/0&&(Ve=An);f.features[ee[be]].properties.parent=Ve}}function Ht(){for(var ee=0;ee<f.features.length;ee++)if(-1==f.features[ee].properties.parent){var be=f.features[ee].properties.winding;f.features[ee].properties.netWinding=be,Oe(ee,be)}}function Oe(ee,be){for(var Ve=0;Ve<f.features.length;Ve++)if(f.features[Ve].properties.parent==ee){var An=be+f.features[Ve].properties.winding;f.features[Ve].properties.netWinding=An,Oe(Ve,An)}}return f=Et(p),oe(),Ht(),f}(n),function(i){e.push(N(i.geometry.coordinates,n.properties))})}),Et(e)},X.validateBBox=te,X.validateId=je,X.voronoi=function(t,e){if(!Ft(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return A(t,"Point","points"),Et(function(){var i=u_,r=l_,o=null;function a(l){return new Ic(l.map(function(p,f){var m=[Math.round(i(p,f,l)/Yn)*Yn,Math.round(r(p,f,l)/Yn)*Yn];return m.index=f,m.data=p,m}),o)}return a.polygons=function(l){return a(l).polygons()},a.links=function(l){return a(l).links()},a.triangles=function(l){return a(l).triangles()},a.x=function(l){return arguments.length?(i="function"==typeof l?l:Cf(+l),a):i},a.y=function(l){return arguments.length?(r="function"==typeof l?l:Cf(+l),a):r},a.extent=function(l){return arguments.length?(o=null==l?null:[[+l[0][0],+l[0][1]],[+l[1][0],+l[1][1]]],a):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},a.size=function(l){return arguments.length?(o=null==l?null:[[0,0],[+l[0],+l[1]]],a):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},a}().x(function(i){return i.geometry.coordinates[0]}).y(function(i){return i.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(b_))},X.within=xs,Object.defineProperty(X,"__esModule",{value:!0})});